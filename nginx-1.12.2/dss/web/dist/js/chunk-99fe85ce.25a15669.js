(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-99fe85ce"],{"4e43":function(e,s,r){},"5b2e":function(e,s,r){"use strict";var a=r("4e43"),o=r.n(a);o.a},b2b2:function(e,s,r){"use strict";r.r(s);var a=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"login",on:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:(s.stopPropagation(),s.preventDefault(),e.handleSubmit("loginForm"))}}},[r("i",{staticClass:"login-bg"}),r("div",{staticClass:"login-main"},[r("Form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.ruleInline}},[r("FormItem",[r("span",{staticClass:"login-title"},[e._v(e._s(e.$t("message.login.loginTitle")))])]),r("FormItem",{attrs:{prop:"user"}},[r("Input",{attrs:{type:"text",placeholder:e.$t("message.login.userName"),size:"large"},model:{value:e.loginForm.user,callback:function(s){e.$set(e.loginForm,"user",s)},expression:"loginForm.user"}})],1),r("FormItem",{attrs:{prop:"password"}},[r("Input",{attrs:{type:"password",placeholder:"请输入密码",size:"large"},model:{value:e.loginForm.password,callback:function(s){e.$set(e.loginForm,"password",s)},expression:"loginForm.password"}}),r("Checkbox",{staticClass:"remember-user-name",model:{value:e.rememberUserNameAndPass,callback:function(s){e.rememberUserNameAndPass=s},expression:"rememberUserNameAndPass"}},[e._v(e._s(e.$t("message.login.remenber")))])],1),r("FormItem",[r("Button",{attrs:{loading:e.loading,type:"primary",long:"",size:"large",shape:"circle"},on:{click:function(s){return e.handleSubmit("loginForm")}}},[e._v(e._s(e.$t("message.login.login")))])],1)],1)],1)])},o=[],n=(r("57e7"),r("7f7f"),r("28a5"),r("b593")),t=r("7138"),i=r("abe3"),l={data:function(){return{loading:!1,loginForm:{user:"",password:""},ruleInline:{user:[{required:!0,message:this.$t("message.login.userName"),trigger:"blur"}],password:[{required:!0,message:this.$t("message.login.password"),trigger:"blur"}]},rememberUserNameAndPass:!1}},created:function(){var e=t["a"].get("saveUserNameAndPass","local");e&&(this.rememberUserNameAndPass=!0,this.loginForm.user=e.split("&")[0],this.loginForm.password=e.split("&")[1])},mounted:function(){var e=t["a"].get("userInfo");e&&this.getIfLogin(),i["default"].methods.close()},methods:{getIfLogin:function(){var e=this;n["a"].fetch("/dss/getBaseInfo","get").then((function(){e.$router.push("/")})).catch((function(){e.clearSession()}))},handleSubmit:function(e){var s=this;this.$refs[e].validate((function(e){if(e){s.loading=!0,s.rememberUserNameAndPass||t["a"].remove("saveUserNameAndPass","local"),s.loginForm.user=s.loginForm.user.toLocaleLowerCase();var r={userName:s.loginForm.user,password:s.loginForm.password};n["a"].fetch("/user/login",r).then((function(e){s.loading=!1,s.rememberUserNameAndPass&&t["a"].set("saveUserNameAndPass","".concat(s.loginForm.user,"&").concat(s.loginForm.password),"local"),e&&(t["a"].set("userInfo",{basic:e}),s.$router.push("/"),s.$Message.success(s.$t("message.login.loginSuccess")))})).catch((function(e){s.rememberUserNameAndPass&&t["a"].set("saveUserNameAndPass","".concat(s.loginForm.user,"&").concat(s.loginForm.password),"local"),-1!==e.message.indexOf("您已经登录，请不要重复登录")&&s.$router.push("/"),s.loading=!1}))}else s.$Message.error(s.$t("message.login.vaildFaild"))}))},clearSession:function(){t["a"].clear()}}},m=l,u=(r("5b2e"),r("2877")),c=Object(u["a"])(m,a,o,!1,null,null,null);s["default"]=c.exports}}]);
//# sourceMappingURL=chunk-99fe85ce.25a15669.js.map