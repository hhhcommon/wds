(function(e){function t(t){for(var i,a,o=t[0],c=t[1],l=t[2],d=0,u=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&u.push(n[a][0]),n[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);h&&h(t);while(u.length)u.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],i=!0,a=1;a<s.length;a++){var o=s[a];0!==n[o]&&(i=!1)}i&&(r.splice(t--,1),e=c(c.s=s[0]))}return e}var i={},a={app:0},n={app:0},r=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-028c2296":"f6edf2e5","chunk-1f302bd6":"87c49900","chunk-2d0a3577":"fdfd8838","chunk-2d0a43df":"2d67a855","chunk-2d0aab07":"66d9cac2","chunk-2d0abc00":"99d75022","chunk-2d0ae937":"9c2aa124","chunk-2d0aeb45":"4c58d050","chunk-2d0afa49":"4ddd0ae4","chunk-2d0b2762":"d910e675","chunk-2d0b6187":"ed7f88ea","chunk-2d0b66db":"0f623d5d","chunk-2d0ba136":"0c8abe2f","chunk-2d0bb267":"72619b66","chunk-2d0bcec1":"3af2c3cb","chunk-2d0bff92":"afbfbeef","chunk-2d0c0494":"3ee36665","chunk-2d0c0a09":"77482793","chunk-2d0c1ed0":"a701016e","chunk-2d0c4313":"eb08bbe6","chunk-2d0c46d1":"7d8ec51e","chunk-2d0c512b":"f3fc1634","chunk-2d0cf16e":"fb50ae53","chunk-2d0d056d":"27cd8cde","chunk-2d0d0645":"3254fe20","chunk-2d0d2f22":"87b8dc1b","chunk-2d0d7e63":"21c1dc7b","chunk-2d0e1b57":"2b20c43e","chunk-2d0e1fbe":"d9ee02d6","chunk-2d0e22d6":"13e95470","chunk-2d0e542a":"6f2662b5","chunk-2d0e57ec":"a7422fd2","chunk-2d0e6553":"30810703","chunk-2d0ea098":"43cc1ce2","chunk-2d208ac5":"5d996265","chunk-2d209408":"dc66797f","chunk-2d20f745":"de7e69ee","chunk-2d20ff23":"8f165f47","chunk-2d2138c7":"6a3ae134","chunk-2d217e5b":"1b51d7db","chunk-2d21ad55":"5fc5fb9b","chunk-2d21b84a":"2767d99e","chunk-2d21dcd2":"e04e7ee6","chunk-2d21f327":"729005c2","chunk-2d2214b3":"3db4bcd2","chunk-2d221a34":"232f83bb","chunk-2d22502a":"b47e0e42","chunk-2d228ca6":"235a93d3","chunk-2d2295e9":"86985772","chunk-2d22c171":"a1b26494","chunk-2d22c2b8":"14b9d0ce","chunk-2d22ca58":"423be989","chunk-2d2311f7":"8ef85f3e","chunk-2d237ee7":"7a24c52a","chunk-2d238465":"dd4ff319","chunk-39fb3e0f":"9c9707a9","chunk-7532b3ea":"54c17cdb","chunk-75a3d238":"a0a74192","chunk-774ac664":"033633b3","chunk-99fe85ce":"25a15669","chunk-b4ba7fea":"9221d199","chunk-d22968fa":"77cfc510","chunk-ea25eab6":"31b114e1"}[e]+".js"}function c(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.e=function(e){var t=[],s={"chunk-028c2296":1,"chunk-1f302bd6":1,"chunk-75a3d238":1,"chunk-99fe85ce":1,"chunk-b4ba7fea":1,"chunk-d22968fa":1,"chunk-ea25eab6":1};a[e]?t.push(a[e]):0!==a[e]&&s[e]&&t.push(a[e]=new Promise((function(t,s){for(var i="css/"+({}[e]||e)+"."+{"chunk-028c2296":"ddd802bc","chunk-1f302bd6":"a9e24130","chunk-2d0a3577":"31d6cfe0","chunk-2d0a43df":"31d6cfe0","chunk-2d0aab07":"31d6cfe0","chunk-2d0abc00":"31d6cfe0","chunk-2d0ae937":"31d6cfe0","chunk-2d0aeb45":"31d6cfe0","chunk-2d0afa49":"31d6cfe0","chunk-2d0b2762":"31d6cfe0","chunk-2d0b6187":"31d6cfe0","chunk-2d0b66db":"31d6cfe0","chunk-2d0ba136":"31d6cfe0","chunk-2d0bb267":"31d6cfe0","chunk-2d0bcec1":"31d6cfe0","chunk-2d0bff92":"31d6cfe0","chunk-2d0c0494":"31d6cfe0","chunk-2d0c0a09":"31d6cfe0","chunk-2d0c1ed0":"31d6cfe0","chunk-2d0c4313":"31d6cfe0","chunk-2d0c46d1":"31d6cfe0","chunk-2d0c512b":"31d6cfe0","chunk-2d0cf16e":"31d6cfe0","chunk-2d0d056d":"31d6cfe0","chunk-2d0d0645":"31d6cfe0","chunk-2d0d2f22":"31d6cfe0","chunk-2d0d7e63":"31d6cfe0","chunk-2d0e1b57":"31d6cfe0","chunk-2d0e1fbe":"31d6cfe0","chunk-2d0e22d6":"31d6cfe0","chunk-2d0e542a":"31d6cfe0","chunk-2d0e57ec":"31d6cfe0","chunk-2d0e6553":"31d6cfe0","chunk-2d0ea098":"31d6cfe0","chunk-2d208ac5":"31d6cfe0","chunk-2d209408":"31d6cfe0","chunk-2d20f745":"31d6cfe0","chunk-2d20ff23":"31d6cfe0","chunk-2d2138c7":"31d6cfe0","chunk-2d217e5b":"31d6cfe0","chunk-2d21ad55":"31d6cfe0","chunk-2d21b84a":"31d6cfe0","chunk-2d21dcd2":"31d6cfe0","chunk-2d21f327":"31d6cfe0","chunk-2d2214b3":"31d6cfe0","chunk-2d221a34":"31d6cfe0","chunk-2d22502a":"31d6cfe0","chunk-2d228ca6":"31d6cfe0","chunk-2d2295e9":"31d6cfe0","chunk-2d22c171":"31d6cfe0","chunk-2d22c2b8":"31d6cfe0","chunk-2d22ca58":"31d6cfe0","chunk-2d2311f7":"31d6cfe0","chunk-2d237ee7":"31d6cfe0","chunk-2d238465":"31d6cfe0","chunk-39fb3e0f":"31d6cfe0","chunk-7532b3ea":"31d6cfe0","chunk-75a3d238":"640431cd","chunk-774ac664":"31d6cfe0","chunk-99fe85ce":"5f9e86c9","chunk-b4ba7fea":"117d0c4c","chunk-d22968fa":"c13c0d0d","chunk-ea25eab6":"340812eb"}[e]+".css",n=c.p+i,r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var l=r[o],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===i||d===n))return t()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){l=u[o],d=l.getAttribute("data-href");if(d===i||d===n)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var i=t&&t.target&&t.target.src||n,r=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=i,delete a[e],h.parentNode.removeChild(h),s(r)},h.href=n;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){a[e]=0})));var i=n[e];if(0!==i)if(i)t.push(i[2]);else{var r=new Promise((function(t,s){i=n[e]=[t,s]}));t.push(i[2]=r);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=o(e);var u=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(h);var s=n[e];if(0!==s){if(s){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",u.name="ChunkLoadError",u.type=i,u.request=a,s[1](u)}n[e]=void 0}};var h=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=i,c.d=function(e,t,s){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(s,i,function(t){return e[t]}.bind(null,i));return s},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var h=d;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0022":function(e,t,s){},"0112":function(e,t,s){"use strict";var i=s("f10f"),a=s.n(i);a.a},"0115":function(e,t,s){e.exports=s.p+"img/spark.54982d6f.svg"},"0139":function(e,t,s){"use strict";var i=s("1403"),a=s.n(i);a.a},"024e":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"workbench-log-view"},[s("div",{staticClass:"log-tools"},[s("div",{staticClass:"log-tools-control"},[s("Tabs",{staticClass:"log-tabs",model:{value:e.curPage,callback:function(t){e.curPage=t},expression:"curPage"}},[s("TabPane",{attrs:{name:"all",label:"All"}}),s("TabPane",{attrs:{label:e.errorLabel,name:"error"}}),s("TabPane",{attrs:{label:e.warnLabel,name:"warning"}}),s("TabPane",{attrs:{name:"info",label:"Info"}})],1),s("Input",{staticClass:"log-search",attrs:{placeholder:e.$t("message.workBench.body.script.log.placeholder"),suffix:"ios-search",size:"small"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1)]),s("we-editor",{ref:"logEditor",attrs:{value:e.curLogs(),type:"log"},on:{scrollChange:e.change,onload:e.editorOnload}})],1)},a=[],n=(s("3b2b"),s("28a5"),s("d25f"),s("ac6a"),s("456d"),s("6d67"),s("c5f6"),s("2ef0")),r={props:{logs:{type:Object,default:function(){return{all:"",error:"",warning:"",info:""}}},height:{type:Number,default:0},logLine:{type:Number,default:1},scriptViewState:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{curPage:"all",searchText:"",errorNum:0,warnNum:0,errorLabel:function(t){return t("div",[t("span","Error"),t("Badge",{props:{count:e.errorNum,className:"err-badge"}})])},warnLabel:function(t){return t("div",[t("span","Warning"),t("Badge",{props:{count:e.warnNum,className:"warn-badge"}})])}}},watch:{height:function(e){e&&this.$refs.logEditor.editor&&this.$refs.logEditor.editor.layout()},logLine:function(e){this.$refs.logEditor.editor&&this.$refs.logEditor.editor.revealLine(e)}},methods:{change:function(){this.scriptViewState.cacheLogScroll=this.$refs.logEditor.editor.getScrollTop()},editorOnload:function(){this.$refs.logEditor.editor.setScrollPosition({scrollTop:this.scriptViewState.cacheLogScroll||0})},formattedLogs:function(){var e=this,t={all:"",error:"",warning:"",info:""};return Object.keys(this.logs).map((function(s){t[s]=e.getSearchList(e.logs[s])})),this.getPointNum(t),t},getPointNum:function(e){var t=Object(n["trim"])(e.error).split("\n").filter((function(e){return!!e})),s=Object(n["trim"])(e.warning).split("\n").filter((function(e){return!!e}));this.errorNum=t.length,this.warnNum=s.length},getSearchList:function(e){var t="",s=this.searchText;if(!e)return t;if(s){var i="";Object(n["forEach"])(s,(function(e){/^[\w\u4e00-\u9fa5]$/.test(e)?i+=e:i+="\\".concat(e)}));var a=new RegExp(".*".concat(i,".*"),"gi");t=Object(n["filter"])(e.split("\n"),(function(e){return a.test(e)})).join("\n"),a=null}else t=e;return t},curLogs:function(){var e=this.formattedLogs();return e[this.curPage]}}},o=r,c=s("2877"),l=Object(c["a"])(o,i,a,!1,null,null,null);t["default"]=l.exports},"025f":function(e,t,s){e.exports=s.p+"img/connector.e5a67d60.svg"},"0262":function(e,t,s){e.exports=s.p+"img/Dashboard.cdbac0ff.svg"},"02b1":function(e,t,s){"use strict";s("d92a"),s("57e7"),s("ac6a"),s("f3e2");var i=function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};return function(t){return e(t)}}(),a=function(){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(t){return e(t)}}();function n(e){var t=e.target||e.srcElement;t.__resizeRAF__&&a(t.__resizeRAF__),t.__resizeRAF__=i((function(){var s=t.__resizeTrigger__,i=s&&s.__resizeListeners__;i&&i.forEach((function(t){t.call(s,e)}))}))}var r=function(e,t){var s=window.document,i=s.attachEvent;function a(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",n),this.contentDocument.defaultView.dispatchEvent(new Event("resize"))}if(!e.__resizeListeners__)if(e.__resizeListeners__=[],i)e.__resizeTrigger__=e,e.attachEvent("onresize",n);else{"static"===getComputedStyle(e).position&&(e.style.position="relative");var r=e.__resizeTrigger__=s.createElement("object");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1; opacity: 0;"),r.setAttribute("class","resize-sensor"),r.__resizeElement__=e,r.onload=a,r.type="text/html",r.data="about:blank",e.appendChild(r)}e.__resizeListeners__.push(t)},o=function(e,t){var s=document.attachEvent,i=e.__resizeListeners__||[];if(t){var a=i.indexOf(t);-1!==a&&i.splice(a,1)}else i=e.__resizeListeners__=[];i.length||(s?e.detachEvent("onresize",n):e.__resizeTrigger__&&(e.__resizeTrigger__.contentDocument&&(e.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",n),delete e.__resizeTrigger__.contentDocument.defaultView.__resizeTrigger__),e.__resizeTrigger__=!e.removeChild(e.__resizeTrigger__)),delete e.__resizeListeners__)};t["a"]={bind:"undefined"===typeof window?r:r.bind(window),unbind:o}},"032f":function(e,t,s){"use strict";s.r(t),t["default"]={name:"LogView",component:function(){return Promise.resolve().then(s.bind(null,"1a98"))}}},"04c2":function(e,t,s){},"052e":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"global-history"},[s("Form",{ref:"searchBar",staticClass:"global-history-searchbar",attrs:{model:e.searchBar,rules:e.ruleInline,inline:""}},[e.isLogModuleShow?e._e():s("FormItem",{attrs:{prop:"id",label:"JobID"}},[s("InputNumber",{staticStyle:{width:"100px"},attrs:{placeholder:e.$t("message.globalHistory.formItems.id.placeholder"),min:1,readonly:e.isLogModuleShow},model:{value:e.searchBar.id,callback:function(t){e.$set(e.searchBar,"id",t)},expression:"searchBar.id"}})],1),e.isAdminModel&&!e.isLogModuleShow?s("Divider",{staticClass:"divider",attrs:{type:"vertical"}}):e._e(),e.isAdminModel&&!e.isLogModuleShow?s("FormItem",{attrs:{prop:"proxyUser",label:e.$t("message.newGlobalHistory.userName")}},[s("Input",{staticStyle:{width:"120px"},attrs:{maxlength:50,placeholder:e.$t("message.newGlobalHistory.searchName"),readonly:e.isLogModuleShow},model:{value:e.searchBar.proxyUser,callback:function(t){e.$set(e.searchBar,"proxyUser",t)},expression:"searchBar.proxyUser"}})],1):e._e(),e.isLogModuleShow?e._e():s("Divider",{staticClass:"divider",attrs:{type:"vertical"}}),e.isLogModuleShow?e._e():s("FormItem",{attrs:{prop:"shortcut",label:e.$t("message.globalHistory.formItems.date.label")}},[s("DatePicker",{staticStyle:{width:"200px"},attrs:{options:e.shortcutOpt,type:"daterange",placement:"bottom-start",placeholder:e.$t("message.globalHistory.formItems.date.placeholder"),editable:!1},model:{value:e.searchBar.shortcut,callback:function(t){e.$set(e.searchBar,"shortcut",t)},expression:"searchBar.shortcut"}})],1),e.isLogModuleShow?e._e():s("Divider",{staticClass:"divider",attrs:{type:"vertical"}}),e.isLogModuleShow?e._e():s("FormItem",{attrs:{prop:"engine",label:e.$t("message.globalHistory.formItems.engine.label")}},[s("Select",{staticStyle:{"min-width":"70px"},model:{value:e.searchBar.engine,callback:function(t){e.$set(e.searchBar,"engine",t)},expression:"searchBar.engine"}},e._l(e.engineTypes,(function(e){return s("Option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e.isLogModuleShow?e._e():s("Divider",{staticClass:"divider",attrs:{type:"vertical"}}),e.isLogModuleShow?e._e():s("FormItem",{attrs:{prop:"status",label:e.$t("message.globalHistory.formItems.status.label")}},[s("Select",{staticStyle:{"min-width":"90px"},model:{value:e.searchBar.status,callback:function(t){e.$set(e.searchBar,"status",t)},expression:"searchBar.status"}},e._l(e.statusType,(function(e){return s("Option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e.isLogModuleShow?e._e():s("Divider",{staticClass:"divider",attrs:{type:"vertical"}}),s("FormItem",{class:{"float-right":e.isLogModuleShow}},[e.isLogModuleShow?e._e():s("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:e.search}},[e._v(e._s(e.$t("message.constants.search")))]),e.isLogModuleShow?e._e():s("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"warning"},on:{click:e.reset}},[e._v(e._s(e.$t("message.constants.reset")))]),e.isLogModuleShow?s("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"warning"},on:{click:e.logRefresh}},[e._v(e._s(e.$t("message.constants.refresh")))]):e._e(),e.isLogModuleShow?s("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:e.back}},[e._v(e._s(e.$t("message.newConst.back")))]):e._e(),!e.isLogModuleShow&&e.isLogAdmin?s("Button",{attrs:{type:"primary"},on:{click:e.switchAdmin}},[e._v(e._s(e.isAdminModel?e.$t("message.newGlobalHistory.generalView"):e.$t("message.newGlobalHistory.manageView")))]):e._e()],1)],1),s("Icon",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"global-history-loading",attrs:{type:"ios-loading",size:"30"}}),e.isLogModuleShow?s("log",{attrs:{logs:e.logs,"from-line":e.fromLine}}):s("div",[s("div",{staticClass:"global-history-table",style:{height:e.moduleHeight+"px"}},[s("history-table",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],ref:"globalHistory",attrs:{columns:e.column,data:e.list,height:e.moduleHeight,"no-data-text":e.$t("message.constants.noDataText"),size:"small",border:"",stripe:""}})],1),s("div",{staticClass:"global-history-page"},[s("Page",{attrs:{total:e.pageSetting.total,"page-size":e.pageSetting.pageSize,current:e.pageSetting.current,size:"small","show-total":"","show-elevator":""},on:{"on-change":e.changePage}})],1)])],1)},a=[],n=(s("57e7"),s("20d6"),s("6d67"),s("28a5"),s("456d"),s("ac6a"),s("f3e2"),s("c5f6"),s("96cf"),s("3b8d")),r=(s("386d"),s("410f")),o=s("a789"),c=s("d9a9"),l=s("b593"),d=s("0971"),u={name:"GlobalHistory",components:{historyTable:r["a"].historyTable,log:o["default"]},mixins:[c["default"].mixin],data:function(){return{list:[],column:[],isLoading:!1,pageSetting:{total:0,pageSize:50,current:1},searchBar:{id:null,proxyUser:"",engine:"all",status:"all",shortcut:""},lastActived:{id:null,proxyUser:"",logPath:""},inputType:"number",shortcutOpt:{shortcuts:[{text:this.$t("message.globalHistory.shortcuts.week"),value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}},{text:this.$t("message.globalHistory.shortcuts.month"),value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}},{text:this.$t("message.globalHistory.shortcuts.threeMonths"),value:function(){var e=new Date,t=new Date;return t.setTime(t.getTime()-7776e6),[t,e]}}]},statusType:[{label:this.$t("message.globalHistory.statusType.all"),value:"all"},{label:this.$t("message.globalHistory.statusType.inited"),value:"Inited"},{label:this.$t("message.globalHistory.statusType.running"),value:"Running"},{label:this.$t("message.globalHistory.statusType.succeed"),value:"Succeed"},{label:this.$t("message.globalHistory.statusType.cancelled"),value:"Cancelled"},{label:this.$t("message.globalHistory.statusType.failed"),value:"Failed"},{label:this.$t("message.globalHistory.statusType.scheduled"),value:"Scheduled"},{label:this.$t("message.globalHistory.statusType.timeout"),value:"Timeout"}],engineTypes:[{label:this.$t("message.globalHistory.engineTypes.all"),value:"all"},{label:"spark",value:"spark"},{label:"hive",value:"hive"},{label:"pipeline",value:"pipeline"},{label:"python",value:"python"},{label:"flowexecution",value:"flowexecution"},{label:"appjoint",value:"appjoint"}],ruleInline:{},isLogAdmin:!1,isAdminModel:!1,isLogModuleShow:!1,logs:{all:"",error:"",warning:"",info:""},fromLine:1,moduleHeight:0}},mounted:function(){this.isLogAdmin=this.getLogManager(),this.init(),this.moduleHeight=this.$route.query.height-90},activated:function(){this.init()},methods:{init:function(){this.search()},convertTimes:function(e){var t=Math.floor(e/1e3);return t<0?"0".concat(this.$t("message.constants.time.second")):t<60?"".concat(t).concat(this.$t("message.constants.time.second")):t<3600?"".concat((t/60).toPrecision(2)).concat(this.$t("message.constants.time.minute")):t<86400?"".concat((t/3600).toPrecision(2)).concat(this.$t("message.constants.time.hour")):"".concat((t/86400).toPrecision(2)).concat(this.$t("message.constants.time.day"))},viewHistory:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.isLogModuleShow=!0,this.getLogs(t.row.taskID);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getLogs:function(e){var t=this;this.isLoading=!0,this.lastActived.id=Number(this.searchBar.id),l["a"].fetch("/jobhistory/".concat(e,"/get"),"get").then((function(s){if(t.searchBar.id=e,t.searchBar.proxyUser=t.lastActived.proxyUser=s.task.umUser,t.lastActived.logPath=s.task.logPath,!s.task.logPath){var i=s.task.errCode?"\n错误码："+s.task.errCode:"",a=s.task.errDesc?"\n错误描述："+s.task.errDesc:"",n="未获取到日志！"+i+a;return t.logs={all:n,error:"",warning:"",info:""},void(t.fromLine=1)}var r={path:t.lastActived.logPath};t.isAdminModel&&(r.proxyUser=s.task.umUser),l["a"].fetch("/filesystem/openLog",r,"get").then((function(e){if(t.isLoading=!1,e){var s={all:"",error:"",warning:"",info:""},i=d["a"].convertLog(e.log);Object.keys(i).forEach((function(e){i[e]&&(s[e]+=i[e]+"\n")})),t.logs=s,t.fromLine=s["all"].split("\n").length}})).catch((function(){t.isLoading=!1}))})).catch((function(){t.isLoading=!1}))},getParams:function(e){var t=this.searchBar.shortcut[0],s=this.searchBar.shortcut[1],i={taskID:this.searchBar.id,executeApplicationName:this.searchBar.engine,status:this.searchBar.status,startDate:t&&t.getTime(),endDate:s&&s.getTime(),pageNow:e||this.pageSetting.current,pageSize:this.pageSetting.pageSize,proxyUser:this.searchBar.proxyUser};if(this.isAdminModel||delete i.proxyUser,this.searchBar.id)delete i.executeApplicationName,delete i.status,delete i.startDate,delete i.endDate;else{var a=this.searchBar,n=a.engine,r=a.status,o=a.shortcut;"all"===n&&delete i.executeApplicationName,"all"===r&&delete i.status,o[0]||delete i.startDate,o[1]||delete i.endDate,delete i.taskID}return i},changePage:function(e){var t=this;this.isLoading=!0;var s=this.getParams(e);this.column=this.getColumns(),l["a"].fetch("/jobhistory/list",s,"get").then((function(s){t.isLoading=!1,t.list=t.getList(s.tasks),t.pageSetting.current=e,t.pageSetting.total=s.totalPage})).catch((function(){t.isLoading=!1,t.list=[]}))},search:function(){var e=this;this.isLoading=!0;var t=this.getParams();this.column=this.getColumns(),l["a"].fetch("/jobhistory/list",t,"get").then((function(t){e.pageSetting.total=t.totalPage,e.isLoading=!1,e.list=e.getList(t.tasks)})).catch((function(){e.list=[],e.isLoading=!1}))},getList:function(e){var t=function(e){return e.errCode&&e.errDesc?e.errCode+e.errDesc:e.errCode||e.errDesc||""};return this.isAdminModel?e.map((function(e){return Object.assign(e,{failedReason:t(e)})})):e.map((function(e){return{taskID:e.taskID,fileName:e.fileName,executionCode:e.executionCode,status:e.status,costTime:e.costTime,requestApplicationName:e.requestApplicationName,executeApplicationName:e.executeApplicationName,createdTime:e.createdTime,progress:e.progress,failedReason:t(e)}}))},getColumns:function(){var e=[{title:this.$t("message.newGlobalHistory.tableColumns.control.title"),key:"control",fixed:"right",align:"center",width:80,className:"history-control",renderType:"button",renderParams:[{label:this.$t("message.newGlobalHistory.tableColumns.control.label"),action:this.viewHistory}]},{title:this.$t("message.newGlobalHistory.tableColumns.taskID"),key:"taskID",align:"center",width:100},{title:this.$t("message.newGlobalHistory.tableColumns.fileName"),key:"fileName",align:"center",width:150},{title:this.$t("message.newGlobalHistory.tableColumns.executionCode"),key:"executionCode",align:"center",width:500,ellipsis:!0},{title:this.$t("message.newGlobalHistory.tableColumns.status"),key:"status",align:"center",width:200,renderType:"if",renderParams:{action:this.setRenderType}},{title:this.$t("message.newGlobalHistory.tableColumns.costTime"),key:"costTime",align:"center",width:100,renderType:"convertTime"},{title:"".concat(this.$t("message.newGlobalHistory.tableColumns.requestApplicationName"),"/").concat(this.$t("message.newGlobalHistory.tableColumns.executeApplicationName")),key:"requestApplicationName",align:"center",width:140,renderType:"concat",renderParams:{concatKey:"executeApplicationName"}},{title:this.$t("message.newGlobalHistory.tableColumns.user"),key:"umUser",align:"center",width:100},{title:this.$t("message.newGlobalHistory.tableColumns.createdTime"),key:"createdTime",align:"center",width:100,renderType:"formatTime"},{title:this.$t("message.newGlobalHistory.tableColumns.failedReason"),key:"failedReason",align:"center",className:"history-failed",width:220,renderType:"a",renderParams:{hasDoc:this.checkIfHasDoc,action:this.linkTo}}];if(!this.isAdminModel){var t=e.findIndex((function(e){return"umUser"===e.key}));e.splice(t,1)}return e},reset:function(){this.searchBar={id:null,proxyUser:"",engine:"all",status:"all",shortcut:""}},switchAdmin:function(){this.isLoading||(this.isAdminModel&&(this.isLogModuleShow=!1,this.searchBar.id=null,this.searchBar.proxyUser=""),this.isAdminModel=!this.isAdminModel,this.search())},back:function(){if(this.isLoading)return this.$Message.warning(this.$t("message.newGlobalHistory.logLoading"));this.isLogModuleShow=!1,this.searchBar.id=Number(this.lastActived.id),this.searchBar.proxyUser=this.lastActived.proxyUser},linkTo:function(e){this.$router.push({path:"/console/FAQ",query:{errCode:parseInt(e.row.failedReason),isSkip:!0}})},checkIfHasDoc:function(e){var t=[11011,11012,11013,11014,11015,11016,11017],s=parseInt(e.row.failedReason);return-1!==t.indexOf(s)},setRenderType:function(e){return"Running"===e.row.status&&0!==e.row.progress?{type:"Progress",value:e.row.progress}:{type:"Tag",value:e.row.status}},logRefresh:function(){var e=this;if(this.isLoading)return this.$Message.warning(this.$t("message.newGlobalHistory.logLoading"));if(!this.lastActived.logPath)return this.getLogs(this.lastActived.id);this.isLoading=!0;var t={path:this.lastActived.logPath};this.isAdminModel&&(t.proxyUser=this.lastActived.proxyUser),l["a"].fetch("/filesystem/openLog",t,"get").then((function(t){if(e.isLoading=!1,t){var s={all:"",error:"",warning:"",info:""},i=d["a"].convertLog(t.log);Object.keys(i).forEach((function(e){i[e]&&(s[e]+=i[e]+"\n")})),e.logs=s,e.fromLine=s["all"].split("\n").length}})).catch((function(){e.isLoading=!1}))}}},h=u,p=(s("ba93"),s("2877")),f=Object(p["a"])(h,i,a,!1,null,null,null);t["default"]=f.exports},"0551":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{attrs:{slot:"header",width:"300"},slot:"header"},[s("span",[e._v(e._s(e.modalTitle))])]),s("div",[s("Form",{ref:"newForm",attrs:{model:e.newForm,rules:e.rules,"label-width":80,size:"small"}},[e.businessType.length?s("Form-item",{attrs:{label:e.$t("message.newDialog.nodeType"),prop:"type"}},[s("Select",{model:{value:e.newForm.businessType,callback:function(t){e.$set(e.newForm,"businessType",t)},expression:"newForm.businessType"}},e._l(e.businessType,(function(e){return s("Option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e(),e.isLeaf?s("FormItem",{attrs:{label:e.$t("message.newDialog.scriptName")+"：",prop:"scriptName"}},[s("Input",{staticStyle:{width:"360px"},attrs:{placeholder:e.$t("message.newDialog.placeholder")},model:{value:e.newForm.scriptName,callback:function(t){e.$set(e.newForm,"scriptName",t)},expression:"newForm.scriptName"}}),s("span",[e._v(e._s(e.ext))])],1):s("FormItem",{attrs:{label:e.$t("message.newDialog.catalogName"),prop:"name"}},[s("Input",{attrs:{placeholder:e.$t("message.newDialog.placeholder")},model:{value:e.newForm.name,callback:function(t){e.$set(e.newForm,"name",t)},expression:"newForm.name"}})],1),e.isLeaf&&e.scriptType.length?s("Form-item",{attrs:{label:e.$t("message.newDialog.scriptType")+"：",prop:"type"}},[s("Select",{model:{value:e.newForm.scriptType,callback:function(t){e.$set(e.newForm,"scriptType",t)},expression:"newForm.scriptType"}},e._l(e.scriptType,(function(e,t){return s("Option",{key:t,attrs:{label:e.label,value:e.scriptType}})})),1)],1):e._e(),e.isDescShow?s("FormItem",{attrs:{label:e.$t("message.constants.description")}},[s("Input",{attrs:{type:"textarea"},model:{value:e.newForm.description,callback:function(t){e.$set(e.newForm,"description",t)},expression:"newForm.description"}})],1):e._e(),e.targetFolder?s("FormItem",{attrs:{label:e.$t("message.newDialog.targetFolder")}},[s("Input",{attrs:{disabled:""},model:{value:e.targetFolder,callback:function(t){e.targetFolder=t},expression:"targetFolder"}})],1):e._e(),e.isPathShow?s("FormItem",{attrs:{label:e.$t("message.newDialog.targetScriptPath"),prop:"targetScriptPath"}},[s("directory-dialog",{attrs:{"fs-type":"script",tree:e.tree,"load-data-fn":e.loadDataFn,"filter-node":e.filterNode,path:e.newForm.targetScriptPath},on:{"set-node":e.setNode}})],1):e._e()],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{on:{click:function(t){e.show=!1}}},[e._v(e._s(e.$t("message.constants.cancel")))]),s("Button",{attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submitForm("newForm")}}},[e._v(e._s(e.$t("message.constants.submit")))])],1)])},a=[],n=(s("7f7f"),s("7514"),s("ed93")),r={name:"NewDialog",components:{directoryDialog:n["a"]},props:{isLeaf:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},businessType:{type:Array,default:function(){return[]}},scriptType:{type:Array,defalut:function(){return[]}},targetFolder:{type:String,defalut:""},isPathShow:{type:Boolean,defalut:!1},isDescShow:{type:Boolean,default:!0},isNew:{type:Boolean,default:!0},type:{type:String,default:"文件夹"},node:{type:Object,default:function(){}},tree:{type:Array,default:function(){return[]}},defaultPath:{type:String,default:""},loadDataFn:Function,filterNode:Function},data:function(){return{show:!1,newForm:{name:"",scriptName:"",description:"",businessType:"",targetScriptPath:"",scriptType:""},rules:{scriptName:[{required:!0,message:this.$t("message.newDialog.rules.scriptName.required"),trigger:"blur"},{min:1,max:200,message:this.$t("message.newDialog.rules.scriptName.lengthLimit"),trigger:"change"},{type:"string",pattern:/^[\w\u4e00-\u9fa5]+$/,message:this.$t("message.newDialog.rules.scriptName.letterTypeLimit"),trigger:"change"}],name:[{required:!0,message:this.$t("message.newDialog.rules.catalogName.required"),trigger:"blur"},{min:1,max:200,message:this.$t("message.newDialog.rules.catalogName.lengthLimit"),trigger:"change"},{type:"string",pattern:/^[\w\u4e00-\u9fa5]+$/,message:this.$t("message.newDialog.rules.catalogName.letterTypeLimit"),trigger:"change"}],targetScriptPath:[{required:!0,message:this.$t("message.newDialog.rules.targetScriptPath.required"),trigger:"change"}]}}},computed:{ext:function(){var e=this,t=this.scriptType.find((function(t){return t.scriptType===e.newForm.scriptType}));return t?t.ext:""},modalTitle:function(){return this.isNew?"".concat(this.$t("message.constants.add")).concat(this.type):"".concat(this.$t("message.constants.rename")).concat(this.type)}},methods:{open:function(e){var t=this;this.reset(),this.show=!0,this.$nextTick((function(){if(t.defaultPath&&(t.newForm.targetScriptPath=t.defaultPath),t.node&&t.node.businessType&&(t.newForm.businessType=t.node.businessType),!t.isNew){var e=t.node.data,s=e.name,i=e.description;t.newForm.name=s,t.newForm.description=i}}))},close:function(){this.show=!1,this.reset()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.update(t.isNew)}))},update:function(e){var t=this.isLeaf?this.newForm.scriptName+this.ext:this.newForm.name,s=e?"".concat(this.newForm.targetScriptPath,"/").concat(t):this.newForm.targetScriptPath,i={name:t,path:s,businessType:this.newForm.businessType,description:this.newForm.description,isLeaf:this.isLeaf,type:this.type},a=e?"add":"update";this.$emit(a,i),this.show=!1},setNode:function(e){this.newForm.targetScriptPath=e.path},reset:function(){this.newForm={name:"",scriptName:"",description:"",businessType:"",targetScriptPath:"",scriptType:"hive"},this.$refs.newForm.resetFields()}}},o=r,c=s("2877"),l=Object(c["a"])(o,i,a,!1,null,null,null),d=l.exports;t["a"]=d},"055c":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"import-table-hive"},[s("p",{staticClass:"import-table-hive-item"},[s("span",{staticClass:"import-table-hive-item-title"},[e._v(e._s(e.$t("message.createTable.XZK")))]),s("Select",{staticClass:"import-table-hive-item-select",attrs:{transfer:""},on:{"on-change":e.handleHiveChange},model:{value:e.hive.dbName,callback:function(t){e.$set(e.hive,"dbName",t)},expression:"hive.dbName"}},e._l(e.dbList,(function(t){return s("Option",{key:t.name,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),s("p",{staticClass:"import-table-hive-item"},[s("span",{staticClass:"import-table-hive-item-title"},[e._v(e._s(e.$t("message.createTable.XZB")))]),e.currentAcitvedDb?s("Select",{staticClass:"import-table-hive-item-select",attrs:{transfer:""},on:{"on-change":e.handleTbChange},model:{value:e.hive.tbName,callback:function(t){e.$set(e.hive,"tbName",t)},expression:"hive.tbName"}},e._l(e.currentAcitvedDb.children,(function(t){return s("Option",{key:t.name,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1):e._e()],1)])},a=[],n=(s("7514"),s("7f7f"),s("20d6"),{props:{dbList:{type:Array,required:!0},hive:{type:Object,required:!0}},data:function(){return{currentDbIndex:0,currentAcitvedTb:null,currentAcitvedDb:null}},mounted:function(){this.init()},methods:{init:function(){var e="".concat(this.getUserName(),"_ind");this.currentDbIndex=this.dbList.findIndex((function(t){return t.name===e})),this.currentAcitvedDb=this.dbList[this.currentDbIndex],this.hive.dbName=this.currentAcitvedDb.name},handleTbChange:function(e){if(e){this.hive.tbName=e;var t=this.dbList[this.currentDbIndex].children;this.currentAcitvedTb=t.find((function(t){return t.name===e})),this.$emit("get-fields",this.currentAcitvedTb)}},handleHiveChange:function(e){this.$emit("get-tables",e),this.currentDbIndex=this.dbList.findIndex((function(t){return t.name===e})),this.currentAcitvedDb=this.dbList[this.currentDbIndex]}}}),r=n,o=s("2877"),c=Object(o["a"])(r,i,a,!1,null,null,null);t["default"]=c.exports},"05f8":function(e,t,s){"use strict";s("1c01"),s("58b2"),s("8e6e"),s("f3e2"),s("d25f"),s("ac6a"),s("456d"),s("6b54"),s("87b3"),s("2397"),s("57e7");var i=s("bd86"),a=(s("96cf"),s("3b8d")),n=s("d225"),r=s("b0b4"),o=s("308d"),c=s("6bb5"),l=s("4e2b"),d=s("2ef0"),u=s.n(d),h=s("1bd3");function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e){return function(){var t,s=Object(c["a"])(e);if(g()){var i=Object(c["a"])(this).constructor;t=Reflect.construct(s,arguments,i)}else t=s.apply(this,arguments);return Object(o["a"])(this,t)}}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var b=function(e){Object(l["a"])(s,e);var t=m(s);function s(e,i){return Object(n["a"])(this,s),t.call(this,e)}return Object(r["a"])(s,[{key:"setCache",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getCache(t.key);case 2:return s=e.sent,i=t,u.a.isNil(s)||(i=f({_id:s._id},i)),e.abrupt("return",this.add(i));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCache",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.get(t);case 2:return s=e.sent,e.abrupt("return",s[0]);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeCache",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getCache(t.id);case 2:return s=e.sent,i=[],u.a.isNil(s)||(i=s.tabList,u.a.remove(i,(function(e){return e===t.tabId}))),e.abrupt("return",this.update(t.id,{key:t.id,tabList:i}));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateCache",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.work){e.next=10;break}return e.next=3,this.getCache(t.id);case 3:return s=e.sent,i=t.work.id,a=[],u.a.isNil(s)?a.push(i):(a=s.tabList,-1===s.tabList.indexOf(i)&&a.push(i)),e.abrupt("return",this.update(t.id,{key:t.id,tabList:a}));case 10:if(!t.fnList){e.next=14;break}return e.abrupt("return",this.update(t.id,{key:t.id,fnList:t.fnList}));case 14:if(!t.variableList){e.next=16;break}return e.abrupt("return",this.update(t.id,{key:t.id,variableList:t.variableList}));case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),s}(h["a"]),v=new b("globalCache");t["a"]=v},"0626":function(e,t,s){e.exports=s.p+"img/eventcheckerf.0c3a0c0e.svg"},"07a8":function(e,t,s){"use strict";var i=s("b5ac"),a=s.n(i);a.a},"0875":function(e,t,s){"use strict";var i=s("8b74"),a=s.n(i);a.a},"0886":function(e,t,s){e.exports=s.p+"img/scala.130b15d7.svg"},"08c0":function(e,t,s){},"0971":function(e,t,s){"use strict";var i={};s.r(i),s.d(i,"UA",(function(){return f})),s.d(i,"isIE",(function(){return m})),s.d(i,"isIE9",(function(){return g})),s.d(i,"getClass",(function(){return b})),s.d(i,"hasClass",(function(){return v})),s.d(i,"setClass",(function(){return y})),s.d(i,"addClass",(function(){return w})),s.d(i,"removeClass",(function(){return T})),s.d(i,"contains",(function(){return S}));var a={};s.r(a),s.d(a,"merge",(function(){return E})),s.d(a,"extend",(function(){return N}));var n={};s.r(n),s.d(n,"isPlainObject",(function(){return O})),s.d(n,"isNumber",(function(){return x})),s.d(n,"isDate",(function(){return I})),s.d(n,"isFunction",(function(){return R})),s.d(n,"isObject",(function(){return D})),s.d(n,"isArray",(function(){return L})),s.d(n,"isObjectLike",(function(){return A})),s.d(n,"isString",(function(){return P})),s.d(n,"isNull",(function(){return $}));var r={};s.r(r),s.d(r,"convertLog",(function(){return j})),s.d(r,"convertTimestamp",(function(){return F})),s.d(r,"sort",(function(){return B})),s.d(r,"convertArrayToObject",(function(){return H})),s.d(r,"convertObjectToArray",(function(){return K})),s.d(r,"convertArrayToMap",(function(){return U}));s("1c01"),s("58b2"),s("8e6e"),s("f3e2"),s("d25f"),s("ac6a"),s("456d"),s("a481"),s("28a5");var o=s("bd86"),c=s("4328"),l=s.n(c),d=s("6821f"),u=s.n(d),h=(s("4f37"),s("7618")),p=(s("57e7"),s("6b54"),s("87b3"),"undefined"!==typeof window&&"[object Object]"!==Object.prototype.toString.call(window)),f=p&&window.navigator.userAgent.toLowerCase(),m=f&&f.indexOf("trident")>0,g=f&&f.indexOf("msie 9.0")>0;function b(e){var t=e.className;return"object"===Object(h["a"])(t)&&(t=t.baseVal||""),t}function v(e,t){if(e){var s=b(e),i=s.split(" ");return-1!=i.indexOf(t)}}function y(e,t){g&&!/svg$/.test(e.namespaceURI)?e.className=t:e.setAttribute("class",t)}function w(e,t){if(e.classList)e.classList.add(t);else{var s=" "+b(e)+" ";s.indexOf(" "+t+" ")<0&&y(e,(s+t).trim())}}function T(e,t){if(e.classList)e.classList.remove(t);else{var s=" "+b(e)+" ",i=" "+t+" ";while(s.indexOf(i)>=0)s=s.replace(i," ");y(e,s.trim())}e.className||e.removeAttribute("class")}function S(e,t){var s=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!s.contains(i))}function E(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];var i=t[0];if(i)return[].forEach.call(t,(function(e,t){if(t>0)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s])})),i}function N(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];var i=t[0];if(i)return[].forEach.call(t,(function(e,t){if(t>0)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&void 0!==i[s]&&(i[s]=e[s])})),i}s("2caf");var C=Object.prototype.toString,k="[object Object]";function O(e){return C.call(e)===k}function x(e){return"number"===typeof e}function I(e){return"[object Date]"===C.call(e)}function R(e){return"function"===typeof e}function D(e){var t=Object(h["a"])(e);return!!e&&("object"==t||"function"==t)}function L(e){return Array.isArray(e)}function A(e){return!!e&&"object"==Object(h["a"])(e)}function P(e){return"string"==typeof e||!L(e)&&A(e)&&"[object String]"==C.call(e)}function $(e){return void 0===e||null===e||""===e}s("c5f6");var M=s("40b6");function j(e){var t={all:"",error:"",warning:"",info:""},s={};if("string"===typeof e)s={all:e};else if(Array.isArray(e)){var i=["error","warning","info","all"];e.forEach((function(e,t){s[i[t]]=e}))}else _.isPlainObject(e)&&(s=e);return Object.assign(t,s)}function F(e){var t=(e/1e3).toFixed(1);return t<=0?"0".concat(M["a"].t("message.constants.time.second")):t<60?"".concat(t).concat(M["a"].t("message.constants.time.second")):t<3600?"".concat((t/60).toPrecision(2)).concat(M["a"].t("message.constants.time.minute")):t<86400?"".concat((t/3600).toPrecision(2)).concat(M["a"].t("message.constants.time.hour")):"".concat((t/86400).toPrecision(2)).concat(M["a"].t("message.constants.time.day"))}function B(e,t,s){var i=function(e,t,s){for(var i=0;i<e.length;i++)if(e[i]!==t[i]){var a=e.charCodeAt(i),n=t.charCodeAt(i),r="desc"===s?n-a:a-n;return r}},a=parseInt(e,10),n=parseInt(t,10);return isNaN(a)||isNaN(n)?i(e,t,s):a.toString().length===e.toString().length&&n.toString().length===t.toString().length?"desc"===s?t-e:e-t:isNaN(Number(e))||isNaN(Number(t))?i(e,t,s):"desc"===s?t-e:e-t}function H(e){var t={};return _.forEach(e,(function(e){t[e.key]=e.value})),t}function K(e){var t=[];return _.forIn(e,(function(e,s){t.push({key:s,value:e})})),t}function U(e){var t=[];return _.forEach(e,(function(e){var s={};s[e.key]=e.value,t.push(s)})),t}function W(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function V(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?W(Object(s),!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):W(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var X={executeCopy:function(e){var t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("Copy"),t.remove()},md5:u.a,replaceHolder:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=V({dssurl:location.origin,cookies:document.cookie},t);var s=e.split("?"),i=l.a.parse(s[1]),a=/\$\{([^}]*)}/g,n={};if(s[0]=s[0].replace(a,(function(e,s){return t[s]})),s[1])for(var r in i){var o=r.replace(a,(function(e,s){return t[s]}));n[o]=i[r].replace(a,(function(e,s){return t[s]}))}var c=s.length>1?"".concat(s[0],"?").concat(l.a.stringify(n)):s[0];return c}};E(X,i,a,n,r);t["a"]=X},"0981":function(e,t,s){"use strict";var i=s("cdaa"),a=s.n(i);a.a},"0a88":function(e,t,s){"use strict";s.r(t),t["default"]={name:"Header",component:function(){return Promise.resolve().then(s.bind(null,"61c7"))},dispatchs:["Footer:getRunningJob","IndexedDB:deleteDb"]}},"0ad4":function(e,t,s){},"0b71":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"user-menu"},[s("li",{staticClass:"user-menu-arrow"}),e._l(e.menuList,(function(t){return s("li",{key:t.id,staticClass:"user-menu-item",on:{click:function(s){return e.handleClick(t.id)}}},[s("Icon",{staticClass:"user-menu-item-icon",attrs:{type:t.icon}}),s("span",[e._v(e._s(t.name))])],1)}))],2)},a=[],n=s("b593"),r={name:"Menu",data:function(){return{menuList:[{id:"FAQ",name:this.$t("message.navMune.FAQ"),icon:"ios-help-circle-outline"},{id:"clearCache",name:this.$t("message.navMune.clearCache"),icon:"ios-trash-outline"},{id:"changeLang",name:"zh-CN"===localStorage.getItem("locale")?"English":"简体中文",icon:"md-repeat"},{id:"logout",name:this.$t("message.navMune.logOut"),icon:"ios-log-out"}]}},methods:{handleClick:function(e){switch(e){case"user-management":this.openUserManagement();break;case"FAQ":this.openFAQ();break;case"clearCache":this.clearCache();break;case"logout":this.getRunningJob();break;case"changeLang":this.changeLang();break}},openUserManagement:function(){this.$Message.info(this.$t("message.userMenu.comingSoon"))},openFAQ:function(){var e=this,t=window.open("about:blank");setTimeout((function(){t.location.href=e.getFAQUrl()}),500)},clearCache:function(){var e=this;this.$Modal.confirm({title:this.$t("message.userMenu.title"),content:this.$t("message.userMenu.content"),onOk:function(){e.dispatch("IndexedDB:deleteDb"),e.$Message.success(e.$t("message.userMenu.clearCacheSuccess")),setTimeout((function(){window.location.reload()}),1e3)},onCancel:function(){}})},getRunningJob:function(){this.logout()},logout:function(){var e=this;n["a"].fetch("/user/logout","get").then((function(){e.$emit("clear-session"),e.$router.push({path:"/login"})}))},changeLang:function(){"zh-CN"===localStorage.getItem("locale")?localStorage.setItem("locale","en"):localStorage.setItem("locale","zh-CN"),window.location.reload()}}},o=r,c=s("2877"),l=Object(c["a"])(o,i,a,!1,null,null,null);t["default"]=l.exports},"0b7c":function(e,t,s){"use strict";var i=s("1c6e"),a=s.n(i);a.a},"100e":function(e,t,s){"use strict";s("57e7");var i=s("c1df"),a=s.n(i),n=function(e,t){var s="",i=e[t.key];if(!t.type){if(-1!==["lifecycle","modelLevel","useWay"].indexOf(t.key)){var n={lifecycle:[{value:0,label:"永久"},{value:1,label:"当天有效"},{value:2,label:"一周有效"},{value:3,label:"一月有效"},{value:4,label:"半年有效"}],modelLevel:[{value:0,label:"ODS(原始数据层)"},{value:1,label:"DWD(明细数据层)"},{value:2,label:"DWS(汇总数据层)"},{value:3,label:"ADS(应用数据层)"}],useWay:[{value:0,label:"一次写多次读"},{value:1,label:"增删改查"},{value:2,label:"多次覆盖写"},{value:3,label:"一次写偶尔读"}]};return e[t.key]||0===e[t.key]?n[t.key][e[t.key]].label:i}return i}if(t.linkfields&&"total"===t.type)return e&&e[t.linkfields]&&e[t.linkfields].length||0;switch(t.type){case"boolean":s=i?"yes":"no";break;case"timestramp":s="0"!=i&&i?a.a.unix(i).format("YYYY-MM-DD HH:mm:ss"):0;break}return s};t["a"]={formatValue:n}},1122:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"we-file-tree",class:{"is-empty":e.isEmpty}},["workBench"===e.fsType?s("we-tree",{ref:"tree",attrs:{data:e.tree,"node-props":e.nodeProps,"load-data-fn":e.loadDataFn,"before-remove":e.beforeRemove,"sort-fn":e.sortFn,"filter-node":e.filterNode,"node-edit-valid":e.nodeEditValid,"before-change":e.beforeChange,"highlight-path":e.highlightPath,"is-root-default-open":e.isRootDefaultOpen},on:{"node-click":function(t){return e.dispatch("work-bench-click",t,arguments)},"node-edit":function(t){return e.dispatch("work-bench-edit",t,arguments)},"node-create":function(t){return e.dispatch("work-bench-create",t,arguments)},"node-contextmenu":function(t){return e.dispatch("work-bench-contextMenu",t,arguments)},"node-check":function(t){return e.dispatch("work-bench-check",t,arguments)},"node-dblclick":function(t){return e.dispatch("work-bench-dblclick",t,arguments)}}}):e._e(),!e.loading&&e.isEmpty?s("div",[e._v("暂无数据，请点击"),s("a",{on:{click:e.refresh}},[e._v("刷新")]),e._v("重试！")]):e._e(),e.loading?s("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)},a=[],n=(s("28a5"),s("9865"),s("57e7"),s("7f7f"),s("d25f"),s("2ef0")),r={name:"WeFileTree",props:{loading:{type:Boolean,default:!1},fsType:{type:String,default:"workBench"},tree:{type:Array,default:function(){}},filterText:{type:String,default:""},highlightPath:{type:String,default:""},isRootDefaultOpen:{type:Boolean,defalut:!1},loadDataFn:{type:Function,default:function(){}},beforeRemove:{type:Function,default:function(){}},beforeChange:{type:Function,default:function(){}},nodeProps:{type:Object,default:function(){return{children:"children",label:"name",icon:"icon",isLeaf:"isLeaf"}}}},data:function(){return{}},computed:{isEmpty:function(){return!(this.tree&&this.tree.length)}},watch:{filterText:function(e){this.$refs.tree.store.filter()}},mounted:function(){},methods:{sortFn:function(e){return Object(n["orderBy"])(e,["isLeaf","label"],["asc","asc"])},filterNode:function(e,t){if(this.filterText){var s=e.data.name,i=this.filterText;return t||(s=s.toLowerCase(),i=i.toLowerCase()),-1!==s.indexOf(i)}return!0},dispatch:function(e,t,s){var i=s[1],a=i.node,n=i.nodeData,r=i.oldLabel;this.$emit(e,{ev:t,nodeData:n,node:a,oldLabel:r})},append:function(e,t){this.$refs.tree.store.append(e,t)},nodeEditValid:function(e){var t="",s=e.label,i=e.node,a=i.isLeaf,r=s.length;if(a){var o=s.substring(s.lastIndexOf("."),0),c=-1!==s.indexOf("."),l=s.substr(s.lastIndexOf("."),s.length),d=i.name.substr(i.name.lastIndexOf("."),i.name.length),u=s.split(".").length-1,h=/^[\w\u4e00-\u9fa5]{1,200}\.[A-Za-z]+$/,p=/[^\w\u4e00-\u9fa5]+/g;if(h.test(s))l!==d&&(t="脚本类型(后缀名)不得修改！");else if(0===r)t="脚本名称不得为空！";else if(o.length)if(c)if(u>1)t='存在非法字符"."！';else if(o.length>=200)t="脚本前缀名称超过200字符！";else{var f="";try{Object(n["map"])(o,(function(e){var t=p.exec(o);if(f+=t[0]+", ",!t){var s="error";throw s}return f}))}catch(g){t=g}f=f.slice(0,f.length-2),t='存在非法字符"'.concat(f,'"')}else t="后缀名不得为空！";else t="脚本前缀名不得为空！"}else{var m=/^[\w\u4e00-\u9fa5]{1,200}$/;m.test(s)||(t=0===r?"文件夹名称不得为空！":r>=200?"文件夹名称超过200字符！":"文件夹名称只支持大写、小写字母、数字、下划线和中文!")}return t},refresh:function(){this.$emit("on-refresh")}}},o=r,c=(s("1368"),s("2877")),l=Object(c["a"])(o,i,a,!1,null,null,null),d=l.exports;t["a"]=d},1368:function(e,t,s){"use strict";var i=s("3eb8"),a=s.n(i);a.a},1403:function(e,t,s){},1551:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"create-table-second-step"},[e.loading?s("Spin",{attrs:{size:"large",fix:""}}):e._e(),s("div",{staticClass:"data-source"},[s("div",{staticClass:"data-source-item-wrap"},[s("span",{staticClass:"data-source-title"},[e._v(e._s(e.$t("message.createTable.SJSXLY")))]),s("Select",{staticClass:"data-source-type",model:{value:e.attrInfo.source.source,callback:function(t){e.$set(e.attrInfo.source,"source",t)},expression:"attrInfo.source.source"}},e._l(e.sourceTypeList,(function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"import"===e.attrInfo.source.source,expression:"attrInfo.source.source === 'import'"}],staticClass:"data-source-item-wrap",staticStyle:{"margin-left":"20px"}},[s("span",{staticClass:"data-source-title"},[e._v(e._s(e.$t("message.createTable.DRFS")))]),s("Select",{staticClass:"data-source-type",on:{"on-change":e.onImportTypeChange},model:{value:e.attrInfo.source.importType,callback:function(t){e.$set(e.attrInfo.source,"importType",t)},expression:"attrInfo.source.importType"}},e._l(e.importTypeList,(function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)]),"new"===e.attrInfo.source.source?s("create-table",{ref:"createTable",attrs:{target:e.attrInfo.target.new,"partition-table":e.attrInfo.model.partitionTable}}):e._e(),"import"===e.attrInfo.source.source&&e.dbList.length?s("import-table",{ref:"importTable",attrs:{source:e.attrInfo.source,target:e.attrInfo.target,"db-list":e.dbList,"partition-table":e.attrInfo.model.partitionTable},on:{"get-fields":e.getFields,"get-tables":e.getTables}}):e._e()],1)},a=[],n=s("7f5a"),r=s("7594"),o={components:{createTable:n["default"],importTable:r["default"]},props:{dbList:{type:Array,required:!0},loading:{type:Boolean,default:!1},attrInfo:{type:Object,required:!0}},data:function(){return{sourceTypeList:[{value:"new",label:this.$t("message.createTable.XJ")},{value:"import",label:this.$t("message.createTable.DR")}],importTypeList:[{value:"hive",label:"hive"}]}},methods:{getTables:function(e){this.$emit("get-tables",e)},getFields:function(e){this.$emit("get-fields",e)},onImportTypeChange:function(){this.attrInfo.target.fieldList=[]}}},c=o,l=s("2877"),d=Object(l["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},1670:function(e,t,s){"use strict";var i=s("6b92"),a=s.n(i);a.a},"17cb":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{attrs:{title:"add"===e.actionType?e.$t("message.workflow.createWorkflow"):e.$t("message.workflow.editorWorkflow"),closable:!1},model:{value:e.ProjectShow,callback:function(t){e.ProjectShow=t},expression:"ProjectShow"}},[e.workflowDataCurrent?s("Form",{ref:"projectForm",attrs:{"label-width":100,"label-position":"left",model:e.workflowDataCurrent,rules:e.formValid}},[s("FormItem",{attrs:{label:e.$t("message.workflow.workflowName"),prop:"name"}},[s("Input",{attrs:{placeholder:e.$t("message.workflow.inputFlowName")},model:{value:e.workflowDataCurrent.name,callback:function(t){e.$set(e.workflowDataCurrent,"name",t)},expression:"workflowDataCurrent.name"}})],1),s("FormItem",{attrs:{label:e.$t("message.workflow.use"),prop:"uses"}},[s("we-tag",{attrs:{"new-label":e.$t("message.workflow.addUse"),"tag-list":e.workflowDataCurrent.uses},on:{"add-tag":e.addTag,"delete-tag":e.deleteTag}})],1),s("FormItem",{attrs:{label:e.$t("message.workflow.workflowDesc"),prop:"projectDescipte"}},[s("Input",{attrs:{type:"textarea",placeholder:e.$t("message.workflow.inputWorkflowDesc")},model:{value:e.workflowDataCurrent.description,callback:function(t){e.$set(e.workflowDataCurrent,"description",t)},expression:"workflowDataCurrent.description"}})],1)],1):e._e(),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"text",size:"large"},on:{click:e.Cancel}},[e._v(e._s(e.$t("message.newConst.cancel")))]),s("Button",{attrs:{type:"primary",size:"large"},on:{click:e.Ok}},[e._v(e._s(e.$t("message.newConst.ok")))])],1)],1)},a=[],n=(s("6b54"),s("87b3"),s("20d6"),s("28a5"),s("ca12")),r={components:{"we-tag":n["a"]},props:{workflowData:{type:Object,default:null},addProjectShow:{type:Boolean,default:!1},actionType:{type:String,default:""}},data:function(){return{ProjectShow:!1,originBusiness:""}},computed:{workflowDataCurrent:function(){return this.workflowData},formValid:function(){return{name:[{required:!0,message:this.$t("message.newConst.enterName"),trigger:"blur"},{message:"".concat(this.$t("message.newConst.nameLength"),"20"),max:20},{type:"string",pattern:/^[a-zA-Z][a-zA-Z0-9_]*$/,message:this.$t("message.newConst.validNameDesc"),trigger:"blur"}]}}},watch:{addProjectShow:function(e){this.ProjectShow=e},ProjectShow:function(e){e&&(this.originBusiness=this.workflowDataCurrent.uses),this.$emit("show",e)}},methods:{Ok:function(){var e=this;this.$refs.projectForm.validate((function(t){t?(e.$emit("confirm",e.workflowDataCurrent),e.ProjectShow=!1):e.$Message.warning(e.$t("message.newConst.failedNotice"))}))},Cancel:function(){this.ProjectShow=!1,this.workflowDataCurrent.uses=this.originBusiness},addTag:function(e){this.workflowDataCurrent.uses?this.workflowDataCurrent.uses+=",".concat(e):this.workflowDataCurrent.uses=e},deleteTag:function(e){var t=this.workflowDataCurrent.uses.split(","),s=t.findIndex((function(t){return t===e}));t.splice(s,1),this.workflowData.uses=t.toString()}}},o=r,c=s("2877"),l=Object(c["a"])(o,i,a,!1,null,null,null);t["default"]=l.exports},1890:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"version-content"},[s("Table",{attrs:{columns:e.columns,data:e.versionData,border:""},scopedSlots:e._u([{key:"action",fn:function(t){var i=t.row,a=t.index;return[s("div",{staticClass:"buttom-box"},[s("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.viewVersion(i,a)}}},[e._v("打开")]),s("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.checkout(i,a)}}},[e._v(e._s(0==a?e.$t("message.newConst.newCreate"):e.$t("message.project.rollBack")))])],1)]}}])}),s("Modal",{attrs:{title:e.$t("message.project.publishDetail"),width:"554","footer-hide":!0},model:{value:e.publishDetaultShow,callback:function(t){e.publishDetaultShow=t},expression:"publishDetaultShow"}},[s("Table",{attrs:{columns:e.detaultColumns,data:e.publishData,border:""}})],1)],1)},a=[],n=s("c1df"),r=s.n(n),o=s("b593"),c={props:{currentProjectData:{type:Object,default:null}},data:function(){return{versionData:[],publishData:[],publishDetaultShow:!1}},created:function(){this.getVersionList()},computed:{columns:function(){var e=this;return[{title:this.$t("message.project.version"),key:"version",width:120,align:"center"},{title:this.$t("message.project.status"),key:"status",width:120,align:"center",render:function(t,s){return t("span",{style:{color:s.row.notPublish?"#515a6e":"#2d8cf0",cursor:"pointer"},on:{click:function(){e.publishDetault(s.row)}}},s.row.notPublish?e.$t("message.project.unpublish"):e.$t("message.project.published"))}},{title:this.$t("message.project.updator"),key:"updator",width:120,align:"center"},{title:this.$t("message.project.comment"),key:"comment",width:186,align:"center"},{title:this.$t("message.project.uptateTime"),key:"updateTime",width:160,align:"center",render:function(e,t){return e("span",{},r()(t.row.updateTime).format("YYYY-MM-DD HH:mm:ss"))}},{title:this.$t("message.project.action"),slot:"action",align:"center",width:170}]},detaultColumns:function(){var e=this;return[{title:this.$t("message.project.creator"),key:"creator",width:120,align:"center"},{title:this.$t("message.project.status"),key:"state",width:120,align:"center",render:function(t,s){return t("span",{},e.publishResult(s.row.state))}},{title:this.$t("message.project.publishData"),key:"comment",width:120,align:"center"},{title:this.$t("message.project.publishTime"),key:"updatetime",width:160,align:"center",render:function(e,t){return e("span",{},r()(t.row.updateTime).format("YYYY-MM-DD HH:mm:ss"))}}]}},methods:{getVersionList:function(){var e=this;o["a"].fetch("/dss/listAllProjectVersions",{id:this.currentProjectData.id},"get").then((function(t){e.versionData=t.versions}))},viewVersion:function(e,t){this.$emit("modelHidden",!1),this.$router.push({name:"Workflow",query:{projectTaxonomyID:this.currentProjectData.taxonomyID,projectID:e.projectID,projectVersionID:e.id,readonly:0==t?"false":"true"}})},deleteVersion:function(e){var t=this;this.$Modal.confirm({title:this.$t("message.project.pubDelete"),content:this.$t("message.project.confirmDelete",{version:e.version}),onOk:function(){t.$emit("modelHidden",!1)},onCancel:function(){}})},checkout:function(e,t){var s=this;this.$Modal.confirm({title:0==t?this.$t("message.project.addVersion"):this.$t("message.project.rollBack"),content:this.$t("message.project.addVersion",{version:e.version}),onOk:function(){s.dispatch("Project:loading",!0),o["a"].fetch("/dss/copyVersionAndFlow",{projectVersionID:e.id},"post").then((function(e){s.dispatch("Project:loading",!1),s.$emit("modelHidden",!1)})).catch((function(){s.dispatch("Project:loading",!1)}))},onCancel:function(){}})},publishDetault:function(e){e.notPublish||(this.publishData=[],this.publishData.push(e.publishHistory),this.publishDetaultShow=!0)},publishResult:function(e){return 0===e?this.$t("message.project.init"):1===e?this.$t("message.project.run"):2===e?this.$t("message.project.publishSuccess"):3===e?this.$t("message.project.publishFailed"):void 0}}},l=c,d=(s("0112"),s("2877")),u=Object(d["a"])(l,i,a,!1,null,"18b985bc",null);t["default"]=u.exports},"18a2":function(e,t,s){"use strict";var i=s("9f2c"),a=s.n(i);a.a},"1a98":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"log-view"},[s("div",{staticClass:"log-search",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),t.preventDefault(),e.search(t))}}},[s("span",{staticClass:"log-character"},[e._v(e._s(e.$t("message.logView.taskId")))]),s("Input",{staticStyle:{width:"200px"},model:{value:e.jobId,callback:function(t){e.jobId=t},expression:"jobId"}}),s("Button",{attrs:{type:"primary",icon:"search",loading:e.isLoading},on:{click:function(t){return e.search()}}},[e._v(e._s(e.$t("message.logView.search")))])],1),s("div",{staticClass:"log-editor-wrap"},[s("div",{staticClass:"log-tools"},[s("div",{staticClass:"log-tools-control"},[s("Tabs",{staticClass:"log-tabs",model:{value:e.curPage,callback:function(t){e.curPage=t},expression:"curPage"}},[s("TabPane",{attrs:{name:"all",label:"All"}}),s("TabPane",{attrs:{label:e.errorLabel,name:"error"}}),s("TabPane",{attrs:{label:e.warnLabel,name:"warning"}}),s("TabPane",{attrs:{name:"info",label:"Info"}})],1),s("Input",{staticClass:"log-search",attrs:{placeholder:e.$t("message.logView.filter"),suffix:"ios-search",size:"small"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1)]),s("we-editor",{ref:"logEditor",staticStyle:{height:"calc(100% - 34px)"},attrs:{type:"log"},model:{value:e.curLogs,callback:function(t){e.curLogs=t},expression:"curLogs"}})],1)])},a=[],n=(s("3b2b"),s("d25f"),s("6d67"),s("28a5"),s("456d"),s("ac6a"),s("f3e2"),s("96cf"),s("3b8d")),r=s("2ef0"),o=s("b593"),c=s("0971"),l=/^\d*$/,d={data:function(){var e=this;return{jobId:"",logs:"",fromLine:null,isLoading:!1,curPage:"all",searchText:"",errorNum:0,warnNum:0,errorLabel:function(t){return t("div",[t("span","Error"),t("Badge",{props:{count:e.errorNum,className:"err-badge"}})])},warnLabel:function(t){return t("div",[t("span","Warning"),t("Badge",{props:{count:e.warnNum,className:"warn-badge"}})])}}},computed:{curLogs:{get:function(){var e=this.formattedLogs();return e[this.curPage]},set:function(e){return e}}},watch:{fromLine:function(e){this.$refs.logEditor.editor&&this.$refs.logEditor.editor.revealLine(e)}},beforeDestroy:function(){this.logs=null,this.fromLine=null,this.jobId=null},methods:{search:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isLoading){e.next=9;break}if(this.isLoading=!0,this.jobId&&l.test(this.jobId)){e.next=6;break}this.$Notify.error({title:this.$t("message.logView.error"),message:this.$t("message.logView.inputTaskId"),duration:1e3}),e.next=9;break;case 6:if(!(this.jobId.length>0)){e.next=9;break}return e.next=9,o["a"].fetch("/jobhistory/".concat(this.jobId,"/get"),"get").then((function(e){var s=e.task.logPath;o["a"].fetch("/filesystem/openLog",{path:s},"get").then((function(e){if(t.isLoading=!1,e){var s={all:"",error:"",warning:"",info:""},i=c["a"].convertLog(e.log);Object.keys(i).forEach((function(e){i[e]&&(s[e]+=i[e]+"\n")})),t.logs=s,t.fromLine=s["all"].split("\n").length}})).catch((function(){t.isLoading=!1}))})).catch((function(){t.isLoading=!1}));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),formattedLogs:function(){var e=this,t={all:"",error:"",warning:"",info:""};return Object.keys(this.logs).map((function(s){t[s]=e.getSearchList(e.logs[s])})),this.getPointNum(t),t},getPointNum:function(e){var t=Object(r["trim"])(e.error).split("\n").filter((function(e){return!!e})),s=Object(r["trim"])(e.warning).split("\n").filter((function(e){return!!e}));this.errorNum=t.length,this.warnNum=s.length},getSearchList:function(e){var t="",s=this.searchText;if(!e)return t;if(s){var i="";Object(r["forEach"])(s,(function(e){/^[\w\u4e00-\u9fa5]$/.test(e)?i+=e:i+="\\".concat(e)}));var a=new RegExp(".*".concat(i,".*"),"gi");t=Object(r["filter"])(e.split("\n"),(function(e){return a.test(e)})).join("\n")}else t=e;return t}}},u=d,h=(s("d39c"),s("2877")),p=Object(h["a"])(u,i,a,!1,null,null,null);t["default"]=p.exports},"1ae8":function(e,t,s){"use strict";var i=s("2dd5"),a=s.n(i);a.a},"1bd3":function(e,t,s){"use strict";s.d(t,"b",(function(){return l})),s.d(t,"a",(function(){return d}));s("96cf");var i=s("3b8d"),a=s("d225"),n=s("b0b4"),r=(s("5df3"),s("ac6a"),s("f3e2"),s("2caf"),s("74ce")),o=function(){function e(t,s){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Object(a["a"])(this,e),this.db=new r["a"](t),this.db.version(i).stores(s)}return Object(n["a"])(e,[{key:"updateVersion",value:function(e,t){try{this.db.version(t).stores(e)}catch(s){this._errorCatch(s)}}},{key:"put",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,s){var i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=[],Array.isArray(s)?s.forEach((function(e){i.push(a.db[t].put(e))})):i.push(this.db[t].put(s)),e.prev=2,e.next=5,Promise.all(i);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e["catch"](2),e.abrupt("return",this._errorCatch(e.t0));case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));function t(t,s){return e.apply(this,arguments)}return t}()},{key:"get",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,s){var i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=[],Array.isArray(s)?s.forEach((function(e){i.push(a.db[t].get(e))})):i.push(this.db[t].get(s)),e.prev=2,e.next=5,Promise.all(i);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e["catch"](2),e.abrupt("return",this._errorCatch(e.t0));case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));function t(t,s){return e.apply(this,arguments)}return t}()},{key:"where",value:function(e,t){return this.whereClause=this.db[e].where(t),this}},{key:"update",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,s,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db[t].update(s,i);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",this._errorCatch(e.t0));case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t,s,i){return e.apply(this,arguments)}return t}()},{key:"equals",value:function(e){return this.collection=this.whereClause.where(e),this}},{key:"anyOf",value:function(e){return this.collection=this.whereClause.where(e),this}},{key:"first",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.collection.first(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return",this._errorCatch(e.t0));case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"delete",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,s,i,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.length,s=a.length<=0?void 0:a[0],i=a.length<=1?void 0:a[1],e.prev=3,0!==t){e.next=10;break}return e.next=7,this.collection.delete();case 7:return e.abrupt("return",e.sent);case 10:if(2!==t){e.next=14;break}return e.next=13,this.db[s].delete(i);case 13:return e.abrupt("return",e.sent);case 14:e.next=19;break;case 16:return e.prev=16,e.t0=e["catch"](3),e.abrupt("return",this._errorCatch(e.t0));case 19:case"end":return e.stop()}}),e,this,[[3,16]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"toArray",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t&&(this.collection=this.db[t]),e.next=4,this.collection.toArray();case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",this._errorCatch(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_errorCatch",value:function(e){return this.errHandler&&this.errHandler(e.message),Promise.resolve(null)}}]),e}(),c={version:4,stores:{project:"&projectID",tab:"&id",log:"&tabId",history:"&tabId",result:"&tabId",globalCache:"&key, value",progress:"&tabId",node:"&nodeId"}},l=new o("bdp-ide",c.stores,c.version),d=function(){function e(t){Object(a["a"])(this,e),this.table=t}return Object(n["a"])(e,[{key:"add",value:function(e){return l.put(this.table,e)}},{key:"get",value:function(e){return e?l.get(this.table,e):l.toArray(this.table)}},{key:"remove",value:function(e){return l.delete(this.table,e)}},{key:"update",value:function(e,t){return l.update(this.table,e,t)}},{key:"modifyPrimaryKey",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,s){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.get(this.table,t);case 2:if(i=e.sent,!i||!i[0]){e.next=8;break}return e.next=6,l.delete(this.table,t);case 6:return"tab"===this.table?(i[0].id=s,i=Object.assign(i,{id:s})):(i[0].tabId=s,i=Object.assign(i,{tabId:s})),e.abrupt("return",l.put(this.table,i));case 8:case"end":return e.stop()}}),e,this)})));function t(t,s){return e.apply(this,arguments)}return t}()}]),e}()},"1c6e":function(e,t,s){},"1d3c":function(e,t,s){"use strict";s.r(t);var i=s("b593");t["default"]={name:"fnSidebar",events:["getAllLoadedFunction"],dispatchs:["WorkSidebar:showTree","Workbench:pasteInEditor","IndexedDB:updateGlobalCache","Workbench:getWorksLangList"],data:{},methods:{getAllLoadedFunction:function(e){i["a"].fetch("/udf/all").then((function(t){e({list:t.udfTree.udfInfos,isError:!1})})).catch((function(t){e({list:[],isError:!0})}))}},component:function(){return Promise.resolve().then(s.bind(null,"2412"))}}},"1f99":function(e,t,s){},2030:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"background-script"})},a=[],n=(s("1c01"),s("58b2"),s("8e6e"),s("d25f"),s("57e7"),s("bd86")),r=(s("20d6"),s("28a5"),s("456d"),s("ac6a"),s("f3e2"),s("d92a"),s("a8db")),o=(s("7514"),s("96cf"),s("3b8d")),c=s("2ef0"),l=s.n(c),d=s("4de8"),u=s("b593"),h=s("0971"),p=s("6b6d"),f=s("32bd");function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var b={mixins:[d["default"].mixin],props:{work:{type:Object,required:!0}},data:function(){return{script:null,execute:null,postType:"socket",userName:"",localLog:null}},watch:{"execute.run":function(e){this.work.data.running=this.script.running=e},"execute.status":function(e){this.work.data.status=e,this.script.status=e}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,s,i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.userName=this.getUserName(),this.work.data?this.script=this.work.data:(t=l.a.find(this.getSupportModes(),(function(e){return e.rule.test(a.work.filename)})),s=/^[.\w\u4e00-\u9fa5]{1,200}\.[A-Za-z]+$/,i=s.test(this.work.filename),this.work.data=this.script=new p["b"](Object.assign(t,{id:this.work.id,fileName:this.work.filename,executable:t.executable?i:t.executable,data:this.work.code,params:this.work.params})),delete this.work.code,delete this.work.params),this.dispatch("IndexedDB:recordTab",this.work),this.dispatch("IndexedDB:updateGlobalCache",{id:this.userName,work:this.work});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=this;this.$nextTick((function(){e.dispatch("WebSocket:init"),e.run()})),window.onbeforeunload=function(){return e.work.unsave||e.script.running?"need confirm":null}},beforeDestroy:function(){window.onbeforeunload=null},methods:{"Workbench:save":function(e){e.id==this.script.id&&this.save()},"Workbench:socket":function(e){var t=e.type,s=Object(r["a"])(e,["type"]);this.execute?this.execute.trigger(t,Object.assign(s,{execute:this.execute})):"downgrade"===t&&(this.postType="http")},getExecuteData:function(){var e={method:"/api/rest_j/v1/entrance/execute",websocketTag:this.work.id,data:{executeApplicationName:this.script.application,executionCode:this.script.data,runType:this.script.runType,params:this.formatParams(this.script.params),postType:this.postType,scriptPath:this.work.filename}};return this.work.backgroundType&&(e.method="/api/rest_j/v1/entrance/backgroundservice",e.data.background=this.work.backgroundType,e.data.scriptPath=this.work.filename),e},run:function(){var e=this,t=this.getExecuteData();this.execute=new f["a"](t,this.$t.bind(this)),this.localLog={log:{all:"",error:"",warning:"",info:""},logLine:1},this.execute.start(),this.execute.once("sendStart",(function(t){var s=e.work.filepath||e.work.filename;e.$Notice.close(s),e.$Notice.info({title:"运行提示",desc:"",render:function(t){return t("span",{style:{"word-break":"break-all","line-height":"20px"}},"开始执行静默脚本 ".concat(e.work.filename," ！"))},name:s,duration:5}),e.work.execID=e.execute.id,e.work.taskID=e.execute.taskID,t&&(e.script.executionCode=e.script.data=t)})),this.execute.on("updateResource",(function(t){e.dispatch("Footer:updateRunningJob",t)})),this.execute.on("log",(function(t){var s=h["a"].convertLog(t);Object.keys(s).forEach((function(t){var i=s[t];i&&(e.localLog.log[t]+=i+"\n"),"all"===t&&(e.localLog.logLine+=i.split("\n").length)}))})),this.execute.on("history",(function(t){var s=l.a.findIndex(e.script.history,(function(e){return e.taskID===t.taskID})),i=l.a.find(e.script.history,(function(e){return e.taskID===t.taskID})),a=null,n="string"===typeof e.script.executionCode&&e.script.executionCode?e.script.executionCode:e.script.data;a=i?t.hasOwnProperty("logPath")?{taskID:t.taskID,createDate:i.createDate,execID:t.execID||i.execID,runningTime:i.runningTime,data:n,status:t.status,fileName:e.script.fileName,failedReason:t.failedReason}:{taskID:t.taskID,createDate:t.createDate,execID:t.execID||i.execID,runningTime:t.runningTime,data:n,status:t.status,fileName:e.script.fileName,failedReason:t.failedReason}:{taskID:t.taskID,createDate:t.createDate,execID:t.execID,runningTime:t.runningTime,data:n,status:t.status,fileName:e.script.fileName,failedReason:t.failedReason},-1===s?(e.script.history.unshift(a),e.dispatch("IndexedDB:appendHistory",g({tabId:e.script.id},e.script.history))):(e.script.history.splice(s,1,a),e.dispatch("IndexedDB:updateHistory",g({tabId:e.script.id},e.script.history)))})),this.execute.on("progress",(function(t){var s=t.progress,i=t.progressInfo,a=t.waitingSize;i.length&&!l.a.isEmpty(i[0])?i.forEach((function(t){var s=t.id,i=e.script.progress.progressInfo.findIndex((function(e){return e.id===s}));-1!==i?e.script.progress.progressInfo.splice(i,1,t):e.script.progress.progressInfo.push(t)})):i=[],e.script.progress.current=s,null!==a&&a>=0&&(e.script.progress.waitingSize=a),e.dispatch("IndexedDB:updateProgress",{tabId:e.script.id,rst:e.script.progress})})),this.execute.on("updateExpireHistory",(function(t){var s=l.a.findIndex(e.script.history,(function(e){return e.taskID===t.taskID})),i=l.a.find(e.script.history,(function(e){return e.execID===t.execID}));if(i){var a=null;u["a"].fetch("/jobhistory/".concat(i.taskID,"/get"),"get").then((function(t){a={taskID:t.task.taskID,createDate:t.task.createdTime,execID:t.task.strongerExecId,runningTime:t.task.costTime,data:t.task.executionCode,status:t.task.status,fileName:t.task.fileName,failedReason:t.task.errCode&&t.task.errDesc?t.task.errCode+t.task.errDesc:t.task.errCode||t.task.errDesc||""},e.script.history.splice(s,1,a),e.dispatch("IndexedDB:updateHistory",g({tabId:e.script.id},e.script.history))}))}})),this.execute.on("steps",(function(t){if("Inited"===t)e.script.steps=["Submitted","Inited"];else{var s=l.a.last(e.script.steps);(-1===e.script.steps.indexOf(t)||s!==t)&&e.script.steps.push(t),e.dispatch("IndexedDB:updateProgress",{tabId:e.script.id,rst:Object.assign(e.script.progress,{steps:e.script.steps})})}})),this.execute.on("WebSocket:send",(function(t){e.dispatch("WebSocket:send",t)})),this.execute.on("error",(function(){e.dispatch("IndexedDB:appendLog",{tabId:e.script.id,rst:e.script.log}),setTimeout((function(){e.$emit("remove-work",e.work),e.dispatch("Workbench:add",{id:e.work.id,filename:e.work.filename,filepath:"",saveAs:!0,noLoadCache:!1,code:e.script.data})}),500)})),this.execute.on("stateEnd",(function(){e.dispatch("IndexedDB:appendLog",{tabId:e.script.id,rst:e.localLog.log})})),this.execute.on("querySuccess",(function(t){var s=t.type,i=t.task,a=h["a"].convertTimestamp(i.costTime);e.script.progress.costTime=a;var n=e.work.filepath||e.work.filename;e.$Notice.close(n),e.$Notice.success({title:"执行结果提示",desc:"",render:function(t){return t("span",{style:{"word-break":"break-all","line-height":"20px"}},"脚本".concat(e.work.filename," ").concat(s,"成功, 共耗时: ").concat(a,"！"))},name:n,duration:3}),e.$emit("remove-work",e.work),e.dispatch("IndexedDB:clearLog",e.script.id),e.dispatch("IndexedDB:clearResult",e.script.id),e.dispatch("IndexedDB:clearProgress",e.script.id),e.dispatch("IndexedDB:clearHistory",e.script.id),e.dispatch("HiveSidebar:deletedAndRefresh")})),this.execute.on("notice",(function(t){var s=t.type,i=t.msg,a=t.autoJoin,n=e.work.filepath||e.work.filename,r=a?"脚本".concat(e.work.filename," ").concat(i):i;e.$Notice.close(n),e.$Notice[s]({title:"执行结果提示",name:n,desc:"",duration:5,render:function(e){return e("span",{style:{"word-break":"break-all","line-height":"20px"}},r)}})})),this.execute.on("costTime",(function(t){e.script.progress.costTime=h["a"].convertTimestamp(t),e.dispatch("IndexedDB:updateProgress",{tabId:e.script.id,rst:e.script.progress})}))},formatParams:function(e){var t=function(e){var t={};return l.a.forEach(e,(function(e){t[e.key]=e.value})),t},s=l.a.isEmpty(e.variable)?{}:t(e.variable),i={};return l.a.isEmpty(e.variable)||l.a.keys(e.configuration).forEach((function(e){i[e]=t(e)})),{variable:s,configuration:i}}}},v=b,y=s("2877"),w=Object(y["a"])(v,i,a,!1,null,null,null);t["default"]=w.exports},"20c8":function(e,t,s){"use strict";var i=s("78dc"),a=s.n(i);a.a},"21a0":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"queue-manager"},[e.loading?s("Spin",{attrs:{size:"large",fix:""}}):e._e(),e.queueList.length?s("div",{staticClass:"queue-manager-select-warpper"},[s("Select",{staticClass:"queue-manager-select",attrs:{placeholder:e.$t("message.resourceSimple.XZDL")},on:{"on-change":e.getQueueInfo},model:{value:e.current,callback:function(t){e.current=t},expression:"current"}},e._l(e.queueList,(function(t,i){return s("Option",{key:i,attrs:{value:t}},[e._v(e._s(t))])})),1)],1):e._e(),e.infos?s("div",[s("div",{staticClass:"queue-manager-used"},[s("div",{staticClass:"queue-manager-title"},[e._v(e._s(e.$t("message.resourceSimple.ZYSYL")))]),s("div",{staticClass:"queue-manager-circle-warpper"},[s("v-circle",{staticClass:"queue-manager-circle",attrs:{percent:e.infos.queueInfo.usedPercentage.cores,used:e.infos.queueInfo.usedResources.cores.toString(),max:e.infos.queueInfo.maxResources.cores.toString(),suffixe:e.$t("message.resourceSimple.H"),width:"120px",height:"120px",title:"CPU"}}),s("v-circle",{attrs:{percent:e.infos.queueInfo.usedPercentage.memory,used:e.formatToGb(e.infos.queueInfo.usedResources.memory),max:e.formatToGb(e.infos.queueInfo.maxResources.memory),suffixe:"GB",width:"120px",height:"120px",title:e.$t("message.resourceSimple.NC")}})],1)]),s("div",{staticClass:"queue-manager-top"},[s("span",{staticClass:"queue-manager-title"},[e._v(e._s(e.$t("message.resourceSimple.ZYSYPHB")))]),e.infos.userResources.length?s("div",{staticClass:"queue-manager-top-content"},e._l(e.infos.userResources,(function(t,i){return s("div",{key:i,staticClass:"queue-manager-item"},[s("span",{staticClass:"queue-manager-name"},[e._v(e._s(t.username))]),s("Tooltip",{attrs:{content:""+e.formatToPercent(t.idlePercentage)+e.$t("message.resourceSimple.KX")+" / "+e.formatToPercent(t.busyPercentage)+e.$t("message.resourceSimple.FM"),placement:"top"}},[s("span",{staticClass:"queue-manager-status"},[s("span",{staticClass:"queue-manager-status-busy",style:{width:e.formatToPercent(t.busyPercentage)},attrs:{title:e.formatToPercent(t.busyPercentage)}},[s("i",{staticClass:"queue-manager-status-label"})]),s("span",{staticClass:"queue-manager-status-idle",style:{width:e.formatToPercent(t.busyPercentage+t.idlePercentage)},attrs:{title:e.formatToPercent(t.idlePercentage)}},[s("i",{staticClass:"queue-manager-status-label"})])])]),s("span",{staticClass:"queue-manager-total"},[e._v(e._s(e.formatToPercent(t.totalPercentage)))])],1)})),0):s("div",{staticClass:"queue-manager-item"},[e._v(e._s(e.$t("message.resourceSimple.ZW")))])])]):e._e()],1)},a=[],n=s("b593"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"circle-progress",style:{width:e.width,height:e.height}},[s("svg",{attrs:{viewBox:"0 0 104 104"}},[s("path",{staticClass:"circle-progress__track",attrs:{d:"M 52 52 m 0 -47 a 47 47 0 1 1 0 94 a 47 47 0 1 1 0 -94"}}),s("path",{staticClass:"circle-progress__path",style:{"stroke-dashoffset":299.08*(1-e.percent)+"px"},attrs:{d:"M 52 52 m 0 -47 a 47 47 0 1 1 0 94 a 47 47 0 1 1 0 -94"}})]),s("span",{staticClass:"circle-progress__perent"},[e._v(e._s(e.formattedPercent)+"%")]),s("span",{staticClass:"circle-progress__text"},[e._v(e._s(e.used)+e._s(e.suffixe)+"/"+e._s(e.max)+e._s(e.suffixe))]),s("span",{staticClass:"circle-progress__title"},[e._v(e._s(e.title))])])},o=[],c=(s("c5f6"),{props:{percent:Number,used:String,max:String,suffixe:String,title:String,width:String,height:String},computed:{formattedPercent:function(){return(100*this.percent).toFixed(0)}}}),l=c,d=(s("20c8"),s("2877")),u=Object(d["a"])(l,r,o,!1,null,null,null),h=u.exports,p={components:{"v-circle":h},data:function(){return{queueList:[],current:"",infos:null,loading:!0}},methods:{getQueueList:function(){var e=this;this.loading=!0,n["a"].fetch("/resourcemanager/queues").then((function(t){e.loading=!1,e.queueList=t.queues,e.current=e.queueList[0],e.getQueueInfo(e.current)})).catch((function(){e.loading=!1}))},getQueueInfo:function(e){var t=this;this.loading=!0,n["a"].fetch("/resourcemanager/queueresources",{queuename:e}).then((function(e){t.loading=!1,t.infos=e})).catch((function(){t.loading=!1}))},formatToPercent:function(e){return(100*e).toFixed(0)+"%"},formatToGb:function(e){return(e/1024/1024/1024).toFixed(0)}}},f=p,m=Object(d["a"])(f,i,a,!1,null,null,null);t["default"]=m.exports},2412:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"we-side-bar"},[s("we-navbar",{attrs:{"nav-list":e.navList},on:{"on-refresh":e.refresh,"text-change":e.setSearchText}}),s("we-file-tree",{ref:"weFileTree",staticClass:"we-side-bar-content",attrs:{tree:e.fnTree,"load-data-fn":e.loadDataFn,"filter-text":e.searchText,"node-props":e.nodeProps,loading:e.compLoading},on:{"on-refresh":e.refresh,"work-bench-contextMenu":e.benchContextMenu,"work-bench-check":e.benchCheck,"work-bench-click":e.benchClick}}),s("we-menu",{ref:"treeContextMenu",attrs:{id:e.type}},[e.isOwn?[e.isLeaf||e.model?e._e():s("we-menu-item",{on:{select:function(t){return e.openModal(!0,"fn")}}},[s("span",[e._v(e._s(e.$t("message.fnSideBar.contextMenu.isOwn.addFunction")))])]),e.isLeaf||e.model?e._e():s("we-menu-item",{on:{select:function(t){return e.openModal(!0,"folder")}}},[s("span",[e._v(e._s(e.$t("message.fnSideBar.contextMenu.isOwn.addFolder")))])]),e.isLeaf?e._e():s("we-menu-item",{staticClass:"ctx-divider"}),e.isRoot||e.model?e._e():s("we-menu-item",{on:{select:e.openDeleteModal}},[s("span",[e._v(e._s(e.$t("message.constants.delete")))])]),e.isLeaf&&!e.model?s("we-menu-item",{on:{select:function(t){return e.openModal(!1,"fn")}}},[s("span",[e._v(e._s(e.$t("message.constants.update")))])]):e._e(),e.isLeaf||e.isRoot||e.model?e._e():s("we-menu-item",{on:{select:function(t){return e.openModal(!1,"folder")}}},[s("span",[e._v(e._s(e.$t("message.constants.rename")))])]),e.isUdfManager&&e.isUnShare?s("we-menu-item",{on:{select:function(t){return e.openShareModal(!0)}}},[s("span",[e._v(e._s(e.$t("message.fnSideBar.contextMenu.isOwn.share")))])]):e._e()]:e._e(),e.isLeaf?[e.isOwn?s("we-menu-item",{staticClass:"ctx-divider"}):e._e(),s("we-menu-item",{on:{select:e.copyName}},[s("span",[e._v(e._s(e.$t("message.fnSideBar.contextMenu.isLeaf.copyName")))])]),s("we-menu-item",{on:{select:e.pasteName}},[s("span",[e._v(e._s(e.$t("message.fnSideBar.contextMenu.isLeaf.pasteName")))])])]:e._e(),e.isLeaf&&e.isOwn&&e.currentNode.data.shared?[s("we-menu-item",{on:{select:e.handleExpired}},[s("span",[e._v(e._s(e.$t("message.fnSideBar.contextMenu.isOwnAndLeaf.updateToExpired")))])]),s("we-menu-item",{on:{select:function(t){return e.openShareModal(!1)}}},[s("span",[e._v(e._s(e.$t("message.fnSideBar.contextMenu.isOwnAndLeaf.viewSharedUsers")))])])]:e._e(),e.isLeaf?e._e():[s("we-menu-item",{on:{select:e.refresh}},[s("span",[e._v(e._s(e.$t("message.constants.refresh")))])])]],2),s("new-dialog",{ref:"folder",attrs:{loading:e.loading,type:e.newDialog.type,"is-new":e.newDialog.isNew,node:e.newDialog.node},on:{add:e.newNode,update:e.updateNode}}),s("setting-modal",{ref:"fn",attrs:{loading:e.loading,tree:e.shareTree,"load-data-fn":e.loadShareTreeFn,"filter-node":e.filterNode,"is-udf":"udf"===e.FNTYPE},on:{add:e.newNode,update:e.updateNode,"type-change":e.changeFnType}}),s("delete-dialog",{ref:"delete",attrs:{loading:e.loading},on:{delete:e.deleteNode}}),s("share-modal",{ref:"share",attrs:{loading:e.loading},on:{"add-share":e.shareNode,"update-share":e.updateShareNode}})],1)},a=[],n=(s("ac6a"),s("f3e2"),s("75fc")),r=(s("6762"),s("2fdb"),s("9865"),s("6b54"),s("87b3"),s("7514"),s("7f7f"),s("2ef0")),o=s("1d3c"),c=s("b593"),l=s("0971"),d=s("7138"),u=s("1122"),h=s("7b73"),p=s("0551"),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{staticClass:"fn-setting",attrs:{width:"540"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",[e._v(e._s(e.title))])]),s("Form",{ref:"setting",staticClass:"setting-content",style:{height:e.modalHeight},attrs:{model:e.setting,rules:e.rules,"label-width":90}},[s("FormItem",{attrs:{label:e.$t("message.functionSetting.HSM"),prop:"name"}},[s("Input",{model:{value:e.setting.name,callback:function(t){e.$set(e.setting,"name",t)},expression:"setting.name"}})],1),s("FormItem",{attrs:{label:e.$t("message.functionSetting.HSLX"),prop:"fnType"}},[s("RadioGroup",{on:{"on-change":e.onTypeChange},model:{value:e.setting.fnType,callback:function(t){e.$set(e.setting,"fnType",t)},expression:"setting.fnType"}},[e.isUdf?s("Radio",{attrs:{label:e.$t("message.functionSetting.TY")}}):e._e(),e.isUdf?s("Radio",{attrs:{label:"spark"}}):e._e(),e.isUdf?e._e():s("Radio",{attrs:{label:e.$t("message.functionSetting.ZDYHS")}})],1)],1),e.fnCategory.isCommon?s("FormItem",{attrs:{label:e.$t("message.functionSetting.B"),prop:"jarPath"}},[s("directory-dialog",{attrs:{tree:e.tree,"load-data-fn":e.loadDataFn,"filter-node":e.filterNode,path:e.fnPath,"fs-type":"share"},on:{"set-node":e.setNodePath}})],1):e._e(),e.fnCategory.isSpark?s("FormItem",{attrs:{label:e.$t("message.functionSetting.JBLU"),prop:"sparkPath"}},[s("directory-dialog",{attrs:{tree:e.tree,"load-data-fn":e.loadDataFn,"filter-node":e.filterNode,path:e.fnPath,"fs-type":"share"},on:{"set-node":e.setNodePath}})],1):e._e(),e.fnCategory.isCustom?s("FormItem",{attrs:{label:e.$t("message.functionSetting.JBLU"),prop:"customPath"}},[s("directory-dialog",{attrs:{tree:e.tree,"load-data-fn":e.loadDataFn,"filter-node":e.filterNode,path:e.fnPath,"fs-type":"share"},on:{"set-node":e.setNodePath}})],1):e._e(),0===e.fnType&&e.fnCategory.isCommon?s("FormItem",{attrs:{label:e.$t("message.functionSetting.ZCGS"),prop:"jarPara"}},[s("Input",{attrs:{placeholder:e.$t("message.functionSetting.ZCHS")},model:{value:e.setting.jarPara,callback:function(t){e.$set(e.setting,"jarPara",t)},expression:"setting.jarPara"}})],1):1===e.fnType&&e.fnCategory.isSpark?s("FormItem",{attrs:{label:e.$t("message.functionSetting.ZCGS"),prop:"pyPara"}},[s("Input",{attrs:{placeholder:e.$t("message.functionSetting.ZCHS")},model:{value:e.setting.pyPara,callback:function(t){e.$set(e.setting,"pyPara",t)},expression:"setting.pyPara"}})],1):2===e.fnType&&e.fnCategory.isSpark?s("FormItem",{attrs:{label:e.$t("message.functionSetting.ZCGS"),required:""}},[s("div",{staticClass:"format-div"},[s("FormItem",{attrs:{prop:"scalaTypeL"}},[s("Input",{staticClass:"format-input",attrs:{placeholder:e.$t("message.functionSetting.FHLX")},on:{input:e.resetRF},model:{value:e.setting.scalaTypeL,callback:function(t){e.$set(e.setting,"scalaTypeL",t)},expression:"setting.scalaTypeL"}})],1),s("FormItem",{attrs:{prop:"scalaTypeR"}},[s("Input",{staticClass:"format-input",attrs:{placeholder:e.$t("message.functionSetting.CSLX")},on:{input:e.resetRF},model:{value:e.setting.scalaTypeR,callback:function(t){e.$set(e.setting,"scalaTypeR",t)},expression:"setting.scalaTypeR"}})],1),s("FormItem",{attrs:{prop:"scalapara"}},[s("Input",{attrs:{placeholder:e.$t("message.functionSetting.ZCHS")},model:{value:e.setting.scalapara,callback:function(t){e.$set(e.setting,"scalapara",t)},expression:"setting.scalapara"}})],1)],1)]):e._e(),e.fnType>=0&&e.fnType<3?s("FormItem",{attrs:{label:e.$t("message.functionSetting.YLLX")}},[s("span",{attrs:{title:e.registerFormat}},[0===e.fnType&&e.fnCategory.isCommon?s("jar-preview",{attrs:{name:e.setting.name,"jar-para":e.setting.jarPara}}):1===e.fnType&&e.fnCategory.isSpark?s("py-preview",{attrs:{name:e.setting.name,"py-para":e.setting.pyPara}}):2===e.fnType&&e.fnCategory.isSpark?s("scala-preview",{attrs:{name:e.setting.name,"type-l":e.setting.scalaTypeL,"type-r":e.setting.scalaTypeR,para:e.setting.scalapara}}):e._e()],1)]):e._e(),s("FormItem",{attrs:{label:e.$t("message.functionSetting.SYGS"),required:""}},[s("div",{staticClass:"format-div"},[s("FormItem",{staticClass:"format-item"},[2===e.fnType?s("Input",{staticClass:"format-input",attrs:{placeholder:e.$t("message.functionSetting.FHLX"),disabled:""},model:{value:e.setting.scalaTypeL,callback:function(t){e.$set(e.setting,"scalaTypeL",t)},expression:"setting.scalaTypeL"}}):s("Input",{staticClass:"format-input",attrs:{placeholder:e.$t("message.functionSetting.FHLX")},model:{value:e.setting.useFormatParaL,callback:function(t){e.$set(e.setting,"useFormatParaL",t)},expression:"setting.useFormatParaL"}})],1),s("FormItem",{staticClass:"format-item"},[2===e.fnType?s("Input",{attrs:{placeholder:e.$t("message.functionSetting.SRLX"),disabled:""},model:{value:e.setting.scalaTypeR,callback:function(t){e.$set(e.setting,"scalaTypeR",t)},expression:"setting.scalaTypeR"}}):s("Input",{attrs:{placeholder:e.$t("message.functionSetting.SRLX")},model:{value:e.setting.useFormatParaR,callback:function(t){e.$set(e.setting,"useFormatParaR",t)},expression:"setting.useFormatParaR"}})],1)],1)]),s("FormItem",{attrs:{label:e.$t("message.functionSetting.YLLX")}},[s("use-preview",{attrs:{name:e.setting.name,"para-l":2===e.fnType?e.setting.scalaTypeL:e.setting.useFormatParaL,"para-r":2===e.fnType?e.setting.scalaTypeR:e.setting.useFormatParaR,title:e.useFormat}})],1),s("FormItem",{attrs:{label:e.$t("message.functionSetting.HSMS")}},[s("Input",{attrs:{type:"textarea"},model:{value:e.setting.description,callback:function(t){e.$set(e.setting,"description",t)},expression:"setting.description"}})],1)],1),s("template",{slot:"footer"},[s("Checkbox",{staticClass:"fn-default-load",model:{value:e.setting.defaultLoad,callback:function(t){e.$set(e.setting,"defaultLoad",t)},expression:"setting.defaultLoad"}},[e._v(e._s(e.$t("message.functionSetting.MRJZ")))]),s("Button",{staticClass:"fn-sure-btn",attrs:{loading:e.loading,type:"primary"},on:{click:function(t){return e.submitForm("setting")}}},[e._v(e._s(e.btnLabel))])],1)],2)},m=[],g=(s("a481"),s("57e7"),s("456d"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"preview"},[s("span",[e._v("create temporary function ")]),s("span",{staticClass:"preview-name"},[e._v(e._s(e.name))]),s("span",[e._v(' as "')]),s("span",{staticClass:"preview-params"},[e._v(e._s(e.jarPara))]),s("span",[e._v('"')])])}),b=[],v={props:{name:String,jarPara:String}},y=v,w=(s("b284"),s("2877")),T=Object(w["a"])(y,g,b,!1,null,null,null),S=T.exports,E=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"preview",attrs:{title:e.title}},[s("span",{staticClass:"preview-type"},[e._v(e._s(e.paraL)+" ")]),s("span",{staticClass:"preview-name"},[e._v(e._s(e.name))]),s("span",[e._v("(")]),s("span",{staticClass:"preview-type"},[e._v(e._s(e.paraR))]),s("span",[e._v(")")])])},N=[],C={props:{name:String,paraL:String,paraR:String,title:String}},k=C,O=Object(w["a"])(k,E,N,!1,null,null,null),x=O.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"preview"},[s("span",[e._v('udf.register("')]),s("span",{staticClass:"preview-name"},[e._v(e._s(e.name))]),s("span",[e._v('", ')]),s("span",{staticClass:"preview-params"},[e._v(e._s(e.pyPara))]),s("span",[e._v(")")])])},R=[],D={props:{name:String,pyPara:String}},L=D,A=Object(w["a"])(L,I,R,!1,null,null,null),P=A.exports,_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"preview"},[s("span",[e._v("sqlContext.udf.register[")]),s("span",{staticClass:"preview-type"},[e._v(e._s(e.typeL))]),s("span",[e._v(", ")]),s("span",{staticClass:"preview-type"},[e._v(e._s(e.typeR))]),s("span",[e._v(']("')]),s("span",{staticClass:"preview-name"},[e._v(e._s(e.name))]),s("span",[e._v('", ')]),s("span",{staticClass:"preview-params"},[e._v(e._s(e.para))]),s("span",[e._v(")")])])},$=[],M={props:{name:String,typeL:String,typeR:String,para:String}},j=M,F=Object(w["a"])(j,_,$,!1,null,null,null),B=F.exports,H=s("ed93"),K={components:{jarPreview:S,pyPreview:P,scalaPreview:B,usePreview:x,directoryDialog:H["a"]},props:{loading:{type:Boolean,default:!1},tree:{type:Array,default:function(){return[]}},isUdf:{type:Boolean,defalut:!0},loadDataFn:Function,filterNode:Function},data:function(){return{fnCategory:{isSpark:!1,isCommon:!0,isCustom:!1},TYPELIB:{jar:0,spark:{py:1,scala:2},custom:{py:3,scala:4}},show:!1,title:this.$t("message.functionSetting.XZHS"),btnLabel:this.$t("message.functionSetting.LJCJ"),modalHeight:"",model:0,node:null,showScalaRF:"",showScalaUF:"",setting:{name:"",fnType:this.$t("message.functionSetting.TY"),jarPath:"",sparkPath:"",customPath:"",useFormatParaL:"",useFormatParaR:"",jarPara:"",pyPara:"",scalaTypeL:"",scalaTypeR:"",scalapara:"",description:"",defaultLoad:!0},isShareLoading:!1,rules:{name:[{required:!0,message:this.$t("message.functionSetting.QSRMC"),trigger:"blur"},{min:1,max:100,message:this.$t("message.functionSetting.CDZ"),trigger:"change"},{type:"string",pattern:/^[a-zA-Z][a-zA-Z0-9_\u4e00-\u9fa5]*$/,message:this.$t("message.functionSetting.BXYZMKT"),trigger:"change"}],fnType:[{required:!0,message:this.$t("message.functionSetting.QZSXZYZLX"),trigger:"change"}],jarPath:[{required:!0,message:this.$t("message.functionSetting.QSRWZLJ"),trigger:"change"},{type:"string",pattern:/^[\w\u4e00-\u9fa5:.\\/]*(jar)$/,message:this.$t("message.functionSetting.HZMZC"),trigger:"change"}],sparkPath:[{required:!0,message:this.$t("message.functionSetting.QSRWZLJ"),trigger:"change"},{type:"string",pattern:/^[\w\u4e00-\u9fa5:.\\/]*(py|scala)$/,message:this.$t("message.functionSetting.ZCPYSCA"),trigger:"change"}],customPath:[{required:!0,message:this.$t("message.functionSetting.QSRWZLJ"),trigger:"change"},{type:"string",pattern:/^[\w\u4e00-\u9fa5:.\\/]*(py|scala)$/,message:this.$t("message.functionSetting.ZCPYSCA"),trigger:"change"}],jarPara:[{required:!0,message:this.$t("message.functionSetting.SRZCHS"),trigger:"blur"}],pyPara:[{required:!0,message:this.$t("message.functionSetting.SRZCHS"),trigger:"blur"}],scalaTypeL:[{type:"string",required:!0,message:this.$t("message.functionSetting.SRFHLX"),trigger:"blur"}],scalaTypeR:[{type:"string",required:!0,message:this.$t("message.functionSetting.SRCSLX"),trigger:"blur"}],scalapara:[{type:"string",required:!0,message:this.$t("message.functionSetting.SRZCHS"),trigger:"blur"}]}}},computed:{fnPath:function(){return this.setting[this.getTypes()]},fnType:function(){var e=this.fnPath,t=e?e.substring(e.lastIndexOf(".")+1,e.length):"",s="";return s=this.fnCategory.isCommon?"jar":this.fnCategory.isSpark?"spark.".concat(t):"custom.".concat(t),Object(r["get"])(this.TYPELIB,s)},registerFormat:function(){return 0===this.fnType?"create temporary function ".concat(this.setting.name,' as "').concat(Object(r["trim"])(this.setting.jarPara),'"'):1===this.fnType?'udf.register("'.concat(this.setting.name,'",').concat(Object(r["trim"])(this.setting.pyPara).toLowerCase(),")"):2===this.fnType?"sqlContext.udf.register[".concat(this.firstUpperCase(this.setting.scalaTypeL),",").concat(this.firstUpperCase(this.setting.scalaTypeR),']("').concat(this.setting.name,'",').concat(Object(r["trim"])(this.setting.scalapara),")"):null},useFormat:function(){var e=Object(r["trim"])(this.setting.useFormatParaL)||"",t=Object(r["trim"])(this.setting.useFormatParaR)||"";return this.setting.useFormatParaL&&(1===this.fnType||3===this.fnType?e=Object(r["trim"])(this.setting.useFormatParaL).toLowerCase():2===this.fnType?(e=this.firstUpperCase(this.setting.scalaTypeL),t=this.firstUpperCase(this.setting.scalaTypeR)):4===this.fnType&&(e=this.firstUpperCase(this.setting.useFormatParaL),t=this.firstUpperCase(this.setting.useFormatParaR))),Object(r["trim"])("".concat(e," ").concat(this.setting.name,"(").concat(t,")"))}},watch:{loading:function(e){e||(this.show=!1)},"setting.fnType":function(e){var t=this,s={};s[this.$t("message.functionSetting.TY")]="isCommon",s["spark"]="isSpark",s[this.$t("message.functionSetting.ZDYHS")]="isCustom";var i=s[e];Object.keys(this.fnCategory).forEach((function(e){return t.fnCategory[e]=!1})),this.fnCategory[i]=!0}},mounted:function(){var e=this;window.addEventListener("resize",(function(){e.resize(window.innerHeight)}))},created:function(){this.resize(window.innerHeight)},methods:{open:function(e){var t=e.node;this.resetData();var s=[this.$t("message.functionSetting.XZHS"),this.$t("message.functionSetting.XGHS")],i=[this.$t("message.functionSetting.LJCJ"),this.$t("message.functionSetting.XG")];this.show=!0,this.node=t.data,this.node.isLeaf?(this.node.path="file://".concat(this.node.path),this.model=1,this.init()):(this.model=0,this.setting.fnType=this.isUdf?this.$t("message.functionSetting.TY"):this.$t("message.functionSetting.ZDYHS")),this.btnLabel=i[this.model],this.title=s[this.model]},init:function(){var e=this,t=this.node,s=t.name,i=t.shared,a=t.description,n=t.path,r=t.udfType,o=t.registerFormat,c=t.useFormat,l="spark";0===r?l=this.$t("message.functionSetting.TY"):r>2&&(l=this.$t("message.functionSetting.ZDYHS")),o&&this.convertRegisterFormat(),c&&this.convertUseFormat(s),this.setting=Object.assign({},this.setting,{name:s,shared:i,description:a,fnType:l}),this.$nextTick((function(){e.$set(e.setting,e.getTypes(),n)}))},close:function(){this.show=!1},convertRegisterFormat:function(){var e=this.node.registerFormat,t=function(t,s,i,a){return Object(r["trim"])(e.substring(e[i](t)+1,e[a](s)))};if(0===this.node.udfType)this.setting.jarPara=t('"','"',"indexOf","lastIndexOf");else if(1===this.node.udfType)this.setting.pyPara=t(",",")","indexOf","lastIndexOf");else{var s=e.slice(e.indexOf("["),e.indexOf("]"));s.indexOf(",")!==s.lastIndexOf(",")?(this.setting.scalaTypeL="",this.setting.scalaTypeR="",this.showScalaRF=this.node.registerFormat):(this.setting.scalaTypeL=t("[",",","indexOf","indexOf"),this.setting.scalaTypeR=t(",","]","indexOf","indexOf")),this.setting.scalapara=t(",",")","lastIndexOf","lastIndexOf")}},convertUseFormat:function(e){var t=this.node.useFormat,s=t.indexOf(e);if(s>0){var i=Object(r["trim"])(t.slice(0,s-1)),a=Object(r["trim"])(t.slice(s+e.length+1,t.lastIndexOf(")"))),n="useFormatPara";this.showScalaRF&&(this.showScalaUF=this.node.useFormat,n="scalaType"),this.$set(this.setting,"".concat(n,"L"),i),this.$set(this.setting,"".concat(n,"R"),a)}},handleShareChange:function(e){this.isShareLoading||(this.isShareLoading=!0)},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var s=t.setting,i=s.name,a=s.description,n=s.defaultLoad,r={name:i,description:a,path:t.fnPath,useFormat:t.useFormat,registerFormat:t.registerFormat,udfType:t.fnType,isLeaf:!0};t.model?(r=Object.assign(r,{shared:!1}),t.$emit("update",r)):(r=Object.assign(r,{defaultLoad:n}),t.$emit("add",r))}return!1}))},firstUpperCase:function(e){return Object(r["trim"])(e).replace(/\w+,*/g,(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}))},resetRF:function(){this.showScalaRF="",this.showScalaUF=""},resize:function(e){this.modalHeight=e-380+"px"},setNodePath:function(e){this.$set(this.setting,this.getTypes(),e.path)},getTypes:function(){return this.fnCategory.isCommon?"jarPath":this.fnCategory.isSpark?"sparkPath":"customPath"},onTypeChange:function(){this.$emit("type-change",this.setting.fnType)},resetData:function(){this.setting={name:"",fnType:"",jarPath:"",sparkPath:"",customPath:"",useFormatParaL:"",useFormatParaR:"",jarPara:"",pyPara:"",scalaTypeL:"",scalaTypeR:"",scalapara:"",description:"",defaultLoad:!0},this.showScalaRF="",this.showScalaUF=""}}},U=K,W=Object(w["a"])(U,f,m,!1,null,null,null),V=W.exports,X=V,Y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.node?s("Modal",{attrs:{width:"420"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("p",{attrs:{title:e.node.name}},[e._v(e._s(e.$t("message.functionShare.ZZGX",{name:e.node.name})))])]),s("div",[s("Form",{ref:"shareForm",attrs:{model:e.shareForm,rules:e.shareRule,"label-width":80,size:"small"}},[e.node.shared?e._e():s("Form-item",{attrs:{label:e.$t("message.functionShare.HSLX"),prop:"fnType"}},[s("Select",{staticStyle:{width:"300px"},attrs:{"label-in-value":""},on:{"on-change":e.handleChange},model:{value:e.shareForm.fnType,callback:function(t){e.$set(e.shareForm,"fnType",t)},expression:"shareForm.fnType"}},e._l(e.shareForm.list,(function(e){return s("Option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),s("Form-item",{attrs:{label:e.$t("message.functionShare.GXYH"),prop:"users"}},[s("Input",{staticStyle:{width:"300px"},attrs:{disabled:e.shareEditing,type:"textarea",placeholder:e.$t("message.functionShare.SRGXYH")},model:{value:e.shareForm.users,callback:function(t){e.$set(e.shareForm,"users",t)},expression:"shareForm.users"}})],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[e.shareEditing?s("Button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.modifyShare}},[e._v(e._s(e.$t("message.newConst.editor")))]):s("Button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v(e._s(e.$t("message.newConst.ok")))])],1)]):e._e()},z=[],G=(s("28a5"),{props:{loading:{type:Boolean,default:!1}},data:function(){return{show:!1,node:null,shareEditing:!1,selectedItem:null,shareForm:{fnType:null,list:[],users:""},shareRule:{fnType:[{required:!0,type:"number",message:this.$t("message.functionShare.XZGXHSLX"),trigger:"change"}],users:[{required:!0,message:this.$t("message.functionShare.ZSXZYWGXYH"),trigger:"change"}]}}},watch:{loading:function(e){e||(this.show=!1)},show:function(e){e||(this.shareEditing=!1,this.selectedItem=null,this.shareForm={fnType:null,list:[],users:""},this.$refs.shareForm.resetFields())}},methods:{open:function(e){var t=e.shareUser,s=e.tree,i=e.node;e.isView&&(this.shareEditing=!0,this.shareForm.users=t),this.shareForm.list=s,this.node=i.data,this.show=!0},handleChange:function(e){this.selectedItem=e},modifyShare:function(){this.shareEditing=!1},submit:function(){var e=this;this.$refs.shareForm.validate((function(t){if(!t)return e.$Message.warning(e.$t("message.newConst.failedNotice"));var s=e.shareForm,i=s.fnType,a=s.users,n={sharedUsers:a.split(",")},o="update-share";e.node.shared||(n={shareParentId:i,sharedUsers:Object(r["uniq"])(a.split(","))},o="add-share"),e.$emit(o,n),e.show=!1}))}}}),Z=G,J=Object(w["a"])(Z,Y,z,!1,null,null,null),q=J.exports,Q=q,ee={name:"FnSidebar",components:{weFileTree:u["a"],newDialog:p["a"],settingModal:X,deleteDialog:h["a"],shareModal:Q},props:{type:{type:String,default:"udf"},model:String,node:Object},data:function(){return{FNTYPE:"udf"===this.type?"udf":"function",loading:!1,navList:["search","refresh"],currentNode:{},searchText:"",nodeProps:{children:"childrens",label:"name",icon:"icon",isLeaf:"isLeaf"},fnTree:[],shareTree:[],loadShareTreeFn:Function,workSpaceComponent:null,isUdfManager:!1,compLoading:!1,treeLoading:!1,filterNode:function(){},newDialog:{type:"文件夹",isNew:!0,node:{}}}},computed:{isLeaf:function(){return this.currentNode&&this.currentNode.isLeaf},isOwn:function(){return this.currentNode&&this.currentNode.data&&"self"===this.currentNode.data.type},isRoot:function(){return this.currentNode&&1===this.currentNode._level},isUnShare:function(){return this.currentNode&&this.currentNode.data&&!this.currentNode.data.shared&&0!==this.currentNode.data.udfType}},created:function(){var e=this;this.initTreeData(),this.$nextTick((function(){c["a"].fetch("/udf/authenticate").then((function(t){e.isUdfManager=t.isUDFManager}))}))},methods:{initTreeData:function(){var e=this,t=this.getName(),s=d["a"].get(t,"SESSION");if(!s||Object(r["isEmpty"])(s)){this.treeLoading=!0;var i=setTimeout((function(){e.compLoading=!0}),2e3);c["a"].fetch("/udf/list",{type:"self",treeId:-1,category:this.FNTYPE}).then((function(s){clearTimeout(i),e.treeLoading=!1,e.compLoading=!1,e.fnTree=Object(r["map"])(s.udfTree.childrens,(function(t){return e.handleTree(t)})),d["a"].set(t,e.fnTree,"SESSION")})).catch((function(){clearTimeout(i),e.treeLoading=!1,e.compLoading=!1}))}else this.fnTree=s},setSearchText:function(e){if(this.treeLoading)return this.$Message.warning(this.$t("message.constants.warning.data"));this.searchText=e},benchContextMenu:function(e){var t=e.node,s=e.ev;this.currentNode=t,this.$refs.treeContextMenu.open(s)},benchClick:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.currentNode=t[0].node},benchCheck:function(){var e=this;if(this.loading)return this.$Message.warning(this.$t("message.constants.warning.waiting"));for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];var a=s[0].node.data,n="/udf/isload";this.loading=!0,c["a"].fetch(n,{udfId:a.id,isLoad:a.load},"get").then((function(){e.loading=!1,a.load?e.$Message.success(e.$t("message.fnSideBar.success.load")):e.$Message.success(e.$t("message.fnSideBar.success.cancelLoading")),d["a"].set(e.getName(),e.fnTree),e.getLoadingFnList()})).catch((function(){a.load=!a.load,e.loading=!1}))},newNode:function(e){if(this.loading)return this.$Message.warning(this.$t("message.constants.warning.waiting"));if(!this.checkExist({isNew:!0,data:e,node:this.currentNode})){this.loading=!0;var t=null,s=null;e.isLeaf?(s="/udf/add",t={isShared:e.shared,udfInfo:{udfName:e.name,description:e.description,path:e.path,shared:!1,useFormat:e.useFormat,expire:!1,load:e.defaultLoad,registerFormat:e.registerFormat,treeId:this.currentNode.data.id,udfType:e.udfType}},this.calling(s,t,"new",e.isLeaf)):(s="/udf/tree/add",t={parent:this.currentNode.data.id,name:e.name,description:e.description,category:this.FNTYPE},this.calling(s,t,"new",e.isLeaf))}},updateNode:function(e){if(this.loading)return this.$Message.warning(this.$t("message.constants.warning.waiting"));if(e.name===this.currentNode.label||!this.checkExist({isNew:!1,data:e,node:this.currentNode})){this.loading=!0;var t=null,s=null;e.isLeaf?(s="/udf/update",t={isShared:e.shared,udfInfo:{id:this.currentNode.data.id,udfName:e.name,description:e.description,path:e.path,shared:e.shared,useFormat:e.useFormat,load:!0,expire:!1,registerFormat:e.registerFormat,treeId:this.currentNode.parent.data.id,udfType:e.udfType}}):(s="/udf/tree/update",t={id:this.currentNode.data.id,parent:this.currentNode.parent.data.id,name:e.name,description:e.description,category:this.FNTYPE}),this.calling(s,t,"edit",e.isLeaf)}},calling:function(e,t,s,i){var a=this,n=this.$t("message.constants.success.update");"new"===s&&(n=i?this.$t("message.fnSideBar.success.addUdf"):this.$t("message.fnSideBar.success.addFolder")),c["a"].fetch(e,t).then((function(){a.$Message.success(n),a.loading=!1,a.refresh(s),i&&a.getLoadingFnList()})).catch((function(){a.loading=!1}))},checkExist:function(e){var t=e.isNew,s=e.data,i=e.node,a=t?i.data.childrens:i.parent.data.childrens,n=Object(r["find"])(a,(function(e){return e.name===s.name&&e.isLeaf===s.isLeaf})),o=s.isLeaf?"".concat(this.$t("message.constants.error.functionExists")).concat(s.name):"".concat(this.$t("message.constants.error.folderExists")).concat(s.name);if(n)return this.$Message.warning(o)},openModal:function(e,t){if("fn"===t){var s=this.$t("message.deleteType.common");!e&&this.currentNode.data.udfType>0&&(s="");var i="udf"===this.FNTYPE?s:"";this.changeFnType(i)}if("fn"===t){var a={node:this.currentNode,type:this.$t("message.deleteType.folder"),isNew:e};this.$refs[t].open(a)}else this.newDialog={type:this.$t("message.deleteType.folder"),isNew:e,node:this.currentNode},this.$refs[t].open()},openDeleteModal:function(){var e=this;if(this.currentNode.data.shared)this.$Message.warning(this.$t("message.fnSideBar.warning.functionShared"));else{var t=this.currentNode.isLeaf,s={type:t?this.$t("message.deleteType.function"):this.$t("message.deleteType.folder"),name:this.currentNode.label},i=this.$t("message.fnSideBar.warning.noEmpty");t?this.$refs.delete.open(s):this.currentNode.childrens&&this.currentNode.childrens.length?this.$Message.warning(i):!this.currentNode.childrens||Object(r["isEmpty"])(this.currentNode.childrens)?this.refresh().then((function(t){Object(r["isEmpty"])(t)?e.$refs.delete.open(s):e.$Message.warning(i)})):this.$refs.delete.open(s)}},deleteNode:function(){var e,t,s=this;if(this.loading)return this.$Message.warning(this.$t("message.constants.warning.waiting"));this.loading=!0,this.currentNode.isLeaf?(e="/udf/delete/".concat(this.currentNode.data.id),t={isShared:this.currentNode.data.shared}):(e="/udf/tree/delete/".concat(this.currentNode.data.id),t={}),c["a"].fetch(e,t,"get").then((function(e){s.loading=!1,s.$Message.success(s.$t("message.constants.success.delete")),s.refresh("delete"),s.currentNode.isLeaf&&s.getLoadingFnList()})).catch((function(e){s.loading=!1}))},openShareModal:function(e){var t=this;if(this.treeLoading)return this.$Message.warning(this.$t("message.constants.warning.waiting"));this.treeLoading=!0,this.compLoading=!0;var s=this.fnTree.find((function(e){return"share"===e.type}));c["a"].fetch("/udf/list",{type:s.type,treeId:s.id,category:this.FNTYPE}).then((function(s){t.treeLoading=!1,t.compLoading=!1;var i=s.udfTree.childrens;if(t.currentNode.data.shared){var a={udfName:t.currentNode.data.name};c["a"].fetch("/udf/getSharedUsers",a).then((function(s){t.$refs.share.open({tree:i,node:t.currentNode,isView:!e,shareUser:s.shareUsers.toString()})}))}t.$refs.share.open({tree:i,node:t.currentNode,isView:!e})})).catch((function(e){t.treeLoading=!1,t.compLoading=!1}))},shareNode:function(e){var t=this;if(this.loading)return this.$Message.warning(this.$t("message.constants.warning.waiting"));this.loading=!0;var s=this.currentNode.data,i=s.path,a=i.slice(i.lastIndexOf("/")+1,i.length),n={fileName:a,shareParentId:e.shareParentId,sharedUsers:e.sharedUsers,udfInfo:{createUser:s.createUser,description:s.description,id:s.id,expire:s.expire,load:s.load,path:s.path,registerFormat:s.registerFormat,shared:s.shared,treeId:s.treeId,udfName:s.udfName,udfType:s.udfType,useFormat:s.useFormat}};c["a"].fetch("/udf/shareUDF",n).then((function(){t.loading=!1,t.$Message.success("".concat(t.$t("message.fnSideBar.success.shareFunction"),"：").concat(t.currentNode.data.name)),t.refresh("edit")})).catch((function(e){t.loading=!1}))},updateShareNode:function(e){var t=this;if(this.loading)return this.$Message.warning(this.$t("message.constants.warning.waiting"));var s={udfName:this.currentNode.data.name,sharedUsers:e.sharedUsers};c["a"].fetch("/udf/updateSharedUsers",s).then((function(){t.loading=!1,t.$Message.success(t.$t("message.fnSideBar.success.updateShareUser"))})).catch((function(e){t.loading=!1}))},handleExpired:function(){var e=this;this.$Modal.confirm({title:this.$t("message.fnSideBar.confirm.title"),content:this.$t("message.fnSideBar.confirm.content"),onOk:function(){var t={udfId:e.currentNode.data.id,udfName:e.currentNode.data.name};c["a"].fetch("/udf/setExpire",t).then((function(t){e.currentNode.data.shared=!1,e.$Message.success(e.$t("message.fnSideBar.success.functionExpired"))}))},onCancel:function(){}})},handleTree:function(e){var t=this,s=["sys","bdp","share"].includes(e.userName)?e.userName:"self",i="sys"===s;if(e.hasOwnProperty("childrens")){var a=e.childrens||e.udfInfos;e.childrens&&e.udfInfos&&(a=[].concat(Object(n["a"])(e.childrens),Object(n["a"])(e.udfInfos)));var o=Object(r["map"])(a,(function(e){return e.userName=s,t.handleTree(e)}));return{id:e.id,name:e.name,description:e.description,parent:e.parent,userName:e.userName,childrens:o,expanded:!1,isLeaf:!1,hasFileOpen:!1,isShow:!0,hasModify:!1,type:s}}return Object.assign({name:e.udfName,isLeaf:!0,isFn:!0,isShow:!0,disabled:i,type:s},e)},loadDataFn:function(e,t){var s=this;this.treeLoading=!0,this.compLoading=!0,c["a"].fetch("/udf/list",{type:e.data.type,treeId:e.data.id,category:this.FNTYPE}).then((function(i){if(s.treeLoading=!1,s.compLoading=!1,!e.isLeaf){var a=s.handleTree(i.udfTree).childrens;t(a),s.$nextTick((function(){d["a"].set(s.getName(),s.fnTree,"SESSION")}))}t()})).catch((function(e){s.treeLoading=!1,s.compLoading=!1}))},lookForChangeNode:function(e,t,s){for(var i={tree:{id:"id",children:"childrens"},node:{id:"data.id",children:"computedNodes"}},a=i[s],n=0;n<t.length;n++){if(Object(r["get"])(t[n],a.id)===e)return t[n].expanded=!0,t[n];if(!Object(r["isEmpty"])(t[n][a.children])){var o=this.lookForChangeNode(e,t[n][a.children],s);if(o)return t[n].expanded=!0,o}}},refresh:function(e){var t=this;return new Promise((function(s,i){if(t.treeLoading)return t.$Message.warning(t.$t("message.constants.warning.data"));var a=t.currentNode.data.id;t.currentNode.isLeaf?a=t.currentNode.parent.data.id:"edit"!==e&&"delete"!==e||(a=t.currentNode.parent.data.id);var n=t.lookForChangeNode(a,t.fnTree,"tree");n?(t.treeLoading=!0,t.compLoading=!0,c["a"].fetch("/udf/list",{type:n.type,treeId:n.id,category:t.FNTYPE}).then((function(e){t.treeLoading=!1,t.compLoading=!1;var i=t.handleTree(e.udfTree).childrens;t.$set(n,"childrens",i),t.$nextTick((function(){var e=t.$refs.weFileTree.$refs.tree.root._childNodes;e=t.lookForChangeNode(a,e,"node"),e.expanded=!0,s(i),d["a"].set(t.getName(),t.fnTree,"SESSION")}))})).catch((function(e){t.treeLoading=!1,t.compLoading=!1}))):t.$Message.error(t.$t("message.constants.error.refresh"))}))},setFileTree:function(){var e=this;if(Object(r["isEmpty"])(this.shareTree)){var t=d["a"].get("scriptTree","SESSION");!t||t&&Object(r["isEmpty"])(t)?this.dispatch("WorkSidebar:showTree",(function(t){e.workSpaceComponent=t,t.getRootPath((function(s){t.getTree((function(s){s&&(e.shareTree.push(s),e.loadShareTreeFn=t.loadDataFn)}))}))})):(this.shareTree=Object(r["cloneDeep"])(t),this.workSpaceComponent?this.loadShareTreeFn=this.workSpaceComponent.loadDataFn:this.dispatch("WorkSidebar:showTree",(function(t){e.workSpaceComponent=t,e.loadShareTreeFn=t.loadDataFn})))}},copyName:function(){var e=this.currentNode.data.name;l["a"].executeCopy(e)},pasteName:function(){var e=this.currentNode.data.name;this.dispatch("Workbench:pasteInEditor",e,this.node)},changeFnType:function(e){var t=this;this.shareTree=[],this.$nextTick((function(){t.setFileTree()})),e===this.$t("message.deleteType.common")?this.filterNode=function(e){var t=e.label,s=t.substr(t.lastIndexOf("."),t.length);return!e.isLeaf||e.isLeaf&&".jar"===s}:this.filterNode=function(e){var t=e.label,s=t.substr(t.lastIndexOf("."),t.length);return!e.isLeaf||e.isLeaf&&(".py"===s||".scala"===s)}},getName:function(){return"".concat(this.FNTYPE,"Tree")},getLoadingFnList:function(){var e=this;o["default"].methods.getAllLoadedFunction((function(t){e.dispatch("IndexedDB:updateGlobalCache",{id:e.getUserName(),fnList:t.list}),e.dispatch("Workbench:getWorksLangList",(function(e){e.forEach((function(e){"hql"===e?d["a"].set("isFunctionChange_hql",!0):"python"===e&&d["a"].set("isFunctionChange_python",!0)}))}))}))}}},te=ee,se=(s("91f4"),Object(w["a"])(te,i,a,!1,null,null,null));t["default"]=se.exports},"256d":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"workflow-resource"},[s("div",{staticClass:"workflow-resource-upload"},[s("Upload",{ref:"upload",attrs:{action:e.updateUrl,headers:e.headers,data:e.uploadData,"default-file-list":e.uploadFiles,"max-size":e.maxSize,"before-upload":e.beforeUpload,"on-success":e.handleSuccess,"on-error":e.handleError,"on-progress":e.handleProgress,"on-exceeded-size":e.exceededSize,"on-remove":e.handleRemove,"on-preview":e.handlePreview,type:"drag",disabled:e.readonly}},[s("div",{staticStyle:{padding:"20px 0"}},[s("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),s("p",{staticClass:"el-upload__text"},[e._v(e._s(e.$t("message.project.resourceUpload")))])],1)])],1),e.isUploading?s("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)},a=[],n=(s("7f7f"),s("7514"),s("6d67"),s("2ef0")),r=s("b593"),o=s("0971"),c=s("66ed"),l={props:{resources:{type:Array,default:function(){return[]}},flowName:String,isRipetition:{type:Boolean,default:!1},nodeType:{type:String,default:""},readonly:{type:Boolean,default:!1}},data:function(){return{uploadFiles:[],updateUrl:"",uploadData:null,msg:null,path:null,maxSize:0,isUploading:!1}},computed:{headers:function(){return{}}},watch:{resources:function(e,t){this.setData(),e.length||this.reset()}},mounted:function(){this.init()},methods:{init:function(){this.updateUrl="".concat(c["default"].data.API_PATH,"bml/upload"),this.uploadData={system:"WTSS",isExpire:!0},this.maxSize=1024e3},setData:function(){this.resources.length&&(this.uploadFiles=this.resources.map((function(e){return e.name=e.fileName,e})))},reset:function(){this.uploadFiles=[],this.msg=null,this.path=null},beforeUpload:function(e){var t=this.uploadFiles.find((function(t){return t.name===e.name})),s=/^[-.\w\u4e00-\u9fa5]{1,200}\.[A-Za-z]+$/,i=e.size>=104857600;return this.isRipetition&&t&&(this.uploadData.resourceId=t.resourceId),t&&!this.isRipetition?(this.$Message.warning(this.$t("message.project.fileExist")),!1):s.test(e.name)?i?(this.$Message.warning(this.$t("message.project.uploadLimit")),!1):void 0:(this.$Message.warning(this.$t("message.project.uploadNameWar")),!1)},handleSuccess:function(e,t,s){0===e.status?(this.$Message.success(this.$t("message.project.uploadSuccess",{name:t.name})),this.isRipetition&&(Object(n["remove"])(s,(function(e){return e.name===t.name&&e.resourceId!==t.resourceId})),Object(n["remove"])(this.uploadFiles,(function(e){return e.name===t.name}))),this.uploadFiles.push(Object.assign(t,{fileName:t.name,resourceId:e.data.resourceId,version:e.data.version})),this.$emit("update-resources",this.uploadFiles)):(Object(n["remove"])(s,(function(e){return e.name===t.name})),this.$Message.warning(e.message)),this.isUploading=!1},handleError:function(e,t,s){this.$Message.error(t.message),this.isUploading=!1},handleProgress:function(e,t,s){"uploading"===t.status?this.isUploading=!0:this.isUploading=!1},exceededSize:function(e,t){this.$Message.warning(this.$t("message.project.uploadOver"))},handleRemove:function(e,t){var s=this;r["a"].fetch("/bml/deleteResource",{resourceId:e.resourceId},"post").then((function(t){Object(n["remove"])(s.uploadFiles,(function(t){return t.resourceId===e.resourceId})),s.$emit("update-resources",s.uploadFiles),s.$Message.success(s.$t("message.project.resourceDeleteSuccess"))}))},handlePreview:function(e,t){this.$Message.success(this.$t("message.project.copyNotice")),o["a"].executeCopy(e.name)}}},d=l,u=(s("0981"),s("2877")),h=Object(u["a"])(d,i,a,!1,null,null,null);t["default"]=h.exports},2630:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("ul",{staticClass:"we-toolbar"},["sql"!==e.script.runType&&"hql"!==e.script.runType||"Home"!==e.$route.name?e._e():s("li",{on:{click:function(t){return t.stopPropagation(),e.analysis(t)}}},[s("Icon",{attrs:{type:"md-analytics"}}),s("span",{staticClass:"v-toolbar-icon",attrs:{title:e.$t("message.workBench.body.script.toolbar.analysis")}},[e._v(e._s(e.$t("message.workBench.body.script.toolbar.analysis")))])],1),s("li",{style:{cursor:e.rsDownload?"pointer":"not-allowed"}},[e.rsDownload?s("Poptip",{attrs:{transfer:!0,width:275,placement:"right","popper-class":"we-poptip"},model:{value:e.popup.download,callback:function(t){e.$set(e.popup,"download",t)},expression:"popup.download"}},[s("div",{on:{click:function(t){return t.stopPropagation(),e.openPopup("download")}}},[s("svg",{staticClass:"icon",attrs:{t:"1560156352737",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5025","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"14",height:"14"}},[s("path",{attrs:{d:"M1024 640.192C1024 782.912 919.872 896 787.648 896h-512C123.904 896 0 761.6 0 597.504 0 451.968 94.656 331.52 226.432 302.976 284.16 195.456 391.808 128 512 128c152.32 0 282.112 108.416 323.392 261.12C941.888 413.44 1024 519.04 1024 640.192zM341.312 570.176L512 756.48l170.688-186.24H341.312z m213.376 0v-256H469.312v256h85.376z",fill:"#515a6e","p-id":"5026"}})]),s("span",{staticClass:"v-toolbar-icon",attrs:{title:e.$t("message.constants.download")}},[e._v(e._s(e.$t("message.constants.download")))])]),s("div",{attrs:{slot:"content"},slot:"content"},[s("div",[s("Row",[e._v("\n              "+e._s(e.$t("message.workBench.body.script.toolbar.format"))+"\n            ")]),s("Row",[s("RadioGroup",{model:{value:e.download.format,callback:function(t){e.$set(e.download,"format",t)},expression:"download.format"}},[s("Col",{attrs:{span:"10"}},[s("Radio",{attrs:{label:"1"}},[e._v("CSV")])],1),s("Col",{attrs:{span:"10",offset:"4"}},[s("Radio",{attrs:{label:"2"}},[e._v("Excel")])],1)],1)],1)],1),s("div",[s("Row",[e._v("\n              "+e._s(e.$t("message.workBench.body.script.toolbar.coding"))+"\n            ")]),s("Row",[s("RadioGroup",{model:{value:e.download.coding,callback:function(t){e.$set(e.download,"coding",t)},expression:"download.coding"}},[s("Col",{attrs:{span:"10"}},[s("Radio",{attrs:{label:"1"}},[e._v("UTF-8")])],1),s("Col",{attrs:{span:"10",offset:"4"}},[s("Radio",{attrs:{label:"2"}},[e._v("GBK")])],1)],1)],1)],1),s("div",[s("Row",[e._v("\n              "+e._s(e.$t("message.container.toolbar.replace"))+"\n            ")]),s("Row",[s("RadioGroup",{model:{value:e.download.nullValue,callback:function(t){e.$set(e.download,"nullValue",t)},expression:"download.nullValue"}},[s("Col",{attrs:{span:"10"}},[s("Radio",{attrs:{label:"1"}},[e._v("NULL")])],1),s("Col",{attrs:{span:"10",offset:"4"}},[s("Radio",{attrs:{label:"2"}},[e._v(e._s(e.$t("message.container.toolbar.emptyString")))])],1)],1)],1)],1),s("Row",{staticClass:"confirm"},[s("Col",{attrs:{span:"10"}},[s("Button",{on:{click:function(t){return e.cancelPopup("download")}}},[e._v(e._s(e.$t("message.newConst.cancel")))])],1),s("Col",{attrs:{span:"10",offset:"4"}},[s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.confirm("download")}}},[e._v(e._s(e.$t("message.constants.submit")))])],1)],1)],1)]):s("div",[s("Icon",{attrs:{type:"ios-cloud-download-outline"}}),s("span",{staticClass:"v-toolbar-icon",attrs:{title:e.$t("message.constants.download")}},[e._v(e._s(e.$t("message.constants.download")))])],1)],1),e.row?s("li",{attrs:{title:e.$t("message.workBench.body.script.toolbar.rowToColumnTitle")},on:{click:function(t){return e.openPopup("rowView")}}},[s("svg",{staticClass:"icon",attrs:{t:"1560157194178",viewBox:"0 0 1076 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6108","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"14",height:"14"}},[s("path",{attrs:{d:"M353.840537 64.013023v114.282007c-93.722967-1.500318-185.804962 51.104569-229.056306 134.77072-32.233387 60.926961-45.712803 130.738616-45.665918 199.284378h71.804264c0.234425-81.720426 18.707085-173.567996 84.861716-227.977953 33.475837-25.786709 76.492757-35.163695 118.056244-35.749756v109.874824a15748.974859 15748.974859 0 0 0 175.068314-147.218668c-58.371733-49.041633-116.743466-98.13015-175.068314-147.24211z m276.902373 18.308563c-33.077315-1.078353-51.807843 33.335182-46.884926 62.919571 0.164097 232.385136-0.328194 464.817157 0.234425 697.178851 2.203592 32.608466 36.499915 46.228537 64.935622 42.079221 58.840582-0.609504 117.798377 1.265893 176.521747-0.937699 31.834865-5.274554 40.649231-39.102028 37.414171-66.52971-0.164097-230.861376 0.328194-461.769637-0.234425-692.60757-2.203592-32.631909-36.499915-46.25198-64.935622-42.102664h-167.050992z m-515.734186 519.391211c-33.147643-1.008026-54.105205 33.241413-49.088518 63.529075 0.632947 60.036148-1.289335 120.21295 0.984583 180.131886 4.94636 29.936025 36.804667 42.946592 64.115137 39.125471h379.580361V601.73624H115.008724z",fill:"#515a6e","p-id":"6109"}})]),s("span",{staticClass:"v-toolbar-icon"},[e._v(e._s(e.$t("message.workBench.body.script.toolbar.rowToColumn")))])]):e._e()]),s("table-row",{ref:"tableRow",attrs:{row:e.row}})],1)},a=[],n=s("c1df"),r=s.n(n),o=s("4de8"),c=s("9267"),l={components:{tableRow:c["default"]},mixins:[o["default"].mixin],props:{currentPath:{type:String,default:""},script:[Object],row:{type:Object,default:function(){}}},data:function(){var e=this.getRsDownload();return{rsDownload:e,popup:{download:!1,visual:!1,rowView:!1},download:{format:"1",coding:"1",nullValue:"1"}}},methods:{openPopup:function(e){"rowView"===e?this.$refs.tableRow.open():this.popup[e]=!0},cancelPopup:function(e){this.popup[e]=!1},confirm:function(e){this["".concat(e,"Confirm")](),this.cancelPopup(e)},downloadConfirm:function(){var e=this,t="1"===this.download.format?"csv":"xlsx",s="1"===this.download.coding?"utf-8":"gbk",i="1"===this.download.nullValue?"NULL":"BLANK",a=r.a.unix(r()().unix()).format("MMDDHHmm"),n="Result_".concat(this.script.fileName,"_").concat(a),c=o["default"].data.API_PATH+"filesystem/resultsetToExcel?path="+this.currentPath+"&charset="+s+"&outputFileType="+t+"&nullValue="+i+"&outputFileName="+n,l=document.createElement("a");l.setAttribute("href",c),l.setAttribute("download","");var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!0,!1,0,null);var u=l.dispatchEvent(d);this.$nextTick((function(){u&&e.$Message.success("下载成功，请到本地的download文件夹查看！")}))},analysis:function(){this.$emit("on-analysis")}}},d=l,u=s("2877"),h=Object(u["a"])(d,i,a,!1,null,null,null);t["default"]=h.exports},"266c":function(e,t,s){},2696:function(e,t,s){"use strict";var i=s("eb15"),a=s.n(i);a.a},2735:function(e,t,s){},"29bf":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"we-steps"},[s("Row",{staticClass:"we-steps-row-first"},[s("Col",{staticClass:"we-steps-title",attrs:{span:"2"}},[e._v(e._s(e.$t("message.workBench.body.script.steps.title")+"："))]),s("Col",{staticClass:"we-steps-child-col",attrs:{span:"22"}},e._l(e.renderList,(function(t,i){return s("div",{key:i,staticClass:"we-steps-child"},[s("span",{staticClass:"we-steps-child-wrapper"},[t.isFinish?s("Icon",{attrs:{size:"25",color:e.getIconColor(t,i),type:e.getIconType(t)}}):s("span",{staticClass:"we-steps-circle",class:e.getClasses(t)}),"FailedToGetResult"===t.value?s("Tooltip",{attrs:{placement:"right",theme:"light"}},[s("span",{staticClass:"we-steps-label",class:e.getClasses(t),staticStyle:{cursor:"pointer"}},[e._v(e._s(t.label))]),s("div",{staticStyle:{padding:"6px 10px"},attrs:{slot:"content"},slot:"content"},[s("p",{staticStyle:{"font-weight":"bold","line-height":"24px"}},[e._v(e._s(e.$t("message.constants.detail")))]),e._l(e.hoverList,(function(t,i){return s("p",{key:i,staticStyle:{"line-height":"24px"},style:{color:t.includes("失败")?"red":"#67c23a"}},[e._v(e._s(t))])}))],2)]):s("span",{staticClass:"we-steps-label",class:e.getClasses(t)},[e._v(e._s(t.label))])],1),i!==e.renderList.length-1&&t.isFinish?s("Icon",{attrs:{color:e.getArrowColor(t,i),type:"md-arrow-round-forward",size:"26"}}):e._e()],1)})),0)],1)],1)},a=[],n=(s("7514"),s("20d6"),s("57e7"),s("ac6a"),s("f3e2"),s("2ef0")),r={props:{stepList:{type:Array,default:function(){return[]}}},data:function(){return{stepsInfo:[{label:this.$t("message.workBench.body.script.steps.stepsInfo.Submitted"),value:"Submitted",status:["running"],isFinish:!1},{label:this.$t("message.workBench.body.script.steps.stepsInfo.Inited"),value:"Inited",status:["running"],isFinish:!1},{label:"...",value:"ellipsis",status:["running"],isFinish:!1},{label:this.$t("message.workBench.body.script.steps.stepsInfo.Scheduled"),value:"Scheduled",status:["running"],isFinish:!1},{label:this.$t("message.workBench.body.script.steps.stepsInfo.Running"),value:"Running",status:["running"],isFinish:!1},{label:this.$t("message.workBench.body.script.steps.stepsInfo.Succeed"),value:"Succeed",status:["running"],isFinish:!1},{label:this.$t("message.workBench.body.script.steps.stepsInfo.ResultLoading"),value:"ResultLoading",status:["running"],isFinish:!1},{label:this.$t("message.workBench.body.script.steps.stepsInfo.Completed"),value:"Completed",status:["completed"],isFinish:!1},{label:this.$t("message.workBench.body.script.steps.stepsInfo.Failed"),value:"Failed",status:["completed","failure"],isFinish:!1},{label:this.$t("message.workBench.body.script.steps.stepsInfo.Cancelled"),value:"Cancelled",status:["completed","warning"],isFinish:!1},{label:this.$t("message.workBench.body.script.steps.stepsInfo.FailedToGetResult"),value:"FailedToGetResult",status:["completed","failure"],isFinish:!0},{label:this.$t("message.workBench.body.script.steps.stepsInfo.FailedToGetResultPath"),value:"FailedToGetResultPath",status:["special"],step:1},{label:this.$t("message.workBench.body.script.steps.stepsInfo.FailedToGetResultList"),value:"FailedToGetResultList",status:["special"],step:2},{label:this.$t("message.workBench.body.script.steps.stepsInfo.FailedToGetResultFirst"),value:"FailedToGetResultFirst",status:["special"],step:3},{label:this.$t("message.workBench.body.script.steps.stepsInfo.WaitForRetry"),value:"WaitForRetry",status:["retry"],isFinish:!1},{label:this.$t("message.workBench.body.script.steps.stepsInfo.FailedToApply"),value:"FailedToApply",status:["failure"],isFinish:!0},{label:this.$t("message.workBench.body.script.steps.stepsInfo.FailedToExecute"),value:"FailedToExecute",status:["failure"],isFinish:!0},{label:this.$t("message.workBench.body.script.steps.stepsInfo.notResult"),value:"notResult",status:["running","warning"],isFinish:!1}],renderList:[],hoverList:[]}},watch:{stepList:{handler:function(){this.renderSteps()},deep:!0}},mounted:function(){this.renderSteps()},methods:{renderSteps:function(){var e=this;this.renderList=[];var t={isFinish:!0},s={isLoading:!1},i="WaitForRetry",a="FailedToGetResult",r="Scheduled";this.stepList.forEach((function(o,c){var l=Object(n["cloneDeep"])(e.findStep(o));if(-1!==l.status.indexOf("special")){var d=e.findStep(a);e.renderList.push(d),e.setHoverList(l)}else if(l.value===i){var u=e.stepList[c-1],h=u===r?"FailedToApply":"FailedToExecute",p=e.findStep(h);e.renderList.push(p),e.renderList.push(Object.assign(l,t,s))}else if("notResult"===l.value){var f=Object(n["last"])(e.renderList),m=e.renderList.length;"FailedToGetResult"===f.value&&e.renderList.splice(m-1,1),e.renderList.push(Object.assign(l,t,s))}else e.renderList.push(Object.assign(l,t,s));if(c===e.stepList.length-1)if(-1!==l.status.indexOf("running")){l.isLoading=!0;var g=e.stepsInfo.findIndex((function(e){return e.value===o}));-1!==g&&e.renderList.push(e.stepsInfo[g+1])}else if(l.value===i){l.isLoading=!0;var b=e.findStep(r);e.renderList.push(b)}}))},findStep:function(e){return this.stepsInfo.find((function(t){return t.value===e}))},setHoverList:function(e){switch(e.step){case 1:this.hoverList=["1.".concat(e.label)];break;case 2:this.hoverList=[this.$t("message.workBench.body.script.steps.hoverList.first"),"2.".concat(e.label)];break;case 3:this.hoverList=[this.$t("message.workBench.body.script.steps.hoverList.first"),this.$t("message.workBench.body.script.steps.hoverList.second"),"3.".concat(e.label)];break}},getArrowColor:function(e,t){var s=this.renderList[t+1];return this.getIconColor(s)},getIconColor:function(e){var t="#67c23a",s="#ed4014",i="#ddd",a="orange";return-1!==e.status.indexOf("failure")?s:-1!==e.status.indexOf("warning")?i:e.isFinish&&!e.isLoading?t:a},getIconType:function(e){var t="md-checkmark-circle",s="md-close-circle",i="md-alert",a="ios-navigate";return-1!==e.status.indexOf("failure")?s:-1!==e.status.indexOf("warning")?i:e.isFinish&&e.isLoading?a:t},getClasses:function(e){var t="";return"..."===e.label&&(t="ellipsis "),-1!==e.status.indexOf("failure")?t+="error":-1!==e.status.indexOf("warning")?t+="cancelled":e.isFinish&&!e.isLoading?t+="completed":e.isFinish&&e.isLoading&&(t+="loading"),t}}},o=r,c=s("2877"),l=Object(c["a"])(o,i,a,!1,null,null,null);t["default"]=l.exports},"2b78":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"we-file-navbar"},[s("we-searchbox",{ref:"searchbox",style:{width:e.getWidth()},attrs:{placeholder:e.placeholder},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),s("div",{staticClass:"we-file-navbar-nav"},[e.nav.isShowNav("export")?s("Icon",{staticClass:"navbar-cursor",attrs:{size:16,type:"ios-share-outline",title:e.$t("message.navBar.dataStudio.outTable")},on:{click:e.exportFrom}}):e._e(),e.nav.isShowNav("import")?s("Icon",{staticClass:"navbar-cursor",attrs:{size:20,type:"ios-archive-outline",title:e.$t("message.navBar.dataStudio.importHive")},on:{click:e.importTo}}):e._e(),e.nav.isShowNav("newFile")?s("Icon",{staticClass:"navbar-cursor",attrs:{size:16,type:"ios-add-circle-outline",title:e.addTitle},on:{click:e.addFile}}):e._e(),e.nav.isShowNav("refresh")?s("Icon",{staticClass:"navbar-cursor",attrs:{size:20,type:"ios-refresh",title:e.$t("message.constants.refresh")},on:{click:e.refresh}}):e._e()],1)],1)},a=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"we-search-wrap"},[s("input",{ref:"searchbox",attrs:{placeholder:"搜索……",type:"text"},domProps:{value:e.currentValue},on:{input:function(t){return e.$emit("input",t.target.value)},blur:function(t){return e.$emit("on-blur",t.target.value)}}})])},r=[],o={name:"WeSearchBox",props:{value:String},data:function(){return{currentValue:this.value}},watch:{value:function(e){this.currentValue=e}},methods:{onfocus:function(){this.$refs.searchbox.focus()}}},c=o,l=s("2877"),d=Object(l["a"])(c,n,r,!1,null,null,null),u=d.exports,h=(s("57e7"),s("d225")),p=s("b0b4"),f=function(){function e(t){Object(h["a"])(this,e),this.barType=t.barType,this.navList=t.navList}return Object(p["a"])(e,[{key:"isShowNav",value:function(e){return-1!==this.navList.indexOf(e)}}]),e}(),m=f,g={components:{weSearchbox:u},props:{navList:{type:Array,require:!0},placeholder:{type:String,default:function(){return this.$t("message.navBar.dataStudio.searchPlaceholder")}},addTitle:{type:String,default:function(){return this.$t("message.navBar.dataStudio.addTitle")}}},data:function(){return{nav:null,searchText:""}},watch:{searchText:function(e){this.$emit("text-change",e)}},created:function(){this.nav=new m({navList:this.navList})},methods:{showSearch:function(){var e=this;this.$nextTick((function(){e.$refs.searchbox.onfocus()}))},refresh:function(){this.searchText="",this.$emit("on-refresh")},addFile:function(){this.$emit("on-add")},importTo:function(){this.$emit("on-import")},exportFrom:function(){this.$emit("on-export")},getWidth:function(){var e=this.navList.length,t="23px";return 4===e?t="62px":3===e&&(t="39px"),"calc(100% - ".concat(t,")")}}},b=g,v=(s("4383"),Object(l["a"])(b,i,a,!1,null,null,null));t["a"]=v.exports},"2c1d":function(e,t,s){},"2c5a":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ide"},[e.leftSideNavList.length?s("div",{staticClass:"nav-list",class:{narrow:!(e.navHeight>=e.maxNavHeight&&e.navHeight>790)}},[s("div",{staticClass:"nav-warp"},e._l(e.leftSideNavList,(function(t,i){return s("div",{key:i,staticClass:"nav-item",class:{actived:t.isActive},attrs:{title:t.name},on:{click:function(s){return e.chooseLeftModule(t)}}},[s("span",{staticClass:"nav-icon",class:t.icon}),e.navHeight>=e.maxNavHeight&&e.navHeight>790?s("span",{staticClass:"nav-name"},[e._v("\n          "+e._s(t.name)+"\n        ")]):e._e()])})),0)]):e._e(),s("we-panel",{staticClass:"container",attrs:{diretion:"horizontal"}},[e.leftModule?s("we-panel-item",{staticClass:"left-panel",attrs:{index:1,width:200,"min-size":200,"max-size":400}},["workSpace"===e.leftModule.key?s("workSidebar"):e._e(),"database"===e.leftModule.key?s("hiveSidebar",{attrs:{node:e.node,model:e.model}}):e._e(),"udfFunction"===e.leftModule.key?s("fnSidebar",{key:"udf",attrs:{type:"udf",node:e.node,model:e.model}}):e._e(),"methodFunction"===e.leftModule.key?s("fnSidebar",{key:"method",attrs:{type:"method",node:e.node,model:e.model}}):e._e(),"hdfs"===e.leftModule.key?s("hdfsSidebar"):e._e()],1):e._e(),s("we-panel-item",{staticClass:"center-panel",attrs:{index:2},scopedSlots:e._u([{key:"default",fn:function(t){return[t.width?s("workbench",{attrs:{width:t.width,parameters:e.parameters,node:e.node,readonly:e.readonly}}):e._e()]}}])})],1)],1)},a=[],n=(s("28a5"),s("4de8")),r=s("5af5"),o=s("1d3c"),c=s("c122"),l=s("d02f"),d=s("bbdf"),u={components:{workbench:n["default"].component,workSidebar:r["default"].component,fnSidebar:o["default"].component,hiveSidebar:c["default"].component,hdfsSidebar:l["default"].component},props:{parameters:{type:Object,default:function(){return{content:"",params:{}}}},node:Object,readonly:{type:Boolean,default:!1}},data:function(){return{leftSideNavList:[],leftModule:null,level:0,navHeight:0}},computed:{maxNavHeight:function(){var e=115;return e*this.leftSideNavList.length+100},model:function(){return this.node&&(this.node.type.split(".")[1]||"")}},mounted:function(){this.init(),window.addEventListener("resize",this.resize)},beforeDestroy:function(){window.removeEventListener("resize",this.resize)},methods:{init:function(){this.leftSideNavList=this.setLeftSideNavList(),this.node&&this.node.type===d["b"].SHELL||this.chooseLeftModule(this.leftSideNavList[0]),this.resize()},setLeftSideNavList:function(){var e={key:"workSpace",name:this.$t("message.navList.workSpace"),isActive:!1,icon:"fi-project"},t={key:"database",name:this.$t("message.navList.database"),isActive:!1,icon:"fi-hivedb"},s={key:"udfFunction",name:this.$t("message.navList.udfFunction"),isActive:!1,icon:"fi-fx-udf"},i={key:"methodFunction",name:this.$t("message.navList.methodFunction"),isActive:!1,icon:"fi-fx-method"},a={key:"hdfs",name:this.$t("message.navList.hdfs"),isActive:!1,icon:"fi-disk"},n=[e,t,s,i,a];return this.node&&(n=this.node.type===d["b"].SHELL?[]:[t,s,i]),n},chooseLeftModule:function(e){this.leftModule&&this.leftModule.key!==e.key&&(this.leftModule.isActive=!1),e.isActive=!e.isActive,this.leftModule=e.isActive?e:null},resize:function(){this.navHeight=window.innerHeight},"IDE:saveNode":function(e,t){this.$emit("save",e,t)}}},h=u,p=(s("e667"),s("2877")),f=Object(p["a"])(h,i,a,!1,null,null,null);t["default"]=f.exports},"2d21":function(e,t,s){},"2dd5":function(e,t,s){},"2e77":function(e,t,s){"use strict";s("d92a");var i=s("2ef0"),a=s("02b1");t["a"]={data:function(){return{tableHeight:100}},mounted:function(){this.initEvents()},beforeDestroy:function(){a["a"].unbind(this.$el)},methods:{initEvents:function(){var e=this,t=Object(i["throttle"])((function(){e.resize()}));a["a"].bind(this.$el,t)},resize:function(){this.tableHeight=this.$el.clientHeight-40}}}},"2fce":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{staticClass:"field-modal",attrs:{title:e.$t("message.createTable.selectResource"),width:"320"},model:{value:e.isFieldModalShow,callback:function(t){e.isFieldModalShow=t},expression:"isFieldModalShow"}},[e.activedFieldItem?s("virtual-list",{ref:"fieldList",attrs:{size:28,remain:e.fieldList.length>10?10:e.fieldList.length,wtag:"ul"}},e._l(e.fieldList,(function(t,i){return s("li",{key:i,staticClass:"field-modal-li"},[s("input",{attrs:{type:"checkbox"},domProps:{checked:-1!==e.activedFieldItem.sourceFields.indexOf(t.name),value:t.name},on:{change:function(s){return e.hanlderCheck(t)}}}),s("span",{staticClass:"field-modal-li-label",on:{click:function(s){return e.hanlderCheck(t)}}},[e._v(e._s(t.name))])])})),0):e._e()],1)},a=[],n=(s("7f7f"),s("57e7"),s("7dc5")),r={components:{virtualList:n["a"]},props:{fieldList:{type:Array,default:function(){return[]}},activedFieldItem:{type:Object,default:function(){}}},data:function(){return{isFieldModalShow:!1}},methods:{open:function(){var e=this;this.$nextTick((function(){e.isFieldModalShow=!0}))},close:function(){this.isFieldModalShow=!1},hanlderCheck:function(e){var t=this.activedFieldItem.sourceFields.indexOf(e.name);-1===t?this.activedFieldItem.sourceFields.push(e.name):this.activedFieldItem.sourceFields.splice(t,1)}}},o=r,c=(s("e435"),s("2877")),l=Object(c["a"])(o,i,a,!1,null,null,null);t["default"]=l.exports},"30a0":function(e,t,s){e.exports=s.p+"img/appmap.c4992c69.png"},"314e":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"we-side-bar"},[s("we-navbar",{attrs:{"nav-list":e.navList},on:{"on-add":function(t){return e.openFileModal(!1)},"on-refresh":e.refresh,"text-change":e.setSearchText}}),s("we-file-tree",{ref:"weFileTree",staticClass:"we-side-bar-content",attrs:{tree:e.fileTree,"before-remove":e.beforeRemove,"before-change":e.beforeChange,"filter-text":e.searchText,"node-props":e.nodeProps,"load-data-fn":e.loadDataFn,loading:e.compLoading,"highlight-path":e.highlightPath,"is-root-default-open":e.isRootDefaultOpen},on:{"on-refresh":e.refresh,"work-bench-click":e.benchClick,"work-bench-edit":e.benchEdit,"work-bench-dblclick":function(t){return e.openToTABAction()},"work-bench-contextMenu":e.benchContextMenu}}),s("we-menu",{ref:"treeContextMenu",attrs:{id:"hdfs"}},[e.currentNode.isLeaf?s("we-menu-item",{on:{select:function(t){return e.openToTABAction()}}},[s("span",[e._v(e._s(e.$t("message.hdfs.contextMenu.openToTab")))]),s("span",[e._v("Ctrl+Enter")])]):e._e(),s("we-menu-item",{on:{select:e.copyPathAction}},[s("span",[e._v(e._s(e.$t("message.hdfs.contextMenu.copyPath")))]),s("span",[e._v("Alt+Shift+C")])]),s("we-menu-item",{staticClass:"ctx-divider"}),e.currentNode.isLeaf?e._e():s("we-menu-item",{on:{select:function(t){return e.openFileModal(!1)}}},[s("span",[e._v(e._s(e.$t("message.hdfs.contextMenu.addCatalog")))])]),e.currentNode.isLeaf?e._e():s("we-menu-item",{on:{select:e.openUploadModal}},[s("span",[e._v(e._s(e.$t("message.constants.upload")))])]),1!=e.currentNode._level?s("we-menu-item",{on:{select:e.handleEditBefore}},[s("span",[e._v(e._s(e.$t("message.constants.rename")))])]):e._e(),1!=e.currentNode._level?s("we-menu-item",{on:{select:e.openDeleteModal}},[s("span",[e._v(e._s(e.$t("message.constants.delete")))])]):e._e(),s("we-menu-item",{staticClass:"ctx-divider"}),e.currentNode.isLeaf?e._e():s("we-menu-item",{on:{select:e.refresh}},[s("span",[e._v(e._s(e.$t("message.constants.refresh")))])])],1),e.timeoutFlag?s("new-dialog",{ref:"newFile",attrs:{type:e.newDialog.type,"is-new":e.newDialog.isNew,node:e.newDialog.node,"is-leaf":e.newDialog.isLeaf,"default-path":e.newDialog.defaultPath,"is-desc-show":!1,"is-path-show":!0,tree:e.filterTree,"load-data-fn":e.loadDataFn,"filter-node":e.filterNode},on:{add:e.handleCreate}}):e._e(),s("upload-dialog",{ref:"upload",attrs:{refresh:e.refresh}}),s("we-import-to-hive",{ref:"impotToHive",attrs:{width:560,"fs-type":e.fsType,tree:e.filterTree,"load-data-fn":e.hiveDataLoadFn,"db-list":e.dbList,"filter-node":e.filterToHiveNode},on:{"get-hive":e.getHiveList,"get-tables":e.getHiveTableList,"get-content":e.getFileContent,"get-partitions":e.getPartitions,"on-type-change":e.changeTreeByType,export:e.exportToHive}}),s("delete-dialog",{ref:"delete",attrs:{loading:e.loading},on:{delete:e.handleDelete}})],1)},a=[],n=(s("6b54"),s("87b3"),s("57e7"),s("a481"),s("28a5"),s("ac6a"),s("f3e2"),s("9865"),s("7f7f"),s("2ef0")),r=s("b593"),o=s("0971"),c=s("7138"),l=s("d02f"),d=s("1122"),u=s("2b78"),h=s("0551"),p=s("377b"),f=s("b832"),m=s("7b73"),g="hdfs://",b={name:"WorkSidebar",components:{weFileTree:d["a"],weNavbar:u["a"],newDialog:h["a"],uploadDialog:p["a"],weImportToHive:f["a"],deleteDialog:m["a"]},data:function(){return{rootPath:"",currentNode:{},searchText:"",nodeProps:{children:"children",label:"name",icon:"icon",isLeaf:"isLeaf"},fileTree:[],filterTree:[],timeoutFlag:!1,navList:["search","newFile","refresh"],sharePath:"",shareTree:[],loadShareDataFn:function(){},fsType:"hdfs",dbList:[],hiveComponent:null,loading:!1,compLoading:!1,treeLoading:!1,highlightPath:"",isRootDefaultOpen:!0,newDialog:{type:"",isNew:!0,node:{},isLeaf:!1,defaultPath:""}}},computed:{isVaildType:function(){var e;if(this.currentNode&&this.currentNode.data){var t=this.currentNode.data.name,s=[".xlsx",".xls",".csv",".txt"],i=t.substr(t.lastIndexOf("."),t.length);e=-1!==Object(n["indexOf"])(s,i)}return e}},mounted:function(){this.initData(),this.getAcitveTabAndSetHighlight()},methods:{initData:function(){var e=this,t=c["a"].get("hdfsTree","SESSION");!t||Object(n["isEmpty"])(t)?(this.compLoading=!0,this.treeLoading=!0,this.getRootPath((function(t){t?e.getTree((function(t){e.treeLoading=!1,e.compLoading=!1,t&&(e.fileTree.push(t),c["a"].set("hdfsTree",e.fileTree,"SESSION"))})):(e.treeLoading=!1,e.compLoading=!1)}))):(this.fileTree=t,this.timeoutFlag=!0)},changeTreeByType:function(e){var t=this;"share"===e?(this.filterTree=Object(n["cloneDeep"])(this.fileTree),this.hiveDataLoadFn=this.loadDataFn):"hdfs"===e&&this.getHdfsTree().then((function(e){var s=e.hdfsTree,i=e.loadDataFn;t.filterTree=Object(n["cloneDeep"])(s),t.hiveDataLoadFn=i}))},getRootPath:function(e){var t=this;this.rootPath=c["a"].get("hdfsRootPath","SESSION"),this.rootPath?e(!0):r["a"].fetch("/filesystem/getUserRootPath",{pathType:"hdfs"},"get").then((function(s){s.userHDFSRootPath?(c["a"].set("hdfsRootPath",s.userHDFSRootPath,"SESSION"),t.rootPath=s.userHDFSRootPath,e(!0)):(t.$Message.warning(t.$t("message.hdfs.warning.noRootPath")),e(!1))})).catch((function(){e(!1)}))},getTree:function(e){var t=this,s=setTimeout((function(){t.compLoading=!0}),2e3);r["a"].fetch("/filesystem/getDirFileTrees",{path:this.rootPath},"get").then((function(i){if(clearTimeout(s),t.compLoading=!1,i){var a=i.dirFileTrees;e(a),c["a"].set("hdfsTree",[a],"SESSION")}t.timeoutFlag=!0})).catch((function(){t.compLoading=!1,e(!1)}))},setSearchText:function(e){if(this.treeLoading)return this.$Message.warning(this.$t("message.constants.warning.data"));this.searchText=e},beforeRemove:function(){},benchClick:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.currentNode=t[0].node,this.$refs.treeContextMenu.close()},benchContextMenu:function(e){var t=e.node,s=e.ev;this.currentNode=t,this.$refs.treeContextMenu.open(s)},benchdbClick:function(e){var t=e.node;t.isLeaf&&this.openToTABAction(t.data)},openToTABAction:function(e){var t=e||this.currentNode.data,s=t.path;this.dispatch("Workbench:openFile",{path:s,filename:t.name,type:"hdfsScript",saveAs:!0},(function(){}))},copyPathAction:function(){o["a"].executeCopy(this.currentNode.data.path)},openFileModal:function(e){if(this.treeLoading)return this.$Message.warning(this.$t("message.constants.warning.data"));var t=this.currentNode.data;Object(n["isEmpty"])(this.currentNode)&&(this.currentNode=this.$refs.weFileTree.$refs.tree.root,t=this.currentNode.data[0]),this.filterTree=Object(n["cloneDeep"])(this.fileTree),this.fsType="hdfs",this.newDialog={type:this.$t("message.deleteType.catalog"),isNew:!0,node:t,isLeaf:e,defaultPath:t.path},this.$refs.newFile.open()},openUploadModal:function(){var e=[];this.currentNode.data.children&&this.currentNode.data.children.forEach((function(t){t.isLeaf&&e.push(t.name)})),this.$refs.upload.open({path:this.currentNode.data.path,nameList:e,apiPrefix:l["default"].data.API_PATH,type:g})},handleCreate:function(e){var t=this;this.handleCreating(e,(function(s){s&&(e.isLeaf&&t.openToTABAction(e),t.$Message.success(t.$t("message.constants.success.add")),setTimeout((function(){t.refresh("new",e.path)}),500))}))},handleCreating:function(e,t){r["a"].fetch("/filesystem/createNewDir",{path:e.path}).then((function(){t(!0)})).catch((function(){t(!1)}))},rename:function(e,t,s){r["a"].fetch("/filesystem/rename",{oldDest:t,newDest:e}).then((function(){s(!0)})).catch((function(){s(!1)}))},handleEditBefore:function(){this.currentNode.changeEditState(!0)},beforeChange:function(e,t){var s=this,i=e.node.path;i=i.slice(0,i.lastIndexOf("/")+1)+e.label;try{this.dispatch("Workbench:checkExist",{path:i},(function(a){if(a)return t(!1),s.$Message.error("".concat(s.$t("message.constants.error.fileExists"),"：").concat(i));r["a"].fetch("/filesystem/rename",{oldDest:e.node.path,newDest:i}).then((function(){t(!0)})).catch((function(){t(!1)}))}))}catch(o){var a=o;Object(n["isError"])(o)&&(a=o.message),this.$Message.error(a),t(!1)}},benchEdit:function(){var e=this,t=arguments.length<=0?void 0:arguments[0],s=t.node,i=t.oldLabel,a=s.data.path.slice(0,s.data.path.lastIndexOf("/")+1)+s.label,n={name:s.label,path:a};this.dispatch("Workbench:updateTab",{newNode:n,findWork:null,oldLabel:i}),this.$Message.success(this.$t("message.constants.success.update")),setTimeout((function(){e.refresh("edit")}),500)},openDeleteModal:function(){var e=this.currentNode.isLeaf,t=e?this.$t("message.deleteType.file"):this.$t("message.deleteType.folder");this.$refs.delete.open({type:t,name:this.currentNode.label})},handleDelete:function(){var e=this;if(this.loading)return this.$Message.warning(this.$t("message.constants.warning.waiting"));var t=this.currentNode.data.path;this.loading=!0,this.dispatch("Workbench:deleteDirOrFile",t,(function(){r["a"].fetch("/filesystem/deleteDirOrFile",{path:t}).then((function(){e.$Message.success(e.$t("message.constants.success.delete")),e.refresh("delete"),e.currentNode.remove(),e.loading=!1})).catch((function(){e.loading=!1}))}))},lookForChangeNode:function(e,t,s){var i={tree:{name:"name",children:"children"},node:{name:"label",children:"computedNodes"}},a=i[s],r=function(e,t,s){return e[s][t]},o=e?e.split("/"):"",c=t;return Object(n["forEach"])(o,(function(e){var t=Object(n["findIndex"])(c[a.children],(function(t){return t[a.name]===e}));t>=0&&(c=r(c,t,a.children),"node"===s&&(c.expanded=!0))})),c},hiveDataLoadFn:function(e,t){this.loadDataFn(e,t)},loadDataFn:function(e,t){var s=this;this.treeLoading=!0;var i=setTimeout((function(){s.compLoading=!0}),2e3);r["a"].fetch("/filesystem/getDirFileTrees",{path:e.data.path},"get").then((function(e){clearTimeout(i),s.compLoading=!1,s.treeLoading=!1;var a=e.dirFileTrees.children;t(a),s.$nextTick((function(){c["a"].set("hdfsTree",s.fileTree,"SESSION")}))})).catch((function(){clearTimeout(i),s.compLoading=!1,s.treeLoading=!1}))},filterNode:function(e){return!e.isLeaf},filterToHiveNode:function(e){if(!e.isLeaf)return!0;var t=e.label.substr(e.label.lastIndexOf("."),e.label.length),s=[".xlsx",".xls",".csv",".txt"],i=-1!==Object(n["indexOf"])(s,t);return i},setNode:function(e,t){if("hdfs"===t){var s=this.$refs.newFile;s&&(s.setting.path=e.path,s.node=e)}else this.sharePath=e.path},refresh:function(e,t){var s=this,i=function(){if(s.treeLoading)return s.$Message.warning(s.$t("message.constants.warning.data"));s.treeLoading=!0;var i=Object(n["isEmpty"])(s.currentNode)?s.rootPath:s.currentNode.data.path;if(s.currentNode.isLeaf||"edit"===e||"delete"===e?i=s.currentNode.data.parentPath:"new"===e&&t&&(i=t.slice(0,t.lastIndexOf("/"))),Object(n["isEmpty"])(s.fileTree))return s.initData();var a=setTimeout((function(){s.compLoading=!0}),2e3);r["a"].fetch("/filesystem/getDirFileTrees",{path:i},"get").then((function(e){if(clearTimeout(a),s.compLoading=!1,s.treeLoading=!1,i!==s.fileTree[0].path){var t=s.fileTree&&s.fileTree[0],n=i.replace(s.rootPath,"");t=s.lookForChangeNode(n,t,"tree"),s.$set(t,"children",e.dirFileTrees.children),s.$nextTick((function(){var e=s.$refs.weFileTree.$refs.tree.root.computedNodes[0];e=s.lookForChangeNode(i,e,"node"),e.expanded=!0}))}else s.$set(s.fileTree[0],"children",e.dirFileTrees.children);c["a"].set("hdfsTree",s.fileTree,"SESSION")})).catch((function(){clearTimeout(a),s.compLoading=!1,s.treeLoading=!1}))};if(this.rootPath)return i();this.getRootPath((function(e){e?i():(s.compLoading=!1,s.treeLoading=!1)}))},"HdfsSidebar:setHighLight":Object(n["debounce"])((function(e){if(!e)return this.highlightPath="";var t=e.filepath,s=this.getUserName(),i=t.split("/"),a=i.indexOf(s);i.splice(0,a),this.highlightPath=i.join("/")}),500),getAcitveTabAndSetHighlight:function(){var e=this;this.dispatch("IndexedDB:getTabs",(function(t){if(!Object(n["isEmpty"])(t)){var s=Object(n["find"])(t,(function(e){return e.actived}));if(s&&"hdfsScript"===s.type){var i="HdfsSidebar:setHighLight";e[i](s)}}}))},openImportToHiveDialog:function(e){var t=this,s="out"===e?"":this.currentNode.data.path;this.fsType="hdfs",this.filterTree=[],this.$nextTick((function(){t.filterTree=Object(n["cloneDeep"])(t.fileTree),t.$refs.impotToHive.open(s)}))},getHiveList:function(e){var t=this;this.dispatch("HiveSidebar:showHive",{},(function(s){var i="HiveSidebar:getDatabase";t.hiveComponent=s,s[i]("",(function(s){t.dbList=s,e(s)}))}))},getHiveTableList:function(e){var t=this,s="HiveSidebar:getTables";this.hiveComponent[s]({item:e},(function(s){var i=Object(n["find"])(t.dbList,(function(t){return t.name===e.name}));i.children=s}))},getPartitions:function(e,t){var s="HiveSidebar:getTablePartitions";this.hiveComponent[s]({item:e},(function(e){t(e)}))},getFileContent:function(e,t,s){var i=e.separator;"\\t"===e.separator?i="%5Ct":"%20"===e.separator&&(i=" ");var a=t?"":e.chartset,n=t?"":i,o=!1,c="";e.quote&&(o=!0,c=e.quote);var l="/filesystem/formate?path=".concat(e.exportPath,"&encoding=").concat(a,"&fieldDelimiter=").concat(n,"&hasHeader=").concat(e.isHasHeader,"&escapeQuotes=").concat(o,"&quote=").concat(c);r["a"].fetch(l,{},{method:"get",timeout:"600000"}).then((function(e){s(e.formate)})).catch((function(){s(!1)}))},exportToHive:function(e){var t=this,s=e.firstStep,i=e.secondStep,a=e.isXls,n=e.columns,r=e.whetherRepeat,c=r.duplicateName,l=r.partTable,d=r.duplicateValue,u=!1,h="",p=!1,f=!0;!l&&i.isOverwrite&&c&&!d?f=!1:c||(f=!1),i.partition&&i.partitionValue&&(p=!0);var m="%20"===s.separator?" ":s.separator;s.quote&&(u=!0,h=s.quote);var g=s.exportPath.slice(7,s.exportPath.length),b={path:g,pathType:s.type,encoding:a?"":s.chartset,fieldDelimiter:a?"":m,hasHeader:s.isHasHeader,sheet:i.moreSheet.toString(),quote:h,escapeQuotes:u},v={database:i.dbName,tableName:i.tbName,importData:f,isPartition:p,partition:i.partition,partitionValue:i.partitionValue,isOverwrite:i.isOverwrite,columns:n},y="".concat(i.dbName,".").concat(i.tbName),w="import_".concat(i.tbName,"_to_").concat(y),T='val destination = """'.concat(JSON.stringify(v),'"""\nval source = """').concat(JSON.stringify(b),'"""\ncom.webank.bdp.dataworkcloud.engine.imexport.LoadData.loadDataToTable(spark,source,destination)'),S=o["a"].md5(w);this.dispatch("Workbench:add",{id:S,filename:w+".scala",filepath:"",saveAs:!0,noLoadCache:!0,code:T},(function(e){if(!e)return t.$refs.impotToHive.close();t.$refs.impotToHive.close(),t.$nextTick((function(){t.dispatch("Workbench:run",{id:S,type:"storage",executionCode:{source:b,destination:v},backgroundType:"load"},(function(){t.$refs.impotToHive.loading=!1}))}))}))}}},v=b,y=(s("91f4"),s("2877")),w=Object(y["a"])(v,i,a,!1,null,null,null);t["default"]=w.exports},"32a2":function(e,t,s){var i={"./FAQ/index.js":"daf6","./common/iframe/index.js":"c6f0","./common/index.js":"466c","./dateReport/index.js":"c08f","./fnSidebar/index.js":"1d3c","./footer/index.js":"d3e2","./globalHistory/index.js":"d9a9","./globalValiable/index.js":"442d","./hdfsSidebar/index.js":"d02f","./header/index.js":"0a88","./hiveSidebar/index.js":"c122","./ide/index.js":"f7c4","./indexedDB/index.js":"f2ee","./logView/index.js":"032f","./process/index.js":"83f2","./project/index.js":"66ed","./resource/index.js":"a773","./resourceSimple/index.js":"8cfe","./setting/index.js":"f6db","./webSocket/index.js":"abe3","./workSidebar/index.js":"5af5","./workbench/index.js":"4de8","./workflow/index.js":"9f24"};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id="32a2"},"32bd":function(e,t,s){"use strict";s("6762"),s("2fdb"),s("7f7f"),s("c5f6"),s("55dd"),s("57e7"),s("9865"),s("78ce");var i=s("b593"),a=s("7a3f"),n=s("7138"),r=s("a026"),o=s("bc3a"),c=s.n(o),l=s("e069");function d(e,t){var s=this;this.$t=t,this.executeTimout=null,this.statusTimeout=null,this.timeout=6e5,this.beginTime=Date.now(),this.progress=0,this.id=null,this.status=null,this.taskID=null,this.postType=e.data.postType||"socket",delete e.data.postType,this.data=e,this.executionCode=null,this.model="normal",this.fromLine=e.fromLine||1,this.runType=e.data.runType,this.event=new r["default"],this.run=!1,this.resultsetInfo=null,this.resultList=[],this.currentResultPath="",this.nodeExecuteStop=!1,this.on("execute",(function(){s.run=!0})),this.on("execute:queryState",(function(){s.queryStatus({isKill:!1}),s.queryProgress()})),this.on("stateEnd",(function(){s.getResultPath()})),this.on("getResultList",(function(){s.getResultList()})),this.on("getResult",(function(){s.getFirstResult()})),this.on("stop",(function(){clearTimeout(s.executeTimout),clearTimeout(s.statusTimeout),s.run=!1})),this.on("kill",(function(){"http"===s.postType&&s.queryStatus({isKill:!0})})),this.on("data",(function(e){var t=e.data,a=e.execute;if("socket"===a.postType){if(t.data.hasOwnProperty("errorMsg"))return a.trigger("stop"),void a.trigger("error");var n=a.data.method;if(a.taskID){var r=t.data&&t.data.taskID,o=n.slice(0,n.lastIndexOf("/")+1);if(a.taskID!==r)return t.data.status?a.trigger("updateExpireHistory",t.data):void 0;if(t.method===o+"".concat(a.id,"/status"))b(a),h(a,t.data);else if(t.method===o+"".concat(a.id,"/progress"))b(a),a.trigger("progress",t.data);else if(t.method===o+"".concat(a.id,"/log"))b(a),a.trigger("log",t.data.log);else if(t.method===o+"".concat(a.id,"/waitingSize")){var c="**Waiting queue：".concat(a.$t("message.workBench.body.script.execute.waitingQueue",{num:t.data.waitingSize}));a.trigger("log",c),a.trigger("progress",{progress:0,progressInfo:[],waitingSize:t.data.waitingSize}),clearTimeout(a.executeTimout),clearTimeout(a.statusTimeout)}else t.data.status&&a.trigger("updateExpireHistory",t.data),clearTimeout(a.executeTimout),clearTimeout(a.statusTimeout)}else{var l=t.data&&t.data.websocketTag;a.data.websocketTag===l&&t.method===n&&(g(a),i["a"].fetch("/jobhistory/list",{pageSize:100,status:"Running,Inited,Scheduled"},"get").then((function(e){a.trigger("updateResource",e.tasks.length)})),m(a,t.data),s.trigger("steps","Inited"))}}})),this.on("downgrade",(function(e){var t=e.execute;t.postType="http",t.run&&t.queryStatus()})),this.on("dataError",(function(e){var t=e.data,i=e.execute;i.run=!1,-1===t.data.status?(a["a"].push("/login"),l["Message"].warning(t.message)):s.trigger("notice",{type:"warning",msg:t.message,autoJoin:!1})}))}function u(e,t){if("Cancelled"!==t.status)setTimeout((function(){e.queryStatus({isKill:!0})}),5e3);else{var s="查询已被取消";y(e,"warning",s)}}function h(e,t){switch(clearTimeout(e.executeTimout),e.status=t.status,e.trigger("steps",t.status),e.trigger("status",t.status),t.status){case"Inited":case"Scheduled":case"Running":if(t.status!==e.status&&e.updateLastHistory(),"socket"!==e.postType){if(e.nodeExecuteStop)return;setTimeout((function(){e.queryStatus({isKill:!1}),e.queryProgress(),e.queryLog()}),5e3)}break;case"Succeed":if((!e.fromLine||1===e.fromLine)&&"socket"!==e.postType){e.queryLog().then((function(){p(e)}));break}p(e);break;default:if((!e.fromLine||1===e.fromLine)&&"socket"!==e.postType){e.queryLog().then((function(){f(e,t)}));break}f(e,t);break}}function p(e){if("pipeline"!==e.runType){e.trigger("stateEnd");var t="**result tips: ".concat(e.$t("message.workBench.body.script.execute.success.stateEnd"));e.trigger("log",t)}else{var s="**result tips: ".concat(e.$t("message.workBench.body.script.execute.error.noResultList"));e.trigger("log",s),e.trigger("steps","notResult"),e.trigger("steps","Completed"),e.updateLastHistory("",(function(t){e.trigger("querySuccess",{type:"导入/导出",task:t})}))}e.trigger("stop")}function f(e,t){if("Failed"===t.status){var s=e.$t("message.workBench.body.script.execute.error.failed");y(e,"error",s)}if("Cancelled"===t.status){var i=e.$t("message.workBench.body.script.execute.error.canceled");y(e,"warning",i)}if("Timeout"===t.status){var a=e.$t("message.workBench.body.script.execute.error.executeTimeout");y(e,"error",a)}}function m(e,t){if(t.hasOwnProperty("errorMsg"))e.updateLastHistory(),e.trigger("stop"),e.trigger("error"),e.trigger("notice",{type:"error",msg:t.errorMsg.desc,autoJoin:!1});else{e.id=t.execID,e.taskID=t.taskID;var s=["qmlsql","qmlpy"].includes(e.runType),i=n["a"].get("outerUrl");s&&i&&e.outer(i,t),e.trigger("history",{taskID:t.taskID,execID:t.execID,createDate:e.beginTime,runningTime:0,status:"Inited",failedReason:""}),w(e,e.data.method).then((function(t){e.trigger("sendStart",t)}))}}function g(e){var t=6e4;clearTimeout(e.executeTimout),e.executeTimout=setTimeout((function(){e.trigger("stop"),e.trigger("error"),e.trigger("notice",{type:"error",msg:e.$t("message.workBench.body.script.execute.error.executeTimeout"),autoJoin:!0})}),t)}function b(e){var t=6e4;clearTimeout(e.statusTimeout),e.statusTimeout=setTimeout((function(){var t={method:"/api/rest_j/v1/entrance/".concat(e.id,"/status")};e.trigger("WebSocket:send",t)}),t)}function v(e,t){t.run=!1;var s="**result tips: ".concat(t.$t("message.workBench.body.script.execute.error.noResultList")),i="**result tips: ".concat(e,",").concat(t.$t("message.workBench.body.script.execute.error.errorLog")),a="Cannot read property 'children' of null"===e.message,n=a?s:i;t.trigger("log",n),a&&(t.trigger("steps","notResult"),t.trigger("steps","Completed"))}function y(e,t,s){e.updateLastHistory(),e.trigger("stop"),e.trigger("error"),e.trigger("notice",{type:t,msg:s,autoJoin:!0})}function w(e,t){return new Promise((function(s){var a=t.slice(t.lastIndexOf("/")+1,t.length);"backgroundservice"===a?(e.model="background",i["a"].fetch("/jobhistory/".concat(e.taskID,"/get"),"get").then((function(t){e.executionCode=t.task.executionCode,s(e.executionCode)})).catch((function(){e.executionCode=null}))):"execute"===a&&(e.model="normal",s(""))}))}d.prototype.start=function(){var e=this;setTimeout((function(){e.execute()}),0)},d.prototype.restore=function(e){var t=e.execID,s=e.taskID;this.id=t,this.taskID=s,this.run=!0,this.postType="http",this.trigger("execute:queryState")},d.prototype.halfExecute=function(e){var t=e.execID,s=e.taskID;this.id=t,this.taskID=s,this.run=!0,this.postType="http",this.trigger("execute:queryState")},d.prototype.on=function(e,t){this.event.$on(e,t)},d.prototype.off=function(){this.event.$off()},d.prototype.once=function(e,t){this.event.$once(e,t)},d.prototype.trigger=function(e,t){this.event.$emit(e,t)},d.prototype.execute=function(){if(this.trigger("execute"),"http"===this.postType)return this.httpExecute();this.trigger("WebSocket:send",this.data)},d.prototype.httpExecute=function(){var e=this;this.trigger("execute");var t=this.data.method.slice(this.data.method.indexOf("entrance"),this.data.method.length);i["a"].fetch(t,this.data.data).then((function(t){m(e,t),e.trigger("execute:queryState"),e.trigger("steps","Inited")})).catch((function(){e.trigger("stop"),e.trigger("error","execute")}))},d.prototype.outer=function(e,t){c.a.put(e,{need_repair:!0,task_id:t.id},{withCredentials:!1})},d.prototype.queryStatus=function(e){var t=this,s=e.isKill,a=function(e){s?u(t,e):h(t,e)};i["a"].fetch("/entrance/".concat(this.id,"/status"),"get").then((function(e){t.status=e.status,a(e)})).catch((function(){a({status:t.status})}))},d.prototype.queryProgress=function(){var e=this;i["a"].fetch("/entrance/".concat(this.id,"/progress"),"get").then((function(t){e.trigger("progress",{progress:t.progress,progressInfo:t.progressInfo})}))},d.prototype.queryLog=function(){var e=this;return i["a"].fetch("/entrance/".concat(this.id,"/log"),{fromLine:this.fromLine,size:-1},"get").then((function(t){return e.fromLine=t.fromLine,e.trigger("log",t.log),Promise.resolve()}))},d.prototype.getResultPath=function(){var e=this;this.trigger("steps","ResultLoading"),i["a"].fetch("/jobhistory/".concat(this.taskID,"/get"),"get").then((function(t){e.resultsetInfo=t.task,e.trigger("querySuccess",{type:"执行",task:t.task}),e.trigger("getResultList"),e.updateLastHistory(t.task)})).catch((function(t){e.trigger("steps","FailedToGetResultPath"),v(t,e)}))},d.prototype.getResultList=function(){var e=this;this.resultsetInfo&&this.resultsetInfo.resultLocation?i["a"].fetch("/filesystem/getDirFileTrees",{path:"".concat(this.resultsetInfo.resultLocation)},"get").then((function(t){e.resultList=t.dirFileTrees.children.sort((function(e,t){var s=function(e){return Number(e.slice(1,e.lastIndexOf(".")))};return s(e.name)-s(t.name)})),e.trigger("getResult")})).catch((function(t){e.trigger("steps","FailedToGetResultList"),v(t,e)})):this.trigger("notice",{type:"error",msg:this.$t("message.workBench.body.script.execute.error.getResultList"),autoJoin:!0})},d.prototype.getFirstResult=function(){var e=this;this.currentResultPath=this.resultList[0].path,this.trigger("history",{execID:this.id,logPath:this.resultsetInfo.logPath,taskID:this.taskID,status:this.status});var t="/filesystem/openFile",s=5e3;i["a"].fetch(t,{path:this.currentResultPath,pageSize:s},"get").then((function(t){e.trigger("result",t);var s="**result tips: ".concat(e.$t("message.workBench.body.script.execute.success.getResultList"));e.trigger("log",s),e.trigger("steps","Completed"),e.run=!1})).catch((function(t){e.trigger("steps","FailedToGetResultFirst"),v(t,e)}))},d.prototype.updateLastHistory=function(e,t){var s=this;if(e)return this.trigger("history",{taskID:e.taskID,execID:"",createDate:e.createdTime,runningTime:e.costTime,status:e.status,failedReason:""});i["a"].fetch("/jobhistory/".concat(this.taskID,"/get"),"get").then((function(e){var i=e.task;t&&t(i),s.executionCode=i.executionCode,s.trigger("history",{taskID:i.taskID,execID:"",createDate:i.createdTime,runningTime:i.costTime,status:s.status,failedReason:i.errCode&&i.errDesc?i.errCode+i.errDesc:i.errCode||i.errDesc||""}),1===i.progress&&s.trigger("costTime",i.costTime)})).catch((function(){s.trigger("history",{taskID:s.taskID,status:s.status,isPartialUpdate:!0})}))},t["a"]=d},3383:function(e,t,s){},"34c7":function(e,t,s){},3557:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"table-detail"},[s("Tabs",{staticClass:"table-detail-tabs",attrs:{type:"card",animated:!1}},e._l(e.tabList,(function(t,i){return s("TabPane",{key:i,staticStyle:{height:"100%"},attrs:{label:t}},[t===e.$t("message.tableDetails.BZBSX")?s("basic",{attrs:{"table-info":e.work.data,"en-env":e.isEnEnv}}):e._e(),t===e.$t("message.tableDetails.BZDXX")?s("field",{attrs:{"table-info":e.work.data}}):e._e(),t===e.$t("message.tableDetails.BTJXX")?s("statistics",{attrs:{"table-info":e.work.data,"en-env":e.isEnEnv}}):e._e()],1)})),1)],1)},a=[],n=s("58de"),r=s("5555"),o=s("e22b"),c={components:{basic:n["default"],field:r["default"],statistics:o["default"]},props:{work:{type:Object,required:!0}},computed:{isEnEnv:function(){return"en"===localStorage.getItem("locale")}},data:function(){return{tabList:[this.$t("message.tableDetails.BZBSX"),this.$t("message.tableDetails.BZDXX"),this.$t("message.tableDetails.BTJXX")]}}},l=c,d=s("2877"),u=Object(d["a"])(l,i,a,!1,null,null,null);t["default"]=u.exports},"35a1":function(e,t,s){"use strict";var i=s("d93c"),a=s.n(i);a.a},"365f":function(e,t,s){var i={"./FAQ/index.vue":"96d5","./common/iframe/index.vue":"74a6","./common/projectPublishForm.vue":"8940","./dateReport/index.vue":"843e","./fnSidebar/fnSidebar.vue":"2412","./footer/index.vue":"cf4a","./globalHistory/index.vue":"052e","./globalHistory/log.vue":"a789","./globalValiable/index.vue":"c670","./hdfsSidebar/hdfsSidebar.vue":"314e","./header/index.vue":"61c7","./header/userMenu.vue":"0b71","./hiveSidebar/hiveSidebar.vue":"ca91","./ide/index.vue":"2c5a","./logView/index.vue":"1a98","./process/component/arguments.vue":"dd7d","./process/component/associateScript.vue":"99cc","./process/component/console.vue":"7f0d","./process/component/nodeparameter.vue":"d6c6","./process/component/resource.vue":"9a70","./process/index.vue":"c154","./process/module.vue":"a015","./project/feature.vue":"6751","./project/index.vue":"9a04","./project/module/classifyForm.vue":"b696","./project/module/copyForm.vue":"42d2","./project/module/projectForm.vue":"b491","./project/module/resource.vue":"256d","./project/module/versionDetail.vue":"1890","./resource/index.vue":"e7f4","./resource/resource.vue":"55e0","./resource/table-expand.vue":"daa2","./resourceSimple/engine.vue":"7a38","./resourceSimple/index.vue":"60d6","./resourceSimple/job.vue":"8c5f","./resourceSimple/point.vue":"b368","./resourceSimple/queue.vue":"21a0","./setting/setting.vue":"cec7","./workSidebar/workSidebar.vue":"b1bd","./workbench/body.vue":"f3fe","./workbench/container.vue":"77dd","./workbench/createTable/components/createTable.vue":"7f5a","./workbench/createTable/components/fieldList.vue":"e6b5","./workbench/createTable/components/fieldModal.vue":"2fce","./workbench/createTable/components/firstStep.vue":"8ff8","./workbench/createTable/components/importTable.vue":"7594","./workbench/createTable/components/importTable_csv.vue":"468d","./workbench/createTable/components/importTable_hive.vue":"055c","./workbench/createTable/components/secondStep.vue":"1551","./workbench/createTable/index.vue":"7ac5","./workbench/script/backgroundScript.vue":"2030","./workbench/script/editor.vue":"84e9","./workbench/script/history.vue":"a90c","./workbench/script/historyScript.vue":"b27b","./workbench/script/log.vue":"024e","./workbench/script/progress.vue":"4419","./workbench/script/result.vue":"5402","./workbench/script/resultSetList.vue":"562a","./workbench/script/saveAs.vue":"e76f","./workbench/script/script.vue":"a7b0","./workbench/script/setting.vue":"4429","./workbench/script/steps.vue":"29bf","./workbench/script/tableRow.vue":"9267","./workbench/script/toolbar.vue":"2630","./workbench/script/toolbar_progress.vue":"6f9b","./workbench/setting/customVariable.vue":"b89a","./workbench/setting/envVariable.vue":"3908","./workbench/setting/runTimeArgs.vue":"6f56","./workbench/tableDetails/components/basic.vue":"58de","./workbench/tableDetails/components/field.vue":"5555","./workbench/tableDetails/components/statistics.vue":"e22b","./workbench/tableDetails/index.vue":"3557","./workbench/title.vue":"3ca7","./workbench/visualAnalysis/visualAnalysis.vue":"90db","./workbench/workflow/node.vue":"e677","./workflow/index.vue":"6bb7","./workflow/module/classifyForm.vue":"e56e","./workflow/module/versionDetail.vue":"9c5a","./workflow/module/workflowForm.vue":"17cb"};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id="365f"},"377b":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{staticClass:"we-upload",attrs:{width:"340"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",[e._v(e._s(e.$t("message.uploadDialog.SCJBWJ")))])]),s("div",{staticClass:"we-upload-content"},[s("Upload",{ref:"upload",attrs:{action:e.updateUrl,headers:e.headers,data:e.uploadData,"max-size":e.maxSize,"before-upload":e.beforeUpload,"on-success":e.handleSuccess,"on-error":e.handleError,"on-progress":e.handleProgress,"on-exceeded-size":e.exceededSize,multiple:"",type:"drag"}},[s("div",{staticStyle:{padding:"20px 0"}},[s("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),s("p",{staticClass:"el-upload__text"},[e._v(e._s(e.$t("message.uploadDialog.TWJDSQ")))]),s("p",{staticClass:"el-upload__tip"},[e._v(e._s(e.msg))]),s("p",{staticClass:"we-upload_path"},[e._v(e._s(e.$t("message.uploadDialog.PATH"))+e._s(e.path))])],1)]),e.isUploading?s("Spin",{attrs:{size:"large",fix:""}}):e._e()],1),s("template",{slot:"footer"},[s("Button",{attrs:{disabled:e.isUploading,size:"small",type:"warning"},on:{click:e.resetUpload}},[e._v(e._s(e.$t("message.uploadDialog.QKLB")))])],1)],2)},a=[],n=(s("7514"),s("7f7f"),s("96cf"),s("3b8d")),r={props:{refresh:Function},data:function(){return{show:!1,uploadFiles:[],updateUrl:"",maxSize:0,msg:null,path:null,listName:null,uploadData:null,isBtnShow:!0,isUploading:!1}},computed:{headers:function(){return{}}},watch:{show:function(e){e||(this.uploadFiles=[],this.path=null,this.uploadData=null,this.listName=null,this.isBtnShow=!0,this.isUploading=!1,this.$refs.upload.clearFiles())}},methods:{open:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.path=t.path,t.nameList&&(this.listName=t.nameList),this.uploadData={path:t.type+this.path},this.show=!0,"file://"===t.type?(this.msg="(".concat(this.$t("message.uploadDialog.LIMIT2M"),")"),this.maxSize=2048):(this.msg="(".concat(this.$t("message.uploadDialog.LIMIT100M"),")"),this.maxSize=102400),this.updateUrl="".concat(t.apiPrefix,"filesystem/upload");case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),close:function(){var e=this;this.isUploading?this.$confirm(this.$t("message.uploadDialog.ZDSC"),this.$t("message.uploadDialog.TS"),{confirmButtonText:this.$t("message.uploadDialog.ZJGB"),cancelButtonText:this.$t("message.uploadDialog.QX"),type:"warning"}).then((function(){e.path=null,e.listName=null,e.uploadData=null,e.isUploading=!1,e.show=!1})).catch((function(){e.isUploading=!0,e.$Message.warning(e.$t("message.uploadDialog.QXBBSCCK"))})):(this.show=!1,this.path=null,this.listName=null,this.uploadData=null,this.isUploading=!1)},handleError:function(e,t,s){this.$Message.error(e.message),this.isUploading=!1,this.refresh(),this.close()},handleSuccess:function(e,t,s){var i=this;0===e.status?(this.$Message.success(this.$t("message.uploadDialog.SCCG",{name:t.name})),this.isUploading=!1,this.close(),setTimeout((function(){i.refresh()}),800)):this.$Message.warning(e.message)},exceededSize:function(e,t){this.$Message.warning(this.$t("message.uploadDialog.WJDXCCXE"))},beforeUpload:function(e){var t=this.listName.find((function(t){return t===e.name})),s=/^[.\w\u4e00-\u9fa5]{1,200}\.[A-Za-z]+$/;return t?(this.$Message.warning(this.$t("message.uploadDialog.WJYCZ")),!1):s.test(e.name)?void this.uploadFiles.push(e):(this.$Message.warning(this.$t("message.uploadDialog.WJMBHF")),!1)},handleProgress:function(e,t,s){"uploading"===t.status?this.isUploading=!0:this.isUploading=!1},upload:function(){this.isUploading=!0},resetUpload:function(){this.isUploading?this.$Message.warning(this.$t("message.uploadDialog.SCZQK")):this.$refs.upload.clearFiles()}}},o=r,c=(s("39e3"),s("2877")),l=Object(c["a"])(o,i,a,!1,null,null,null),d=l.exports;t["a"]=d},3908:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("dynamic-form",{ref:"form",attrs:{title:e.$t("message.workBench.body.setting.envVariable.title"),list:e.script.params.configuration.runtime.env}})},a=[],n=s("3b1c"),r={components:{dynamicForm:n["a"]},props:{script:{type:Object,required:!0}},data:function(){return{}},methods:{}},o=r,c=s("2877"),l=Object(c["a"])(o,i,a,!1,null,null,null);t["default"]=l.exports},"399a":function(e,t,s){},"39e3":function(e,t,s){"use strict";var i=s("ca5a6"),a=s.n(i);a.a},"3a9b":function(e,t,s){e.exports=s.p+"img/zhantie.482b0b13.svg"},"3b1c":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dynamic-form"},[s("div",{staticClass:"dynamic-form-header-wrap"},[s("h4",{staticClass:"dynamic-form-header-title"},[e._v(e._s(e.title))]),s("Icon",{staticClass:"icon-add",attrs:{type:"md-add",size:"16"},on:{click:e.handleAdd}})],1),s("Form",{ref:"dynamicForm",staticClass:"dynamic-form-content",attrs:{model:e.formDynamic}},e._l(e.formDynamic.list,(function(t,i){return s("FormItem",{key:i},[s("Row",[s("Col",{staticClass:"tc",attrs:{span:"1"}},[e._v(e._s(i+1)+"\n        ")]),s("Col",{attrs:{span:"10"}},[s("FormItem",{attrs:{prop:"list."+i+".key",rules:[{required:!0,message:e.$t("message.dynamicForm.rule.emptyKey"),trigger:"blur"},{min:1,max:128,message:e.$t("message.dynamicForm.rule.lengthLimit"),trigger:"blur"},{type:"string",pattern:/^[a-zA-z][^\s\u4e00-\u9fa5]*$/,message:e.$t("message.dynamicForm.rule.nameVaild"),trigger:"blur"},{validator:e.validateKey,trigger:"blur"}]}},[s("Input",{attrs:{type:"text",placeholder:e.$t("message.dynamicForm.namePlaceholder",{title:e.title})},on:{"on-change":e.onInputChange},model:{value:t.key,callback:function(s){e.$set(t,"key",s)},expression:"item.key"}})],1)],1),s("Col",{staticClass:"tc",attrs:{span:"1"}},[e._v("\n        =\n        ")]),s("Col",{attrs:{span:"10"}},[s("FormItem",{attrs:{prop:"list."+i+".value",rules:[{required:!0,message:e.$t("message.dynamicForm.rule.emptyValue"),trigger:"blur"},{min:1,max:128,message:e.$t("message.dynamicForm.rule.lengthLimit"),trigger:"blur"}]}},[s("Input",{attrs:{type:"text",placeholder:e.$t("message.dynamicForm.placeholderInput")},on:{"on-change":e.onInputChange},model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"item.value"}})],1)],1),s("Col",{staticClass:"tc",attrs:{span:"2"}},[s("Icon",{staticClass:"dynamic-form-close",attrs:{type:"ios-close"},nativeOn:{click:function(t){return e.handleDelete(i)}}})],1)],1)],1)})),1)],1)},a=[],n=(s("7514"),s("9865"),s("57e7"),{props:{title:String,list:{type:Array,default:function(){return[]}}},data:function(){var e=this;return{formDynamic:{list:[]},validateKey:function(t,s,i){var a=t.field,n=a.slice(a.indexOf(".")+1,a.lastIndexOf(".")),r=e.formDynamic.list.find((function(e,t){return e.key===s&&n!=t}));r&&i(new Error(e.$t("message.dynamicForm.someKey"))),i()}}},watch:{list:function(e){this.formDynamic.list=this.list}},mounted:function(){this.formDynamic.list=this.list},methods:{handleAdd:function(){var e=this;this.formDynamic.list.length?this.$refs.dynamicForm.validate((function(t){t?e.formDynamic.list.push({key:"",value:""}):e.$Message.warning(e.$t("message.newConst.failedNotice"))})):this.formDynamic.list.push({key:"",value:""})},handleDelete:function(e){this.formDynamic.list.splice(e,1),this.$emit("change",this.formDynamic.list)},onInputChange:function(){this.$emit("change",this.formDynamic.list)}}}),r=n,o=(s("0b7c"),s("2877")),c=Object(o["a"])(r,i,a,!1,null,null,null),l=c.exports;t["a"]=l},"3ca7":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"workbench-title",on:{click:e.choose,mouseover:e.mouseover,mouseout:e.mouseout}},[s("span",{staticClass:"workbench-title-logo",class:e.work.logo}),s("span",{staticClass:"workbench-title-text",attrs:{title:e.work.filepath||e.work.filename}},[e._v(e._s(e.work.filename))]),s("span",{staticClass:"workbench-title-button"},[s("Icon",{directives:[{name:"show",rawName:"v-show",value:e.isHover,expression:"isHover"}],attrs:{type:"md-close"},on:{click:function(t){return t.stopPropagation(),e.remove(t)}}}),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.isHover&&e.work.unsave,expression:"!isHover && work.unsave"}],staticClass:"fi-radio-on2"}),s("Spin",{directives:[{name:"show",rawName:"v-show",value:!e.isHover&&e.work.data&&e.work.data.running,expression:"!isHover && work.data && work.data.running"}],attrs:{size:"small"}},[s("Icon",{staticClass:"we-icon-loading",attrs:{type:"ios-loading",size:"12"}})],1)],1)])},a=[],n={props:{work:{type:Object,required:!0}},data:function(){return{isHover:!1}},methods:{mouseover:function(){this.isHover=!0},mouseout:function(){this.isHover=!1},choose:function(){this.$emit("on-choose",this.work)},remove:function(){this.$emit("on-remove",this.work)}}},r=n,o=s("2877"),c=Object(o["a"])(r,i,a,!1,null,null,null);t["default"]=c.exports},"3eb8":function(e,t,s){},"3fd6":function(e,t,s){"use strict";var i=s("5f00"),a=s.n(i);a.a},"40b6":function(e,t,s){"use strict";var i=s("a026"),a=s("a925"),n=s("69c5"),r=s.n(n),o=s("9ef8"),c=s.n(o),l=s("8402");if(i["default"].use(a["a"]),localStorage.getItem("locale"))i["default"].config.lang=localStorage.getItem("locale");else{var d=navigator.language;"zh-CN"===d?(i["default"].config.lang="zh-CN",localStorage.setItem("locale","zh-CN")):(i["default"].config.lang="en",localStorage.setItem("locale","en"))}i["default"].locale=function(){};var u={en:Object.assign(r.a,l["a"].en,s("cae8")),"zh-CN":Object.assign(c.a,l["a"]["zh-CN"],s("b420"))};t["a"]=new a["a"]({locale:i["default"].config.lang,messages:u})},"410f":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"table",staticClass:"we-table",style:e.style},[s("div",{staticClass:"we-table-outflow"},[s("div",{staticClass:"we-table-header"},[s("template-header",{ref:"headerCom",staticClass:"header-list",attrs:{cache:e.cache,"item-size-getter":e.itemSizeGetter,"estimated-item-size":30,data:e.headRows},on:{"sort-click":e.handleSortClick,"dbl-click":e.handleDblClick}})],1),s("div",{ref:"tableBody",staticClass:"we-table-body"},[s("template-list",{ref:"bodyCom",attrs:{cache:e.cache,"is-listen-scroll":!0,"item-size-getter":e.itemSizeGetter,"estimated-item-size":30,data:e.bodyRows},on:{"on-scroll":e.changeScrollLeft,"on-click":e.onColumnClick}})],1)])])},a=[],n=(s("ac6a"),s("f3e2"),s("6d67"),s("bd86")),r=(s("55dd"),s("0d6d"),s("c5f6"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"list",staticClass:"list-view"},[s("vuescroll",{attrs:{ops:e.ops},on:{"handle-scroll":e.handleScroll}},[s("list-body",{ref:"body",attrs:{cache:e.cache,"item-size-getter":e.itemSizeGetter,"estimated-item-size":30,data:e.data},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.col;return s("div",{},e._l(i,(function(t,i){return s("div",{key:i,staticClass:"we-column-item",class:{"null-text":"NULL"===t,active:i===e.activeRowIndex},attrs:{title:t||i},on:{click:function(t){return t.stopPropagation(),e.columnItemClick(i)}}},[s("span",{staticClass:"we-column-item-content"},[e._v(e._s(t))])])})),0)}}])})],1)],1)}),o=[],c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"list-view-phantom",style:{width:e.contentWidth+"px"}}),s("div",{ref:"content",staticClass:"list-view-content"},e._l(e.visibleData,(function(t,i){return s("div",{key:i,staticClass:"list-view-item",style:{width:e.getItemSizeAndOffset(e.startIndex+i).size+"px"}},[e._t("default",null,{col:t,index:i})],2)})),0)])},l=[],d={props:{cache:{type:Object,default:function(){return{}}},isListenScroll:{type:Boolean,default:!1},data:{type:Array,required:!0},estimatedItemSize:{type:Number,default:30},itemSizeGetter:{type:Function}},data:function(){return{viewWidth:0,lastMeasuredIndex:-1,startIndex:0,sizeAndOffsetCahce:{},visibleData:[],ops:{bar:{background:"rgb(24, 144, 255)",keepShow:!0,minSize:.1},rail:{border:"1px solid #cecece",size:"20px"},scrollButton:{enable:!0,background:"#cecece"}},cacheVH:{v:{},h:{scrollLeft:0}}}},computed:{contentWidth:function(){var e=this.data,t=this.lastMeasuredIndex,s=this.estimatedItemSize,i=e.length;if(t>=0){var a=this.getLastMeasuredSizeAndOffset();return a.offset+a.size+(i-1-t)*s}return i*s}},watch:{data:{handler:function(){var e=this.cacheVH,t=e.v,s=e.h;this.handleScroll(t,s)},deep:!0}},mounted:function(){this.updateVisibleData(),this.viewWidth=this.$refs.content.clientWidth},methods:{getItemSizeAndOffset:function(e){var t=this.lastMeasuredIndex,s=this.sizeAndOffsetCahce,i=this.data,a=this.itemSizeGetter;if(t>=e)return s[e];var n=0;if(t>=0){var r=s[t];r&&(n=r.offset+r.size)}for(var o=t+1;o<=e;o++){var c=i[o],l=void 0;this.cache[o]?l=this.cache[o]:(l=a.call(null,c,o),this.cache[o]=l),s[o]={size:l,offset:n},n+=l}return e>t&&(this.lastMeasuredIndex=e),s[e]},getLastMeasuredSizeAndOffset:function(){return this.lastMeasuredIndex>=0?this.sizeAndOffsetCahce[this.lastMeasuredIndex]:{offset:0,size:0}},findNearestItemIndex:function(e){for(var t=this.data,s=0,i=0,a=t.length;i<a;i++){var n=this.getItemSizeAndOffset(i).size;if(s+=n,s>=e||i===a-1)return i}return 0},updateVisibleData:function(e){var t=this.contentWidth-this.viewWidth;e=e||0,e>t&&(e=t);var s=this.findNearestItemIndex(e),i=this.findNearestItemIndex(e+(this.$el.clientWidth||1400));this.visibleData=this.data.slice(s,Math.min(i+3,this.data.length)),this.startIndex=s,this.$refs.content.style.webkitTransform="translate3d(".concat(this.getItemSizeAndOffset(s).offset,"px, 0, 0)")},handleScroll:function(e,t){var s=t.scrollLeft;this.cacheVH={v:e,h:t},this.$emit("on-scroll",{v:e,h:t}),this.updateVisibleData(s)}}},u=d,h=(s("c2d7"),s("2877")),p=Object(h["a"])(u,c,l,!1,null,null,null),f=p.exports,m=s("2901"),g=s.n(m),b={components:{vuescroll:g.a,listBody:f},props:{cache:{type:Object,default:function(){return{}}},data:{type:Array,required:!0},estimatedItemSize:{type:Number,default:30},itemSizeGetter:{type:Function}},data:function(){return{ops:{bar:{background:"#5e9de0",keepShow:!0,minSize:.05},rail:{size:"10px",opacity:0,background:"#fff"},scrollButton:{enable:!0,background:"#cecece"}},activeRowIndex:null}},methods:{handleScroll:function(e,t){this.$emit("on-scroll",{v:e,h:t}),this.$refs.body.handleScroll(e,t)},columnItemClick:function(e){this.activeRowIndex=e,this.$emit("on-click",e)}}},v=b,y=Object(h["a"])(v,r,o,!1,null,null,null),w=y.exports,T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"list",staticClass:"list-view list-header"},[s("list-body",{ref:"body",attrs:{cache:e.cache,"item-size-getter":e.itemSizeGetter,"estimated-item-size":30,data:e.data},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.col,a=t.index;return[s("div",{on:{click:function(t){return t.stopPropagation(),e.handleSortClick(t,{col:i,index:a})},dblclick:function(t){return t.preventDefault(),t.stopPropagation(),e.handleDblClick(i)}}},[s("span",{staticClass:"we-table-header-content",attrs:{title:i.columnType}},[e._v(e._s(i.content))]),i.sortable?s("span",{staticClass:"caret-wrapper"},[s("i",{class:e.computeSortClass(i,"ascending"),on:{click:function(t){return t.stopPropagation(),e.handleSortClick(t,{col:i,index:a},"ascending")}}}),s("i",{class:e.computeSortClass(i,"descending"),on:{click:function(t){return t.stopPropagation(),e.handleSortClick(t,{col:i,index:a},"descending")}}})]):e._e()])]}}])})],1)},S=[],E="we-table",N={components:{listBody:f},props:{cache:{type:Object,default:function(){return{}}},isListenScroll:{type:Boolean,default:!1},data:{type:Array,required:!0},estimatedItemSize:{type:Number,default:30},itemSizeGetter:{type:Function}},data:function(){return{sort:{sorting:!1,column:null,type:"normal",start:0},dblClickTimer:null}},methods:{computeSortClass:function(e,t){return["".concat(E,"-sort-caret"),t,Object(n["a"])({},"".concat(E,"-sort"),this.sort.column===e&&this.sort.type===t)]},handleScroll:function(e,t){this.$refs.body.handleScroll(e,t)},handleSortClick:function(e,t,s){var i=this,a=t.col,n=t.index;clearTimeout(this.dblClickTimer),this.dblClickTimer=setTimeout((function(){var e=s||"normal";if((!i.sort.sorting||a.sortable)&&!("normal"===e&&"normal"===i.sort.type||i.sort.column===a&&i.sort.type===e)){i.sort.sorting=!0,i.sort.type=e,i.sort.column=a;var t=0;"normal"!==e&&(t="descending"===e?-1:1),i.$emit("sort-click",{reverse:t,col:a,colIndex:n,cb:function(){i.sort.sorting=!1}})}}),300)},handleDblClick:function(e){clearTimeout(this.dblClickTimer),this.$emit("dbl-click",e)}}},C=N,k=Object(h["a"])(C,T,S,!1,null,null,null),O=k.exports,x="we-table",I={name:x,components:{templateList:w,templateHeader:O},props:{data:Object,width:Number,height:Number,variable:[Function],maxColumn:{type:Number,default:50},offsetX:{type:Number,default:0},offsetY:{type:Number,default:0},needReset:Boolean},data:function(){return{cache:{},sort:{sorting:!1,column:null,type:"normal",start:0},bodyRows:[],headRows:[],originRows:[],onscroll:function(){},dTag:!1}},computed:{style:function(){var e={};return this.width&&(e.width=this.width+"px"),this.height&&(e.height=this.height+"px"),e}},watch:{data:{handler:function(e){var t=this;this.headRows=Object.freeze(e.headRows),this.originRows=Object.freeze(e.originRows),this.bodyRows=this.revert(e.bodyRows),this.needReset&&this.$refs.bodyCom&&this.$refs.bodyCom.$refs.body&&this.$nextTick((function(){t.$refs.bodyCom.$refs.body.updateVisibleData(0),t.changeScrollLeft({v:0,h:0}),t.$refs.bodyCom.$refs.list.scrollLeft=0,t.$emit("change-status")}))},immediate:!0,deep:!0}},mounted:function(){},methods:{changeScrollLeft:function(e){var t=e.v,s=e.h;this.$refs.headerCom.$refs.list.scrollLeft=s.scrollLeft,this.$refs.headerCom.handleScroll(t,s)},itemSizeGetter:function(e,t){var s=document.createElement("div");document.body.appendChild(s),s.style.paddingLeft="20px",s.style.paddingRight="54px",s.style.position="absolute",s.style.top="-9999px",s.style.left="-9999px",s.innerHTML=e.content;var i=s.offsetWidth;return document.body.removeChild(s),this.cache[t]=i,i},revert:function(e){for(var t=[],s=e[0]?e[0].length:0,i=0;i<s;i++){t[i]=[];for(var a=0;a<e.length;a++)t[i][a]=e[a][i]}return t},computeSortClass:function(e,t){return["".concat(x,"-sort-caret"),t,Object(n["a"])({},"".concat(x,"-sort"),this.sort.column===e&&this.sort.type===t)]},handleSortClick:function(e){var t=this,s=e.reverse,i=e.colIndex,a=e.cb;if(0===s){var n=this.originRows.map((function(e){return e.slice(0)}));this.bodyRows=this.revert(n)}else{var r=[],o=this.originRows.map((function(e,t){return{origin:t,value:e[i]}}));o.sort((function(e,t){return e.value.length===t.value.length?e.value.localeCompare(t.value)*s:(e.value.length-t.value.length)*s})),o.forEach((function(e,s){r[s]=t.originRows[e.origin]})),this.bodyRows=this.revert(r),a&&a()}},handleDblClick:function(e){this.$emit("dbl-click",e)},onColumnClick:function(e){this.$emit("on-click",e)}}},R=I,D=(s("1670"),s("2696"),Object(h["a"])(R,i,a,!1,null,null,null)),L=D.exports,A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"we-table-wrap",style:{height:e.height+"px"}},[s("table",{staticClass:"we-table",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[s("thead",[s("tr",{staticClass:"we-table-thead"},e._l(e.columns,(function(t){return s("th",{key:t.key,staticClass:"we-table-thead-cell",style:{"min-width":t.width+"px","text-align":t.align}},[e._v("\n          "+e._s(t.title||"#")+"\n        ")])})),0)]),s("tbody",e._l(e.data,(function(t,i){return s("tr",{key:i,staticClass:"we-table-row"},e._l(e.columns,(function(i,a){return s("td",{key:i.key,staticClass:"we-table-row-cell",style:{"text-align":i.align}},[s("div",{staticClass:"we-table-row-label",class:{ellipsis:i.ellipsis},style:{width:i.width?i.width+"px":e.getComputedWidth(i)},attrs:{title:i.ellipsis?t[i.key]:""}},[i.renderType?s("table-expand",{attrs:{row:t,column:i,index:a,render:e.renderComponent({type:i.renderType,cell:t,key:i.key,params:i.renderParams})}}):s("span",{class:i.className},[e._v(e._s(t[i.key]))])],1)])})),0)})),0)])])},P=[],_=(s("20d6"),s("d92a"),s("c1df")),$=s.n(_),M=s("0971"),j={name:"TableExpand",functional:!0,props:{row:Object,render:Function,index:Number,column:{type:Object,default:null}},render:function(e,t){var s={row:t.props.row,index:t.props.index};return t.props.column&&(s.column=t.props.column),t.props.render(e,s)}},F=s("02b1"),B={components:{TableExpand:j},props:{columns:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},height:Number},data:function(){return{offsetWidth:0}},mounted:function(){F["a"].bind(this.$el,this.resize)},beforeDestroy:function(){F["a"].unbind(this.$el)},methods:{renderComponent:function(e){var t=e.type,s=e.cell,i=e.key,a=e.params,n=s[i];switch(t){case"tag":return this.renderTag(n);case"progress":return this.renderProgress(n);case"button":return this.renderButton(n,s,a);case"tooltip":return this.renderTooltip(n);case"formatTime":return this.renderFormatTime(n);case"convertTime":return this.renderConvertTime(n);case"index":return this.renderIndex(s);case"a":return this.renderA(n,s,a);case"concat":return this.renderConcat(n,s,a);case"if":return this.renderIf(s,a);default:return null}},renderTag:function(e){var t=this;return function(s){var i="",a="",n="",r="";switch(e){case"Succeed":i="#52c41a",n="#b7eb8f",a="#f6ffed",r=t.$t("message.globalHistory.statusType.succeed");break;case"Running":i="#13c2c2",n="#87e8de",a="#e6fffb",r=t.$t("message.globalHistory.statusType.running");break;case"Timeout":i="gray",r=t.$t("message.globalHistory.statusType.timeout");break;case"Inited":i="#515a6e",r=t.$t("message.globalHistory.statusType.inited");break;case"Scheduled":i="purple",n="#d3adf7",a="#f9f0ff",r=t.$t("message.globalHistory.statusType.scheduled");break;case"Failed":i="#f5222d",n="#ffa39e",a="#fff1f0",r=t.$t("message.globalHistory.statusType.failed");break;case"Cancelled":i="#fa8c16",n="#ffd591",a="#fff7e6",r=t.$t("message.globalHistory.statusType.cancelled");break;case"WaitForRetry":i="darksalmon",r=t.$t("message.globalHistory.statusType.retry");break;default:i="black",r=t.$t("message.globalHistory.statusType.unknown");break}return s("span",{style:{color:i,background:a||"#f7f7f7",border:"1px solid ".concat(n||i),padding:"0 8px","border-radius":"2px","line-height":"20px"}},r)}},renderProgress:function(e){return function(t){var s=Math.round(1e4*e)/100;return t("div",{class:{"progress-wrap":!0},style:{width:"160px"}},[t("span",{class:{"progress-busy":!0},style:{width:"".concat(s,"%")}}),t("span",{class:{"progress-label":!0},style:{color:s>=60?"#fff":"#515a6e"}},0===s?0:s+"%")])}},renderButton:function(e,t,s){var i=function(e){var i=[];return s.forEach((function(s){i.push(e("button",{class:{"render-btn":!0},on:{click:function(){s.action({row:t})}}},s.label))})),i};return function(e){return e("div",i(e))}},renderTooltip:function(e){return function(t){return t("Tooltip",{props:{placement:"top-start",maxWidth:"600",theme:"light",transfer:!0}},[t("span",{},e),t("div",{slot:"content",style:{whiteSpace:"normal",wordBreak:"break-all",maxHeight:"500px",overflowY:"auto"}},e)])}},renderFormatTime:function(e){return function(t){return t("span",{},e?$.a.unix(e/1e3).format("YYYY-MM-DD HH:mm:ss"):null)}},renderConvertTime:function(e){return function(t){return t("span",{},M["a"].convertTimestamp(e))}},renderIndex:function(e){var t=this.data.findIndex((function(t){return t.taskID===e.taskID}));return function(e){return e("span",{},t+1)}},renderA:function(e,t,s){return function(i){return i("div",{style:{cursor:"pointer",color:"#ed4014"},on:{click:function(){var e=!0;s.hasDoc&&(e=s.hasDoc({row:t})),e&&s.action({row:t})}}},e)}},renderConcat:function(e,t,s){return function(i){return i("span",{},"".concat(e," / ").concat(t[s.concatKey]))}},renderIf:function(e,t){var s=t.action({row:e});return this["render".concat(s.type)](s.value)},getComputedWidth:function(){this.offsetWidth=this.$el&&this.$el.offsetWidth;var e=0,t=[];return this.columns.forEach((function(s){var i=s.width||0;e+=i,s.width||t.push(s)})),(this.offsetWidth-30-e)/t.length+"px"},resize:function(){this.offsetWidth=this.$el&&this.$el.offsetWidth}}},H=B,K=Object(h["a"])(H,A,P,!1,null,null,null),U=K.exports;t["a"]={WeTable:L,historyTable:U}},4288:function(e,t,s){},"42d2":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Form",{ref:"copyProjectForm",attrs:{"label-width":100,"label-position":"left",model:e.copyProjectData,rules:e.copyFormValid}},[s("FormItem",{attrs:{label:"工程名",prop:"name"}},[s("Input",{attrs:{placeholder:"请输入工程名"},model:{value:e.copyProjectData.name,callback:function(t){e.$set(e.copyProjectData,"name",t)},expression:"copyProjectData.name"}})],1)],1)},a=[],n=(s("7f7f"),s("b593")),r={name:"Copy",props:{currentProjectData:{type:Object,default:null}},data:function(){return{copyProjectData:{id:"",name:"",version:""}}},created:function(){},computed:{copyFormValid:function(){return{name:[{required:!0,message:this.$t("message.newConst.enterName"),trigger:"blur"},{message:"".concat(this.$t("message.newConst.nameLength"),"64"),max:64},{type:"string",pattern:/^[a-zA-Z][a-zA-Z0-9_]*$/,message:this.$t("message.newConst.validNameDesc"),trigger:"blur"}],version:[{required:!0,message:this.$t("message.project.selectVersion"),trigger:"blur"}]}}},methods:{"Project:copy":function(e){var t=this;this.$refs.copyProjectForm.validate((function(e){e?(t.dispatch("Project:loading",!0),n["a"].fetch("/dss/copyProjectAndFlow",{projectID:t.currentProjectData.id,projectName:t.copyProjectData.name},"post").then((function(e){t.dispatch("Project:loading",!1),t.dispatch("Project:getData")})).catch((function(){t.dispatch("Project:loading",!1)}))):t.$Message.warning(t.$t("message.newConst.failedNotice"))}))},"Project:copyReset":function(){this.$refs.copyProjectForm.resetFields()}}},o=r,c=s("2877"),l=Object(c["a"])(o,i,a,!1,null,null,null);t["default"]=l.exports},4383:function(e,t,s){"use strict";var i=s("89d5"),a=s.n(i);a.a},4419:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"progress",style:{"padding-left":e.status?"40px":0}},[e.status?s("we-toolbar",{attrs:{status:e.status,application:e.application},on:{"open-panel":e.openPanel}}):e._e(),e.steps.length?s("steps",{attrs:{"step-list":e.steps}}):e._e(),e.isStatusOk?s("Row",{staticClass:"total-progress"},[s("Col",{staticClass:"title",attrs:{span:"2"}},[e._v(e._s(e.$t("message.workBench.body.script.progress.title")+"："))]),s("Col",{attrs:{span:"12"}},[s("Progress",{attrs:{percent:e.percent,status:"active"}})],1),100===e.percent?s("Col",{attrs:{span:"10"}},[s("span",[e._v(e._s(e.$t("message.container.process")))]),s("span",{staticClass:"progress-costtime"},[e._v(e._s(e.costTime))])]):e._e()],1):e._e(),e.isWaittingSizeShow?s("Row",{staticClass:"total-progress"},[s("Col",{staticClass:"title",attrs:{span:"2"}},[e._v(e._s(e.$t("message.workBench.body.script.progress.title")+"："))]),s("Col",{attrs:{span:"12"}},[s("span",[e._v(e._s(e.$t("message.workBench.body.script.progress.waitingList",{num:e.waitingSize})))])])],1):e._e(),e.isStatusOk?s("Table",{staticClass:"progress-table",attrs:{columns:e.columns,data:e.progressInfo,height:e.tableHeight,size:"small",stripe:"",border:""}}):e._e()],1)},a=[],n=(s("c5f6"),s("4de8")),r=s("2e77"),o=s("29bf"),c=s("6f9b"),l={components:{steps:o["default"],weToolbar:c["default"]},mixins:[n["default"].mixin,r["a"]],props:{progressInfo:{type:Array,required:!0,default:function(){return[]}},current:{type:Number,default:0},waitingSize:Number,steps:{type:Array,required:!0,default:function(){return[]}},status:String,application:String,costTime:{type:String,defalut:"0 second"}},data:function(){var e=this;return{columns:[{title:this.$t("message.workBench.body.script.progress.columns.id.title"),key:"id",width:200},{title:this.$t("message.workBench.body.script.progress.columns.progress.title"),key:"action",render:function(t,s){var i=s.row;return t("div",{class:"progress-wrap"},[t("div",{class:"progress-item progress-waiting",style:e.waitingStyle(i)},{}),t("div",{class:"progress-item progress-success",style:e.successStyle(i)}),t("div",{class:"progress-item progress-failed",style:e.failedStyle(i)})])}},{title:this.$t("message.workBench.body.script.progress.columns.taskNum.title"),key:"action",render:function(t,s){var i=s.row;return t("div",[t("span",{class:"progress-text",style:{color:"#2d8cf0"}},"".concat(e.$t("message.workBench.body.script.progress.columns.taskNum.status.running"),"：").concat(i.runningTasks||0)),t("span",{class:"progress-text",style:{color:"#19be6b"}},"".concat(e.$t("message.workBench.body.script.progress.columns.taskNum.status.success"),"：").concat(i.succeedTasks||0)),t("span",{class:"progress-text",style:{color:"#ed4014"}},"".concat(e.$t("message.workBench.body.script.progress.columns.taskNum.status.fail"),"：").concat(i.failedTasks||0)),t("span",{class:"progress-text"},"".concat(e.$t("message.workBench.body.script.progress.columns.taskNum.status.totalTasks"),"：").concat(i.totalTasks||0))])}}]}},computed:{percent:function(){return Number((100*this.current).toFixed(2))},isWaittingSizeShow:function(){return("Scheduled"===this.status||"Inited"===this.status)&&null!==this.waitingSize&&this.waitingSize>=0},isStatusOk:function(){return this.status&&!("Scheduled"===this.status||"Inited"===this.status)}},methods:{"Workbench:setParseAction":function(){this.resize()},successStyle:function(e){var t=e.failedTasks,s=e.runningTasks,i=e.succeedTasks,a=e.totalTasks,n=i/a*100,r=s/a*100,o={};return t&&(o={"border-bottom-right-radius":0,"border-top-right-radius":0}),s&&Object.assign(o,{"border-top-left-radius":0,"border-bottom-left-radius":0}),n?Object.assign(o,{"min-width":"10px"}):Object.assign(o,{"min-width":"0px"}),Object.assign(o,{left:r+"%",width:n+"%"})},waitingStyle:function(e){var t=e.failedTasks,s=e.runningTasks,i=e.succeedTasks,a=e.totalTasks,n=s/a*100,r={};return(i||t)&&(r={"border-bottom-right-radius":0,"border-top-right-radius":0}),n?Object.assign(r,{"min-width":"10px"}):Object.assign(r,{"min-width":"0px"}),Object.assign(r,{width:n+"%"})},failedStyle:function(e){var t=e.failedTasks,s=e.runningTasks,i=e.succeedTasks,a=e.totalTasks,n=(i+s)/a*100,r=t/a*100,o={};return(s||i)&&(o={"border-top-left-radius":0,"border-bottom-left-radius":0}),r?Object.assign(o,{"min-width":"10px"}):Object.assign(o,{"min-width":"0px"}),Object.assign(o,{left:n+"%",width:r+"%"})},resize:function(){this.tableHeight=this.$el.clientHeight-120},openPanel:function(e){this.$emit("open-panel",e)}}},d=l,u=s("2877"),h=Object(u["a"])(d,i,a,!1,null,null,null);t["default"]=h.exports},4429:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"editor-setting"},[s("div",{staticClass:"editor-setting-header"},[s("span",[e._v(e._s(e.$t("message.workBench.body.script.setting.header")))]),s("Icon",{attrs:{type:"ios-close"},on:{click:function(t){return e.$emit("setting-close")}}})],1),s("div",{staticClass:"editor-setting-content"},[s("custom-variable",{ref:"customVariable",attrs:{script:e.script}})],1)])},a=[],n=s("b89a"),r=s("2ef0"),o={name:"Setting",components:{customVariable:n["default"]},props:{work:{type:Object,required:!0},script:{type:Object,required:!0}},data:function(){return{origin:null}},watch:{"script.params":{handler:function(e){this.work.unsave=!Object(r["isEqual"])(JSON.parse(this.origin),e)},deep:!0}},mounted:function(){this.origin=JSON.stringify(this.script.params)}},c=o,l=s("2877"),d=Object(l["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},"442d":function(e,t,s){"use strict";s.r(t);var i=s("b593");t["default"]={name:"GlobalValiable",events:["getGlobalVariable"],dispatchs:{IndexedDB:["updateGlobalCache"]},methods:{getGlobalVariable:function(e){i["a"].fetch("/variable/listGlobalVariable","get").then((function(t){e({list:t.globalVariables,isError:!1})})).catch((function(t){e({list:[],isError:!0})}))}},component:function(){return Promise.resolve().then(s.bind(null,"c670"))}}},"44d1":function(e,t,s){e.exports=s.p+"img/display.f6ae6d8f.svg"},"45f8":function(e,t,s){},"466c":function(e,t,s){"use strict";s.r(t),t["default"]={name:"Commons",dispatchs:{Project:["loading","getData","updataPercent"]},component:{iframe:function(){return Promise.resolve().then(s.bind(null,"74a6"))},publish:function(){return Promise.resolve().then(s.bind(null,"8940"))}}}},4678:function(e,t,s){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id="4678"},"468d":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"import-table-csv"},[s("Form",{attrs:{model:e.options,"label-width":80}},[s("FormItem",{attrs:{label:e.$t("message.createTable.type")}},[s("Select",{attrs:{placeholder:e.$t("message.createTable.selectType")},on:{"on-change":e.changeTreeByType},model:{value:e.options.type,callback:function(t){e.$set(e.options,"type",t)},expression:"options.type"}},e._l(e.staticData.type,(function(e){return s("Option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e.fileTree.length?s("FormItem",{attrs:{label:e.$t("message.createTable.path")}},[s("Input",{on:{"on-focus":e.onPathInputFocus},model:{value:e.options.exportPath,callback:function(t){e.$set(e.options,"exportPath",t)},expression:"options.exportPath"}})],1):e._e(),e.isPathLeaf?["csv"===e.importType?[s("FormItem",{attrs:{label:e.$t("message.createTable.FGF")}},[s("Select",{attrs:{placeholder:e.$t("message.createTable.selectType")},model:{value:e.options.separator,callback:function(t){e.$set(e.options,"separator",t)},expression:"options.separator"}},e._l(e.staticData.separator,(function(e){return s("Option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),s("FormItem",{attrs:{label:e.$t("message.createTable.BMGS")}},[s("Select",{attrs:{placeholder:e.$t("message.createTable.XZBMGS")},model:{value:e.options.chartset,callback:function(t){e.$set(e.options,"chartset",t)},expression:"options.chartset"}},e._l(e.staticData.chartset,(function(e){return s("Option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),s("FormItem",{attrs:{label:e.$t("message.createTable.XDF")}},[s("Select",{attrs:{clearable:"",placeholder:e.$t("message.createTable.WXDF")},model:{value:e.options.quote,callback:function(t){e.$set(e.options,"quote",t)},expression:"options.quote"}},e._l(e.staticData.quote,(function(e,t){return s("Option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)]:e._e(),s("FormItem",{attrs:{label:e.$t("message.createTable.HXWBT")}},[s("Checkbox",{model:{value:e.options.isHasHeader,callback:function(t){e.$set(e.options,"isHasHeader",t)},expression:"options.isHasHeader"}})],1),s("FormItem",{staticStyle:{"text-align":"right","padding-right":"20px"}},[s("Button",{attrs:{type:"primary",loading:e.isLoading},on:{click:e.getFileContent}},[e._v(e._s(e.$t("message.createTable.HQBZDSJ")))])],1)]:e._e()],2),s("Modal",{attrs:{title:e.$t("message.createTable.XZWJLJ")},on:{"on-ok":e.confirm,"on-cancel":e.cancel},model:{value:e.isTreeModalShow,callback:function(t){e.isTreeModalShow=t},expression:"isTreeModalShow"}},[s("directory-dialog",{attrs:{tree:e.fileTree,"load-data-fn":e.loadDataFn,"filter-node":e.filterNode,path:e.tmpTreePath,"fs-type":e.options.type,height:400},on:{"set-node":e.setNode}})],1)],1)},a=[],n=(s("9865"),s("57e7"),s("ed93")),r=s("2ef0"),o=s("7138"),c={components:{directoryDialog:n["a"]},props:{importType:{type:String,default:"csv"},options:{type:Object,required:!0}},data:function(){return{validator:{isLeaf:!0},workspaceComponent:null,hdfsComponent:null,staticData:{type:[{label:this.$t("message.createTable.GXMLDR"),value:"share"},{label:"HDFS".concat(this.$t("message.createTable.DR")),value:"hdfs"}],separator:[{label:"".concat(this.$t("message.createTable.DH"),"(,)"),value:","},{label:"".concat(this.$t("message.createTable.FH"),"(;)"),value:";"},{label:"".concat(this.$t("message.createTable.ZBF"),"(\\t)"),value:"\\t"},{label:this.$t("message.createTable.KG"),value:"%20"}],chartset:[{label:"utf-8",value:"utf-8"},{label:"GBK",value:"GBK"}],quote:[{label:"".concat(this.$t("message.createTable.SYH"),'("")'),value:'"'},{label:"".concat(this.$t("message.createTable.DYH"),"('')"),value:"'"}],fieldsType:[{value:"string"},{value:"tinyint"},{value:"smallint"},{value:"int"},{value:"bigint"},{value:"boolean"},{value:"float"},{value:"double"},{value:"decimal"},{value:"timestamp"},{value:"date"},{value:"char"},{value:"varchar"}],dateType:[{label:"yyyyMMdd",value:"yyyyMMdd"},{label:"yyyy-MM-dd",value:"yyyy-MM-dd"},{label:"yyyy.MM.dd",value:"yyyy.MM.dd"},{label:"yyyy/MM/dd",value:"yyyy/MM/dd"}]},fileTree:[],loadDataFn:function(){},filterNode:function(){},isLoading:!1,isTreeModalShow:!1,tmpTreePath:""}},computed:{isPathLeaf:function(){return this.options.exportPath&&this.options.exportPath.indexOf(".")>=0}},watch:{importType:function(e){"csv"!==e&&"xlsx"!==e||(this.reset(),this.getTree("share"),this.filterNode=function(){},this.filterNode=this.getFilterNode(e))}},mounted:function(){this.getTree("share"),this.filterNode=this.getFilterNode(this.importType)},methods:{extendWorkSpace:function(e){var t=this;this.workspaceComponent?e(this.workspaceComponent):this.dispatch("WorkSidebar:showTree",(function(s){t.workspaceComponent=s,e(s)}))},extendHdfs:function(e){var t=this;this.hdfsComponent?e(this.hdfsComponent):this.dispatch("HdfsSidebar:showTree",(function(s){t.hdfsComponent=s,e(s)}))},getTree:function(e){var t=this,s="share"===e?"scriptTree":"hdfsTree",i="share"===e?"extendWorkSpace":"extendHdfs",a=o["a"].get(s,"SESSION");this.fileTree=[],this.$nextTick((function(){!a||Object(r["isEmpty"])(a)?t[i]((function(e){e.getRootPath((function(s){e.getTree((function(s){s&&t.fileTree.push(s),t.loadDataFn=e.loadDataFn}))}))})):(t.fileTree=a,t[i]((function(e){t.loadDataFn=e.loadDataFn})))}))},getFilterNode:function(e){return function(t){var s="csv"===e?[".csv",".txt"]:[".xlsx",".xls"];if(!t.isLeaf)return!0;var i=t.label.substr(t.label.lastIndexOf("."),t.label.length),a=-1!==Object(r["indexOf"])(s,i);return a}},setNode:function(e){this.validator.isLeaf=e.isLeaf;var t=e.path;this.tmpTreePath=t},changeTreeByType:function(){this.getTree(this.options.type)},reset:function(){this.tmpTreePath="",this.options.exportPath="",this.options.type="share",this.options.separator=",",this.options.chartset="utf-8",this.options.quote="",this.options.isHasHeader=!1},getFileContent:function(){this.$emit("get-fields",this.options)},confirm:function(){this.options.exportPath=this.tmpTreePath,this.isTreeModalShow=!1},cancel:function(){this.tmpTreePath="",this.isTreeModalShow=!1},onPathInputFocus:function(){this.isTreeModalShow=!0}}},l=c,d=s("2877"),u=Object(d["a"])(l,i,a,!1,null,null,null);t["default"]=u.exports},4960:function(e,t,s){"use strict";var i=s("34c7"),a=s.n(i);a.a},"4de8":function(e,t,s){"use strict";s.r(t),t["default"]={name:"Workbench",events:["Workbench:add","Workbench:deleteDirOrFile","Workbench:save","Workbench:socket","Workbench:openFile","Workbench:run","Workbench:pasteInEditor","Workbench:saveAs","Workbench:updateTab","Workbench:setResultCache","Workbench:setResult","Workbench:insertValue","Workbench:checkExist","Workbench:getWorksLangList","Workbench:setEditorPanelSize","Workbench:setTabPanelSize","Workbench:setParseAction","Workbench:updateFlowsTab","Workbench:resetScriptData","Workbench:removeWork","Workbench:updateFlowsNodeName"],dispatchs:{Workbench:["save","saveAs","run","add","setResultCache","setResult","insertValue","openFile","checkExist","setEditorPanelSize","setTabPanelSize","setParseAction","resetScriptData","removeWork"],IndexedDB:["appendLog","clearLog","getLog","changeLogKey","updateHistory","appendHistory","getHistory","clearHistory","changeHistoryKey","updateResult","appendResult","getResult","clearResult","changResultKey","updateProgress","clearProgress","getProgress","changProgressKey","getTabs","recordTab","toggleTab","removeTab","changeTabKey","getGlobalCache","setGlobalCache","updateGlobalCache","removeGlobalCache","deleteDb"],WebSocket:["init","send"],WorkSidebar:["setHighLight","showTree","revealInSideBar"],HdfsSidebar:["setHighLight","showTree"],HiveSidebar:["getAllDbsAndTables","deletedAndRefresh","showHive"],fnSidebar:["getAllLoadedFunction"],Footer:["updateRunningJob"],GlobalValiable:["getGlobalVariable"],IDE:["saveNode"]},data:{API_PATH:"http://localhost:8088/api/rest_j/v1/",BI_API_PATH:"BI_PREFIX"},component:function(){return Promise.resolve().then(s.bind(null,"77dd"))},config:{}}},5402:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.result&&e.result.type?s("div",{ref:"view",staticClass:"we-result-view"},[s("we-toolbar",{attrs:{"current-path":e.result.path,script:e.script,row:e.hightLightRow},on:{"on-analysis":function(t){return e.$emit("on-analysis")}}}),s("Spin",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],attrs:{size:"large",fix:""}}),"1"===e.result.type?s("div",{staticClass:"text-result-div",style:{height:e.resultHeight}},[e.result.bodyRows?s("div",e._l(e.result.bodyRows.split("\n"),(function(t,i){return s("div",{key:i},[e._v(e._s(t))])})),0):s("span",{staticClass:"empty-text"},[e._v(e._s(e.$t("message.workBench.body.script.result.emptyText")))])]):"2"===e.result.type&&e.tableData.type?s("div",{class:{"table-box":"normal"===e.tableData.type}},["normal"===e.tableData.type?[s("Table",{staticClass:"result-normal-table",attrs:{border:"","highlight-row":"",width:e.tableData.width,height:e.tableData.height,columns:e.data.headRows,data:e.data.bodyRows},on:{"on-current-change":e.onRowClick}}),e.isWaterMask?s("we-water-mask",{ref:"watermask",attrs:{text:e.watermaskText}}):e._e()]:[s("we-table",{attrs:{id:"resultTable",data:e.data,width:e.tableData.width,height:e.tableData.height,size:e.tableData.size,"offset-x":e.offsetX,"offset-y":e.offsetY,variable:e.getVarW,"need-reset":e.needReset},on:{"on-scroll":e.saveOffset,"dbl-click":e.copyLabel,"on-click":e.onWeTableRowClick,"change-status":e.changeStatus}}),e.isWaterMask?s("we-water-mask",{ref:"watermask",attrs:{text:e.watermaskText}}):e._e()]],2):"4"===e.result.type?s("div",[s("iframe",{style:{height:e.resultHeight},attrs:{id:"iframeName",srcdoc:e.htmlData,frameborder:"0",width:"100%"},on:{change:function(t){return e.iframeOnChange()}}})]):"5"===e.result.type?s("div",{staticClass:"html-result-div",style:{height:e.resultHeight},domProps:{innerHTML:e._s(e.result.bodyRows)}}):s("span",{staticClass:"empty-text"},[e._v(e._s(e.$t("message.workBench.body.script.result.emptyText")))]),s("div",{staticClass:"we-page-container"},[e.script.resultList&&e.script.resultList.length>1?s("result-set-list",{attrs:{list:e.script.resultList},on:{change:e.changeSet}}):e._e(),"2"===e.result.type?s("Page",{ref:"page",attrs:{total:e.tableData.total,"page-size-opts":e.page.sizeOpts,"page-size":e.page.size,current:e.page.current,"class-name":"page",size:"small","show-total":"","show-sizer":""},on:{"on-change":e.change,"on-page-size-change":e.changeSize}}):e._e()],1)],1):e._e()},a=[],n=(s("2caf"),s("ac4d"),s("8a81"),s("5df3"),s("1c4c"),s("7f7f"),s("6b54"),s("87b3"),s("55dd"),s("9865"),s("57e7"),s("bd86")),r=(s("6d67"),s("d92a"),s("456d"),s("ac6a"),s("f3e2"),s("c5f6"),s("0971")),o=s("410f"),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"root",staticClass:"waterMask"},[s("canvas",{ref:"single",staticClass:"single"}),s("canvas",{ref:"repeat"})])},l=[],d=(s("14b9"),{props:{text:{type:String,default:""}},data:function(){return{single:null,repeat:null,root:null}},mounted:function(){this.single=this.$refs.single,this.repeat=this.$refs.repeat,this.root=this.$refs.root,this.updateCanvas(this.text)},methods:{generateSingle:function(e){var t=400,s=100;this.single.width=t,this.single.height=s,this.single.style.width=t+"px",this.single.style.height=s+"px";var i=this.single.getContext("2d");i.clearRect(0,0,t,s),i.font="12px 宋体",i.rotate(-10*Math.PI/180),i.fillStyle="rgba(0,0,0,0.2)",i.fillText(e,10,85)},generateRepeat:function(){var e=this.root,t=e.clientWidth,s=e.clientHeight,i=this.repeat;i.width=t,i.height=s;var a=i.getContext("2d");a.clearRect(0,0,t,s);var n=a.createPattern(this.single,"repeat");a.fillStyle=n,a.fillRect(0,0,t,s)},updateCanvas:function(e){this.generateSingle(e),this.generateRepeat()}}}),u=d,h=(s("ca0d"),s("2877")),p=Object(h["a"])(u,c,l,!1,null,null,null),f=p.exports,m=f,g=s("2630"),b=s("02b1"),v=s("562a");function y(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=w(e))){var t=0,s=function(){};return{s:s,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,n=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return n=e.done,e},e:function(e){r=!0,a=e},f:function(){try{n||null==i.return||i.return()}finally{if(r)throw a}}}}function w(e,t){if(e){if("string"===typeof e)return T(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(s):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}var S={components:{WeTable:o["a"].WeTable,WeToolbar:g["default"],WeWaterMask:m,resultSetList:v["default"]},props:{result:{type:[Object],default:function(){return{headRows:[],bodyRows:[],type:"EMPTY",total:0,path:"",cache:{}}}},script:[Object],height:Number},data:function(){var e=this.initOffset(),t=e.x,s=e.y,i=this.getWaterMask(),a=this.getUserName();return{isWaterMask:i,watermaskText:"".concat(this.$t("message.workBench.body.script.result.watermaskText"),"-").concat(a),data:{headRows:[],bodyRows:[]},tableData:{type:"normal",width:1e3,height:400,size:100,total:100,cache:{offsetX:0,offsetY:0}},offsetX:t,offsetY:s,resultSet:0,page:{current:1,size:50,sizeOpts:[20,50,80,100]},wCache:[],dblClickTimer:null,isLoading:!1,hightLightRow:null,needReset:!1}},computed:{scriptViewState:function(){var e={},t=this.script.scriptViewState;return Object.keys(t).forEach((function(s){e[s]=t[s]})),e},resultHeight:function(){return this.height-80+"px"}},watch:{result:{handler:function(e){this.updateData()},deep:!0,immediate:!0},scriptViewState:{handler:function(e,t){var s=this.script.result;t.bottomPanelMin&&!e.bottomPanelMin&&this.resize(),s&&"result"===e.showPanel&&"result"!==t.showPanel&&!s.cache.cahceTag&&(s.cache.cahceTag=!0,s.cache.offsetX=(s.cache.offsetX||0)+Math.SQRT1_2,s.cache.offsetY=(s.cache.offsetY||0)+Math.SQRT1_2,this.resize())},deep:!0},$route:function(e){"/home"===e.path&&(this.data.headRows=this.data.headRows.slice(),this.needReset=!0)}},mounted:function(){this.initPage(),b["a"].bind(this.$el,this.resize)},beforeDestroy:function(){this.script.result&&(this.script.result.cache.offsetX=this.tableData.cache.offsetX,this.script.result.cache.offsetY=this.tableData.cache.offsetY),clearTimeout(this.dblClickTimer),this.dblClickTimer=null,b["a"].unbind(this.$el)},methods:{"Workbench:setParseAction":function(e){this.resize()},initOffset:function(){var e=this.script.result.cache,t=0,s=0;return e&&e.offsetX&&(t=e.offsetX),e&&e.offsetY&&(s=e.offsetY),{x:t,y:s}},initPage:function(){this.page=Object.assign(this.page,{current:this.result.current,size:this.result.size}),this.change(this.result.current)},updateData:function(){var e=this;if("2"===this.result.type){this.tableData.type=this.result.headRows.length>50?"virtual":"normal";var t=this.result.headRows||[];if(this.data.headRows=[],this.data.bodyRows=[],this.originRows=this.result.bodyRows||[],this.tableData.total=this.result.total,"normal"===this.tableData.type){var s,i=y(t);try{var a=function(){var t=s.value,i=t.slice(t.indexOf(":")+1,t.indexOf(",")),a="dataType".length,n=t.slice(t.indexOf(",")+a+2,t.lastIndexOf(","));e.data.headRows.push({title:i,key:t,sortable:"true",sortMethod:function(e,t,s){return r["a"].sort(e,t,s)},columnType:n,renderHeader:function(t,s){return t("span",{attrs:{title:n},on:{dblclick:function(t){return e.copyLabel({content:s.column.title}),!1}}},s.column.title)}})};for(i.s();!(s=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}this.originRows=this.originRows.map((function(e){var s={},i=[];return e.forEach((function(e,a){Object.assign(s,Object(n["a"])({},t[a],e)),"NULL"===e&&i.push(t[a])})),i.length&&(s.cellClassName={},i.forEach((function(e){s.cellClassName[e]="is-null"}))),s}))}else for(var o=0;o<t.length;o++){var c=t[o].slice(t[o].indexOf(":")+1,t[o].indexOf(",")),l="dataType".length,d=t[o].slice(t[o].indexOf(",")+l+2,t[o].lastIndexOf(","));this.data.headRows.push({content:c,sortable:!0,columnType:d})}this.data.originRows=this.originRows,this.pageingData()}},pageingData:function(){if(this.originRows&&this.originRows.length){var e=this.page,t=e.current,s=e.size,i=Math.min(this.tableData.total,t*s),a=Math.max(0,(t-1)*s),n=this.originRows.slice(a,i);this.data.bodyRows=n}},change:function(e){this.hightLightRow=null,this.page.current=e,this.pageingData()},changeSize:function(e){this.hightLightRow=null,this.page.size=e,this.page.current=1,this.pageingData()},resizeWaterMask:function(){this.$refs.watermask&&this.$refs.watermask.updateCanvas(this.watermaskText)},resize:function(){if(this.$refs.page){var e=this.$refs.page.$el,t=(e.clientWidth||0)/2;e.style.marginLeft=-t+"px";var s=this.$refs.view,i=getComputedStyle(s),a=s.clientHeight,n=s.clientWidth;return a-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom),n-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),"normal"===this.tableData.type?this.tableData.width=120*this.data.headRows.length>n?120*this.data.headRows.length:n:this.tableData.width=n,this.tableData.height=a-60,this.resizeWaterMask(),!1}},saveOffset:function(e){var t=this,s=e.offsetX,i=e.offsetY;clearTimeout(this.dblClickTimer),this.dblClickTimer=setTimeout((function(){var e=t.tableData.cache;e.offsetX=s,e.offsetY=i}),300)},changeSet:function(e){var t=this;this.isLoading=!0,this.$emit("on-set-change",{currentSet:e,lastResult:this.getResult()},(function(){t.isLoading=!1}))},getVarW:function(e){return this.wCache[e]},copyLabel:function(e){clearTimeout(this.dblClickTimer),r["a"].executeCopy(e.content)},getResult:function(){var e=Object.assign(this.result,{cache:{offsetX:this.tableData.cache.offsetX,offsetY:this.tableData.cache.offsetY},current:this.page.current,size:this.page.size});return e},iframeOnChange:function(){this.$nextTick((function(){document.all.iframeName.contentWindow.location.reload()}))},onRowClick:function(e,t){this.hightLightRow=e},onWeTableRowClick:function(e){var t=this,s=this.data.bodyRows[e];this.hightLightRow={},this.data.headRows.forEach((function(e,i){var a="columnName:".concat(e.content,",dataType:").concat(e.columnType,",");t.hightLightRow[a]=s[i]}))},changeStatus:function(){this.needReset=!1}}},E=S,N=(s("f471"),Object(h["a"])(E,i,a,!1,null,null,null));t["default"]=N.exports},5555:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field-table"},[s("Input",{attrs:{placeholder:e.$t("message.tableDetails.SSZDMC")},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}},[s("Icon",{attrs:{slot:"prefix",type:"ios-search"},slot:"prefix"})],1),s("div",{staticClass:"field-table-header"},[s("div",{staticClass:"field-table-item field-table-index"},[e._v(e._s(e.$t("message.tableDetails.XH")))]),e._l(e.tableColumns,(function(t,i){return s("div",{key:i,staticClass:"field-table-item",class:t.className},[e._v(e._s(t.title))])}))],2),s("virtual-list",{ref:"columnTables",staticClass:"field-table",attrs:{size:46,remain:e.searchColList.length>e.maxSize?e.maxSize:e.searchColList.length,wtag:"ul"}},e._l(e.searchColList,(function(t,i){return s("li",{key:i,staticClass:"field-table-body",style:{"border-bottom":i===e.searchColList.length-1?"1px solid #dcdee2":"none"}},[s("div",{staticClass:"field-table-item field-table-index"},[e._v(e._s(i+1))]),e._l(e.tableColumns,(function(i,a){return s("div",{key:a,staticClass:"field-table-item",class:i.className,attrs:{title:e.formatValue(t,i)}},[e._v(e._s(e.formatValue(t,i)))])}))],2)})),0)],1)},a=[],n=(s("7f7f"),s("ac6a"),s("f3e2"),s("3b2b"),s("100e")),r=s("7dc5"),o={components:{virtualList:r["a"]},props:{tableInfo:{type:Object}},data:function(){return{searchText:"",searchColList:[],tableColumns:[{title:this.$t("message.tableDetails.ZDM"),key:"name",className:"field-table-name"},{title:this.$t("message.tableDetails.ZDLX"),key:"type",className:"field-table-type"},{title:this.$t("message.tableDetails.BM"),key:"alias",className:"field-table-alias"},{title:this.$t("message.tableDetails.SFZJ"),key:"primary",type:"boolean",className:"field-table-primary"},{title:this.$t("message.tableDetails.SFFQ"),key:"partitionField",type:"boolean",className:"field-table-part"},{title:this.$t("message.tableDetails.ZDGZ"),key:"rule",className:"field-table-rule"},{title:this.$t("message.tableDetails.MS"),key:"comment",className:"field-table-comment"}]}},computed:{maxSize:function(){return Math.floor((window.innerHeight-242)/46)-1}},watch:{searchText:function(){var e=this,t=/^[\w]*$/;if(this.searchText&&t.test(this.searchText)){this.searchColList=[];var s=new RegExp(".*".concat(this.searchText,".*")),i=this.tableInfo.fieldsList;i.forEach((function(t){s.test(t.name)&&e.searchColList.push(t)}))}else this.searchColList=this.tableInfo.fieldsList}},mounted:function(){this.init()},methods:{init:function(){this.searchColList=this.tableInfo.fieldsList},formatValue:function(e,t){return n["a"].formatValue(e,t)}}},c=o,l=s("2877"),d=Object(l["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},"55e0":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"resource"},[s("Button",{staticClass:"resource-refresh",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getExplorerInfo()}}},[e._v(e._s(e.$t("message.constants.refresh")))]),s("Tabs",{attrs:{animated:!1},on:{"on-click":e.getExplorerInfo},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[s("TabPane",{attrs:{label:e.$t("message.resource.tabs.first"),name:"first"}},[s("Table",{attrs:{columns:e.engineColumns,data:e.engineData,height:e.tableHeight,border:"",stripe:""}})],1),s("TabPane",{attrs:{label:e.$t("message.resource.tabs.second"),name:"second"}},[s("Table",{attrs:{columns:e.userColumns,data:e.userData,height:e.tableHeight,border:"",stripe:""}})],1),s("TabPane",{attrs:{label:e.$t("message.resource.tabs.third"),name:"third"}},[s("Table",{attrs:{columns:e.serverColumns,data:e.serverData,height:e.tableHeight,border:"",stripe:""}})],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"resource-loading",style:{height:e.height+"px"}},[s("Icon",{staticClass:"resource-loading-icon",attrs:{type:"ios-loading",size:"30"}})],1)],1)},a=[],n=(s("ac6a"),s("f3e2"),s("2ef0")),r=s("c1df"),o=s.n(r),c=s("daa2"),l=s("b593"),d={name:"Resource",components:{},data:function(){var e=this;return{height:0,loading:!1,currentTab:"first",isClickBefore:!0,serverColumns:[{title:this.$t("message.resource.columns.moduleName"),key:"moduleName",width:180,align:"center"},{title:this.$t("message.resource.columns.totalResource"),align:"center",children:[{title:"CPU",key:"totalCpu",align:"center",sortable:!0},{title:this.$t("message.resource.columns.memory"),key:"totalMemory",align:"center",sortable:!0}]},{title:this.$t("message.resource.columns.usedResource"),align:"center",children:[{title:"CPU",key:"usedCpu",align:"center",sortable:!0},{title:this.$t("message.resource.columns.memory"),key:"usedMemory",align:"center",sortable:!0}]}],userColumns:[{title:this.$t("message.resource.columns.moduleName"),key:"moduleName",align:"center"},{title:this.$t("message.resource.columns.usedResource"),align:"center",children:[{title:"CPU",key:"usedCpu",align:"center",sortable:!0},{title:this.$t("message.resource.columns.memory"),key:"usedMemory",align:"center",sortable:!0}]},{title:this.$t("message.resource.columns.initializingResource"),align:"center",children:[{title:"CPU",key:"lockedCpu",align:"center",sortable:!0},{title:this.$t("message.resource.columns.memory"),key:"lockedMemory",align:"center",sortable:!0}]}],engineColumns:[{type:"expand",width:50,render:function(t,s){return t(c["default"],{props:{row:s.row,formatCpu:e.formatCpu}})}},{title:this.$t("message.resource.columns.engineInstance"),key:"engineInstance",align:"center",sortable:!0},{title:this.$t("message.resource.columns.applicationName"),key:"applicationName",align:"center"},{title:this.$t("message.resource.columns.usedTime"),key:"usedTime",align:"center",width:100,render:function(e,t){return e("span",{},o()(t.row.usedTime).format("YYYY-MM-DD HH:mm:ss"))}},{title:this.$t("message.resource.columns.engineStatus"),key:"engineStatus",align:"center",render:function(e,t){return e("span",{},t.row.engineStatus)}},{title:this.$t("message.resource.columns.usedResource"),align:"center",children:[{title:"CPU",key:"usedResource.driver.cpu",align:"center",sortable:!0,render:function(t,s){return t("span",{},e.formatCpu(e.formatEngines(s.row.usedResource).cpu))}},{title:this.$t("message.resource.columns.memory"),key:"usedResource.driver.memory",align:"center",sortable:!0,render:function(t,s){return t("span",{},e.formatEngines(s.row.usedResource).memory)}}]},{title:this.$t("message.resource.columns.username"),key:"statusInfo.engineInfo.user",align:"center",render:function(e,t){return e("span",{},t.row.statusInfo.engineInfo.user)}}],engineData:[],userData:[],serverData:[],tableHeight:0}},mounted:function(){this.height=this.$route.query.height,this.tableHeight=this.height-50,this.currentTab="first",this.getExplorerInfo()},beforeDestroy:function(){this.engineData=[],this.serverData=[],this.userData=[]},methods:{getExplorerInfo:function(){if(this.loading)return this.$Message.warning(this.$t("message.constants.warning.api"));this.loading=!0,"first"===this.currentTab?this.getEngines():"second"===this.currentTab?this.getUserResource():"third"===this.currentTab&&this.getModuleResources()},getEngines:function(){var e=this;l["a"].fetch("/resourcemanager/engines").then((function(t){e.loading=!1,e.engineData=t.engines})).catch((function(t){e.loading=!1}))},getUserResource:function(){var e=this;this.userData=[],l["a"].fetch("/resourcemanager/userresources").then((function(t){e.loading=!1;var s=Object(n["keys"])(t);s.forEach((function(s,i){var a=JSON.parse(t[s].lockedResource),n=JSON.parse(t[s].usedResource);"sparkEngineManager"===s?e.userData.push({moduleName:s,usedCpu:e.formatCpu(n.driver.cpu),usedMemory:n.driver.memory,lockedCpu:e.formatCpu(a.driver.cpu),lockedMemory:a.driver.memory}):e.userData.push({moduleName:s,usedCpu:e.formatCpu(n.cpu),usedMemory:n.memory,lockedCpu:e.formatCpu(a.cpu),lockedMemory:a.memory})}))})).catch((function(t){e.loading=!1}))},getModuleResources:function(){var e=this;this.serverData=[],l["a"].fetch("/resourcemanager/moduleresources").then((function(t){e.loading=!1;var s=Object(n["keys"])(t);s.forEach((function(s,i){var a=JSON.parse(t[s].totalResource),n=JSON.parse(t[s].usedResource);"sparkEngineManager"===s?e.serverData.push({moduleName:s,usedCpu:e.formatCpu(n.driver.cpu),usedMemory:n.driver.memory,totalCpu:e.formatCpu(a.driver.cpu),totalMemory:a.driver.memory}):e.serverData.push({moduleName:s,usedCpu:e.formatCpu(n.cpu),usedMemory:n.memory,totalCpu:e.formatCpu(a.cpu),totalMemory:a.memory})}))})).catch((function(t){e.loading=!1}))},formatCpu:function(e){return-1===e?this.$t("message.resource.noLimit"):e+" ".concat(this.$t("message.resource.core"))},skipTo:function(e){location.href="".concat(e)},killSessionJob:function(e,t){},killQueryJob:function(e,t,s){},isSpecialSession:function(e,t){return e.description&&e.description.specialSession&&"<distribution>"!==e.description.specialSession?"blueText":null},formatEngines:function(e){var t=JSON.parse(e);return t.driver?t.driver:t}}},u=d,h=(s("a84f"),s("2877")),p=Object(h["a"])(u,i,a,!1,null,null,null);t["default"]=p.exports},"562a":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleOutsideClick,expression:"handleOutsideClick"}],staticClass:"set ivu-select ivu-select-single ivu-select-small"},[s("div",{staticClass:"ivu-select-selection",attrs:{tabindex:"0"},on:{click:e.showList}},[s("div",{},[s("span",{staticClass:"ivu-select-selected-value"},[e._v(e._s(e.$t("message.container.resultList"))+e._s(e.current))]),s("i",{staticClass:"ivu-icon ivu-icon-ios-arrow-down ivu-select-arrow"})])]),e.show?s("div",{staticClass:"ivu-select-dropdown",attrs:{"x-placement":"bottom-start"},on:{click:e.changeSet}},[e.list.length>1?s("virtual-list",{ref:"vsl",staticClass:"ivu-select-dropdown-list list",staticStyle:{"overflow-x":"hidden"},attrs:{size:18,remain:e.list.length>8?8:e.list.length,wtag:"ul"}},e._l(e.list,(function(t,i){return s("li",{key:t.path,class:{current:e.current===i+1},attrs:{"data-index":i}},[e._v(e._s(e.$t("message.container.resultList"))+e._s(i+1))])})),0):e._e()],1):e._e()])},a=[],n=s("7dc5"),r=s("a779"),o={name:"ResultSetList",directives:{clickoutside:r["a"]},components:{virtualList:n["a"]},props:{list:{type:Array,default:function(){return[]}}},data:function(){return{resultList:this.list,show:!1,current:1}},watch:{list:function(e){this.resultList=e||[]}},methods:{changeSet:function(e){if(e.target){var t=e.target.getAttribute("data-index");t&&(this.$emit("change",t),this.show=!1,this.current=t-0+1)}},showList:function(){this.show=!this.show},handleOutsideClick:function(){this.show=!1}}},c=o,l=(s("ef88"),s("2877")),d=Object(l["a"])(c,i,a,!1,null,"42685bbc",null);t["default"]=d.exports},"56ba":function(e,t,s){e.exports=s.p+"img/email.5cb32657.svg"},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var i=s("a026"),a=s("e069"),n=s.n(a),r=s("8c4f"),o=(s("57e7"),s("28a5"),s("ac6a"),s("f3e2"),s("d92a"),s("456d"),s("7f7f"),s("d650")),c=(s("1c01"),s("d225")),l=s("b0b4"),d=s("0971"),u=function(){function e(t,s){if(Object(c["a"])(this,e),Object.defineProperty(this,"name",{value:t,enumerable:!1}),Object.defineProperty(this,"pre",{value:"FesFesx_"+this.name+"_",enumerable:!1}),d["a"].isPlainObject(s))for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&i["default"].set(this,a,s[a])}return Object(l["a"])(e,[{key:"get",value:function(e){return this[e]}},{key:"set",value:function(e,t){return i["default"].set(this,e,t),this}},{key:"clear",value:function(){for(var e in this)Object.prototype.hasOwnProperty.call(this,e)&&i["default"].set(this,e,void 0)}}]),e}(),h=u,p=function(e){if(!e.name)return console.error("请配置独一无二的ModuleName");var t=e.dispatchs||[];d["a"].isPlainObject(t)&&function(){var e=[],s=function(s){d["a"].isArray(t[s])&&t[s].forEach((function(t){e.push("".concat(s,":").concat(t))}))};for(var i in t)s(i);t=e}();var s=new h(e.name,e.data);if(e.methods){var i=Object.keys(e.methods);i.length>0&&i.forEach((function(t){var s=e.methods[t];s&&o["b"].on("".concat(e.name,":").concat(t),s.bind(e))}))}return e.dispatch=function(e,s){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Function;return d["a"].isArray(t)&&-1!=t.indexOf(e)&&(i=o["b"].emit(e,s,a)),Promise.resolve(i)},{data:function(){var e={fesx:s};return e},created:function(){var t=this;if(e.events){var s=e.events;d["a"].isArray(s)&&s.length>0&&s.forEach((function(e){var s=t[e];s&&o["b"].on("".concat(e),s)}))}},beforeDestroy:function(){var t=this;if(e.events){var s=e.events;d["a"].isArray(s)&&s.length>0&&s.forEach((function(e){var s=t[e];s&&o["b"].off(e,s)}))}},methods:{dispatch:e.dispatch}}},f=p,m={},g=s("32a2");g.keys().forEach((function(e){var t=g(e);t=t.default||t,t.mixin=f(t),m[e]=t}));var b=s("365f");b.keys().forEach((function(e){var t=b(e);t=t.default||t;var s="./"+e.split("/")[1]+"/index.js",i=m[s],a=i&&i.mixin;t.mixins?-1==t.mixins.indexOf(a)&&t.mixins.push(a):t.mixins=[a]})),m=null;var v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"layout"},[s("router-view")],1)},y=[],w=s("7138"),T={name:"App",created:function(){this.clearSession()},methods:{clearSession:function(){w["a"].clear()}}},S=T,E=(s("4960"),s("2877")),N=Object(E["a"])(S,v,y,!1,null,null,null),C=N.exports,k=s("7a3f"),O=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"ctx-menu-container",style:e.ctxStyle,attrs:{id:"menu-"+e.id},on:{click:function(t){return t.stopPropagation(),e.handleSelect(t)},contextmenu:function(e){e.stopPropagation()}}},[s("div",{staticClass:"ctx"},[s("ul",{staticClass:"ctx-menu"},[e._t("default")],2)])])},x=[],I=s("a779"),R={name:"WeMenu",directives:{clickoutside:I["a"]},props:{id:String},data:function(){return{isShow:!1,ctxTop:0,ctxLeft:0,ctxBottom:0,ctxRight:0}},computed:{ctxStyle:function(){var e={top:"".concat(this.ctxTop,"px"),right:"".concat(this.ctxRight,"px"),bottom:"".concat(this.ctxBottom,"px"),left:"".concat(this.ctxLeft,"px")};return-1===this.ctxTop&&delete e.top,-1===this.ctxRight&&delete e.right,-1===this.ctxBottom&&delete e.bottom,-1===this.ctxLeft&&delete e.left,e}},methods:{setPositionFromEvent:function(e){var t=this,s=e.pageX,i=e.pageY,a=window.innerHeight,n=window.innerWidth,r=i-document.body.scrollTop;this.ctxTop=r,this.ctxLeft=s,this.ctxBottom=-1,this.ctxRight=-1,this.$nextTick((function(){var e=document.getElementById("menu-".concat(t.id)),o=e.scrollHeight,c=e.scrollWidth;r+o>=a&&(t.ctxBottom=a-i+o,t.ctxTop=-1),s+c>=n&&(t.ctxRight=n-s+c,t.ctxLeft=-1)}))},handleOutsideClick:function(){this.close(),this.$emit("we-menu-cancel")},handleSelect:function(e){this.close(),this.$emit("we-menu-select")},show:function(){this.isShow=!0},close:function(){this.isShow=!1},open:function(e,t){this.show(),this.setPositionFromEvent(e)}}},D=R,L=(s("7604"),Object(E["a"])(D,O,x,!1,null,null,null)),A=L.exports,P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"ctx-item",on:{click:e.handleClick,mouseover:e.handleOver,mouseout:e.handleOut}},[e._t("default")],2)},_=[],$=s("75fc");function M(e,t,s){this.$children.forEach((function(i){var a=i.$options.name;a===e?i.$emit.apply(i,Object($["a"])([t].concat(s))):M.apply(i,[e,t].concat([s]))}))}var j,F,B,H,K={methods:{dispatch:function(e,t,s){var i,a=this.$parent||this.$root,n=a.$options.name;while(a&&(!n||n!==e))a=a.$parent,a&&(n=a.$options.name);a&&(i=a).$emit.apply(i,Object($["a"])([t].concat(s)))},broadcast:function(e,t,s){M.call(this,e,t,s)}}},U={name:"WeMenuItem",mixins:[K],methods:{handleClick:function(e){this.$emit("select",e)},handleOver:function(e){this.broadcast("WeSubMenu","we-menu-over",e)},handleOut:function(e){this.broadcast("WeSubMenu","we-menu-leave",e)}}},W=U,V=Object(E["a"])(W,P,_,!1,null,null,null),X=V.exports,Y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"second-menu"},[e._t("default")],2)},z=[],G={name:"WeSubMenu",data:function(){return{isShow:!1}},mounted:function(){this.initEvent()},methods:{initEvent:function(){this.$on("we-menu-over",this.handleOver),this.$on("we-menu-leave",this.handleOut)},handleOver:function(e){this.isShow=!0},handleOut:function(e){this.isShow=!1}}},Z=G,J=Object(E["a"])(Z,Y,z,!1,null,null,null),q=J.exports,Q=s("2b78"),ee=Q["a"],te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"we-editor",class:e.editorName})},se=[],ie=(s("6762"),s("2fdb"),s("a481"),s("4f37"),s("f942")),ae=s.n(ie),ne={WHITESPACE:"whitespace",WORD:"word",STRING:"string",RESERVED:"reserved",RESERVED_TOPLEVEL:"reserved-toplevel",RESERVED_NEWLINE:"reserved-newline",OPERATOR:"operator",OPEN_PAREN:"open-paren",CLOSE_PAREN:"close-paren",LINE_COMMENT:"line-comment",BLOCK_COMMENT:"block-comment",NUMBER:"number",PLACEHOLDER:"placeholder"},re=s("8448"),oe=s.n(re),ce=s("4416"),le=s.n(ce),de="top-level",ue="block-level",he=function(){function e(t){Object(c["a"])(this,e),this.indent=t||"  ",this.indentTypes=[]}return Object(l["a"])(e,[{key:"getIndent",value:function(){return oe()(this.indent,this.indentTypes.length)}},{key:"increaseToplevel",value:function(){this.indentTypes.push(de)}},{key:"increaseBlockLevel",value:function(){this.indentTypes.push(ue)}},{key:"decreaseTopLevel",value:function(){le()(this.indentTypes)===de&&this.indentTypes.pop()}},{key:"decreaseBlockLevel",value:function(){while(this.indentTypes.length>0){var e=this.indentTypes.pop();if(e!==de)break}}}]),e}(),pe=50,fe=function(){function e(){Object(c["a"])(this,e),this.level=0}return Object(l["a"])(e,[{key:"beginIfPossible",value:function(e,t){0===this.level&&this.isInlineBlock(e,t)?this.level=1:this.level>0?this.level++:this.level=0}},{key:"end",value:function(){this.level--}},{key:"isActive",value:function(){return this.level>0}},{key:"isInlineBlock",value:function(e,t){for(var s=0,i=0,a=t;a<e.length;a++){var n=e[a];if(s+=n.value.length,s>pe)return!1;if(n.type===ne.OPEN_PAREN)i++;else if(n.type===ne.CLOSE_PAREN&&(i--,0===i))return!0;if(this.isForbiddenToken(n))return!1}return!1}},{key:"isForbiddenToken",value:function(e){var t=e.type,s=e.value;return t===ne.RESERVED_TOPLEVEL||t===ne.RESERVED_NEWLINE||t===ne.COMMENT||t===ne.BLOCK_COMMENT||";"===s}}]),e}(),me=function(){function e(t){Object(c["a"])(this,e),this.params=t,this.index=0}return Object(l["a"])(e,[{key:"get",value:function(e){var t=e.key,s=e.value;return this.params?t?this.params[t]:this.params[this.index++]:s}}]),e}(),ge=function(){function e(t,s){Object(c["a"])(this,e),this.cfg=t||{},this.indentation=new he(this.cfg.indent),this.inlineBlock=new fe,this.params=new me(this.cfg.params),this.tokenizer=s,this.previousReservedWord={},this.tokens=[],this.index=0}return Object(l["a"])(e,[{key:"format",value:function(e){this.tokens=this.tokenizer.tokenize(e);var t=this.getFormattedQueryFromTokens();return t.trim()}},{key:"getFormattedQueryFromTokens",value:function(){var e=this,t="";return this.tokens.forEach((function(s,i){e.index=i,s.type===ne.WHITESPACE||(s.type===ne.LINE_COMMENT?t=e.formatLineComment(s,t):s.type===ne.BLOCK_COMMENT?t=e.formatBlockComment(s,t):s.type===ne.RESERVED_TOPLEVEL?(t=e.formatToplevelReservedWord(s,t),e.previousReservedWord=s):s.type===ne.RESERVED_NEWLINE?(t=e.formatNewlineReservedWord(s,t),e.previousReservedWord=s):s.type===ne.RESERVED?(t=e.formatWithSpaces(s,t),e.previousReservedWord=s):s.type===ne.OPEN_PAREN?t=e.formatOpeningParentheses(s,t):s.type===ne.CLOSE_PAREN?t=e.formatClosingParentheses(s,t):s.type===ne.PLACEHOLDER?t=e.formatPlaceholder(s,t):","===s.value?t=e.formatComma(s,t):":"===s.value?t=e.formatWithSpaceAfter(s,t):"."===s.value?t=e.formatWithoutSpaces(s,t):";"===s.value?t=e.formatQuerySeparator(s,t):"$"===s.value?t+=s.value:t=e.formatWithSpaces(s,t))})),t}},{key:"formatLineComment",value:function(e,t){return this.addNewline(t+e.value)}},{key:"formatBlockComment",value:function(e,t){return this.addNewline(this.addNewline(t)+this.indentComment(e.value))}},{key:"indentComment",value:function(e){return e.replace(/\n/g,"\n"+this.indentation.getIndent())}},{key:"formatToplevelReservedWord",value:function(e,t){return this.indentation.decreaseTopLevel(),t=this.addNewline(t),this.indentation.increaseToplevel(),t+=this.equalizeWhitespace(e.value),this.addNewline(t)}},{key:"formatNewlineReservedWord",value:function(e,t){return this.addNewline(t)+this.equalizeWhitespace(e.value)+" "}},{key:"equalizeWhitespace",value:function(e){return e.replace(/\s+/g," ")}},{key:"formatOpeningParentheses",value:function(e,t){var s=[ne.WHITESPACE,ne.OPEN_PAREN,ne.LINE_COMMENT];return s.includes(this.previousToken().type)||(t=ae()(t)),t+=e.value,this.inlineBlock.beginIfPossible(this.tokens,this.index),this.inlineBlock.isActive()||(this.indentation.increaseBlockLevel(),t=this.addNewline(t)),t}},{key:"formatClosingParentheses",value:function(e,t){return this.inlineBlock.isActive()?(this.inlineBlock.end(),this.formatWithSpaceAfter(e,t)):(this.indentation.decreaseBlockLevel(),this.formatWithSpaces(e,this.addNewline(t)))}},{key:"formatPlaceholder",value:function(e,t){return t+this.params.get(e)+" "}},{key:"formatComma",value:function(e,t){return t=this.trimTrailingWhitespace(t)+e.value+" ",this.inlineBlock.isActive()||/^LIMIT$/i.test(this.previousReservedWord.value)?t:this.addNewline(t)}},{key:"formatWithSpaceAfter",value:function(e,t){return this.trimTrailingWhitespace(t)+e.value+" "}},{key:"formatWithoutSpaces",value:function(e,t){return this.trimTrailingWhitespace(t)+e.value}},{key:"formatWithSpaces",value:function(e,t){return t+e.value+" "}},{key:"formatQuerySeparator",value:function(e,t){return this.trimTrailingWhitespace(t)+e.value+"\n"}},{key:"addNewline",value:function(e){return ae()(e)+"\n"+this.indentation.getIndent()}},{key:"trimTrailingWhitespace",value:function(e){return this.previousNonWhitespaceToken().type===ne.LINE_COMMENT?ae()(e)+"\n":ae()(e)}},{key:"previousNonWhitespaceToken",value:function(){var e=1;while(this.previousToken(e).type===ne.WHITESPACE)e++;return this.previousToken(e)}},{key:"previousToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.tokens[this.index-e]||{}}}]),e}(),be=(s("4917"),s("6d67"),s("3b2b"),s("13ea")),ve=s.n(be),ye=s("9062"),we=s.n(ye),Te=function(){function e(t){Object(c["a"])(this,e),this.WHITESPACE_REGEX=/^(\s+)/,this.NUMBER_REGEX=/^((-\s*)?[0-9]+(\.[0-9]+)?|0x[0-9a-fA-F]+|0b[01]+)\b/,this.OPERATOR_REGEX=/^(!=|<>|==|<=|>=|!<|!>|\|\||::|->>|->|~~\*|~~|!~~\*|!~~|~\*|!~\*|!~|.)/,this.BLOCK_COMMENT_REGEX=/^(\/\*[^]*?(?:\*\/|$))/,this.LINE_COMMENT_REGEX=this.createLineCommentRegex(t.lineCommentTypes),this.RESERVED_TOPLEVEL_REGEX=this.createReservedWordRegex(t.reservedToplevelWords),this.RESERVED_NEWLINE_REGEX=this.createReservedWordRegex(t.reservedNewlineWords),this.RESERVED_PLAIN_REGEX=this.createReservedWordRegex(t.reservedWords),this.WORD_REGEX=this.createWordRegex(t.specialWordChars),this.STRING_REGEX=this.createStringRegex(t.stringTypes),this.OPEN_PAREN_REGEX=this.createParenRegex(t.openParens),this.CLOSE_PAREN_REGEX=this.createParenRegex(t.closeParens),this.INDEXED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(t.indexedPlaceholderTypes,"[0-9]*"),this.IDENT_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(t.namedPlaceholderTypes,"[a-zA-Z0-9._$]+"),this.STRING_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(t.namedPlaceholderTypes,this.createStringPattern(t.stringTypes))}return Object(l["a"])(e,[{key:"createLineCommentRegex",value:function(e){return new RegExp("^((?:".concat(e.map((function(e){return we()(e)})).join("|"),").*?(?:\n|\r\n|$))"))}},{key:"createReservedWordRegex",value:function(e){var t=e.join("|").replace(/ /g,"\\s+");return new RegExp("^(".concat(t,")\\b"),"i")}},{key:"createWordRegex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new RegExp("^([\\w".concat(e.join(""),"]+)"))}},{key:"createStringRegex",value:function(e){return new RegExp("^("+this.createStringPattern(e)+")")}},{key:"createStringPattern",value:function(e){var t={"``":"((`[^`]*($|`))+)","[]":"((\\[[^\\]]*($|\\]))(\\][^\\]]*($|\\]))*)",'""':'(("[^"\\\\]*(?:\\\\.[^"\\\\]*)*("|$))+)',"''":"(('[^'\\\\]*(?:\\\\.[^'\\\\]*)*('|$))+)","N''":"((N'[^N'\\\\]*(?:\\\\.[^N'\\\\]*)*('|$))+)"};return e.map((function(e){return t[e]})).join("|")}},{key:"createParenRegex",value:function(e){var t=this;return new RegExp("^("+e.map((function(e){return t.escapeParen(e)})).join("|")+")","i")}},{key:"escapeParen",value:function(e){return 1===e.length?we()(e):"\\b"+e+"\\b"}},{key:"createPlaceholderRegex",value:function(e,t){if(ve()(e))return!1;var s=e.map(we.a).join("|");return new RegExp("^((?:".concat(s,")(?:").concat(t,"))"))}},{key:"tokenize",value:function(e){var t,s=[];while(e.length)t=this.getNextToken(e,t),e=e.substring(t.value.length),s.push(t);return s}},{key:"getNextToken",value:function(e,t){return this.getWhitespaceToken(e)||this.getCommentToken(e)||this.getStringToken(e)||this.getOpenParenToken(e)||this.getCloseParenToken(e)||this.getPlaceholderToken(e)||this.getNumberToken(e)||this.getReservedWordToken(e,t)||this.getWordToken(e)||this.getOperatorToken(e)}},{key:"getWhitespaceToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:ne.WHITESPACE,regex:this.WHITESPACE_REGEX})}},{key:"getCommentToken",value:function(e){return this.getLineCommentToken(e)||this.getBlockCommentToken(e)}},{key:"getLineCommentToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:ne.LINE_COMMENT,regex:this.LINE_COMMENT_REGEX})}},{key:"getBlockCommentToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:ne.BLOCK_COMMENT,regex:this.BLOCK_COMMENT_REGEX})}},{key:"getStringToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:ne.STRING,regex:this.STRING_REGEX})}},{key:"getOpenParenToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:ne.OPEN_PAREN,regex:this.OPEN_PAREN_REGEX})}},{key:"getCloseParenToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:ne.CLOSE_PAREN,regex:this.CLOSE_PAREN_REGEX})}},{key:"getPlaceholderToken",value:function(e){return this.getIdentNamedPlaceholderToken(e)||this.getStringNamedPlaceholderToken(e)||this.getIndexedPlaceholderToken(e)}},{key:"getIdentNamedPlaceholderToken",value:function(e){return this.getPlaceholderTokenWithKey({input:e,regex:this.IDENT_NAMED_PLACEHOLDER_REGEX,parseKey:function(e){return e.slice(1)}})}},{key:"getStringNamedPlaceholderToken",value:function(e){var t=this;return this.getPlaceholderTokenWithKey({input:e,regex:this.STRING_NAMED_PLACEHOLDER_REGEX,parseKey:function(e){return t.getEscapedPlaceholderKey({key:e.slice(2,-1),quoteChar:e.slice(-1)})}})}},{key:"getIndexedPlaceholderToken",value:function(e){return this.getPlaceholderTokenWithKey({input:e,regex:this.INDEXED_PLACEHOLDER_REGEX,parseKey:function(e){return e.slice(1)}})}},{key:"getPlaceholderTokenWithKey",value:function(e){var t=e.input,s=e.regex,i=e.parseKey,a=this.getTokenOnFirstMatch({input:t,regex:s,type:ne.PLACEHOLDER});return a&&(a.key=i(a.value)),a}},{key:"getEscapedPlaceholderKey",value:function(e){var t=e.key,s=e.quoteChar;return t.replace(new RegExp(we()("\\")+s,"g"),s)}},{key:"getNumberToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:ne.NUMBER,regex:this.NUMBER_REGEX})}},{key:"getOperatorToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:ne.OPERATOR,regex:this.OPERATOR_REGEX})}},{key:"getReservedWordToken",value:function(e,t){if(!t||!t.value||"."!==t.value)return this.getToplevelReservedToken(e)||this.getNewlineReservedToken(e)||this.getPlainReservedToken(e)}},{key:"getToplevelReservedToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:ne.RESERVED_TOPLEVEL,regex:this.RESERVED_TOPLEVEL_REGEX})}},{key:"getNewlineReservedToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:ne.RESERVED_NEWLINE,regex:this.RESERVED_NEWLINE_REGEX})}},{key:"getPlainReservedToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:ne.RESERVED,regex:this.RESERVED_PLAIN_REGEX})}},{key:"getWordToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:ne.WORD,regex:this.WORD_REGEX})}},{key:"getTokenOnFirstMatch",value:function(e){var t=e.input,s=e.type,i=e.regex,a=t.match(i);if(a)return{type:s,value:a[1]}}}]),e}(),Se=["ABS","ACTIVATE","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","ANY","ARE","ARRAY","AS","ASC","ASENSITIVE","ASSOCIATE","ASUTIME","ASYMMETRIC","AT","ATOMIC","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","AVG","BEFORE","BEGIN","BETWEEN","BIGINT","BINARY","BLOB","BOOLEAN","BOTH","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CCSID","CEIL","CEILING","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CLOB","CLONE","CLOSE","CLUSTER","COALESCE","COLLATE","COLLECT","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","CONVERT","CORR","CORRESPONDING","COUNT","COUNT_BIG","COVAR_POP","COVAR_SAMP","CREATE","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DATE","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DEREF","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DOUBLE","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELEMENT","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPTION","EXCLUDING","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXP","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FILTER","FINAL","FIRST","FLOAT","FLOOR","FOR","FOREIGN","FREE","FULL","FUNCTION","FUSION","GENERAL","GENERATED","GET","GLOBAL","GOTO","GRANT","GRAPHIC","GROUP","GROUPING","HANDLER","HASH","HASHED_VALUE","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INT","INTEGER","INTEGRITY","INTERSECTION","INTERVAL","INTO","IS","ISOBID","ISOLATION","ITERATE","JAR","JAVA","KEEP","KEY","LABEL","LANGUAGE","LARGE","LATERAL","LC_CTYPE","LEADING","LEAVE","LEFT","LIKE","LINKTYPE","LN","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LONG","LOOP","LOWER","MAINTAINED","MATCH","MATERIALIZED","MAX","MAXVALUE","MEMBER","MERGE","METHOD","MICROSECOND","MICROSECONDS","MIN","MINUTE","MINUTES","MINVALUE","MOD","MODE","MODIFIES","MODULE","MONTH","MONTHS","MULTISET","NAN","NATIONAL","NATURAL","NCHAR","NCLOB","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZE","NORMALIZED","NOT","NULL","NULLIF","NULLS","NUMERIC","NUMPARTS","OBID","OCTET_LENGTH","OF","OFFSET","OLD","OLD_TABLE","ON","ONLY","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","ORDER","OUT","OUTER","OVER","OVERLAPS","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","PIECESIZE","PLAN","POSITION","POWER","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","REAL","RECOVERY","RECURSIVE","REF","REFERENCES","REFERENCING","REFRESH","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROLLUP","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCOPE","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SIGNAL","SIMILAR","SIMPLE","SMALLINT","SNAN","SOME","SOURCE","SPECIFIC","SPECIFICTYPE","SQL","SQLEXCEPTION","SQLID","SQLSTATE","SQLWARNING","SQRT","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STDDEV_POP","STDDEV_SAMP","STOGROUP","STORES","STYLE","SUBMULTISET","SUBSTRING","SUM","SUMMARY","SYMMETRIC","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","TABLESPACE","THEN","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSACTION","TRANSLATE","TRANSLATION","TREAT","TRIGGER","TRIM","TRUE","TRUNCATE","TYPE","UESCAPE","UNDO","UNIQUE","UNKNOWN","UNNEST","UNTIL","UPPER","USAGE","USER","USING","VALIDPROC","VALUE","VARCHAR","VARIABLE","VARIANT","VARYING","VAR_POP","VAR_SAMP","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHILE","WIDTH_BUCKET","WINDOW","WITH","WITHIN","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],Ee=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INTERSECT","LIMIT","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNION ALL","UPDATE","VALUES","WHERE"],Ne=["AND","CROSS JOIN","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN"],Ce=function(){function e(t){Object(c["a"])(this,e),this.cfg=t}return Object(l["a"])(e,[{key:"format",value:function(e){return j||(j=new Te({reservedWords:Se,reservedToplevelWords:Ee,reservedNewlineWords:Ne,stringTypes:['""',"''","``","[]"],openParens:["("],closeParens:[")"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["#","@"]})),new ge(this.cfg,j).format(e)}}]),e}(),ke=["ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","CONNECT","CONTINUE","CORRELATE","COVER","CREATE","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FIRST","FLATTEN","FOR","FORCE","FROM","FUNCTION","GRANT","GROUP","GSI","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LAST","LEFT","LET","LETTING","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MINUS","MISSING","NAMESPACE","NEST","NOT","NULL","NUMBER","OBJECT","OFFSET","ON","OPTION","OR","ORDER","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROCEDURE","PUBLIC","RAW","REALM","REDUCE","RENAME","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","SATISFIES","SCHEMA","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TO","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WITH","WITHIN","WORK","XOR"],Oe=["DELETE FROM","EXCEPT ALL","EXCEPT","EXPLAIN DELETE FROM","EXPLAIN UPDATE","EXPLAIN UPSERT","FROM","GROUP BY","HAVING","INFER","INSERT INTO","INTERSECT ALL","INTERSECT","LET","LIMIT","MERGE","NEST","ORDER BY","PREPARE","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNION ALL","UNION","UNNEST","UPDATE","UPSERT","USE KEYS","VALUES","WHERE"],xe=["AND","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","XOR"],Ie=function(){function e(t){Object(c["a"])(this,e),this.cfg=t}return Object(l["a"])(e,[{key:"format",value:function(e){return F||(F=new Te({reservedWords:ke,reservedToplevelWords:Oe,reservedNewlineWords:xe,stringTypes:['""',"''","``"],openParens:["(","[","{"],closeParens:[")","]","}"],namedPlaceholderTypes:["$"],lineCommentTypes:["#","--"]})),new ge(this.cfg,F).format(e)}}]),e}(),Re=["A","ACCESSIBLE","AGENT","AGGREGATE","ALL","ALTER","ANY","ARRAY","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BETWEEN","BFILE_BASE","BINARY_INTEGER","BINARY","BLOB_BASE","BLOCK","BODY","BOOLEAN","BOTH","BOUND","BULK","BY","BYTE","C","CALL","CALLING","CASCADE","CASE","CHAR_BASE","CHAR","CHARACTER","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOB_BASE","CLONE","CLOSE","CLUSTER","CLUSTERS","COALESCE","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONTINUE","CONVERT","COUNT","CRASH","CREATE","CREDENTIAL","CURRENT","CURRVAL","CURSOR","CUSTOMDATUM","DANGLING","DATA","DATE_BASE","DATE","DAY","DECIMAL","DEFAULT","DEFINE","DELETE","DESC","DETERMINISTIC","DIRECTORY","DISTINCT","DO","DOUBLE","DROP","DURATION","ELEMENT","ELSIF","EMPTY","ESCAPE","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTENDS","EXTERNAL","EXTRACT","FALSE","FETCH","FINAL","FIRST","FIXED","FLOAT","FOR","FORALL","FORCE","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSTANTIABLE","INT","INTEGER","INTERFACE","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMITED","LOCAL","LOCK","LONG","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUS","MINUTE","MLSLABEL","MOD","MODE","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NATURAL","NATURALN","NCHAR","NEW","NEXTVAL","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","NULLIF","NUMBER_BASE","NUMBER","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","OLD","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","ORACLE","ORADATA","ORDER","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERLAPS","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARENT","PARTITION","PASCAL","PCTFREE","PIPE","PIPELINED","PLS_INTEGER","PLUGGABLE","POSITIVE","POSITIVEN","PRAGMA","PRECISION","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","RAW","READ","REAL","RECORD","REF","REFERENCE","RELEASE","RELIES_ON","REM","REMAINDER","RENAME","RESOURCE","RESULT_CACHE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","ROWID","ROWNUM","ROWTYPE","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SECOND","SEGMENT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SHARE","SHORT","SIZE_T","SIZE","SMALLINT","SOME","SPACE","SPARSE","SQL","SQLCODE","SQLDATA","SQLERRM","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUCCESSFUL","SUM","SYNONYM","SYSDATE","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMESTAMP","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSACTION","TRANSACTIONAL","TRIGGER","TRUE","TRUSTED","TYPE","UB1","UB2","UB4","UID","UNDER","UNIQUE","UNPLUG","UNSIGNED","UNTRUSTED","USE","USER","USING","VALIDATE","VALIST","VALUE","VARCHAR","VARCHAR2","VARIABLE","VARIANCE","VARRAY","VARYING","VIEW","VIEWS","VOID","WHENEVER","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],De=["ADD","ALTER COLUMN","ALTER TABLE","BEGIN","CONNECT BY","DECLARE","DELETE FROM","DELETE","END","EXCEPT","EXCEPTION","FETCH FIRST","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","INTERSECT","LIMIT","LOOP","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","START WITH","UNION ALL","UNION","UPDATE","VALUES","WHERE"],Le=["AND","CROSS APPLY","CROSS JOIN","ELSE","END","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],Ae=function(){function e(t){Object(c["a"])(this,e),this.cfg=t}return Object(l["a"])(e,[{key:"format",value:function(e){return B||(B=new Te({reservedWords:Re,reservedToplevelWords:De,reservedNewlineWords:Le,stringTypes:['""',"N''","''","``"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["_","$","#",".","@"]})),new ge(this.cfg,B).format(e)}}]),e}(),Pe=["ACCESSIBLE","ACTION","AGAINST","AGGREGATE","ALGORITHM","ALL","ALTER","ANALYSE","ANALYZE","AS","ASC","AUTOCOMMIT","AUTO_INCREMENT","BACKUP","BEGIN","BETWEEN","BINLOG","BOTH","CASCADE","CASE","CHANGE","CHANGED","CHARACTER SET","CHARSET","CHECK","CHECKSUM","COLLATE","COLLATION","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPRESSED","CONCURRENT","CONSTRAINT","CONTAINS","CONVERT","CREATE","CROSS","CURRENT_TIMESTAMP","DATABASE","DATABASES","DAY","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DEFAULT","DEFINER","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DROP","DUMPFILE","DUPLICATE","DYNAMIC","ELSE","ENCLOSED","END","ENGINE","ENGINES","ENGINE_TYPE","ESCAPE","ESCAPED","EVENTS","EXEC","EXECUTE","EXISTS","EXPLAIN","EXTENDED","FAST","FETCH","FIELDS","FILE","FIRST","FIXED","FLUSH","FOR","FORCE","FOREIGN","FULL","FULLTEXT","FUNCTION","GLOBAL","GRANT","GRANTS","GROUP_CONCAT","HEAP","HIGH_PRIORITY","HOSTS","HOUR","HOUR_MINUTE","HOUR_SECOND","IDENTIFIED","IF","IFNULL","IGNORE","IN","INDEX","INDEXES","INFILE","INSERT","INSERT_ID","INSERT_METHOD","INTERVAL","INTO","INVOKER","IS","ISOLATION","KEY","KEYS","KILL","LAST_INSERT_ID","LEADING","LEVEL","LIKE","LINEAR","LINES","LOAD","LOCAL","LOCK","LOCKS","LOGS","LOW_PRIORITY","MARIA","MASTER","MASTER_CONNECT_RETRY","MASTER_HOST","MASTER_LOG_FILE","MATCH","MAX_CONNECTIONS_PER_HOUR","MAX_QUERIES_PER_HOUR","MAX_ROWS","MAX_UPDATES_PER_HOUR","MAX_USER_CONNECTIONS","MEDIUM","MERGE","MINUTE","MINUTE_SECOND","MIN_ROWS","MODE","MODIFY","MONTH","MRG_MYISAM","MYISAM","NAMES","NATURAL","NOT","NOW()","NULL","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPEN","OPTIMIZE","OPTION","OPTIONALLY","OUTFILE","PACK_KEYS","PAGE","PARTIAL","PARTITION","PARTITIONS","PASSWORD","PRIMARY","PRIVILEGES","PROCEDURE","PROCESS","PROCESSLIST","PURGE","QUICK","RAID0","RAID_CHUNKS","RAID_CHUNKSIZE","RAID_TYPE","RANGE","READ","READ_ONLY","READ_WRITE","REFERENCES","REGEXP","RELOAD","RENAME","REPAIR","REPEATABLE","REPLACE","REPLICATION","RESET","RESTORE","RESTRICT","RETURN","RETURNS","REVOKE","RLIKE","ROLLBACK","ROW","ROWS","ROW_FORMAT","SECOND","SECURITY","SEPARATOR","SERIALIZABLE","SESSION","SHARE","SHOW","SHUTDOWN","SLAVE","SONAME","SOUNDS","SQL","SQL_AUTO_IS_NULL","SQL_BIG_RESULT","SQL_BIG_SELECTS","SQL_BIG_TABLES","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQL_LOG_BIN","SQL_LOG_OFF","SQL_LOG_UPDATE","SQL_LOW_PRIORITY_UPDATES","SQL_MAX_JOIN_SIZE","SQL_NO_CACHE","SQL_QUOTE_SHOW_CREATE","SQL_SAFE_UPDATES","SQL_SELECT_LIMIT","SQL_SLAVE_SKIP_COUNTER","SQL_SMALL_RESULT","SQL_WARNINGS","START","STARTING","STATUS","STOP","STORAGE","STRAIGHT_JOIN","STRING","STRIPED","SUPER","TABLE","TABLES","TEMPORARY","TERMINATED","THEN","TO","TRAILING","TRANSACTIONAL","TRUE","TRUNCATE","TYPE","TYPES","UNCOMMITTED","UNIQUE","UNLOCK","UNSIGNED","USAGE","USE","USING","VARIABLES","VIEW","WHEN","WITH","WORK","WRITE","YEAR_MONTH"],_e=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INSERT","INTERSECT","LIMIT","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNION ALL","UNION","UPDATE","VALUES","WHERE"],$e=["AND","CROSS APPLY","CROSS JOIN","ELSE","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],Me=function(){function e(t){Object(c["a"])(this,e),this.cfg=t}return Object(l["a"])(e,[{key:"format",value:function(e){return H||(H=new Te({reservedWords:Pe,reservedToplevelWords:_e,reservedNewlineWords:$e,stringTypes:['""',"N''","''","``","[]"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["@",":"],lineCommentTypes:["#","--"]})),new ge(this.cfg,H).format(e)}}]),e}(),je={format:function(e,t){switch(t=t||{},t.language){case"db2":return new Ce(t).format(e);case"n1ql":return new Ie(t).format(e);case"pl/sql":return new Ae(t).format(e);case"sql":case void 0:return new Me(t).format(e);default:throw Error("Unsupported SQL dialect: ".concat(t.language))}}},Fe={comments:{lineComment:"--",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},Be={defaultToken:"",tokenPostfix:".sql",ignoreCase:!0,brackets:[{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["ABORT_AFTER_WAIT","ABSENT","ABSOLUTE","ABORT","ACCENT_SENSITIVITY","ACTION","ACTIVATION","ACTIVE","ADD","ADDRESS","ADMIN","AES","AES_128","AES_192","AES_256","AFFINITY","AFTER","AGGREGATE","ALGORITHM","ALL_CONSTRAINTS","ALL_ERRORMSGS","ALL_INDEXES","ALL_LEVELS","ALL_SPARSE_COLUMNS","ALLOW_CONNECTIONS","ALLOW_MULTIPLE_EVENT_LOSS","ALLOW_PAGE_LOCKS","ALLOW_ROW_LOCKS","ALLOW_SINGLE_EVENT_LOSS","ALLOW_SNAPSHOT_ISOLATION","ALLOWED","ALTER","ANALYZE","ANONYMOUS","ANSI_DEFAULTS","ANSI_NULL_DEFAULT","ANSI_NULL_DFLT_OFF","ANSI_NULL_DFLT_ON","ANSI_NULLS","ANSI_PADDING","ANSI_WARNINGS","APPEND","APPLICATION","APPLICATION_LOG","ARCHIVE","ARITHABORT","ARITHIGNORE","ARRAY","AS","ASC","ASSEMBLY","ASYMMETRIC","ASYNCHRONOUS_COMMIT","AT","ATOMIC","ATTACH","ATTACH_REBUILD_LOG","AUDIT","AUDIT_GUID","AUTHENTICATION","AUTHORIZATION","AUTO","AUTOCOMMIT","AUTO_CLEANUP","AUTO_CLOSE","AUTO_CREATE_STATISTICS","AUTO_SHRINK","AUTO_UPDATE_STATISTICS","AUTO_UPDATE_STATISTICS_ASYNC","AUTOMATED_BACKUP_PREFERENCE","AUTOMATIC","AVAILABILITY","AVAILABILITY_MODE","BACKUP","BACKUP_PRIORITY","BASE64","BATCHSIZE","BEFORE","BEGIN","BEGIN_DIALOG","BIGINT","BINARY","BINDING","BIT","BLOCKERS","BLOCKSIZE","BOOLEAN","BOTH","BOUNDING_BOX","BREAK","BROKER","BROKER_INSTANCE","BROWSE","BUCKET","BUCKETS","BUCKET_COUNT","BUFFER","BUFFERCOUNT","BULK","BULK_LOGGED","BY","CACHE","CALL","CALLED","CALLER","CAP_CPU_PERCENT","CASCADE","CASE","CATALOG","CATCH","CELLS_PER_OBJECT","CERTIFICATE","CHANGE","CHANGE_RETENTION","CHANGE_TRACKING","CHANGES","CHAR","CHARACTER","CHECK","CHECK_CONSTRAINTS","CHECK_EXPIRATION","CHECK_POLICY","CHECKALLOC","CHECKCATALOG","CHECKCONSTRAINTS","CHECKDB","CHECKFILEGROUP","CHECKIDENT","CHECKPOINT","CHECKTABLE","CLASSIFIER_FUNCTION","CLEANTABLE","CLEANUP","CLEAR","CLOSE","CLUSTER","CLUSTERED","CLUSTERSTATUS","CODEPAGE","COLLATE","COLLECTION","COLUMN","COLUMN_SET","COLUMNS","COLUMNSTORE","COLUMNSTORE_ARCHIVE","COMMENT","COMMIT","COMMITTED","COMPACT","COMPACTIONS","COMPATIBILITY_LEVEL","COMPRESSION","COMPUTE","CONCAT","CONCAT_NULL_YIELDS_NULL","CONCATENATE","CONF","CONFIGURATION","CONNECT","CONSTRAINT","CONTAINMENT","CONTENT","CONTEXT","CONTINUE","CONTINUE_AFTER_ERROR","CONTRACT","CONTRACT_NAME","CONTROL","CONVERSATION","COOKIE","COPY_ONLY","COUNTER","CPU","CREATE","CREATE_NEW","CREATION_DISPOSITION","CREDENTIAL","CRYPTOGRAPHIC","CUBE","CURRENT","CURRENT_DATE","CURSOR","CURSOR_CLOSE_ON_COMMIT","CURSOR_DEFAULT","CYCLE","DATA","DATA_COMPRESSION","DATA_PURITY","DATABASE","DATABASES","DATABASE_DEFAULT","DATABASE_MIRRORING","DATABASE_SNAPSHOT","DATAFILETYPE","DATE","DATE_CORRELATION_OPTIMIZATION","DATEFIRST","DATEFORMAT","DATETIME","DATETIME2","DATETIMEOFFSET","DAY","DAYOFWEEK","DAYOFYEAR","DAYS","DB_CHAINING","DBCC","DBREINDEX","DBPROPERTIES","DDL_DATABASE_LEVEL_EVENTS","DEADLOCK_PRIORITY","DEALLOCATE","DEC","DECIMAL","DECLARE","DECRYPTION","DEFAULT","DEFAULT_DATABASE","DEFAULT_FULLTEXT_LANGUAGE","DEFAULT_LANGUAGE","DEFAULT_SCHEMA","DEFERRED","DEFINED","DEFINITION","DELAY","DELAYED_DURABILITY","DELETE","DELETED","DELIMITED","DENSITY_VECTOR","DENY","DEPENDENCY","DEPENDENTS","DES","DESC","DESCRIPTION","DESCRIBE","DESX","DETAIL","DHCP","DIAGNOSTICS","DIALOG","DIFFERENTIAL","DIRECTORIES","DIRECTORY","DIRECTORY_NAME","DISABLE","DISABLE_BROKER","DISABLED","DISK","DISTINCT","DISTRIBUTE","DISTRIBUTED","DOCUMENT","DOUBLE","DOW","DROP","DROP_EXISTING","DROPCLEANBUFFERS","DUMP","DURABILITY","DYNAMIC","EDITION","ELEMENTS","ELEM_TYPE","ELSE","EMERGENCY","EMPTY","EMPTYFILE","ENABLE","ENABLE_BROKER","ENABLED","ENCRYPTION","END","ENDPOINT","ENDPOINT_URL","ERRLVL","ERROR","ERROR_BROKER_CONVERSATIONS","ERRORFILE","ESCAPE","ESCAPED","ESTIMATEONLY","EVENT","EVENT_RETENTION_MODE","EXCHANGE","EXCLUSIVE","EXEC","EXECUTABLE","EXECUTE","EXIT","EXPAND","EXPORT","EXPIREDATE","EXPIRY_DATE","EXPLAIN","EXPLICIT","EXPRESSION","EXTENDED","EXTENDED_LOGICAL_CHECKS","EXTENSION","EXTERNAL","EXTERNAL_ACCESS","EXTRACT","FAIL_OPERATION","FAILOVER","FAILOVER_MODE","FAILURE_CONDITION_LEVEL","FALSE","FAN_IN","FAST","FAST_FORWARD","FETCH","FIELDS","FIELDTERMINATOR","FILE","FILEFORMAT","FILEGROUP","FILEGROWTH","FILELISTONLY","FILENAME","FILEPATH","FILESTREAM","FILESTREAM_ON","FILETABLE_COLLATE_FILENAME","FILETABLE_DIRECTORY","FILETABLE_FULLPATH_UNIQUE_CONSTRAINT_NAME","FILETABLE_NAMESPACE","FILETABLE_PRIMARY_KEY_CONSTRAINT_NAME","FILETABLE_STREAMID_UNIQUE_CONSTRAINT_NAME","FILLFACTOR","FILTERING","FIRE_TRIGGERS","FIRST","FIRSTROW","FLOAT","FMTONLY","FOLLOWING","FOR","FORCE","FORCE_FAILOVER_ALLOW_DATA_LOSS","FORCE_SERVICE_ALLOW_DATA_LOSS","FORCED","FORCEPLAN","FORCESCAN","FORCESEEK","FOREIGN","FORMATFILE","FORMATTED","FORMSOF","FORWARD_ONLY","FREE","FREEPROCCACHE","FREESESSIONCACHE","FREESYSTEMCACHE","FROM","FULL","FULLSCAN","FULLTEXT","FUNCTION","FUNCTIONS","GB","GEOGRAPHY_AUTO_GRID","GEOGRAPHY_GRID","GEOMETRY_AUTO_GRID","GEOMETRY_GRID","GET","GLOBAL","GO","GOTO","GOVERNOR","GRANT","GRIDS","GROUP","GROUP_MAX_REQUESTS","HADR","HASH","HASHED","HAVING","HEADERONLY","HEALTH_CHECK_TIMEOUT","HELP","HIERARCHYID","HIGH","HINT","HISTOGRAM","HOLDLOCK","HOLD_DDLTIME","HONOR_BROKER_PRIORITY","HOUR","HOURS","IDENTITY","IDENTITY_INSERT","IDENTITY_VALUE","IDENTITYCOL","IDXPROPERTIES","IF","IGNORE","IGNORE_CONSTRAINTS","IGNORE_DUP_KEY","IGNORE_NONCLUSTERED_COLUMNSTORE_INDEX","IGNORE_TRIGGERS","IMAGE","IMMEDIATE","IMPERSONATE","IMPLICIT_TRANSACTIONS","IMPORT","IMPORTANCE","INCLUDE","INCREMENT","INCREMENTAL","INDEX","INDEXES","INDEXDEFRAG","INFINITE","INFLECTIONAL","INIT","INITIATOR","INPATH","INPUT","INPUTDRIVER","INPUTFORMAT","INPUTBUFFER","INSENSITIVE","INSERT","INSERTED","INSTEAD","INT","INTEGER","INTERVAL","INTO","IO","IP","ISABOUT","ISOLATION","ITEMS","JAR","JOB","KB","KEEP","KEEP_CDC","KEEP_NULLS","KEEP_REPLICATION","KEEPDEFAULTS","KEEPFIXED","KEEPIDENTITY","KEEPNULLS","KERBEROS","KEY","KEY_SOURCE","KEY_TYPE","KEYS","KEYSET","KILL","KILOBYTES_PER_BATCH","LABELONLY","LANGUAGE","LAST","LASTROW","LATERAL","LESS","LEVEL","LEVEL_1","LEVEL_2","LEVEL_3","LEVEL_4","LIFETIME","LIMIT","LINENO","LINES","LIST","LISTENER","LISTENER_IP","LISTENER_PORT","LOAD","LOADHISTORY","LOB_COMPACTION","LOCAL","LOCAL_SERVICE_NAME","LOCATION","LOCK","LOCKS","LOCK_ESCALATION","LOCK_TIMEOUT","LOGICAL","LOGIN","LOGSPACE","LONG","LOOP","LOW","MACRO","MAP","MAPJOIN","MANUAL","MARK","MARK_IN_USE_FOR_REMOVAL","MASTER","MATERIALIZED","MAX_CPU_PERCENT","MAX_DISPATCH_LATENCY","MAX_DOP","MAX_DURATION","MAX_EVENT_SIZE","MAX_FILES","MAX_IOPS_PER_VOLUME","MAX_MEMORY","MAX_MEMORY_PERCENT","MAX_QUEUE_READERS","MAX_ROLLOVER_FILES","MAX_SIZE","MAXDOP","MAXERRORS","MAXLENGTH","MAXRECURSION","MAXSIZE","MAXTRANSFERSIZE","MAXVALUE","MB","MEDIADESCRIPTION","MEDIANAME","MEDIAPASSWORD","MEDIUM","MEMBER","MEMORY_OPTIMIZED","MEMORY_OPTIMIZED_DATA","MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT","MEMORY_PARTITION_MODE","MERGE","MESSAGE","MESSAGE_FORWARD_SIZE","MESSAGE_FORWARDING","METADATA","MICROSECOND","MILLISECOND","MIN_CPU_PERCENT","MIN_IOPS_PER_VOLUME","MIN_MEMORY_PERCENT","MINUS","MINUTE","MINUTES","MINVALUE","MIRROR","MIRROR_ADDRESS","MODIFY","MONEY","MONTH","MONTHS","MORE","MOVE","MSCK","MULTI_USER","MUST_CHANGE","NAME","NANOSECOND","NATIONAL","NATIVE_COMPILATION","NCHAR","NEGOTIATE","NESTED_TRIGGERS","NEW_ACCOUNT","NEW_BROKER","NEW_PASSWORD","NEWNAME","NEXT","NO","NO_BROWSETABLE","NO_CHECKSUM","NO_COMPRESSION","NO_EVENT_LOSS","NO_INFOMSGS","NO_TRUNCATE","NO_WAIT","NOCHECK","NOCOUNT","NO_DROP","NOEXEC","NOEXPAND","NOFORMAT","NOINDEX","NOINIT","NOLOCK","NON","NON_TRANSACTED_ACCESS","NONCLUSTERED","NONE","NORECOMPUTE","NORECOVERY","NORELY","NORESEED","NORESET","NOREWIND","NORMAL","NOSCAN","NOSKIP","NOTIFICATION","NOTRUNCATE","NOUNLOAD","NOVALIDATE","NOWAIT","NTEXT","NTLM","NULLS","NUMANODE","NUMERIC","NUMERIC_ROUNDABORT","NVARCHAR","OBJECT","OF","OFF","OFFLINE","OFFSET","OFFSETS","OLD_ACCOUNT","OLD_PASSWORD","ON","ON_FAILURE","ONLINE","ONLY","OPEN","OPEN_EXISTING","OPENTRAN","OPERATOR","OPTIMISTIC","OPTIMIZE","OPTION","ORDER","OUT","OUTPUT","OUTPUTDRIVER","OUTPUTBUFFER","OUTPUTFORMAT","OVER","OVERRIDE","OWNER","OWNERSHIP","OVERWRITE","PAD_INDEX","PAGE","PAGE_VERIFY","PAGECOUNT","PAGLOCK","PARAMETERIZATION","PARSEONLY","PARTIAL","PARTIALSCAN","PARTITION","PARTITIONED","PARTITIONS","PARTNER","PASSWORD","PATH","PER_CPU","PER_NODE","PERCENT","PERMISSION_SET","PERSISTED","PHYSICAL_ONLY","PLAN","PLUS","POISON_MESSAGE_HANDLING","POOL","POPULATION","PORT","PRECEDING","PRECISION","PRETTY","PRESERVE","PRIMARY","PRIMARY_ROLE","PRINT","PRIOR","PRIORITY","PRIORITY_LEVEL","PRINCIPALS","PRIVATE","PRIVILEGES","PROC","PROCCACHE","PROCEDURE","PROCEDURE_NAME","PROCESS","PROFILE","PROPERTY","PROPERTY_DESCRIPTION","PROPERTY_INT_ID","PROPERTY_SET_GUID","PROTECTION","PROVIDER","PROVIDER_KEY_NAME","PUBLIC","PURGE","PUT","QUARTER","QUERY","QUERY_GOVERNOR_COST_LIMIT","QUEUE","QUEUE_DELAY","QUOTED_IDENTIFIER","RAISERROR","RANGE","RAW","RC2","RC4","RC4_128","READ","READ_COMMITTED_SNAPSHOT","READ_ONLY","READ_ONLY_ROUTING_LIST","READ_ONLY_ROUTING_URL","READ_WRITE","READ_WRITE_FILEGROUPS","READCOMMITTED","READCOMMITTEDLOCK","READONLY","READPAST","READS","READTEXT","READUNCOMMITTED","READWRITE","REAL","REBUILD","RECEIVE","RECOMPILE","RECONFIGURE","RECORDREADER","RECORDWRITER","RECOVERY","RECURSIVE","RECURSIVE_TRIGGERS","REDUCE","REFERENCES","REGENERATE","REGEXP","RELATED_CONVERSATION","RELATED_CONVERSATION_GROUP","RELATIVE","RELOAD","RELY","REMOTE","REMOTE_PROC_TRANSACTIONS","REMOTE_SERVICE_NAME","REMOVE","RENAME","REORGANIZE","REPAIR","REPAIR_ALLOW_DATA_LOSS","REPAIR_FAST","REPAIR_REBUILD","REPEATABLE","REPEATABLEREAD","REPLICA","REPLICATION","REQUEST_MAX_CPU_TIME_SEC","REQUEST_MAX_MEMORY_GRANT_PERCENT","REQUEST_MEMORY_GRANT_TIMEOUT_SEC","REQUIRED","RESAMPLE","RESEED","RESERVE_DISK_SPACE","RESET","RESOURCE","RESTART","RESTORE","RESTRICT","RESTRICTED_USER","RESULT","RESUME","RETAINDAYS","RETENTION","RETURN","RETURNS","REVERT","REVOKE","REWIND","REWINDONLY","REWRITE","RLIKE","ROBUST","ROLE","ROLES","ROLLBACK","ROLLUP","ROOT","ROUTE","ROW","ROWCOUNT","ROWGUIDCOL","ROWLOCK","ROWS","ROWS_PER_BATCH","ROWTERMINATOR","ROWVERSION","RSA_1024","RSA_2048","RSA_512","RULE","SAFE","SAFETY","SAMPLE","SAVE","SCHEDULER","SCHEMA","SCHEMAS","SCHEMA_AND_DATA","SCHEMA_ONLY","SCHEMABINDING","SCHEME","SCROLL","SCROLL_LOCKS","SEARCH","SECOND","SECONDARY","SECONDARY_ONLY","SECONDARY_ROLE","SECONDS","SECRET","SECURITY_LOG","SECURITYAUDIT","SELECT","SELECTIVE","SELF","SEMI","SEND","SENT","SEQUENCE","SERDE","SERDEPROPERTIES","SERIALIZABLE","SERVER","SERVICE","SERVICE_BROKER","SERVICE_NAME","SESSION","SESSION_TIMEOUT","SET","SETS","SETUSER","SHARED","SHOW","SHOW_DATABASE","SHOW_STATISTICS","SHOWCONTIG","SHOWPLAN","SHOWPLAN_ALL","SHOWPLAN_TEXT","SHOWPLAN_XML","SHRINKDATABASE","SHRINKFILE","SHUTDOWN","SID","SIGNATURE","SIMPLE","SINGLE_BLOB","SINGLE_CLOB","SINGLE_NCLOB","SINGLE_USER","SINGLETON","SIZE","SKEWED","SKIP","SMALLDATETIME","SMALLINT","SMALLMONEY","SNAPSHOT","SORT","SORTED","SORT_IN_TEMPDB","SOURCE","SPARSE","SPATIAL","SPATIAL_WINDOW_MAX_CELLS","SPECIFICATION","SPLIT","SQL","SQL_VARIANT","SQLPERF","SSL","STANDBY","START","START_DATE","STARTED","STARTUP_STATE","STAT_HEADER","STATE","STATEMENT","STATIC","STATISTICAL_SEMANTICS","STATISTICS","STATISTICS_INCREMENTAL","STATISTICS_NORECOMPUTE","STATS","STATS_STREAM","STATUS","STATUSONLY","STOP","STOP_ON_ERROR","STOPAT","STOPATMARK","STOPBEFOREMARK","STOPLIST","STOPPED","STORED","STREAMTABLE","STRING","STRUCT","SUBJECT","SUBSCRIPTION","SUMMARY","SUPPORTED","SUSPEND","SWITCH","SYMMETRIC","SYNCHRONOUS_COMMIT","SYNONYM","SYSNAME","SYSTEM","TABLE","TABLES","TABLERESULTS","TABLESAMPLE","TABLOCK","TABLOCKX","TAKE","TAPE","TARGET","TARGET_RECOVERY_TIME","TB","TBLPROPERTIES","TCP","TEMPORARY","TERMINATED","TEXT","TEXTIMAGE_ON","TEXTSIZE","THEN","THESAURUS","THROW","TIES","TIME","TIMEOUT","TIMER","TIMESTAMP","TIMESTAMPTZ","TINYINT","TO","TOP","TORN_PAGE_DETECTION","TOUCH","TRACEOFF","TRACEON","TRACESTATUS","TRACK_CAUSALITY","TRACK_COLUMNS_UPDATED","TRAN","TRANSACTION","TRANSACTIONS","TRANSFER","TRANSFORM","TRANSFORM_NOISE_WORDS","TRIGGER","TRIPLE_DES","TRIPLE_DES_3KEY","TRUE","TRUNCATE","TRUNCATEONLY","TRUSTWORTHY","TRY","TSQL","TWO_DIGIT_YEAR_CUTOFF","TYPE","TYPE_WARNING","UNARCHIVE","UNBOUNDED","UNCHECKED","UNCOMMITTED","UNDEFINED","UNDO","UNSET","UNSIGNED","UNIONTYPE","UNIQUE","UNIQUEIDENTIFIER","UNIQUEJOIN","UNKNOWN","UNLIMITED","UNLOAD","UNLOCK","UNSAFE","UPDATE","UPDATETEXT","UPDATEUSAGE","UPDLOCK","URI","URL","USE","USED","USER","USEROPTIONS","USING","UTC","UTC_TMESTAMP","UTCTIMESTAMP","VALID_XML","VALIDATE","VALIDATION","VALUE","VALUE_TYPE","VALUES","VARBINARY","VARCHAR","VARYING","VECTORIZATION","VERIFYONLY","VERSION","VIEW","VIEW_METADATA","VIEWS","VISIBILITY","WAIT_AT_LOW_PRIORITY","WAITFOR","WEEK","WEEKS","WEIGHT","WELL_FORMED_XML","WHEN","WHERE","WHILE","WINDOW","WINDOWS","WITH","WITHIN","WITHOUT","WITNESS","WORK","WORKLOAD","WRITE","WRITETEXT","XACT_ABORT","XLOCK","XMAX","XMIN","XML","XMLDATA","XMLNAMESPACES","XMLSCHEMA","XQUERY","XSINIL","YEAR","YEARS","YMAX","YMIN","ZONE"],operators:["ALL","AND","ANY","BETWEEN","EXISTS","IN","LIKE","NOT","OR","SOME","EXCEPT","INTERSECT","UNION","APPLY","CROSS","FULL","INNER","JOIN","LEFT","OUTER","RIGHT","CONTAINS","FREETEXT","IS","NULL","PIVOT","UNPIVOT","MATCHED"],builtinFunctions:["AVG","CHECKSUM_AGG","COUNT","COUNT_BIG","GROUPING","GROUPING_ID","MAX","MIN","SUM","STDEV","STDEVP","VAR","VARP","CUME_DIST","FIRST_VALUE","LAG","LAST_VALUE","LEAD","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","COLLATE","COLLATIONPROPERTY","TERTIARY_WEIGHTS","FEDERATION_FILTERING_VALUE","CAST","CONVERT","PARSE","TRY_CAST","TRY_CONVERT","TRY_PARSE","ASYMKEY_ID","ASYMKEYPROPERTY","CERTPROPERTY","CERT_ID","CRYPT_GEN_RANDOM","DECRYPTBYASYMKEY","DECRYPTBYCERT","DECRYPTBYKEY","DECRYPTBYKEYAUTOASYMKEY","DECRYPTBYKEYAUTOCERT","DECRYPTBYPASSPHRASE","ENCRYPTBYASYMKEY","ENCRYPTBYCERT","ENCRYPTBYKEY","ENCRYPTBYPASSPHRASE","HASHBYTES","IS_OBJECTSIGNED","KEY_GUID","KEY_ID","KEY_NAME","SIGNBYASYMKEY","SIGNBYCERT","SYMKEYPROPERTY","VERIFYSIGNEDBYCERT","VERIFYSIGNEDBYASYMKEY","CURSOR_STATUS","DATALENGTH","IDENT_CURRENT","IDENT_INCR","IDENT_SEED","IDENTITY","SQL_VARIANT_PROPERTY","CURRENT_TIMESTAMP","DATEADD","DATEDIFF","DATEFROMPARTS","DATENAME","DATEPART","DATETIME2FROMPARTS","DATETIMEFROMPARTS","DATETIMEOFFSETFROMPARTS","DAY","EOMONTH","GETDATE","GETUTCDATE","ISDATE","MONTH","SMALLDATETIMEFROMPARTS","SWITCHOFFSET","SYSDATETIME","SYSDATETIMEOFFSET","SYSUTCDATETIME","TIMEFROMPARTS","TODATETIMEOFFSET","YEAR","CHOOSE","COALESCE","IIF","NULLIF","ABS","ACOS","ASIN","ATAN","ATN2","CEILING","COS","COT","DEGREES","EXP","FLOOR","LOG","LOG10","PI","POWER","RADIANS","RAND","ROUND","SIGN","SIN","SQRT","SQUARE","TAN","APP_NAME","APPLOCK_MODE","APPLOCK_TEST","ASSEMBLYPROPERTY","COL_LENGTH","COL_NAME","COLUMNPROPERTY","DATABASE_PRINCIPAL_ID","DATABASEPROPERTYEX","DB_ID","DB_NAME","FILE_ID","FILE_IDEX","FILE_NAME","FILEGROUP_ID","FILEGROUP_NAME","FILEGROUPPROPERTY","FILEPROPERTY","FULLTEXTCATALOGPROPERTY","FULLTEXTSERVICEPROPERTY","INDEX_COL","INDEXKEY_PROPERTY","INDEXPROPERTY","OBJECT_DEFINITION","OBJECT_ID","OBJECT_NAME","OBJECT_SCHEMA_NAME","OBJECTPROPERTY","OBJECTPROPERTYEX","ORIGINAL_DB_NAME","PARSENAME","SCHEMA_ID","SCHEMA_NAME","SCOPE_IDENTITY","SERVERPROPERTY","STATS_DATE","TYPE_ID","TYPE_NAME","TYPEPROPERTY","DENSE_RANK","NTILE","RANK","ROW_NUMBER","PUBLISHINGSERVERNAME","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","CERTENCODED","CERTPRIVATEKEY","CURRENT_USER","HAS_DBACCESS","HAS_PERMS_BY_NAME","IS_MEMBER","IS_ROLEMEMBER","IS_SRVROLEMEMBER","LOGINPROPERTY","ORIGINAL_LOGIN","PERMISSIONS","PWDENCRYPT","PWDCOMPARE","SESSION_USER","SESSIONPROPERTY","SUSER_ID","SUSER_NAME","SUSER_SID","SUSER_SNAME","SYSTEM_USER","USER","USER_ID","USER_NAME","ASCII","CHAR","CHARINDEX","CONCAT","DIFFERENCE","FORMAT","LEFT","LEN","LOWER","LTRIM","NCHAR","PATINDEX","QUOTENAME","REPLACE","REPLICATE","REVERSE","RIGHT","RTRIM","SOUNDEX","SPACE","STR","STUFF","SUBSTRING","UNICODE","UPPER","BINARY_CHECKSUM","CHECKSUM","CONNECTIONPROPERTY","CONTEXT_INFO","CURRENT_REQUEST_ID","ERROR_LINE","ERROR_NUMBER","ERROR_MESSAGE","ERROR_PROCEDURE","ERROR_SEVERITY","ERROR_STATE","FORMATMESSAGE","GETANSINULL","GET_FILESTREAM_TRANSACTION_CONTEXT","HOST_ID","HOST_NAME","ISNULL","ISNUMERIC","MIN_ACTIVE_ROWVERSION","NEWID","NEWSEQUENTIALID","ROWCOUNT_BIG","XACT_STATE","TEXTPTR","TEXTVALID","COLUMNS_UPDATED","EVENTDATA","TRIGGER_NESTLEVEL","UPDATE","CHANGETABLE","CHANGE_TRACKING_CONTEXT","CHANGE_TRACKING_CURRENT_VERSION","CHANGE_TRACKING_IS_COLUMN_IN_MASK","CHANGE_TRACKING_MIN_VALID_VERSION","CONTAINSTABLE","FREETEXTTABLE","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","FILETABLEROOTPATH","GETFILENAMESPACEPATH","GETPATHLOCATOR","PATHNAME","GET_TRANSMISSION_STATUS"],builtinVariables:["@@DATEFIRST","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","@@CURSOR_ROWS","@@FETCH_STATUS","@@DATEFIRST","@@PROCID","@@ERROR","@@IDENTITY","@@ROWCOUNT","@@TRANCOUNT","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACKET_ERRORS","@@PACK_RECEIVED","@@PACK_SENT","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE"],pseudoColumns:["$ACTION","$IDENTITY","$ROWGUID","$PARTITION"],tokenizer:{root:[{include:"@comments"},{include:"@whitespace"},{include:"@pseudoColumns"},{include:"@numbers"},{include:"@strings"},{include:"@complexIdentifiers"},{include:"@scopes"},[/[;,.]/,"delimiter"],[/[()]/,"@brackets"],[/[\w@#$]+/,{cases:{"@keywords":"keyword","@operators":"operator","@builtinVariables":"predefined","@builtinFunctions":"predefined","@default":"identifier"}}],[/[<>=!%&+\-*/|~^]/,"operator"]],whitespace:[[/\s+/,"white"]],comments:[[/--+.*/,"comment"],[/\/\*/,{token:"comment.quote",next:"@comment"}]],comment:[[/[^*/]+/,"comment"],[/\*\//,{token:"comment.quote",next:"@pop"}],[/./,"comment"]],pseudoColumns:[[/[$][A-Za-z_][\w@#$]*/,{cases:{"@pseudoColumns":"predefined","@default":"identifier"}}]],numbers:[[/0[xX][0-9a-fA-F]*/,"number"],[/[$][+-]*\d*(\.\d*)?/,"number"],[/((\d+(\.\d*)?)|(\.\d+))([eE][-+]?\d+)?/,"number"]],strings:[[/N'/,{token:"string",next:"@string"}],[/'/,{token:"string",next:"@string"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string",next:"@pop"}]],complexIdentifiers:[[/\[/,{token:"identifier.quote",next:"@bracketedIdentifier"}],[/"/,{token:"identifier.quote",next:"@quotedIdentifier"}]],bracketedIdentifier:[[/[^\]]+/,"identifier"],[/]]/,"identifier"],[/]/,{token:"identifier.quote",next:"@pop"}]],quotedIdentifier:[[/[^"]+/,"identifier"],[/""/,"identifier"],[/"/,{token:"identifier.quote",next:"@pop"}]],scopes:[[/BEGIN\s+(DISTRIBUTED\s+)?TRAN(SACTION)?\b/i,"keyword"],[/BEGIN\s+TRY\b/i,{token:"keyword.try"}],[/END\s+TRY\b/i,{token:"keyword.try"}],[/BEGIN\s+CATCH\b/i,{token:"keyword.catch"}],[/END\s+CATCH\b/i,{token:"keyword.catch"}],[/(BEGIN|CASE)\b/i,{token:"keyword.block"}],[/END\b/i,{token:"keyword.block"}],[/WHEN\b/i,{token:"keyword.choice"}],[/THEN\b/i,{token:"keyword.choice"}]]}},He={config:Fe,definition:Be,register:function(e){e.languages.register({id:"hql"}),e.languages.setLanguageConfiguration("hql",Fe),e.languages.setMonarchTokensProvider("hql",Be),e.languages.registerDocumentFormattingEditProvider("hql",{provideDocumentFormattingEdits:function(e,t,s){var i=e.getFullModelRange(),a=e.getValue(),n=je.format(a);return[{range:i,text:n}]}})}},Ke={register:function(e){e.languages.register({id:"log"}),e.languages.setMonarchTokensProvider("log",{tokenizer:{root:[[/(^[=a-zA-Z].*|\d\s.*)/,"log-normal"],[/\sERROR\s.*/,"log-error"],[/\sWARN\s.*/,"log-warn"],[/\sINFO\s.*/,"log-info"],[/^([0-9]{4}||[0-9]{2})-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}(.[0-9]{3})?/,"log-date"],[/^[0-9]{2}\/[0-9]{2}\/[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}(.[0-9]{3})?/,"log-date"],[/(^\*\*Waiting queue:.*)/,"log-info"],[/(^\*\*result tips:.*)/,"log-info"]]}})}},Ue={keywords:["%DO","%UNTIL","%TO","%WHILE","%END","%GLOBAL","%GOTO","%IF","%THEN","%ELSE","%LABEL","%LET","%LOCAL","%MACRO","%MEND"]},We={register:function(e){var t=He.definition;t.keywords.concat(Ue),e.languages.register({id:"sas"}),e.languages.setLanguageConfiguration("sas",He.config),e.languages.setMonarchTokensProvider("sas",t),e.languages.registerDocumentFormattingEditProvider("sas",{provideDocumentFormattingEdits:function(e,t,s){var i=e.getFullModelRange(),a=e.getValue(),n=je.format(a);return[{range:i,text:n}]}})}},Ve={comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}]},Xe={defaultToken:"",ignoreCase:!0,tokenPostfix:".shell",brackets:[{token:"delimiter.bracket",open:"{",close:"}"},{token:"delimiter.parenthesis",open:"(",close:")"},{token:"delimiter.square",open:"[",close:"]"}],keywords:["if","then","do","else","elif","while","until","for","in","esac","fi","fin","fil","done","exit","set","unset","export","function"],builtins:["ab","awk","bash","beep","cat","cc","cd","chown","chmod","chroot","clear","cp","curl","cut","diff","echo","find","gawk","gcc","get","git","grep","hg","kill","killall","ln","ls","make","mkdir","openssl","mv","nc","node","npm","ping","ps","restart","rm","rmdir","sed","service","sh","shopt","shred","source","sort","sleep","ssh","start","stop","su","sudo","svn","tee","telnet","top","touch","vi","vim","wall","wc","wget","who","write","yes","zsh"],symbols:/[=><!~?&|+\-*\/\^;\.,]+/,tokenizer:{root:[{include:"@whitespace"},[/[a-zA-Z]\w*/,{cases:{"@keywords":"keyword","@builtins":"type.identifier","@default":""}}],{include:"@strings"},{include:"@parameters"},{include:"@heredoc"},[/[{}\[\]()]/,"@brackets"],[/-+\w+/,"attribute.name"],[/@symbols/,"delimiter"],{include:"@numbers"},[/[,;]/,"delimiter"]],whitespace:[[/\s+/,"white"],[/(^#!.*$)/,"metatag"],[/(^#.*$)/,"comment"]],numbers:[[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F_]*[0-9a-fA-F]/,"number.hex"],[/\d+/,"number"]],strings:[[/'/,"string","@stringBody"],[/"/,"string","@dblStringBody"]],stringBody:[[/'/,"string","@popall"],[/./,"string"]],dblStringBody:[[/"/,"string","@popall"],[/./,"string"]],heredoc:[[/(<<[-<]?)(\s*)(['"`]?)([\w\-]+)(['"`]?)/,["constants","white","string.heredoc.delimiter","string.heredoc","string.heredoc.delimiter"]]],parameters:[[/\$\d+/,"variable.predefined"],[/\$\w+/,"variable"],[/\$[*@#?\-$!0_]/,"variable"],[/\$['"{(]\w+['"})]/,"variable"]]}},Ye={config:Ve,definition:Xe,register:function(e){e.languages.register({id:"sh"}),e.languages.setLanguageConfiguration("sh",Ve),e.languages.setMonarchTokensProvider("sh",Xe)}},ze={register:function(e){e.editor.defineTheme("defaultview",{base:"vs",inherit:!0,rules:[{background:"#FFFFFF"}],colors:{"editor.lineHighlightBackground":"#ffffff","editorGutter.background":"#f7f7f7"}})}},Ge={register:function(e){e.editor.defineTheme("logview",{base:"vs",inherit:!0,rules:[{token:"log-info",foreground:"4b71ca"},{token:"log-error",foreground:"ff0000",fontStyle:"bold"},{token:"log-warn",foreground:"FFA500"},{token:"log-date",foreground:"008800"},{token:"log-normal",foreground:"808080"}],colors:{"editor.lineHighlightBackground":"#ffffff","editorGutter.background":"#f7f7f7"}})}},Ze=(s("96cf"),s("3b8d")),Je=s("2ef0"),qe=(s("2caf"),s("ac4d"),s("8a81"),s("5df3"),s("1c4c"),s("6b54"),s("87b3"),s("f559"),s("768b")),Qe=s("05f8");function et(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=tt(e))){var t=0,s=function(){};return{s:s,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,n=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return n=e.done,e},e:function(e){r=!0,a=e},f:function(){try{n||null==i.return||i.return()}finally{if(r)throw a}}}}function tt(e,t){if(e){if("string"===typeof e)return st(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(s):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?st(e,t):void 0}}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}var it=function(){var e=Object(Ze["a"])(regeneratorRuntime.mark((function e(t,s){var i,a,n,r,o,c,l,d,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=w["a"].get("userInfo"),a=[],n=[],r=[],o=[],!i){e.next=11;break}return c=i.basic.userName,e.next=9,Qe["a"].getCache(c);case 9:l=e.sent,l&&(d=Object(Je["partition"])(Object(Je["map"])(l.hiveList,(function(e){return{caption:e.caption,label:e.value,kind:t.languages.CompletionItemKind.Unit,insertText:e.value,detail:e.meta,documentation:e.documentation}})),["detail","dbname"]),u=Object(qe["a"])(d,2),a=u[0],n=u[1],r=nt(t,l.fnList,s,"Function",!0),o=nt(t,l.variableList,s,"Variable",!0));case 11:return e.abrupt("return",{dbInfoProposals:a,tableInfoProposals:n,udfProposals:r,variableProposals:o});case 12:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),at=function(e){var t=e.match,s=e.proposals,i=e.fieldString,a=e.attachMatch,n=e.needSplit;if(t&&!Object(Je["isFunction"])(t)){var r,o="",c=et(t);try{for(c.s();!(r=c.n()).done;){var l=r.value,d=/[~'!@#￥$%^&*()-+_=:]/g;d.test(l)?o+="\\".concat(l):o+=l}}catch(p){c.e(p)}finally{c.f()}var u=new RegExp("w*".concat(o,"w*"),"i"),h=[];return a&&!n?h=Object(Je["filter"])(s,(function(e){return e[i].startsWith(a)&&u.test(e[i])})):a&&n?s.forEach((function(e){if(u.test(e[i])&&0===e.label.indexOf(a[1])){var t=e.insertText;h.push({label:e.label,documentation:e.documentation,insertText:t.slice(t.indexOf(" ")+1,t.length-1),detail:e.detail})}})):h=Object(Je["filter"])(s,(function(e){return u.test(e[i])})),{isIncomplete:!0,suggestions:h}}},nt=function(e,t,s,i,a){var n=[];if(!t)return n;var r=e.languages.CompletionItemKind[i];return t.forEach((function(e){a?"Function"===i?"hql"!==s&&1!==e.udfType&&3!==e.udfType||n.push({label:e.udfName+"()",kind:r,insertText:e.udfName+"()",detail:e.udfType>2?"方法函数":"UDF函数",documentation:e.description}):"Variable"===i&&n.push({label:e.key,kind:r,insertText:e.key,detail:"用户自定义的全局变量",documentation:'{"'.concat(e.key,'":"').concat(e.value,'"}')}):n.push({label:e.label.toLowerCase(),insertText:e.insertText.toLowerCase(),detail:e.detail,documentation:e.documentation,kind:r})})),n},rt=[{label:"ADD",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"ADD",detail:"Non-reserved Keywords"},{label:"ADMIN",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"ADMIN",detail:"Non-reserved Keywords"},{label:"AFTER",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"AFTER",detail:"Non-reserved Keywords"},{label:"ANALYZE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"ANALYZE",detail:"Non-reserved Keywords"},{label:"ASC",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"ASC",detail:"Non-reserved Keywords"},{label:"BEFORE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"BEFORE",detail:"Non-reserved Keywords"},{label:"BUCKET",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"BUCKET",detail:"Non-reserved Keywords"},{label:"BUCKETS",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"BUCKETS",detail:"Non-reserved Keywords"},{label:"CASCADE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"CASCADE",detail:"Non-reserved Keywords"},{label:"CHANGE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"CHANGE",detail:"Non-reserved Keywords"},{label:"CLUSTER",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"CLUSTER",detail:"Non-reserved Keywords"},{label:"CLUSTERED",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"CLUSTERED",detail:"Non-reserved Keywords"},{label:"CLUSTERSTATUS",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"CLUSTERSTATUS",detail:"Non-reserved Keywords"},{label:"COLLECTION",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"COLLECTION",detail:"Non-reserved Keywords"},{label:"COLUMNS",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"COLUMNS",detail:"Non-reserved Keywords"},{label:"COMMENT",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"COMMENT",detail:"Non-reserved Keywords"},{label:"COMPACT",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"COMPACT",detail:"Non-reserved Keywords"},{label:"COMPACTIONS",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"COMPACTIONS",detail:"Non-reserved Keywords"},{label:"COMPUTE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"COMPUTE",detail:"Non-reserved Keywords"},{label:"CONCATENATE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"CONCATENATE",detail:"Non-reserved Keywords"},{label:"CONTINUE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"CONTINUE",detail:"Non-reserved Keywords"},{label:"DATA",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"DATA",detail:"Non-reserved Keywords"},{label:"DATABASES",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"DATABASES",detail:"Non-reserved Keywords"},{label:"DATETIME",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"DATETIME",detail:"Non-reserved Keywords"},{label:"DAY",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"DAY",detail:"Non-reserved Keywords"},{label:"DBPROPERTIES",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"DBPROPERTIES",detail:"Non-reserved Keywords"},{label:"DEFERRED",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"DEFERRED",detail:"Non-reserved Keywords"},{label:"DEFINED",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"DEFINED",detail:"Non-reserved Keywords"},{label:"DELIMITED",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"DELIMITED",detail:"Non-reserved Keywords"},{label:"DEPENDENCY",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"DEPENDENCY",detail:"Non-reserved Keywords"},{label:"DESC",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"DESC",detail:"Non-reserved Keywords"},{label:"DIRECTORIES",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"DIRECTORIES",detail:"Non-reserved Keywords"},{label:"DIRECTORY",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"DIRECTORY",detail:"Non-reserved Keywords"},{label:"DISABLE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"DISABLE",detail:"Non-reserved Keywords"},{label:"DISTRIBUTE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"DISTRIBUTE",detail:"Non-reserved Keywords"},{label:"ELEM_TYPE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"ELEM_TYPE",detail:"Non-reserved Keywords"},{label:"ENABLE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"ENABLE",detail:"Non-reserved Keywords"},{label:"ESCAPED",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"ESCAPED",detail:"Non-reserved Keywords"},{label:"EXCLUSIVE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"EXCLUSIVE",detail:"Non-reserved Keywords"},{label:"EXPLAIN",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"EXPLAIN",detail:"Non-reserved Keywords"},{label:"EXPORT",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"EXPORT",detail:"Non-reserved Keywords"},{label:"FIELDS",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"FIELDS",detail:"Non-reserved Keywords"},{label:"FILE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"FILE",detail:"Non-reserved Keywords"},{label:"FILEFORMAT",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"FILEFORMAT",detail:"Non-reserved Keywords"},{label:"FIRST",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"FIRST",detail:"Non-reserved Keywords"},{label:"FORMAT",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"FORMAT",detail:"Non-reserved Keywords"},{label:"FORMATTED",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"FORMATTED",detail:"Non-reserved Keywords"},{label:"FUNCTIONS",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"FUNCTIONS",detail:"Non-reserved Keywords"},{label:"HOLD_DDLTIME",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"HOLD_DDLTIME",detail:"Non-reserved Keywords"},{label:"HOUR",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"HOUR",detail:"Non-reserved Keywords"},{label:"IDXPROPERTIES",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"IDXPROPERTIES",detail:"Non-reserved Keywords"},{label:"IGNORE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"IGNORE",detail:"Non-reserved Keywords"},{label:"INDEX",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"INDEX",detail:"Non-reserved Keywords"},{label:"INDEXES",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"INDEXES",detail:"Non-reserved Keywords"},{label:"INPATH",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"INPATH",detail:"Non-reserved Keywords"},{label:"INPUTDRIVER",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"INPUTDRIVER",detail:"Non-reserved Keywords"},{label:"INPUTFORMAT",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"INPUTFORMAT",detail:"Non-reserved Keywords"},{label:"ITEMS",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"ITEMS",detail:"Non-reserved Keywords"},{label:"JAR",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"JAR",detail:"Non-reserved Keywords"},{label:"KEYS",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"KEYS",detail:"Non-reserved Keywords"},{label:"KEY_TYPE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"KEY_TYPE",detail:"Non-reserved Keywords"},{label:"LIMIT",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"LIMIT",detail:"Non-reserved Keywords"},{label:"LINES",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"LINES",detail:"Non-reserved Keywords"},{label:"LOAD",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"LOAD",detail:"Non-reserved Keywords"},{label:"LOCATION",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"LOCATION",detail:"Non-reserved Keywords"},{label:"LOCK",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"LOCK",detail:"Non-reserved Keywords"},{label:"LOCKS",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"LOCKS",detail:"Non-reserved Keywords"},{label:"LOGICAL",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"LOGICAL",detail:"Non-reserved Keywords"},{label:"LONG",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"LONG",detail:"Non-reserved Keywords"},{label:"MAPJOIN",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"MAPJOIN",detail:"Non-reserved Keywords"},{label:"MATERIALIZED",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"MATERIALIZED",detail:"Non-reserved Keywords"},{label:"METADATA",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"METADATA",detail:"Non-reserved Keywords"},{label:"MINUS",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"MINUS",detail:"Non-reserved Keywords"},{label:"MINUTE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"MINUTE",detail:"Non-reserved Keywords"},{label:"MONTH",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"MONTH",detail:"Non-reserved Keywords"},{label:"MSCK",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"MSCK",detail:"Non-reserved Keywords"},{label:"NOSCAN",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"NOSCAN",detail:"Non-reserved Keywords"},{label:"NO_DROP",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"NO_DROP",detail:"Non-reserved Keywords"},{label:"OFFLINE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"OFFLINE",detail:"Non-reserved Keywords"},{label:"OPTION",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"OPTION",detail:"Non-reserved Keywords"},{label:"OUTPUTDRIVER",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"OUTPUTDRIVER",detail:"Non-reserved Keywords"},{label:"OUTPUTFORMAT",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"OUTPUTFORMAT",detail:"Non-reserved Keywords"},{label:"OVERWRITE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"OVERWRITE",detail:"Non-reserved Keywords"},{label:"OWNER",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"OWNER",detail:"Non-reserved Keywords"},{label:"PARTITIONED",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"PARTITIONED",detail:"Non-reserved Keywords"},{label:"PARTITIONS",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"PARTITIONS",detail:"Non-reserved Keywords"},{label:"PLUS",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"PLUS",detail:"Non-reserved Keywords"},{label:"PRETTY",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"PRETTY",detail:"Non-reserved Keywords"},{label:"PRINCIPALS",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"PRINCIPALS",detail:"Non-reserved Keywords"},{label:"PROTECTION",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"PROTECTION",detail:"Non-reserved Keywords"},{label:"PURGE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"PURGE",detail:"Non-reserved Keywords"},{label:"READ",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"READ",detail:"Non-reserved Keywords"},{label:"READONLY",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"READONLY",detail:"Non-reserved Keywords"},{label:"REBUILD",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"REBUILD",detail:"Non-reserved Keywords"},{label:"RECORDREADER",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"RECORDREADER",detail:"Non-reserved Keywords"},{label:"RECORDWRITER",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"RECORDWRITER",detail:"Non-reserved Keywords"},{label:"REGEXP",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"REGEXP",detail:"Non-reserved Keywords"},{label:"RELOAD",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"RELOAD",detail:"Non-reserved Keywords"},{label:"RENAME",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"RENAME",detail:"Non-reserved Keywords"},{label:"REPAIR",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"REPAIR",detail:"Non-reserved Keywords"},{label:"REPLACE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"REPLACE",detail:"Non-reserved Keywords"},{label:"REPLICATION",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"REPLICATION",detail:"Non-reserved Keywords"},{label:"RESTRICT",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"RESTRICT",detail:"Non-reserved Keywords"},{label:"REWRITE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"REWRITE",detail:"Non-reserved Keywords"},{label:"RLIKE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"RLIKE",detail:"Non-reserved Keywords"},{label:"ROLE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"ROLE",detail:"Non-reserved Keywords"},{label:"ROLES",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"ROLES",detail:"Non-reserved Keywords"},{label:"SCHEMA",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"SCHEMA",detail:"Non-reserved Keywords"},{label:"SCHEMAS",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"SCHEMAS",detail:"Non-reserved Keywords"},{label:"SECOND",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"SECOND",detail:"Non-reserved Keywords"},{label:"SEMI",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"SEMI",detail:"Non-reserved Keywords"},{label:"SERDE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"SERDE",detail:"Non-reserved Keywords"},{label:"SERDEPROPERTIES",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"SERDEPROPERTIES",detail:"Non-reserved Keywords"},{label:"SERVER",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"SERVER",detail:"Non-reserved Keywords"},{label:"SETS",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"SETS",detail:"Non-reserved Keywords"},{label:"SHARED",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"SHARED",detail:"Non-reserved Keywords"},{label:"SHOW",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"SHOW",detail:"Non-reserved Keywords"},{label:"SHOW_DATABASE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"SHOW_DATABASE",detail:"Non-reserved Keywords"},{label:"SKEWED",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"SKEWED",detail:"Non-reserved Keywords"},{label:"SORT",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"SORT",detail:"Non-reserved Keywords"},{label:"SORTED",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"SORTED",detail:"Non-reserved Keywords"},{label:"SSL",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"SSL",detail:"Non-reserved Keywords"},{label:"STATISTICS",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"STATISTICS",detail:"Non-reserved Keywords"},{label:"STORED",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"STORED",detail:"Non-reserved Keywords"},{label:"STREAMTABLE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"STREAMTABLE",detail:"Non-reserved Keywords"},{label:"STRING",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"STRING",detail:"Non-reserved Keywords"},{label:"STRUCT",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"STRUCT",detail:"Non-reserved Keywords"},{label:"TABLES",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"TABLES",detail:"Non-reserved Keywords"},{label:"TBLPROPERTIES",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"TBLPROPERTIES",detail:"Non-reserved Keywords"},{label:"TEMPORARY",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"TEMPORARY",detail:"Non-reserved Keywords"},{label:"TERMINATED",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"TERMINATED",detail:"Non-reserved Keywords"},{label:"TINYINT",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"TINYINT",detail:"Non-reserved Keywords"},{label:"TOUCH",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"TOUCH",detail:"Non-reserved Keywords"},{label:"TRANSACTIONS",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"TRANSACTIONS",detail:"Non-reserved Keywords"},{label:"UNARCHIVE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"UNARCHIVE",detail:"Non-reserved Keywords"},{label:"UNDO",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"UNDO",detail:"Non-reserved Keywords"},{label:"UNIONTYPE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"UNIONTYPE",detail:"Non-reserved Keywords"},{label:"UNLOCK",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"UNLOCK",detail:"Non-reserved Keywords"},{label:"UNSET",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"UNSET",detail:"Non-reserved Keywords"},{label:"UNSIGNED",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"UNSIGNED",detail:"Non-reserved Keywords"},{label:"URI",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"URI",detail:"Non-reserved Keywords"},{label:"USE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"USE",detail:"Non-reserved Keywords"},{label:"UTC",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"UTC",detail:"Non-reserved Keywords"},{label:"UTCTIMESTAMP",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"UTCTIMESTAMP",detail:"Non-reserved Keywords"},{label:"VALUE_TYPE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"VALUE_TYPE",detail:"Non-reserved Keywords"},{label:"VIEW",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"VIEW",detail:"Non-reserved Keywords"},{label:"WHILE",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"WHILE",detail:"Non-reserved Keywords"},{label:"YEAR",documentation:"Hive 1.2.0 Non-reserved Keywords",insertText:"YEAR",detail:"Non-reserved Keywords"},{label:"AUTOCOMMIT",documentation:"Hive 2.0.0 Non-reserved Keywords",insertText:"AUTOCOMMIT",detail:"Non-reserved Keywords"},{label:"ISOLATION",documentation:"Hive 2.0.0 Non-reserved Keywords",insertText:"ISOLATION",detail:"Non-reserved Keywords"},{label:"LEVEL",documentation:"Hive 2.0.0 Non-reserved Keywords",insertText:"LEVEL",detail:"Non-reserved Keywords"},{label:"OFFSET",documentation:"Hive 2.0.0 Non-reserved Keywords",insertText:"OFFSET",detail:"Non-reserved Keywords"},{label:"SNAPSHOT",documentation:"Hive 2.0.0 Non-reserved Keywords",insertText:"SNAPSHOT",detail:"Non-reserved Keywords"},{label:"TRANSACTION",documentation:"Hive 2.0.0 Non-reserved Keywords",insertText:"TRANSACTION",detail:"Non-reserved Keywords"},{label:"WORK",documentation:"Hive 2.0.0 Non-reserved Keywords",insertText:"WORK",detail:"Non-reserved Keywords"},{label:"WRITE",documentation:"Hive 2.0.0 Non-reserved Keywords",insertText:"WRITE",detail:"Non-reserved Keywords"},{label:"ABORT",documentation:"Hive 2.1.0 Non-reserved Keywords",insertText:"ABORT",detail:"Non-reserved Keywords"},{label:"KEY",documentation:"Hive 2.1.0 Non-reserved Keywords",insertText:"KEY",detail:"Non-reserved Keywords"},{label:"LAST",documentation:"Hive 2.1.0 Non-reserved Keywords",insertText:"LAST",detail:"Non-reserved Keywords"},{label:"NORELY",documentation:"Hive 2.1.0 Non-reserved Keywords",insertText:"NORELY",detail:"Non-reserved Keywords"},{label:"NOVALIDATE",documentation:"Hive 2.1.0 Non-reserved Keywords",insertText:"NOVALIDATE",detail:"Non-reserved Keywords"},{label:"NULLS",documentation:"Hive 2.1.0 Non-reserved Keywords",insertText:"NULLS",detail:"Non-reserved Keywords"},{label:"RELY",documentation:"Hive 2.1.0 Non-reserved Keywords",insertText:"RELY",detail:"Non-reserved Keywords"},{label:"VALIDATE",documentation:"Hive 2.1.0 Non-reserved Keywords",insertText:"VALIDATE",detail:"Non-reserved Keywords"},{label:"DETAIL",documentation:"Hive 2.2.0 Non-reserved Keywords",insertText:"DETAIL",detail:"Non-reserved Keywords"},{label:"DOW",documentation:"Hive 2.2.0 Non-reserved Keywords",insertText:"DOW",detail:"Non-reserved Keywords"},{label:"EXPRESSION",documentation:"Hive 2.2.0 Non-reserved Keywords",insertText:"EXPRESSION",detail:"Non-reserved Keywords"},{label:"OPERATOR",documentation:"Hive 2.2.0 Non-reserved Keywords",insertText:"OPERATOR",detail:"Non-reserved Keywords"},{label:"QUARTER",documentation:"Hive 2.2.0 Non-reserved Keywords",insertText:"QUARTER",detail:"Non-reserved Keywords"},{label:"SUMMARY",documentation:"Hive 2.2.0 Non-reserved Keywords",insertText:"SUMMARY",detail:"Non-reserved Keywords"},{label:"VECTORIZATION",documentation:"Hive 2.2.0 Non-reserved Keywords",insertText:"VECTORIZATION",detail:"Non-reserved Keywords"},{label:"WEEK",documentation:"Hive 2.2.0 Non-reserved Keywords",insertText:"WEEK",detail:"Non-reserved Keywords"},{label:"YEARS",documentation:"Hive 2.2.0 Non-reserved Keywords",insertText:"YEARS",detail:"Non-reserved Keywords"},{label:"MONTHS",documentation:"Hive 2.2.0 Non-reserved Keywords",insertText:"MONTHS",detail:"Non-reserved Keywords"},{label:"WEEKS",documentation:"Hive 2.2.0 Non-reserved Keywords",insertText:"WEEKS",detail:"Non-reserved Keywords"},{label:"DAYS",documentation:"Hive 2.2.0 Non-reserved Keywords",insertText:"DAYS",detail:"Non-reserved Keywords"},{label:"HOURS",documentation:"Hive 2.2.0 Non-reserved Keywords",insertText:"HOURS",detail:"Non-reserved Keywords"},{label:"MINUTES",documentation:"Hive 2.2.0 Non-reserved Keywords",insertText:"MINUTES",detail:"Non-reserved Keywords"},{label:"SECONDS",documentation:"Hive 2.2.0 Non-reserved Keywords",insertText:"SECONDS",detail:"Non-reserved Keywords"},{label:"TIMESTAMPTZ",documentation:"Hive 3.0.0 Non-reserved Keywords",insertText:"TIMESTAMPTZ",detail:"Non-reserved Keywords"},{label:"ZONE",documentation:"Hive 3.0.0 Non-reserved Keywords",insertText:"ZONE",detail:"Non-reserved Keywords"},{label:"ALL",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"ALL",detail:"Reserved Keywords"},{label:"ALTER",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"ALTER",detail:"Reserved Keywords"},{label:"AND",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"AND",detail:"Reserved Keywords"},{label:"ARRAY",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"ARRAY",detail:"Reserved Keywords"},{label:"AS",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"AS",detail:"Reserved Keywords"},{label:"AUTHORIZATION",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"AUTHORIZATION",detail:"Reserved Keywords"},{label:"BETWEEN",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"BETWEEN",detail:"Reserved Keywords"},{label:"BIGINT",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"BIGINT",detail:"Reserved Keywords"},{label:"BINARY",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"BINARY",detail:"Reserved Keywords"},{label:"BOOLEAN",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"BOOLEAN",detail:"Reserved Keywords"},{label:"BOTH",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"BOTH",detail:"Reserved Keywords"},{label:"BY",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"BY",detail:"Reserved Keywords"},{label:"CASE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"CASE",detail:"Reserved Keywords"},{label:"CAST",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"CAST",detail:"Reserved Keywords"},{label:"CHAR",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"CHAR",detail:"Reserved Keywords"},{label:"COLUMN",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"COLUMN",detail:"Reserved Keywords"},{label:"CONF",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"CONF",detail:"Reserved Keywords"},{label:"CREATE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"CREATE",detail:"Reserved Keywords"},{label:"CROSS",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"CROSS",detail:"Reserved Keywords"},{label:"CUBE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"CUBE",detail:"Reserved Keywords"},{label:"CURRENT",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"CURRENT",detail:"Reserved Keywords"},{label:"CURRENT_DATE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"CURRENT_DATE",detail:"Reserved Keywords"},{label:"CURRENT_TIMESTAMP",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"CURRENT_TIMESTAMP",detail:"Reserved Keywords"},{label:"CURSOR",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"CURSOR",detail:"Reserved Keywords"},{label:"DATABASE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"DATABASE",detail:"Reserved Keywords"},{label:"DATE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"DATE",detail:"Reserved Keywords"},{label:"DECIMAL",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"DECIMAL",detail:"Reserved Keywords"},{label:"DELETE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"DELETE",detail:"Reserved Keywords"},{label:"DESCRIBE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"DESCRIBE",detail:"Reserved Keywords"},{label:"DISTINCT",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"DISTINCT",detail:"Reserved Keywords"},{label:"DOUBLE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"DOUBLE",detail:"Reserved Keywords"},{label:"DROP",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"DROP",detail:"Reserved Keywords"},{label:"ELSE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"ELSE",detail:"Reserved Keywords"},{label:"END",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"END",detail:"Reserved Keywords"},{label:"EXCHANGE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"EXCHANGE",detail:"Reserved Keywords"},{label:"EXISTS",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"EXISTS",detail:"Reserved Keywords"},{label:"EXTENDED",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"EXTENDED",detail:"Reserved Keywords"},{label:"EXTERNAL",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"EXTERNAL",detail:"Reserved Keywords"},{label:"FALSE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"FALSE",detail:"Reserved Keywords"},{label:"EXTERNAL",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"EXTERNAL",detail:"Reserved Keywords"},{label:"FETCH",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"FETCH",detail:"Reserved Keywords"},{label:"FLOAT",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"FLOAT",detail:"Reserved Keywords"},{label:"FOLLOWING",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"EXFOLLOWINGTERNAL",detail:"Reserved Keywords"},{label:"FOR",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"FOR",detail:"Reserved Keywords"},{label:"from",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"from",detail:"Reserved Keywords"},{label:"FULL",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"FULL",detail:"Reserved Keywords"},{label:"FUNCTION",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"FUNCTION",detail:"Reserved Keywords"},{label:"GRANT",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"GRANT",detail:"Reserved Keywords"},{label:"GROUP",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"GROUP",detail:"Reserved Keywords"},{label:"GROUPING",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"GROUPING",detail:"Reserved Keywords"},{label:"HAVING",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"HAVING",detail:"Reserved Keywords"},{label:"IF",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"IF",detail:"Reserved Keywords"},{label:"IMPORT",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"IMPORT",detail:"Reserved Keywords"},{label:"IN",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"IN",detail:"Reserved Keywords"},{label:"INNER",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"INNER",detail:"Reserved Keywords"},{label:"INSERT",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"INSERT",detail:"Reserved Keywords"},{label:"INT",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"INT",detail:"Reserved Keywords"},{label:"INTERSECT",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"INTERSECT",detail:"Reserved Keywords"},{label:"INTERVAL",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"INTERVAL",detail:"Reserved Keywords"},{label:"INTO",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"INTO",detail:"Reserved Keywords"},{label:"IS",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"IS",detail:"Reserved Keywords"},{label:"JOIN",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"JOIN",detail:"Reserved Keywords"},{label:"LATERAL",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"LATERAL",detail:"Reserved Keywords"},{label:"LEFT",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"LEFT",detail:"Reserved Keywords"},{label:"LESS",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"LESS",detail:"Reserved Keywords"},{label:"LIKE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"LIKE",detail:"Reserved Keywords"},{label:"LOCAL",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"LOCAL",detail:"Reserved Keywords"},{label:"MACRO",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"MACRO",detail:"Reserved Keywords"},{label:"MAP",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"MAP",detail:"Reserved Keywords"},{label:"MORE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"MORE",detail:"Reserved Keywords"},{label:"NONE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"NONE",detail:"Reserved Keywords"},{label:"NOT",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"NOT",detail:"Reserved Keywords"},{label:"NULL",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"NULL",detail:"Reserved Keywords"},{label:"OF",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"OF",detail:"Reserved Keywords"},{label:"ON",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"ON",detail:"Reserved Keywords"},{label:"OR",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"OR",detail:"Reserved Keywords"},{label:"ORDER",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"ORDER",detail:"Reserved Keywords"},{label:"OUT",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"OUT",detail:"Reserved Keywords"},{label:"OUTER",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"OUTER",detail:"Reserved Keywords"},{label:"OVER",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"OVER",detail:"Reserved Keywords"},{label:"PARTIALSCAN",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"PARTIALSCAN",detail:"Reserved Keywords"},{label:"PARTITION",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"PARTITION",detail:"Reserved Keywords"},{label:"PERCENT",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"PERCENT",detail:"Reserved Keywords"},{label:"PRECEDING",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"PRECEDING",detail:"Reserved Keywords"},{label:"PRESERVE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"PRESERVE",detail:"Reserved Keywords"},{label:"PROCEDURE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"PROCEDURE",detail:"Reserved Keywords"},{label:"RANGE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"RANGE",detail:"Reserved Keywords"},{label:"READS",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"READS",detail:"Reserved Keywords"},{label:"REDUCE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"REDUCE",detail:"Reserved Keywords"},{label:"REVOKE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"REVOKE",detail:"Reserved Keywords"},{label:"RIGHT",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"RIGHT",detail:"Reserved Keywords"},{label:"ROLLUP",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"ROLLUP",detail:"Reserved Keywords"},{label:"ROW",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"ROW",detail:"Reserved Keywords"},{label:"ROWS",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"ROWS",detail:"Reserved Keywords"},{label:"SELECT",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"SELECT",detail:"Reserved Keywords"},{label:"SET",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"SET",detail:"Reserved Keywords"},{label:"SMALLINT",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"SMALLINT",detail:"Reserved Keywords"},{label:"TABLE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"TABLE",detail:"Reserved Keywords"},{label:"TABLESAMPLE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"TABLESAMPLE",detail:"Reserved Keywords"},{label:"THEN",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"THEN",detail:"Reserved Keywords"},{label:"TIMESTAMP",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"TIMESTAMP",detail:"Reserved Keywords"},{label:"TO",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"TO",detail:"Reserved Keywords"},{label:"TRANSFORM",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"TRANSFORM",detail:"Reserved Keywords"},{label:"TRIGGER",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"TRIGGER",detail:"Reserved Keywords"},{label:"TRUE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"TRUE",detail:"Reserved Keywords"},{label:"TRUNCATE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"TRUNCATE",detail:"Reserved Keywords"},{label:"UNBOUNDED",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"UNBOUNDED",detail:"Reserved Keywords"},{label:"UNION",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"UNION",detail:"Reserved Keywords"},{label:"UNIQUEJOIN",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"UNIQUEJOIN",detail:"Reserved Keywords"},{label:"UPDATE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"UPDATE",detail:"Reserved Keywords"},{label:"USER",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"USER",detail:"Reserved Keywords"},{label:"USING",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"USING",detail:"Reserved Keywords"},{label:"UTC_TMESTAMP",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"UTC_TMESTAMP",detail:"Reserved Keywords"},{label:"VALUES",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"VALUES",detail:"Reserved Keywords"},{label:"VARCHAR",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"VARCHAR",detail:"Reserved Keywords"},{label:"WHEN",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"WHEN",detail:"Reserved Keywords"},{label:"WHERE",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"WHERE",detail:"Reserved Keywords"},{label:"WINDOW",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"WINDOW",detail:"Reserved Keywords"},{label:"WITH",documentation:"Hive 1.2.0 Reserved Keywords",insertText:"WITH",detail:"Reserved Keywords"},{label:"COMMIT",documentation:"Hive 2.0.0 Reserved Keywords",insertText:"COMMIT",detail:"Reserved Keywords"},{label:"ONLY",documentation:"Hive 2.0.0 Reserved Keywords",insertText:"ONLY",detail:"Reserved Keywords"},{label:"REGEXP",documentation:"Hive 2.0.0 Reserved Keywords",insertText:"REGEXP",detail:"Reserved Keywords"},{label:"RLIKE",documentation:"Hive 2.0.0 Reserved Keywords",insertText:"RLIKE",detail:"Reserved Keywords"},{label:"ROLLBACK",documentation:"Hive 2.0.0 Reserved Keywords",insertText:"ROLLBACK",detail:"Reserved Keywords"},{label:"START",documentation:"Hive 2.0.0 Reserved Keywords",insertText:"START",detail:"Reserved Keywords"},{label:"CACHE",documentation:"Hive 2.1.0 Reserved Keywords",insertText:"CACHE",detail:"Reserved Keywords"},{label:"CONSTRAINT",documentation:"Hive 2.1.0 Reserved Keywords",insertText:"CONSTRAINT",detail:"Reserved Keywords"},{label:"FOREIGN",documentation:"Hive 2.1.0 Reserved Keywords",insertText:"FOREIGN",detail:"Reserved Keywords"},{label:"PRIMARY",documentation:"Hive 2.1.0 Reserved Keywords",insertText:"PRIMARY",detail:"Reserved Keywords"},{label:"DAYOFWEEK",documentation:"Hive 2.2.0 Reserved Keywords",insertText:"DAYOFWEEK",detail:"Reserved Keywords"},{label:"EXTRACT",documentation:"Hive 2.2.0 Reserved Keywords",insertText:"EXTRACT",detail:"Reserved Keywords"},{label:"FLOOR",documentation:"Hive 2.2.0 Reserved Keywords",insertText:"FLOOR",detail:"Reserved Keywords"},{label:"INTEGER",documentation:"Hive 2.2.0 Reserved Keywords",insertText:"INTEGER",detail:"Reserved Keywords"},{label:"PRECISION",documentation:"Hive 2.2.0 Reserved Keywords",insertText:"PRECISION",detail:"Reserved Keywords"},{label:"VIEWS",documentation:"Hive 2.2.0 Reserved Keywords",insertText:"VIEWS",detail:"Reserved Keywords"},{label:"TIME",documentation:"Hive 3.0.0 Reserved Keywords",insertText:"TIME",detail:"Reserved Keywords"},{label:"NUMERIC",documentation:"Hive 3.0.0 Reserved Keywords",insertText:"NUMERIC",detail:"Reserved Keywords"},{label:"ide.engine.no.limit.allow",documentation:"当设置为true时，本次执行的SQL将进行全量导出",insertText:"ide.engine.no.limit.allow",detail:"build-in parameters"}],ot=[{label:"drop table",documentation:"删除hive表",insertText:"drop table if exists {table_name};",detail:"常用语法结构"},{label:"create table partitioned by",documentation:"创建hive分区表",insertText:'create table {table_name} ({columns}) partitioned by ({partition}) row format delimited fields terminated by "," stored as orc;',detail:"常用语法结构"},{label:"create table as select",documentation:"通过select创建表",insertText:"create table {table_name} as select;",detail:"常用语法结构"},{label:"insert into table",documentation:"添加方式插入数据",insertText:"insert into table {table_name} partition({partition});",detail:"常用语法结构"},{label:"insert overwrite table",documentation:"覆盖方式插入数据",insertText:"insert overwrite table {table_name} partition({partition});",detail:"常用语法结构"}],ct=[{label:"run_date",documentation:"当前日期的前一天",insertText:"${run_date}",detail:"系统内嵌变量"},{label:"run_date_std",documentation:"当前日期的前一天，年月日之间有横杠分割",insertText:"${run_date_std}",detail:"系统内嵌变量"},{label:"run_month_begin",documentation:"当前月份的第一天",insertText:"${run_month_begin}",detail:"系统内嵌变量"},{label:"run_month_begin_std",documentation:"当前月份的第一天，年月日之间有横杠分割",insertText:"${run_month_begin_std}",detail:"系统内嵌变量"},{label:"run_month_end",documentation:"当前月份的最后一天",insertText:"${run_month_end}",detail:"系统内嵌变量"},{label:"run_month_end_std",documentation:"当前月份的最后一天，年月日之间有横杠分割",insertText:"${run_month_end_std}",detail:"系统内嵌变量"}],lt=[{label:"id",documentation:"常用表字段",insertText:"id",detail:"常用表字段"},{label:"id_id",documentation:"常用表字段",insertText:"id_id",detail:"常用表字段"},{label:"org",documentation:"常用表字段",insertText:"org",detail:"常用表字段"},{label:"product_cd",documentation:"常用表字段",insertText:"product_cd",detail:"常用表字段"},{label:"id_no_hash",documentation:"常用表字段",insertText:"id_no_hash",detail:"常用表字段"},{label:"id_no_mask",documentation:"常用表字段",insertText:"id_no_mask",detail:"常用表字段"},{label:"app_no",documentation:"常用表字段",insertText:"app_no",detail:"常用表字段"},{label:"ecif_no",documentation:"常用表字段",insertText:"ecif_no",detail:"常用表字段"},{label:"name_hash",documentation:"常用表字段",insertText:"name_hash",detail:"常用表字段"},{label:"acct_no",documentation:"常用表字段",insertText:"acct_no",detail:"常用表字段"},{label:"card_no",documentation:"常用表字段",insertText:"card_no",detail:"常用表字段"},{label:"cust_id",documentation:"常用表字段",insertText:"cust_id",detail:"常用表字段"},{label:"case_no",documentation:"常用表字段",insertText:"case_no",detail:"常用表字段"},{label:"id_type",documentation:"常用表字段",insertText:"id_type",detail:"常用表字段"},{label:"id_no",documentation:"常用表字段",insertText:"id_no",detail:"常用表字段"},{label:"cust_type",documentation:"常用表字段",insertText:"cust_type",detail:"常用表字段"},{label:"cust_no",documentation:"常用表字段",insertText:"cust_no",detail:"常用表字段"},{label:"app_type",documentation:"常用表字段",insertText:"app_type",detail:"常用表字段"},{label:"openid",documentation:"常用表字段",insertText:"openid",detail:"常用表字段"},{label:"acct_type",documentation:"常用表字段",insertText:"acct_type",detail:"常用表字段"},{label:"prod_code",documentation:"常用表字段",insertText:"prod_code",detail:"常用表字段"},{label:"prod_id",documentation:"常用表字段",insertText:"prod_id",detail:"常用表字段"},{label:"partner_id",documentation:"常用表字段",insertText:"partner_id",detail:"常用表字段"},{label:"product_id",documentation:"常用表字段",insertText:"product_id",detail:"常用表字段"},{label:"id_acct",documentation:"常用表字段",insertText:"id_acct",detail:"常用表字段"},{label:"id_app",documentation:"常用表字段",insertText:"id_app",detail:"常用表字段"},{label:"c_prod_cd",documentation:"常用表字段",insertText:"c_prod_cd",detail:"常用表字段"},{label:"id_cust",documentation:"常用表字段",insertText:"id_cust",detail:"常用表字段"},{label:"id_openid",documentation:"常用表字段",insertText:"id_openid",detail:"常用表字段"},{label:"id_wx_openid",documentation:"常用表字段",insertText:"id_wx_openid",detail:"常用表字段"},{label:"id_qq_openid",documentation:"常用表字段",insertText:"id_qq_openid",detail:"常用表字段"},{label:"id_sg_openid",documentation:"常用表字段",insertText:"id_sg_openid",detail:"常用表字段"},{label:"id_loan",documentation:"常用表字段",insertText:"id_loan",detail:"常用表字段"},{label:"id_org",documentation:"常用表字段",insertText:"id_org",detail:"常用表字段"},{label:"reportsn",documentation:"常用表字段",insertText:"reportsn",detail:"常用表字段"},{label:"id_batch",documentation:"常用表字段",insertText:"id_batch",detail:"常用表字段"},{label:"id_case",documentation:"常用表字段",insertText:"id_case",detail:"常用表字段"},{label:"ds",documentation:"常用表字段",insertText:"ds",detail:"常用表字段"}],dt=[],ut=[],ht=[],pt=[],ft={keyword:rt,register:function(e){var t="hql",s=nt(e,rt,"","Keyword"),i=nt(e,ct,"","Variable"),a=nt(e,ot,"","Reference"),n=nt(e,lt,"","Field");it(e,t).then((function(e){dt=e.dbInfoProposals,ut=e.tableInfoProposals,ht=e.udfProposals,pt=e.variableProposals})),e.languages.registerCompletionItemProvider("hql",{triggerCharacters:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789._".split(""),provideCompletionItems:function(){var r=Object(Ze["a"])(regeneratorRuntime.mark((function r(o,c){var l,d,u,h,p,f,m,g,b,v,y,T,S;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if((Object(Je["isEmpty"])(dt)||Object(Je["isEmpty"])(ht)||Object(Je["isEmpty"])(ut)||Object(Je["isEmpty"])(pt))&&it(e,t).then((function(e){dt=e.dbInfoProposals,ut=e.tableInfoProposals,ht=e.udfProposals,pt=e.variableProposals})),l=o.getValueInRange({startLineNumber:c.lineNumber,startColumn:1,endLineNumber:c.lineNumber,endColumn:c.column}),d=l.match(/from\s+(\w+)\.(\w+)?$/),u=l.match(/from\s+\w+$/),h=l.match(/(select|where|on|having|order by|cluster by|sort by)\s+\w+$/i),p=l.match(/([^"]*)?$/i),f=l.match(/(create table|drop table)\s?$/i),!d){r.next=11;break}return r.abrupt("return",at({match:d[2],proposals:ut,fieldString:"caption",attachMatch:d[1]}));case 11:if(!u){r.next=16;break}return m=u[0].split(" ")[1],r.abrupt("return",at({match:m,proposals:dt,fieldString:"caption"}));case 16:if(!f){r.next=21;break}return g=f[0].split(" ")[1],r.abrupt("return",at({match:g,proposals:a,fieldString:"insertText",attachMatch:f,needSplit:!0}));case 21:if(!h){r.next=36;break}if(b=h[0].split(" ")[1],v=null,!w["a"].get("isFunctionChange_hql")){r.next=28;break}return w["a"].set("isFunctionChange_hql",!1),r.next=28,it(e,t).then((function(e){return ht=e.udfProposals,v=ht.concat(n,pt,i),at({match:b,proposals:v,fieldString:"insertText"})}));case 28:if(!w["a"].get("isGlobalVariableChange")){r.next=32;break}return w["a"].set("isGlobalVariableChange",!1),r.next=32,it(e,t).then((function(e){return pt=e.variableProposals,v=ht.concat(n,pt,i),at({match:b,proposals:v,fieldString:"insertText"})}));case 32:return v=ht.concat(n,pt,i),r.abrupt("return",at({match:b,proposals:v,fieldString:"insertText"}));case 36:if(!p){r.next=46;break}if(y=p[0].split(" "),T=y[y.length-1],S=null,!w["a"].get("isFunctionChange_hql")){r.next=44;break}return w["a"].set("isFunctionChange_hql",!1),r.next=44,it(e,t).then((function(e){return ht=e.udfProposals,S=s.concat(i,a,ht,lt),at({match:T,proposals:S,fieldString:"insertText"})}));case 44:return S=s.concat(i,a,ht,lt),r.abrupt("return",at({match:T,proposals:S,fieldString:"insertText"}));case 46:return r.abrupt("return",[]);case 47:case"end":return r.stop()}}),r)})));function o(e,t){return r.apply(this,arguments)}return o}()})}},mt=[{label:"False",documentation:"Keywords",insertText:"False",detail:"Keywords"},{label:"class",documentation:"Keywords",insertText:"class",detail:"Keywords"},{label:"finally",documentation:"Keywords",insertText:"finally",detail:"Keywords"},{label:"is",documentation:"Keywords",insertText:"is",detail:"Keywords"},{label:"return",documentation:"Keywords",insertText:"return",detail:"Keywords"},{label:"None",documentation:"Keywords",insertText:"None",detail:"Keywords"},{label:"continue",documentation:"Keywords",insertText:"continue",detail:"Keywords"},{label:"for",documentation:"Keywords",insertText:"for",detail:"Keywords"},{label:"lambda",documentation:"Keywords",insertText:"lambda",detail:"Keywords"},{label:"try",documentation:"Keywords",insertText:"try",detail:"Keywords"},{label:"True",documentation:"Keywords",insertText:"True",detail:"Keywords"},{label:"def",documentation:"Keywords",insertText:"def",detail:"Keywords"},{label:"from",documentation:"Keywords",insertText:"from",detail:"Keywords"},{label:"nonlocal",documentation:"Keywords",insertText:"nonlocal",detail:"Keywords"},{label:"while",documentation:"Keywords",insertText:"while",detail:"Keywords"},{label:"and",documentation:"Keywords",insertText:"and",detail:"Keywords"},{label:"del",documentation:"Keywords",insertText:"del",detail:"Keywords"},{label:"global",documentation:"Keywords",insertText:"global",detail:"Keywords"},{label:"not",documentation:"Keywords",insertText:"not",detail:"Keywords"},{label:"with",documentation:"Keywords",insertText:"with",detail:"Keywords"},{label:"as",documentation:"Keywords",insertText:"as",detail:"Keywords"},{label:"elif",documentation:"Keywords",insertText:"elif",detail:"Keywords"},{label:"if",documentation:"Keywords",insertText:"if",detail:"Keywords"},{label:"or",documentation:"Keywords",insertText:"or",detail:"Keywords"},{label:"yield",documentation:"Keywords",insertText:"yield",detail:"Keywords"},{label:"assert",documentation:"Keywords",insertText:"assert",detail:"Keywords"},{label:"else",documentation:"Keywords",insertText:"else",detail:"Keywords"},{label:"import",documentation:"Keywords",insertText:"import",detail:"Keywords"},{label:"pass",documentation:"Keywords",insertText:"pass",detail:"Keywords"},{label:"break",documentation:"Keywords",insertText:"break",detail:"Keywords"},{label:"except",documentation:"Keywords",insertText:"except",detail:"Keywords"},{label:"in",documentation:"Keywords",insertText:"in",detail:"Keywords"},{label:"raise",documentation:"Keywords",insertText:"raise",detail:"Keywords"},{label:"print",documentation:"Keywords",insertText:"print",detail:"Keywords"},{label:"exec",documentation:"Keywords",insertText:"exec",detail:"Keywords"}],gt=[{label:"run_date",documentation:"当前日期的前一天",insertText:"${run_date}",detail:"系统内嵌变量"},{label:"run_date_std",documentation:"当前日期的前一天，年月日之间有横杠分割",insertText:"${run_date_std}",detail:"系统内嵌变量"},{label:"run_month_begin",documentation:"当前月份的第一天",insertText:"${run_month_begin}",detail:"系统内嵌变量"},{label:"run_month_begin_std",documentation:"当前月份的第一天，年月日之间有横杠分割",insertText:"${run_month_begin_std}",detail:"系统内嵌变量"},{label:"run_month_end",documentation:"当前月份的最后一天",insertText:"${run_month_end}",detail:"系统内嵌变量"},{label:"run_month_end_std",documentation:"当前月份的最后一天，年月日之间有横杠分割",insertText:"${run_month_end_std}",detail:"系统内嵌变量"}],bt=[],vt={register:function(){var e=Object(Ze["a"])(regeneratorRuntime.mark((function e(t){var s,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s="python",i=nt(t,mt,"","Keyword"),a=nt(t,gt,"","Variable"),it(t,s).then((function(e){bt=e.udfProposals})),t.languages.registerCompletionItemProvider("python",{triggerCharacters:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789._".split(""),provideCompletionItems:function(){var e=Object(Ze["a"])(regeneratorRuntime.mark((function e(n,r){var o,c,l,d,u,h,p,f,m,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Object(Je["isEmpty"])(bt)&&it(t,s).then((function(e){bt=e.udfProposals})),o=n.getValueInRange({startLineNumber:r.lineNumber,startColumn:1,endLineNumber:r.lineNumber,endColumn:r.column}),c=o.match(/([^"]*)?$/i),l=o.match(/\s+/i),!l){e.next=16;break}if(d=l[0].split(" ")[1],u=null,h=w["a"].get("isFunctionChange_python"),!h){e.next=12;break}return w["a"].set("isFunctionChange_python",!1),e.next=12,it(t,s).then((function(e){return u=e.udfProposals.concat(a),at({match:d,proposals:u,fieldString:"insertText"})}));case 12:return u=bt.concat(a),e.abrupt("return",at({match:d,proposals:u,fieldString:"insertText"}));case 16:if(!c){e.next=22;break}return p=c[0].split(" "),f=p[p.length-1],m=i.concat(a),g=at({match:f,proposals:m,fieldString:"insertText"}),e.abrupt("return",g);case 22:return e.abrupt("return",[]);case 23:case"end":return e.stop()}}),e)})));function n(t,s){return e.apply(this,arguments)}return n}()});case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},yt=[{label:"%DO",documentation:"sas",insertText:"DO",detail:"sas宏语言关键字"},{label:"%UNTIL",documentation:"sas",insertText:"UNTIL",detail:"sas宏语言关键字"},{label:"GOTO",documentation:"sas",insertText:"GOTO",detail:"sas宏语言关键字"},{label:"LABEL",documentation:"sas",insertText:"LABEL",detail:"sas宏语言关键字"},{label:"LET",documentation:"sas",insertText:"LET",detail:"sas宏语言关键字"},{label:"MEND",documentation:"sas",insertText:"MEND",detail:"sas宏语言关键字"},{label:"%TO",documentation:"sas",insertText:"TO",detail:"sas宏语言关键字"},{label:"%WHILE",documentation:"sas",insertText:"WHILE",detail:"sas宏语言关键字"},{label:"%END",documentation:"sas",insertText:"END",detail:"sas宏语言关键字"},{label:"%GLOBAL",documentation:"sas",insertText:"GLOBAL",detail:"sas宏语言关键字"},{label:"%GOTO",documentation:"sas",insertText:"GOTO",detail:"sas宏语言关键字"},{label:"%IF",documentation:"sas",insertText:"IF",detail:"sas宏语言关键字"},{label:"%THEN",documentation:"sas",insertText:"THEN",detail:"sas宏语言关键字"},{label:"%ELSE",documentation:"sas",insertText:"ELSE",detail:"sas宏语言关键字"},{label:"%LABEL",documentation:"sas",insertText:"LABEL",detail:"sas宏语言关键字"},{label:"%LET",documentation:"sas",insertText:"LET",detail:"sas宏语言关键字"},{label:"%LOCAL",documentation:"sas",insertText:"LOCAL",detail:"sas宏语言关键字"},{label:"%MACRO",documentation:"sas",insertText:"MACRO",detail:"sas宏语言关键字"},{label:"%MEND",documentation:"sas",insertText:"MEND",detail:"sas宏语言关键字"}],wt=[].concat(Object($["a"])(ft.keyword),yt),Tt={register:function(e){var t=wt.map((function(t){return{label:t.label.toLowerCase(),kind:e.languages.CompletionItemKind.Keyword,insertText:t.insertText.toLowerCase(),detail:t.detail,documentation:t.documentation}}));e.languages.registerCompletionItemProvider("sas",{triggerCharacters:"%abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789._".split(""),provideCompletionItems:function(e,s){var i=e.getValueInRange({startLineNumber:s.lineNumber,startColumn:1,endLineNumber:s.lineNumber,endColumn:s.column});return i.match(/([^"]*)?$/i)?t:[]}})}},St=[{label:"if",documentation:"Keywords",insertText:"if",detail:"Keywords"},{label:"then",documentation:"Keywords",insertText:"then",detail:"Keywords"},{label:"do",documentation:"Keywords",insertText:"do",detail:"Keywords"},{label:"else",documentation:"Keywords",insertText:"else",detail:"Keywords"},{label:"elif",documentation:"Keywords",insertText:"elif",detail:"Keywords"},{label:"while",documentation:"Keywords",insertText:"while",detail:"Keywords"},{label:"until",documentation:"Keywords",insertText:"until",detail:"Keywords"},{label:"for",documentation:"Keywords",insertText:"for",detail:"Keywords"},{label:"in",documentation:"Keywords",insertText:"in",detail:"Keywords"},{label:"esac",documentation:"Keywords",insertText:"esac",detail:"Keywords"},{label:"fi",documentation:"Keywords",insertText:"fi",detail:"Keywords"},{label:"fin",documentation:"Keywords",insertText:"fin",detail:"Keywords"},{label:"fil",documentation:"Keywords",insertText:"fil",detail:"Keywords"},{label:"done",documentation:"Keywords",insertText:"done",detail:"Keywords"},{label:"exit",documentation:"Keywords",insertText:"exit",detail:"Keywords"},{label:"set",documentation:"Keywords",insertText:"set",detail:"Keywords"},{label:"unset",documentation:"Keywords",insertText:"unset",detail:"Keywords"},{label:"export",documentation:"Keywords",insertText:"export",detail:"Keywords"},{label:"function",documentation:"Keywords",insertText:"function",detail:"Keywords"},{label:"awk",documentation:"Builtin",insertText:"awk",detail:"Builtin"},{label:"ab",documentation:"Builtin",insertText:"ab",detail:"Builtin"},{label:"bash",documentation:"Builtin",insertText:"bash",detail:"Builtin"},{label:"beep",documentation:"Builtin",insertText:"beep",detail:"Builtin"},{label:"cat",documentation:"Builtin",insertText:"cat",detail:"Builtin"},{label:"cc",documentation:"Builtin",insertText:"cc",detail:"Builtin"},{label:"cd",documentation:"Builtin",insertText:"cd",detail:"Builtin"},{label:"chown",documentation:"Builtin",insertText:"chown",detail:"Builtin"},{label:"chmod",documentation:"Builtin",insertText:"chmod",detail:"Builtin"},{label:"chroot",documentation:"Builtin",insertText:"chroot",detail:"Builtin"},{label:"clear",documentation:"Builtin",insertText:"clear",detail:"Builtin"},{label:"cp",documentation:"Builtin",insertText:"cp",detail:"Builtin"},{label:"curl",documentation:"Builtin",insertText:"curl",detail:"Builtin"},{label:"cut",documentation:"Builtin",insertText:"cut",detail:"Builtin"},{label:"diff",documentation:"Builtin",insertText:"diff",detail:"Builtin"},{label:"echo",documentation:"Builtin",insertText:"echo",detail:"Builtin"},{label:"find",documentation:"Builtin",insertText:"find",detail:"Builtin"},{label:"gawk",documentation:"Builtin",insertText:"gawk",detail:"Builtin"},{label:"gcc",documentation:"Builtin",insertText:"gcc",detail:"Builtin"},{label:"get",documentation:"Builtin",insertText:"get",detail:"Builtin"},{label:"git",documentation:"Builtin",insertText:"git",detail:"Builtin"},{label:"grep",documentation:"Builtin",insertText:"grep",detail:"Builtin"},{label:"hg",documentation:"Builtin",insertText:"hg",detail:"Builtin"},{label:"kill",documentation:"Builtin",insertText:"kill",detail:"Builtin"},{label:"killall",documentation:"Builtin",insertText:"killall",detail:"Builtin"},{label:"ln",documentation:"Builtin",insertText:"ln",detail:"Builtin"},{label:"ls",documentation:"Builtin",insertText:"ls",detail:"Builtin"},{label:"make",documentation:"Builtin",insertText:"make",detail:"Builtin"},{label:"mkdir",documentation:"Builtin",insertText:"mkdir",detail:"Builtin"},{label:"openssl",documentation:"Builtin",insertText:"openssl",detail:"Builtin"},{label:"mv",documentation:"Builtin",insertText:"mv",detail:"Builtin"},{label:"nc",documentation:"Builtin",insertText:"nc",detail:"Builtin"},{label:"node",documentation:"Builtin",insertText:"node",detail:"Builtin"},{label:"npm",documentation:"Builtin",insertText:"npm",detail:"Builtin"},{label:"ping",documentation:"Builtin",insertText:"ping",detail:"Builtin"},{label:"ps",documentation:"Builtin",insertText:"ps",detail:"Builtin"},{label:"restart",documentation:"Builtin",insertText:"restart",detail:"Builtin"},{label:"rm",documentation:"Builtin",insertText:"rm",detail:"Builtin"},{label:"rmdir",documentation:"Builtin",insertText:"rmdir",detail:"Builtin"},{label:"sed",documentation:"Builtin",insertText:"sed",detail:"Builtin"},{label:"service",documentation:"Builtin",insertText:"service",detail:"Builtin"},{label:"sh",documentation:"Builtin",insertText:"sh",detail:"Builtin"},{label:"shopt",documentation:"Builtin",insertText:"shopt",detail:"Builtin"},{label:"shred",documentation:"Builtin",insertText:"shred",detail:"Builtin"},{label:"source",documentation:"Builtin",insertText:"source",detail:"Builtin"},{label:"sort",documentation:"Builtin",insertText:"sort",detail:"Builtin"},{label:"sleep",documentation:"Builtin",insertText:"sleep",detail:"Builtin"},{label:"ssh",documentation:"Builtin",insertText:"ssh",detail:"Builtin"},{label:"start",documentation:"Builtin",insertText:"start",detail:"Builtin"},{label:"stop",documentation:"Builtin",insertText:"stop",detail:"Builtin"},{label:"su",documentation:"Builtin",insertText:"su",detail:"Builtin"},{label:"sudo",documentation:"Builtin",insertText:"sudo",detail:"Builtin"},{label:"svn",documentation:"Builtin",insertText:"svn",detail:"Builtin"},{label:"tee",documentation:"Builtin",insertText:"tee",detail:"Builtin"},{label:"telnet",documentation:"Builtin",insertText:"telnet",detail:"Builtin"},{label:"top",documentation:"Builtin",insertText:"top",detail:"Builtin"},{label:"touch",documentation:"Builtin",insertText:"touch",detail:"Builtin"},{label:"vi",documentation:"Builtin",insertText:"vi",detail:"Builtin"},{label:"vim",documentation:"Builtin",insertText:"vim",detail:"Builtin"},{label:"wall",documentation:"Builtin",insertText:"wall",detail:"Builtin"},{label:"wc",documentation:"Builtin",insertText:"wc",detail:"Builtin"},{label:"wget",documentation:"Builtin",insertText:"wget",detail:"Builtin"},{label:"who",documentation:"Builtin",insertText:"who",detail:"Builtin"},{label:"write",documentation:"Builtin",insertText:"write",detail:"Builtin"},{label:"yes",documentation:"Builtin",insertText:"yes",detail:"Builtin"},{label:"zsh",documentation:"Builtin",insertText:"zsh",detail:"Builtin"}],Et={register:function(){var e=Object(Ze["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=St.map((function(e){return{label:e.label.toLowerCase(),kind:t.languages.CompletionItemKind.Keyword,insertText:e.insertText.toLowerCase(),detail:e.detail,documentation:e.documentation}})),t.languages.registerCompletionItemProvider("sh",{triggerCharacters:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789._".split(""),provideCompletionItems:function(){var e=Object(Ze["a"])(regeneratorRuntime.mark((function e(t,i){var a,n,r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.getValueInRange({startLineNumber:i.lineNumber,startColumn:1,endLineNumber:i.lineNumber,endColumn:i.column}),n=a.match(/([^"]*)?$/i),!n){e.next=7;break}return r=n[0].split(" "),o=r[r.length-1],c=at(o,s,"insertText"),e.abrupt("return",c);case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e)})));function t(t,s){return e.apply(this,arguments)}return t}()});case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},Nt=s("c2c6"),Ct=Nt["languages"].getLanguages(),kt=find(Ct,(function(e){return"hql"===e.id}));kt||(He.register(Nt),Ke.register(Nt),We.register(Nt),Ye.register(Nt),ze.register(Nt),Ge.register(Nt),ft.register(Nt),vt.register(Nt),Tt.register(Nt),Et.register(Nt));var Ot=Nt,xt=[/Truncate\s*Table/i,/Drop\s*Table/i,/Drop\s*Function/i,/Drop\s*Database/i,/ALTER\s*DATABASE/i],It=[/sys/i,/os/i,/sc\.stop/i,/spark\.stop/i],Rt=[/sc\.stop/i,/spark\.stop/i],Dt={hql:xt,python:It,scala:Rt},Lt={code:{theme:"defaultView"},log:{language:"log",theme:"logview",readOnly:!0,glyphMargin:!1,selectOnLineNumbers:!1,wordWrap:"on"}},At={name:"WeEditor",props:{id:{type:String,required:!1},type:{type:String,default:"code"},theme:String,language:String,value:String,readOnly:Boolean,options:Object,executable:{type:Boolean,default:!0},scriptType:String,application:String},data:function(){return{editor:null,editorModel:null,decorations:null,isParserClose:!1,closeParser:null,openParser:null,sqlParser:null}},computed:{editorName:function(){return"we-editor-".concat(this.type)},currentConfig:function(){var e=Lt[this.type],t=Object(Je["merge"])({automaticLayout:!0,scrollBeyondLastLine:!1,minimap:{enabled:!1},readOnly:this.readOnly,glyphMargin:!0},e,this.options,{value:this.value,theme:this.theme,language:this.language});return t}},watch:{value:function(e,t){if(this.editor){if(this.$emit("on-operator"),this.deltaDecorations(e),e==this.getValue())return;var s=this.editor.getConfiguration().readOnly;if(s)this.editor.setValue(e);else{var i=this.editor.getModel().getFullModelRange(),a=e,n={identifier:{major:1,minor:1},range:i,text:a,forceMoveMarkers:!0};this.editor.executeEdits("insertValue",[n])}}}},mounted:function(){this.initMonaco()},beforeDestroy:function(){this.editor&&this.editor.dispose()},methods:{initMonaco:function(){var e=this;this.editor=Ot.editor.create(this.$el,this.currentConfig),this.monaco=Ot,this.editorModel=this.editor.getModel(),this.isParserClose=!!w["a"].get("isParserClose","local"),"log"!==this.type&&("hdfsScript"===this.scriptType||this.readOnly||(this.addCommands(),this.addActions()),"hql"===this.language?s.e("chunk-39fb3e0f").then(s.t.bind(null,"62ad",7)).then((function(t){e.sqlParser=t,e.deltaDecorations(e.value)})):this.deltaDecorations(this.value)),this.$emit("onload"),this.editor.onDidScrollChange(Object(Je["debounce"])((function(){e.$emit("scrollChange")})),300),this.editor.onDidChangeModelContent(Object(Je["debounce"])((function(){e.$emit("input",e.getValue())})),100)},undo:function(){this.editor.trigger("anyString","undo")},redo:function(){this.editor.trigger("anyString","redo")},save:function(){this.editorModel&&this.deltaDecorations()},saveViewState:function(){this.editorModel&&(this.editorModel.viewState=this.editor.saveViewState())},restoreViewState:function(){this.editorModel&&this.editorModel.viewState&&this.editor.restoreViewState(this.editorModel.viewState)},getValue:function(){return this.editor.getValue({lineEnding:"\n",preserveBOM:!1})},getValueInRange:function(){var e=this.editor.getSelection();return e.isEmpty()?null:this.editor.getModel().getValueInRange(e)},insertValueIntoEditor:function(e){if(this.editor){var t=this.editor.getSelection(),s=null;if(t){s=new Ot.Range(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn);var i=e,a={identifier:{major:1,minor:1},range:s,text:i,forceMoveMarkers:!0};this.editor.executeEdits("insertValue",[a])}}},addCommands:function(){var e=this;this.editor.addCommand(Ot.KeyMod.CtrlCmd+Ot.KeyCode.KEY_S,(function(){e.$emit("on-save")})),this.executable&&this.editor.addCommand(Ot.KeyCode.F3,(function(){e.$emit("on-run")})),this.editor.addCommand(Ot.KeyMod.CtrlCmd+Ot.KeyMod.Shift+Ot.KeyCode.KEY_U,(function(){e.editor.trigger("toLowerCase","editor.action.transformToLowercase")})),this.editor.addCommand(Ot.KeyMod.CtrlCmd+Ot.KeyCode.KEY_U,(function(){e.editor.trigger("toUpperCase","editor.action.transformToUppercase")}))},addActions:function(){var e=this;this.editor.addAction({id:"editor.action.execute",label:this.$t("message.monacoMenu.YXJB"),keybindings:[Ot.KeyCode.F3],keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(t){e.$emit("on-run")}}),this.editor.addAction({id:"format",label:this.$t("message.monacoMenu.GSH"),keybindings:[Ot.KeyMod.CtrlCmd|Ot.KeyMod.Shift|Ot.KeyCode.KEY_L],keybindingContext:null,contextMenuGroupId:"control",contextMenuOrder:1.5,run:function(e){e.trigger("anyString","editor.action.formatDocument")}}),this.editor.addAction({id:"find",label:this.$t("message.monacoMenu.CZ"),keybindings:[Ot.KeyMod.CtrlCmd|Ot.KeyCode.KEY_F],keybindingContext:null,contextMenuGroupId:"control",contextMenuOrder:1.6,run:function(e){e.trigger("find","actions.find")}}),this.editor.addAction({id:"replace",label:this.$t("message.monacoMenu.TH"),keybindings:[Ot.KeyMod.CtrlCmd|Ot.KeyCode.KEY_H],keybindingContext:null,contextMenuGroupId:"control",contextMenuOrder:1.7,run:function(e){e.trigger("findReplace","editor.action.startFindReplaceAction")}}),this.editor.addAction({id:"commentLine",label:this.$t("message.monacoMenu.HZS"),keybindings:[Ot.KeyMod.CtrlCmd|Ot.KeyCode.US_SLASH],keybindingContext:null,contextMenuGroupId:"control",contextMenuOrder:1.8,run:function(e){e.trigger("commentLine","editor.action.commentLine")}}),this.editor.addAction({id:"paste",label:this.$t("message.monacoMenu.ZT"),keybindings:[],keybindingContext:null,contextMenuGroupId:"9_cutcopypaste",contextMenuOrder:2,run:function(t){var s=w["a"].get("copyString");return!s||s.length<0?e.$Message.warning(this.$t("message.monacoMenu.HBQWJCFZWB")):e.insertValueIntoEditor(s),null}}),this.editor.addAction({id:"gotoLine",label:this.$t("message.monacoMenu.TDZDH"),keybindings:[Ot.KeyMod.CtrlCmd|Ot.KeyCode.KEY_G],keybindingContext:null,contextMenuGroupId:"control",contextMenuOrder:1.9,run:function(e){e.trigger("gotoLine","editor.action.gotoLine")}}),"hql"===this.language&&(this.closeParser=this.editor.createContextKey("closeParser",!this.isParserClose),this.openParser=this.editor.createContextKey("openParser",this.isParserClose),this.editor.addAction({id:"closeParser",label:this.$t("message.monacoMenu.GBYFJC"),keybindings:[],keybindingContext:null,precondition:"closeParser",contextMenuGroupId:"control",contextMenuOrder:2,run:function(t){w["a"].set("isParserClose",!0,"local"),e.isParserClose=!0,e.openParser.set(!0),e.closeParser.set(!1),e.deltaDecorations()}}),this.editor.addAction({id:"openParser",label:this.$t("message.monacoMenu.DKYFJC"),keybindings:[],keybindingContext:null,precondition:"openParser",contextMenuGroupId:"control",contextMenuOrder:2.1,run:function(t){w["a"].set("isParserClose",!1,"local"),e.isParserClose=!1,e.openParser.set(!1),e.closeParser.set(!0),e.deltaDecorations()}}))},deltaDecorations:Object(Je["debounce"])((function(e,t){var s=this;if(s.isParserClose){var i=s.decorations||[];s.decorations=s.editor.deltaDecorations(i,[]),t&&t(!0)}else{var a=[],n=s.language,r=s.application;if("python"===n||"spark"===r&&-1!==["java","hql"].indexOf(n)||"hive"===r){a=s.setHighRiskGrammar();var o=s.decorations||[],c=!0;if("hql"===n){var l=e||s.value,d=s.isParserClose?null:s.sqlParser.parser.parseSyntax(l,"hive"),u=[];if(d){c=!1;var h="编译语句时异常：在行".concat(d.loc.first_line,":").concat(d.loc.first_column,"，输入词'").concat(d.text,"'附近可能存在sql语法错误"),p=new Ot.Range(d.loc.first_line,d.loc.first_column,d.loc.last_line,d.loc.last_column+1);u=[{range:p,options:{inlineClassName:"inlineDecoration"}},{range:p,options:{isWholeLine:!0,className:"contentClass",glyphMarginClassName:"glyphMarginClass",hoverMessage:{value:h}}}]}s.decorations=s.editor.deltaDecorations(o,u.concat(a)),s.$emit("is-parse-success",c)}else s.decorations=s.editor.deltaDecorations(o,a);t&&t(c)}else t&&t(!0)}}),500),setHighRiskGrammar:function(){var e=this,t=[],s=this.$t("message.monacoMenu.GYFSYGWYF"),i=Dt[this.language];return"java"===this.language&&(i=Dt.scala),i&&i.length&&i.forEach((function(i){var a=e.editorModel.findMatches(i,!1,!0,!1,null,!0);if(a.length){var n=[];a.forEach((function(t){var i=e.editorModel.getLineContent(t.range.startLineNumber),a=/^[^\-\-]\s*/;"python"===e.language?a=/^[^\#]\s*/:"java"===e.language&&(a=/^[^\/\/]\s*/);var r=a.test(i);r&&n.push({range:t.range,options:{inlineClassName:"highRiskGrammar",hoverMessage:{value:s}}})})),t=t.concat(n)}})),t}}},Pt=At,_t=(s("bfb0"),Object(E["a"])(Pt,te,se,!1,null,null,null)),$t=_t.exports,Mt=$t,jt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"we-tree"},e._l(e.root.computedNodes,(function(t,i){return s("we-tree-node",{key:e.getNodeKey(t,i),attrs:{node:t,"fs-type":e.fsType,"is-root-default-open":1===t._level&&e.isRootDefaultOpen,"highlight-path":e.highlightPath,"before-remove":e.beforeRemove}})})),1)},Ft=[],Bt=(s("c5f6"),{props:{fsType:{type:String,default:"script"},beforeRemoveNode:Function,expandNode:Function,isRootDefaultOpen:{type:Boolean,defalut:!1},highlightPath:{type:String,default:""}},methods:{}}),Ht=s("7618"),Kt="$treeNodeId",Ut=function(e,t){t[Kt]||Object.defineProperty(t,Kt,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},Wt=function(e,t){return e?t[e]:t[Kt]},Vt=function(e,t){var s=e.store.props,i=e.data||{},a=s[t];return"function"===typeof a?a(i,e):"string"===typeof a?i[a]:""},Xt=function(e,t,s){var i=e.store.props,a=e.data||{},n=i[t];a[n]=s},Yt=0,zt=function(){function e(t){var s=this;Object(c["a"])(this,e),this.id=Yt++,this.data=null,this.expanded=!1,this.parent=null,this.isEditState=!1,this.isNew=!1,Object.keys(t).forEach((function(e){s[e]=t[e]})),this._level=0,this._loaded=!1,this._childNodes=[],this._loading=!1,this.isActived=!1,this.parent&&(this._level=this.parent._level+1),this.isLeaf=Vt(this,"isLeaf"),this.visible=!0,this.store.registerNode(this),this.setData(this.data)}return Object(l["a"])(e,[{key:"setData",value:function(e){var t=this;if(e){Array.isArray(e)||Ut(this,e),this.data=e,this._childNodes=[];var s=[];s=0===this._level&&Array.isArray(this.data)?this.data:Vt(this,"children")||[],s.forEach((function(e){t.insertChild({data:e})}))}}},{key:"insertChild",value:function(t,s){return t instanceof e||(Object.assign(t,{parent:this,store:this.store}),t=new e(t)),t._level=this._level+1,void 0===s||s<0?this._childNodes.push(t):this._childNodes.splice(s,0,t),t}},{key:"expand",value:function(e,t){var s=this,i=function(){if(e){var i=s.parent;while(i&&i._level>0)i.expanded=!0,i=i.parent}s.expanded=!0,t&&t()};i()}},{key:"updateChildren",value:function(){var e=this,t=this.getChildren()||[],s=this._childNodes.map((function(e){return e.data})),i={},a=[];t.forEach((function(t,s){e.store.nodesMap[t.id]?i[t.id]={index:s,data:t}:a.push({index:s,data:t})})),s.forEach((function(t){i[t.id]||e.removeChildByData(t)})),a.forEach((function(t){var s=t.index,i=t.data;e.insertChild({data:i},s)}))}},{key:"removeChildByData",value:function(e){var t=null;this._childNodes.forEach((function(s){s.data===e&&(t=s)})),t&&this.removeChild(t)}},{key:"removeChild",value:function(e){var t=this._childNodes.indexOf(e);t>-1&&(this.store.deregisterNode(e),e.parent=null,this._childNodes.splice(t,1))}},{key:"remove",value:function(){this.store.beforeRemove&&this.store.beforeRemove(),this.parent.removeChild(this)}},{key:"getChildren",value:function(){if(!this.data)return null;var e=this.data,t=this.store.props,s=t.children||"children";return e[s]}},{key:"collapse",value:function(){this.expanded=!1}},{key:"changeEditState",value:function(e,t){this.isEditState=e}},{key:"computedNodes",get:function(){var e=this._childNodes;return this.store.sortFn&&(e=this.store.sortFn(e)),e}},{key:"label",set:function(e){Xt(this,"label",e)},get:function(){return Vt(this,"label")}}]),e}(),Gt=function(){function e(t){var s=this;Object(c["a"])(this,e),this.currentNode=null,this.currentNodeKey=null,Object.keys(t).forEach((function(e){s[e]=t[e]})),this.nodesMap={},this.root=new zt({data:this.data,store:this})}return Object(l["a"])(e,[{key:"registerNode",value:function(e){if(e&&e.data){var t=e.id;t&&(this.nodesMap[t]=e)}}},{key:"deregisterNode",value:function(e){e&&e.data&&delete this.nodesMap[e.key]}},{key:"setExpandedKeys",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.expandedKeys=t,t.forEach((function(t){var s=e.getNode(t);s&&s.expand(e.expandParent)}))}},{key:"getNode",value:function(e){var t="object"===Object(Ht["a"])(e)?Wt(this.key,e):e;return this.nodesMap[t]}},{key:"setCurrentNode",value:function(e){this.currentNode=e}},{key:"append",value:function(e,t){var s=t?this.getNode(t):this.root,i=s.insertChild({data:e});return s.expanded=!0,i.isNew=!0,i.isLeaf=e.isFn||e.isLeaf,i}},{key:"filter",value:function(){var e=this.filterNode,t=function t(s){var i=s.root?s.root._childNodes:s._childNodes;if(i.forEach((function(s){s.visible=e.call(s,s),t(s)})),!s.visible&&i.length){var a=!0;i.forEach((function(e){e.visible&&(a=!1)})),s.root?s.root.visible=!1===a:s.visible=!1===a}else s.visible||i.length||s.isLeaf||(s.visible=!0)};t(this)}}]),e}(),Zt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.node.visible,expression:"node.visible"}],staticClass:"we-tree-node",class:e.nodeClasses,attrs:{fsType:e.fsType}},[s("div",{staticClass:"we-tree-node__content",style:e.contentStyle,attrs:{title:e.node.data.path},on:{contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),e.handleContextMenu(t)},click:function(t){return t.stopPropagation(),e.handleClick(t)},keyup:function(t){return t.stopPropagation(),e.handleKeyUp(t)},dblclick:function(t){return t.stopPropagation(),e.handleDblClick(t)}}},[e.node.isLeaf?e._e():s("span",{staticClass:"we-tree-node__expand-icon"}),s("span",{staticClass:"we-tree-node__icon",class:e.supportIcon(e.node)}),e.node.isEditState?[s("div",{staticClass:"we-tree-node__edit",class:{"is-error":!e.inputValid}},[s("input",{ref:"edit",attrs:{type:"text"},domProps:{value:e.node.label},on:{click:function(e){e.stopPropagation()},keyup:[function(e){e.stopPropagation()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),t.preventDefault(),e.endNodeEdit(t))}],blur:e.endNodeEdit}}),e.errorMsg?s("div",{staticClass:"we-tree-node__error"},[e._v(e._s(e.errorMsg))]):e._e()])]:e.node.data&&e.node.data.isFn?[s("div",{staticClass:"we-tree-node__checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.node.data.load,expression:"node.data.load"}],attrs:{disabled:e.node.data.disabled||"self"===e.node.data.type&&e.node.data.shared,type:"checkbox"},domProps:{value:e.node.data.name,checked:Array.isArray(e.node.data.load)?e._i(e.node.data.load,e.node.data.name)>-1:e.node.data.load},on:{change:[function(t){var s=e.node.data.load,i=t.target,a=!!i.checked;if(Array.isArray(s)){var n=e.node.data.name,r=e._i(s,n);i.checked?r<0&&e.$set(e.node.data,"load",s.concat([n])):r>-1&&e.$set(e.node.data,"load",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.node.data,"load",a)},e.hanlderCheck]}}),s("view-modal",{attrs:{node:e.node.data}},[s("span",{class:{expired:e.node.data.expire},attrs:{title:e.node.data.name}},[e._v(e._s(e.node.data.name))])])],1)]:[s("span",{staticClass:"we-tree-node__label"},[e._v(e._s(e.node.label))])]],2),s("div",{directives:[{name:"show",rawName:"v-show",value:e.expanded,expression:"expanded"}],staticClass:"we-tree-node__children"},e._l(e.node.computedNodes,(function(t,i){return s("we-tree-node",{key:e.getNodeKey(t,i),attrs:{node:t,"fs-type":e.fsType,"highlight-path":e.highlightPath}})})),1)])},Jt=[],qt=(s("7514"),s("d25f"),s("9865"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Poptip",{attrs:{"popper-class":"fn-view",transfer:"",trigger:"hover",width:"540",placement:"right"}},[e._t("default"),s("div",{attrs:{slot:"content"},slot:"content"},[s("canvas",{staticClass:"fn-view-canvas",attrs:{id:"cvs"+e.node.id}}),e.node?s("Form",{attrs:{model:e.node,"label-width":100,size:"small"}},[s("FormItem",{attrs:{label:e.$t("message.functionView.formItems.name")+"："}},[s("span",{staticClass:"fn-item",attrs:{title:e.node.name}},[e._v(e._s(e.node.name))])]),s("FormItem",{attrs:{label:e.$t("message.functionView.formItems.createUser")+"："}},[s("span",[e._v(e._s(e.node.createUser))])]),s("FormItem",{attrs:{label:e.$t("message.functionView.formItems.updateTime")+"："}},[s("span",[e._v(e._s(e.dateFormatter(e.node.updateTime)))])]),s("FormItem",{attrs:{label:e.$t("message.functionView.formItems.useFormat")+"："}},[s("span",{staticClass:"fn-item",attrs:{title:e.node.useFormat}},[e._v(e._s(e.node.useFormat))])]),s("FormItem",{attrs:{label:e.$t("message.functionView.formItems.description")+"："}},[s("span",{staticClass:"fn-item",attrs:{title:e.node.description}},[e._v(e._s(e.node.description))])])],1):e._e()],1)],2)}),Qt=[],es=s("c1df"),ts=s.n(es),ss={props:{node:{type:Object,default:function(){}}},data:function(){return{}},mounted:function(){this.setXY()},methods:{setXY:function(){var e="",t=null,s=null;0===this.node.udfType?(e="通用",t=86,s=106):this.node.udfType>2?(e="自定义函数",t=60,s=106):(e="spark",t=80,s=106),this.drawWaterMark(e,t,s)},drawWaterMark:function(e,t,s){var i=document.getElementById("cvs".concat(this.node.id)),a=i.getContext("2d");i.height=140,i.width=140;var n=function(e,t,s){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;i=5/180*Math.PI*2;for(var n=0,r=i/2;r<=360;n+=i,r+=i)a.beginPath(),a.arc(e,t,s,n,r),a.stroke(),a.strokeStyle="#99d7f7"};n(100,100,70),n(100,100,50),a.font="16px microsoft yahei",a.fillStyle="#99d7f7",a.fillText(e,t,s)},dateFormatter:function(e){return ts()(e).format("YYYY-MM-DD HH:mm:ss")}}},is=ss,as=(s("db9a"),Object(E["a"])(is,qt,Qt,!1,null,null,null)),ns=as.exports,rs=ns,os={name:"WeTreeNode",components:{viewModal:rs},mixins:[Bt],props:{node:{type:Object,default:function(){}}},data:function(){return{tree:null,expanded:!1,inputValid:!0,errorMsg:null,nameList:[]}},computed:{isHasFileOpen:function(){if(!this.highlightPath)return!1;var e=this.highlightPath.split("/"),t=!1,s=function s(i){var a=i.data.name,n=e[i._level-1];a===n&&(i.parent?s(i.parent):t=!0)};return s(this.node),t},nodeClasses:function(){return{"is-expanded":this.expanded,"is-current":this.tree.store.currentNode===this.node,"is-actived":this.isHasFileOpen}},contentStyle:function(){return{"padding-left":this.node._level*this.tree.indent+"px"}}},watch:{"node.isEditState":function(e){var t=this;e&&this.$nextTick((function(){if(t.$refs.edit&&t.$refs.edit.focus(),t.node.label){var e=t.node.label.lastIndexOf(".");t.$refs.edit.setSelectionRange(0,e)}}))},"node.data.expanded":function(e){this.expanded=e}},created:function(){var e=this.$parent;this.tree=e.isTree?e:e.tree,this.initData(),this.initWatch()},methods:{initData:function(){var e=this;this.node.isDirNull=!0;var t=null;t=this.tree.data[0].children,t&&t.forEach((function(t){t.isLeaf&&e.nameList.push(t.name)})),this.isRootDefaultOpen&&(this.expanded=!0)},initWatch:function(){var e=this,t=this.tree.nodeProps||{},s=t.children||"children";this.$watch("node.data.".concat(s),(function(){e.node.updateChildren()}))},handleContextMenu:function(e){var t=this,s=this.tree,i=s.store;i.setCurrentNode(this.node),this.nameList=[];var a=this.node.data;a&&a.children&&a.children.length&&a.children.forEach((function(e){e.isLeaf&&t.nameList.push(e.name)})),this.tree.$emit("node-contextmenu",e,{nodeData:a,node:this.node,nameList:this.nameList})},handleClick:function(e){var t=this.tree.store;t.setCurrentNode(this.node),this.node.isLeaf||(this.expanded?this.expanded=!1:this.handleExpand()),this.tree.$emit("node-click",e,{nodeData:this.node.data,node:this.node})},handleExpand:function(){var e=this,t=this.tree,s=t.nodeProps.children||"children",i=this,a=i.node.data[s]||[];t&&t.loadDataFn&&!a.length?t.loadDataFn(this.node,(function(a){a&&(i.$set(i.node.data,s,a),e.$nextTick((function(){t.store.filter()}))),e.expanded=!0})):(i.$set(i.node.data,s,a),this.expanded=!0,t.store.filter())},handleKeyUp:function(e){this.tree.$emit("node-keyup",e,{nodeData:this.node.data,node:this.node})},handleDblClick:function(e){this.node.isEditState?this.endNodeEdit():this.tree.$emit("node-dblclick",e,{nodeData:this.node.data,node:this.node})},endNodeEdit:function(){var e=this;if(this.node.isEditState){var t=this.node.label,s=this.$refs.edit.value;if(t===s)return this.node.changeEditState(!1),this.changeInputValid(!0),void(this.errorMsg="");if(this.tree.nodeEditValid){if(this.errorMsg=this.tree.nodeEditValid({label:s,node:this.node.data}),this.errorMsg)return this.node.changeEditState(!0),void this.changeInputValid(!1);this.node.changeEditState(!1),this.changeInputValid(!0),this.errorMsg=""}this.tree.beforeChange&&this.tree.beforeChange({label:s,node:this.node.data},(function(i){if(i){e.changeInputValid(!0),e.errorMsg="";var a=e.node.isNew?"node-create":"node-edit";e.node.isNew=!1,e.node.changeEditState(!1),e.node.label=s,e.errorMsg="",e.tree.$emit(a,a,{nodeData:e.node.data,node:e.node,oldLabel:t})}else e.node.changeEditState(!0),e.changeInputValid(!0)}))}},changeInputValid:function(e){this.inputValid=e},getNodeKey:function(e,t){var s=this.tree.nodeKey,i=t;return e.data?(i=s?e.data[s]:e.data.name+t,i):i},hanlderCheck:function(e){this.tree.$emit("node-check",e,{nodeData:this.node.data,node:this.node})},supportIcon:function(e){var t=this,s=this.getSupportModes(),i=s.find((function(e){return e.rule.test(t.node.label)}));return e.isLeaf&&i?"is-leaf ".concat(i.logo):!e.isLeaf||i||e.data.isFn?e.isLeaf?e.data.isFn?"is-checkbox":void 0:"fi-folder":"is-leaf fi-file"}}},cs=os,ls=Object(E["a"])(cs,Zt,Jt,!1,null,null,null),ds=ls.exports,us={name:"WeTree",components:{WeTreeNode:ds},mixins:[Bt],props:{data:{type:Array,default:function(){return[]}},nodeProps:{type:Object,default:function(){return{children:"children",label:"name",icon:"icon",isLeaf:"isLeaf"}}},indent:{type:Number,default:16},nodeKey:String,currentNodeKey:[String,Number],expandedKeys:Array,expandParent:{type:Boolean,default:!0},expandOnClickNode:{type:Boolean,default:!0},expandAll:Boolean,nodeEditValid:Function,beforeChange:Function,filterNode:Function,loadDataFn:Function,sortFn:Function,beforeRemove:Function,isRootDefaultOpen:{type:Boolean,defalut:!1},highlightPath:{type:String,default:""}},data:function(){return{store:null,root:null,currentNode:null}},watch:{expandedKeys:function(e){this.store.setExpandedKeys(e)},data:{handler:function(e){this.initTree()},deep:!0}},created:function(){this.initTree()},methods:{initTree:function(){this.isTree=!0,this.store=new Gt({data:this.data,key:this.nodeKey,props:this.nodeProps,currentNodeKey:this.currentNodeKey,expandedKeys:this.expandedKeys,expandParent:this.expandParent,expandAll:this.expandAll,filterNode:this.filterNode,nodeEditValid:this.nodeEditValid,beforeChange:this.beforeChange,loadDataFn:this.loadDataFn,sortFn:this.sortFn,beforeRemove:this.beforeRemove}),this.root=this.store.root},getNodeKey:function(e,t){var s=this.nodeKey,i=t;return e.data?(i=s?e.data[s]:e.data.name+t,i):i}}},hs=us,ps=(s("8b17"),Object(E["a"])(hs,jt,Ft,!1,null,null,null)),fs=ps.exports,ms=fs,gs=(s("3383"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"we-panel",class:e.getClass},[e._t("default"),e._l(e.itemLength,(function(t){return s("div",{key:t},[t>1?s("div",{staticClass:"we-panel-dash",style:e.getDashStyle(t),on:{mousedown:function(s){return s.stopPropagation(),e.handleMouseDown(t,s)}}}):e._e()])}))],2)}),bs=[],vs=s("02b1"),ys={props:{diretion:{type:String,default:"horizontal"}},data:function(){return{items:[],clientWidth:0,clientHeight:0,readyToAllocationWidth:0,readyToAllocationHeight:0,readyToAllocationItemLength:0,moveIndex:null}},computed:{getClass:function(){return"we-panel-".concat(this.diretion)},itemLength:function(){return this.items.length},fristItem:function(){var e,t=this;return this.moveIndex&&(e=this.items.filter((function(e){return e.index===t.moveIndex-1}))[0]),e},secondItem:function(){var e,t=this;return this.moveIndex&&(e=this.items.filter((function(e){return e.index==t.moveIndex}))[0]),e}},mounted:function(){window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mouseup",this.handleMouseUp),vs["a"].bind(this.$el,this.resize)},beforeDestroy:function(){window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp),vs["a"].unbind(this.$el)},methods:{resize:function(){this.clientWidth=this.$el.clientWidth,this.clientHeight=this.$el.clientHeight,this.initItem()},initItem:function(){var e=this;this.clientWidth||this.clientHeight||(this.clientWidth=this.$el.clientWidth,this.clientHeight=this.$el.clientHeight),this.readyToAllocationItemLength=0,"horizontal"==this.diretion&&(this.readyToAllocationWidth=this.clientWidth,this.items.forEach((function(t){if(t.width){var s=t.width;d["a"].isString(s)&&(s=Number(s)),s<1&&(s=e.clientWidth*s),t.currentWidth=s,e.readyToAllocationWidth-=t.currentWidth}else e.readyToAllocationItemLength+=1})),this.items.forEach((function(t){t&&!t.width&&(t.currentWidth=e.readyToAllocationWidth/e.readyToAllocationItemLength)}))),"vertical"==this.diretion&&(this.readyToAllocationHeight=this.clientHeight,this.items.forEach((function(t){if(t.height){var s=t.height;d["a"].isString(s)&&(s=Number(s)),s<1&&(s=e.clientHeight*s),t.currentHeight=s,e.readyToAllocationHeight-=t.currentHeight}else e.readyToAllocationItemLength+=1})),this.items.forEach((function(t){t.height||(t.currentHeight=e.readyToAllocationHeight/e.readyToAllocationItemLength)})))},addItem:function(e){this.items.push(e),this.items.length==this.$children.length&&this.initItem()},removeItem:function(e){var t=this.items.indexOf(e);-1!=t&&this.items.splice(t,1),this.initItem()},getLeft:function(e){var t=0;return this.items.forEach((function(s){s.index<e&&(t+=s.cWidth)})),t},getTop:function(e){var t=0;return this.items.forEach((function(s){s.index<e&&(t+=s.cHeight)})),t},getDashStyle:function(e){var t=this.diretion,s=4;return"horizontal"==t?{left:this.getLeft(e)-s/2+"px",top:0,bottom:0,width:s+"px"}:"vertical"==t?{top:this.getTop(e)-s/2+"px",left:0,right:0,height:s+"px"}:void 0},handleMouseDown:function(e,t){this.moveIndex=e;var s=this.getStdMouseEvent(t);this.startX=s.positionX,this.startY=s.positionY,this.$emit("on-move-start",t)},handleMouseMove:function(e){var t=this;if(this.moveIndex){this.$emit("on-moving",e),e.stopPropagation(),e.preventDefault();var s=this.getStdMouseEvent(e);this.currentX=s.positionX,this.currentY=s.positionY;var i="";"horizontal"==this.diretion&&(this.currentChange=this.currentX-this.startX,i="currentWidth"),"vertical"==this.diretion&&(this.currentChange=this.currentY-this.startY,i="currentHeight");var a=this.fristItem[i]+this.currentChange,n=this.secondItem[i]-this.currentChange;this.fristItem.minSize&&a<this.fristItem.minSize?this.currentChange=this.fristItem.minSize-this.fristItem[i]:this.fristItem.maxSize&&a>this.fristItem.maxSize?this.currentChange=this.fristItem.maxSize-this.fristItem[i]:this.secondItem.minSize&&n<this.secondItem.minSize?this.currentChange=this.secondItem[i]-this.secondItem.minSize:this.secondItem.maxSize&&n>this.secondItem.maxSize?this.currentChange=this.secondItem[i]-this.secondItem.maxSize:a<10?this.currentChange=10-this.fristItem[i]:n<10&&(this.currentChange=this.secondItem[i]-10),window.requestAnimationFrame((function(){t.currentChange&&(t.fristItem.currentChange=t.currentChange,t.secondItem.currentChange=-t.currentChange)}))}},handleMouseUp:function(e){var t=this;if(this.moveIndex){this.$emit("on-move-end",e),e.stopPropagation(),e.preventDefault();var s="";"horizontal"==this.diretion&&(s="currentWidth"),"vertical"==this.diretion&&(s="currentHeight"),window.requestAnimationFrame((function(){var e=t.fristItem[s]+t.currentChange,i=t.secondItem[s]-t.currentChange;t.fristItem[s]=e,t.fristItem.currentChange=0,t.secondItem[s]=i,t.secondItem.currentChange=0,t.moveIndex=null,t.startX=null,t.startY=null,t.currentX=null,t.currentY=null,t.currentChange=null}))}},getStdMouseEvent:function(e){return{positionX:e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,positionY:e.clientY+document.body.scrollTop+document.documentElement.scrollTop}}}},ws=ys,Ts=Object(E["a"])(ws,gs,bs,!1,null,null,null),Ss=Ts.exports,Es=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"we-panel-item",style:e.getStyle},[e._t("default",null,{width:e.currentWidth})],2)},Ns=[],Cs={props:{min:{type:[Number,String]},max:{type:[Number,String]},width:{type:[Number,String]},height:{type:[Number,String]},index:Number},data:function(){return{parent:this.$parent,currentWidth:0,currentHeight:0,currentChange:0,isFullScreen:!1,isDiy:!1,diyStyle:null}},computed:{minSize:function(){var e=this.min;if(d["a"].isString(e)&&(e=Number(e)),e<1){var t=this.parent.diretion;"horizontal"==t&&(e=this.parent.clientWidth*e),"vertical"==t&&(e=this.parent.clientHeight*e)}return e},maxSize:function(){var e=this.max;if(d["a"].isString(e)&&(e=Number(e)),e<1){var t=this.parent.diretion;"horizontal"==t&&(e=this.parent.clientWidth*e),"vertical"==t&&(e=this.parent.clientHeight*e)}return e},cWidth:function(){var e=this.currentWidth+this.currentChange;return e},cHeight:function(){return this.currentHeight+this.currentChange},left:function(){return this.parent.getLeft(this.index)},top:function(){return this.parent.getTop(this.index)},getStyle:function(){var e;if(this.isFullScreen)e=this.isDiy?Object.assign({position:"fixed","z-index":100},this.diyStyle):{position:"fixed",left:0,right:0,top:0,bottom:0,"z-index":100};else{var t=this.parent.diretion;"horizontal"==t&&(e={left:this.left+"px",top:0,bottom:0,width:this.cWidth+"px"}),"vertical"==t&&(e={top:this.top+"px",left:0,right:0,height:this.cHeight+"px"})}return e}},watch:{height:function(){this.parent.initItem()},width:function(){this.parent.initItem()},cWidth:function(){this.$emit("on-change",{height:this.cHeight,width:this.cWidth})},cHeight:function(){this.$emit("on-change",{height:this.cHeight,width:this.cWidth})}},mounted:function(){this.parent.addItem(this)},beforeDestroy:function(){this.parent.removeItem(this)},methods:{fullScreen:function(e){this.isDiy=e.isDiy,this.diyStyle=e.diyStyle,this.isFullScreen=!0},releaseFullScreen:function(){this.isFullScreen=!1}}},ks=Cs,Os=Object(E["a"])(ks,Es,Ns,!1,null,null,null),xs=Os.exports,Is={weMenu:A,weMenuItem:X,weSubMenu:q,weNavbar:ee,weEditor:Mt,weTree:ms,wePanel:Ss,wePanelItem:xs},Rs=function(e){Object.keys(Is).forEach((function(t){e.component(t,Is[t])}))},Ds={install:Rs},Ls=s("bb91"),As=s("40b6");s("dcad");i["default"].use(r["a"]),i["default"].use(Ds),i["default"].mixin(Ls["a"]),i["default"].config.productionTip=!1,i["default"].use(n.a,{i18n:function(e,t){return As["a"].t(e,t)}}),i["default"].prototype.$Message.config({duration:3}),new i["default"]({router:k["a"],i18n:As["a"],render:function(e){return e(C)}}).$mount("#app"),console.log("当前环境:".concat("production"))},"56e7":function(e,t,s){e.exports=s.p+"img/dxp.61dd11ea.svg"},5767:function(e,t,s){"use strict";var i=s("2c1d"),a=s.n(i);a.a},"58de":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.info,(function(t,i){return s("Card",{key:i,staticClass:"basic-card",attrs:{bordered:!1}},[s("p",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))]),s("div",e._l(t.children,(function(t,i){return s("span",{key:i,staticClass:"basic-card-item",class:{comment:"comment"===t.key}},[s("span",{staticClass:"basic-card-item-title",style:{width:e.enEnv?"140px":"100px"}},[e._v(e._s(t.title)+": ")]),s("span",{staticClass:"basic-card-item-value",class:{comment:"comment"===t.key},style:{width:e.enEnv?"calc(100% - 144px)":"calc(100% - 104px)"}},[e._v(e._s(e.formatValue(t)))])])})),0)])})),1)},a=[],n=s("100e"),r={props:{tableInfo:{type:Object},enEnv:Boolean},data:function(){return{info:[{title:this.$t("message.tableDetails.BZBSX"),children:[{key:"database",title:this.$t("message.tableDetails.DBN")},{key:"name",title:this.$t("message.tableDetails.TN")},{key:"alias",title:this.$t("message.tableDetails.BBM")},{key:"partitionTable",title:this.$t("message.tableDetails.FQM"),type:"boolean"},{key:"creator",title:this.$t("message.tableDetails.CJYH")},{key:"createTime",title:this.$t("message.tableDetails.CJSI"),type:"timestramp"},{key:"latestAccessTime",title:this.$t("message.tableDetails.ZHFWSJ"),type:"timestramp"},{key:"comment",title:this.$t("message.tableDetails.BMS")}]},{title:this.$t("message.tableDetails.BMXSX"),children:[{key:"lifecycle",title:this.$t("message.tableDetails.SMZQ")},{key:"modelLevel",title:this.$t("message.tableDetails.MXCJ")},{key:"useWay",title:this.$t("message.tableDetails.SYFS")},{key:"externalUse",title:this.$t("message.tableDetails.WBSFSY"),type:"boolean"}]},{title:this.$t("message.tableDetails.BYYSX"),children:[{key:"productName",title:this.$t("message.tableDetails.SXCP")},{key:"projectName",title:this.$t("message.tableDetails.SSXM")},{key:"usage",title:this.$t("message.tableDetails.YT")}]}]}},computed:{tableBaseInfo:function(){var e=this.tableInfo.baseInfo;return Object.assign(e.application,e.base,e.model)}},methods:{formatValue:function(e){return n["a"].formatValue(this.tableBaseInfo,e)}}},o=r,c=s("2877"),l=Object(c["a"])(o,i,a,!1,null,null,null);t["default"]=l.exports},"58e8":function(e,t,s){},"5a27":function(e,t,s){e.exports=s.p+"img/pyspark.5b11b479.svg"},"5ab8":function(e,t,s){},"5af5":function(e,t,s){"use strict";s.r(t);var i=s("a026");t["default"]={name:"WorkSidebar",events:["WorkSidebar:setHighLight","WorkSidebar:revealInSideBar"],dispatchs:{Workbench:["add","run","openFile","remove","updateTab","checkExist","deleteDirOrFile"],HdfsSidebar:["showTree"],HiveSidebar:["showHive","getDatabase","getTables","getTablePartitions"],IndexedDB:["getTabs"]},data:{API_PATH:"http://localhost:8088/api/rest_j/v1/"},methods:{showTree:function(e){var t=i["default"].extend(s("b1bd").default),a=new t;e(a)}},component:function(){return Promise.resolve().then(s.bind(null,"b1bd"))}}},"5c8c":function(e,t,s){},"5d01":function(e,t,s){e.exports=s.p+"img/hive.e00b8794.svg"},"5d9e":function(e,t,s){"use strict";var i=s("58e8"),a=s.n(i);a.a},"5e89":function(e,t,s){"use strict";var i=s("f9d4"),a=s.n(i);a.a},"5f00":function(e,t,s){},"608f":function(e,t,s){"use strict";var i=s("2735"),a=s.n(i);a.a},"60d6":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{attrs:{width:580},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"header-tab"},[s("ButtonGroup",{attrs:{shape:"circle",size:"large"}},[s("Button",{attrs:{type:"job"===e.switcher?"primary":"default"},on:{click:e.getRunningJobs}},[e._v(e._s(e.$t("message.resourceSimple.RWGLQ")))]),s("Button",{attrs:{type:"session"===e.switcher?"primary":"default"},on:{click:e.getEngines}},[e._v(e._s(e.$t("message.resourceSimple.YQGLQ")))]),s("Button",{attrs:{type:"queue"===e.switcher?"primary":"default"},on:{click:e.getQueue}},[e._v(e._s(e.$t("message.resourceSimple.DLGLQ")))])],1)],1)]),s("div",{staticClass:"resource-simple-content"},["job"===e.switcher?s("job",{ref:"job",on:{"close-modal":e.close,"change-loading":e.changeLoading,"change-job-disabled":e.changeJobDisabled}}):"session"===e.switcher?s("engine",{ref:"engine",on:{disabled:e.engineDisabledChange,"change-loading":e.changeLoading}}):s("queue",{ref:"queue"})],1),s("template",{slot:"footer"},[s("div",{staticClass:"resource-simple-footer legendShow"},[e.pointList.length?s("point",{attrs:{"point-list":e.pointList}}):e._e(),s("div",[s("Button",{attrs:{type:"default"},on:{click:e.rest}},[s("Icon",{attrs:{size:"18",type:"ios-repeat"}}),e._v("\n          "+e._s(e.$t("message.resourceSimple.SX"))+"\n        ")],1),"job"===e.switcher?s("Button",{attrs:{type:"default",disabled:e.isJobBtnDisabled},on:{click:e.openKillModal}},[e._v("\n          "+e._s(e.$t("message.resourceSimple.JSRW"))+"\n        ")]):e._e(),"session"===e.switcher?s("Button",{attrs:{disabled:e.engineDisable,type:"default"},on:{click:e.openKillModal}},[e._v("\n          "+e._s(e.$t("message.resourceSimple.JSYQ"))+"\n        ")]):e._e()],1)],1)]),s("detele-modal",{ref:"killModal",attrs:{loading:e.loading},on:{delete:e.killJob}})],2)},a=[],n=s("7b73"),r=s("8c5f"),o=s("7a38"),c=s("21a0"),l=s("b368"),d={components:{job:r["default"],engine:o["default"],queue:c["default"],point:l["default"],deteleModal:n["a"]},data:function(){return{dataList:[],show:!1,switcher:"job",pointList:[],loading:!1,isJobBtnDisabled:!0,engineDisable:!0}},methods:{getRunningJobs:function(){var e=this;this.switcher="job",this.getPointList(),this.$nextTick((function(){e.$refs.job.getJobList()}))},getEngines:function(){var e=this;this.switcher="session",this.getPointList(),this.$nextTick((function(){e.$refs.engine.getEngineData()}))},getQueue:function(){var e=this;this.switcher="queue",this.getPointList(),this.$nextTick((function(){e.$refs.queue.getQueueList()}))},open:function(){this.show=!0,"job"===this.switcher?(this.isJobBtnDisabled=!0,this.getRunningJobs()):"session"===this.switcher?this.getEngines():this.getQueue()},close:function(){this.show=!1},killSuccess:function(e){this.getRunningJobs()},rest:function(){this.open()},getPointList:function(){var e=null;e="queue"===this.switcher?[{type:"idle",label:this.$t("message.resourceSimple.KX")},{type:"busy",label:this.$t("message.resourceSimple.FM")}]:"job"===this.switcher?[{type:"init",label:this.$t("message.resourceSimple.PDZ")},{type:"schedule",label:this.$t("message.resourceSimple.ZYSQ")},{type:"running",label:this.$t("message.resourceSimple.YX")}]:[{type:"busy",label:this.$t("message.resourceSimple.FM")},{type:"idle",label:this.$t("message.resourceSimple.KX")},{type:"starting",label:this.$t("message.resourceSimple.QD")}],this.pointList=e},openKillModal:function(){var e="session"===this.switcher?this.$t("message.resourceSimple.YQ"):this.$t("message.resourceSimple.RW");this.$refs.killModal.open({type:e,name:""})},killJob:function(){"session"===this.switcher?this.$refs.engine.killJob():this.$refs.job.killJob()},changeLoading:function(e){this.loading=e},changeJobDisabled:function(e){this.isJobBtnDisabled=e},engineDisabledChange:function(e){this.engineDisable=e}}},u=d,h=(s("0139"),s("2877")),p=Object(h["a"])(u,i,a,!1,null,null,null);t["default"]=p.exports},"61c7":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"layout-header"},[i("div",{staticClass:"layout-header-menu-icon",on:{click:e.goHome,mouseleave:e.mouseleave,mouseover:e.mouseover}},[i("div",{staticStyle:{"margin-top":"5px",display:"inline-block"}},[i("svg",{attrs:{t:"1572957725118",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1115",width:"20",height:"20"}},[i("path",{attrs:{d:"M896 1024h-213.333333a128 128 0 0 1-128-128v-213.333333a128 128 0 0 1 128-128h213.333333a128 128 0 0 1 128 128v213.333333a128 128 0 0 1-128 128z m-213.333333-384a42.666667 42.666667 0 0 0-42.666667 42.666667v213.333333a42.666667 42.666667 0 0 0 42.666667 42.666667h213.333333a42.666667 42.666667 0 0 0 42.666667-42.666667v-213.333333a42.666667 42.666667 0 0 0-42.666667-42.666667z m-341.333334 384H128a128 128 0 0 1-128-128v-213.333333a128 128 0 0 1 128-128h213.333333a128 128 0 0 1 128 128v213.333333a128 128 0 0 1-128 128z m-213.333333-384a42.666667 42.666667 0 0 0-42.666667 42.666667v213.333333a42.666667 42.666667 0 0 0 42.666667 42.666667h213.333333a42.666667 42.666667 0 0 0 42.666667-42.666667v-213.333333a42.666667 42.666667 0 0 0-42.666667-42.666667z m768-170.666667h-213.333333a128 128 0 0 1-128-128V128a128 128 0 0 1 128-128h213.333333a128 128 0 0 1 128 128v213.333333a128 128 0 0 1-128 128z m-213.333333-384a42.666667 42.666667 0 0 0-42.666667 42.666667v213.333333a42.666667 42.666667 0 0 0 42.666667 42.666667h213.333333a42.666667 42.666667 0 0 0 42.666667-42.666667V128a42.666667 42.666667 0 0 0-42.666667-42.666667z m-341.333334 384H128a128 128 0 0 1-128-128V128a128 128 0 0 1 128-128h213.333333a128 128 0 0 1 128 128v213.333333a128 128 0 0 1-128 128zM128 85.333333a42.666667 42.666667 0 0 0-42.666667 42.666667v213.333333a42.666667 42.666667 0 0 0 42.666667 42.666667h213.333333a42.666667 42.666667 0 0 0 42.666667-42.666667V128a42.666667 42.666667 0 0 0-42.666667-42.666667z","p-id":"1116",fill:"#00FFFF"}})])]),i("div",{staticClass:"logo"},[i("h1",{staticClass:"logo-title"},[e._v("\n          "+e._s(e.$t("message.newConst.logoName"))+" "),e.moudleName?i("span",{staticStyle:{"font-size":"14px"}},[e._v("/ "+e._s(e.moudleName))]):e._e()]),i("img",{staticClass:"logo-img",attrs:{src:s("69e0"),alt:e.$t("message.newConst.logoName")}})])]),e.currentProject.id?i("span",{staticClass:"proj-select",attrs:{title:e.$t("message.newConst.project")}},[i("svg",{attrs:{t:"1572505474223",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1741","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"30",height:"18"}},[i("path",{attrs:{d:"M1019.669291 397.544431c0 0.211533 0.211533 0.211533 0.211534 0.423066v-0.740366c-0.211533-0.105767-0.211533-0.105767-0.211534 0.3173z m0 0","p-id":"113308",fill:"#1d9cf0"}}),i("path",{attrs:{d:"M1201.693609 504.368697H421.559171c-28.133915 0-53.2006 18.297622-61.873461 45.162338L291.466254 759.266201V194.15526H585.285867c0 71.709754 58.065863 129.987151 129.881384 129.987151H985.50668v97.834105c0.211533 17.768789 14.701557 32.04728 32.364579 32.047279 17.980322 0 32.364579-14.701557 32.36458-32.364579 0-0.211533-0.211533-0.211533-0.211534-0.423067h0.211534v-96.987971c0-35.854877-29.085815-65.046459-65.046459-65.046459H715.378785c-35.854877 0-65.046459-29.085815-65.046459-65.046459 0-17.134189-6.980596-33.739545-19.143755-45.902704-12.163159-12.163159-28.768515-19.143755-45.902704-19.143754H291.677787c-35.854877 0-64.834926 29.085815-65.046459 64.834925V959.165074c0.211533 35.854877 29.085815 64.834926 65.046459 64.834926h779.817138c28.345449 0 53.412133-18.086089 61.873461-45.162338l133.160149-409.528273c0-35.749111-28.980048-64.729159-64.834926-64.940692z m0 0M1237.336953 181.992101c-33.528012-107.247332-154.736535-286.098652-553.476615-103.439734 0 0 410.26864-104.4974 462.940406 136.22738l-80.065316 15.759223 178.639787 112.324129 64.517625-196.620108-72.555887 35.74911z m19.989887 3.913364",fill:"#1d9cf0","p-id":"113309"}}),i("path",{attrs:{d:"M1073.927557 1023.894233s-23.691718-11.740093-35.643344-20.412953c-5.394097-3.913364-34.374145-29.085815-35.431811-30.883847l-697.530724-0.6346s-22.845585 3.384531-44.316205-12.903525c-23.797485-18.086089-34.162612-53.412133-34.162612-53.412133l-0.105766 47.806503s-0.423066 12.374692 2.644165 23.585952c2.009565 7.403662 6.028696 14.278491 7.615195 17.345722 15.124624 29.403115 54.892865 29.508881 54.892865 29.508881h782.038237z m-428.143195-5.711396","p-id":"113310",fill:"#1d9cf0"}})])]):e._e(),e._v(" \n    "),e.currentProject.id?i("Dropdown",{staticClass:"project-dro"},[i("div",{staticStyle:{"font-size":"14px"}},[e._v("\n        "+e._s(e.currentProject.name)+"\n        "),i("Icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"ios-arrow-down"}})],1),i("DropdownMenu",{staticClass:"proj-list",attrs:{slot:"list"},slot:"list"},e._l(e.projectList,(function(t){return i("div",{key:t.id},[i("div",{staticClass:"proj-name"},[e._v(e._s(t.name))]),e._l(t.dwsProjectList,(function(s){return i("div",{key:t.id+s.id,staticClass:"proj-item",class:{active:s.id==e.currentProject.id},on:{click:function(i){return e.changeProj(t,s)}}},[e._v("\n            "+e._s(s.name)+"\n          ")])}))],2)})),0)],1):e._e(),i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleOutsideClick,expression:"handleOutsideClick"}],staticClass:"user",class:{selected:e.isUserMenuShow},on:{click:e.handleUserClick}},[i("span",[e._v(e._s(e.userName))]),i("Icon",{directives:[{name:"show",rawName:"v-show",value:!e.isUserMenuShow,expression:"!isUserMenuShow"}],staticClass:"user-icon",attrs:{type:"ios-arrow-down"}}),i("Icon",{directives:[{name:"show",rawName:"v-show",value:e.isUserMenuShow,expression:"isUserMenuShow"}],staticClass:"user-icon",attrs:{type:"ios-arrow-up"}}),i("userMenu",{directives:[{name:"show",rawName:"v-show",value:e.isUserMenuShow,expression:"isUserMenuShow"}],on:{"clear-session":e.clearSession}})],1),i("div",{staticClass:"icon-group"},[e.isSandbox?i("Icon",{staticClass:"book",attrs:{title:"freedback",type:"ios-chatboxes"},on:{click:function(t){return e.linkTo("freedback")}}}):e._e(),i("Icon",{staticClass:"book",attrs:{title:"about",type:"ios-book"},on:{click:function(t){return e.linkTo("book")}}}),i("Icon",{staticClass:"git",attrs:{title:"github",type:"logo-github"},on:{click:function(t){return e.linkTo("github")}}})],1)],1),i("nav-menu",{directives:[{name:"show",rawName:"v-show",value:e.isNavMenuShow,expression:"isNavMenuShow"}],on:{click:e.handleNavMenuClose},nativeOn:{"!mouseover":function(t){return e.mouseover(t)},mouseleave:function(t){return e.mouseleave(t)}}})],1)},a=[],n=(s("1c01"),s("58b2"),s("8e6e"),s("d25f"),s("a481"),s("6762"),s("2fdb"),s("bd86")),r=(s("7f7f"),s("57e7"),s("456d"),s("ac6a"),s("f3e2"),s("2ef0")),o=s("b593"),c=s("7138"),l=s("0b71"),d=s("a779"),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"nav-menu"},[s("div",{staticClass:"nav-menu-left"},[e._l(e.menuList,(function(t,i){return[s("div",{key:i,staticClass:"nav-menu-left-item",class:{actived:e.current&&t.subTitle===e.current.subTitle},on:{mouseover:function(s){return s.stopPropagation(),e.onMouseOver(t)}}},[s("p",{staticClass:"nav-menu-left-main-title"},[e._v(e._s(t.mainTitle))]),t.children?s("Icon",{staticClass:"nav-menu-left-icon",attrs:{size:"14",type:"ios-arrow-forward"}}):e._e()],1)]}))],2),e.current?s("div",{staticClass:"nav-menu-right"},e._l(e.current.children,(function(t,i){return s("div",{key:i,staticClass:"nav-menu-right-item"},[s("div",{staticClass:"nav-menu-right-item-title"},[e._v(e._s(t.classify))]),e._l(t.children,(function(t){return s("div",{key:t.title,staticClass:"nav-menu-right-item-child",on:{click:function(s){return s.stopPropagation(),e.handleClick(t)}}},[s("i",{staticClass:"nav-menu-right-item-icon",class:t.icon}),s("span",[e._v(e._s(t.title))])])}))],2)})),0):e._e()])},h=[],p={data:function(){return{menuList:[{mainTitle:this.$t("message.headerNavBar.Workflow"),subTitle:"Workflow Development",children:[{classify:this.$t("message.headerNavBar.Workflow"),children:[{title:"Workflow",path:"workflow",icon:"fi-workflow1"}]}]},{mainTitle:this.$t("message.headerNavBar.Exchangis"),subTitle:"Exchangis",children:[{classify:this.$t("message.headerNavBar.Exchangis"),children:[{title:"Exchangis",path:"",icon:"fi-exchange"}]}]},{mainTitle:this.$t("message.headerNavBar.Scriptis"),subTitle:"Application Development",children:[{classify:this.$t("message.headerNavBar.Scriptis"),children:[{title:"Scriptis",path:"linkis",icon:"fi-scriptis"}]}]},{mainTitle:this.$t("message.headerNavBar.Visualis"),subTitle:"Data Visualization",children:[{classify:this.$t("message.headerNavBar.Visualis"),children:[{title:"Visualis",path:"visualis",icon:"fi-visualis"}]}]},{mainTitle:this.$t("message.headerNavBar.Qualitis"),subTitle:"Data Development",children:[{classify:this.$t("message.headerNavBar.Qualitis"),children:[{title:"Qualitis",path:"qualitis",icon:"fi-qualitis"}]}]},{mainTitle:this.$t("message.headerNavBar.Schedulis"),subTitle:"Schedulis",children:[{classify:this.$t("message.headerNavBar.Schedulis"),children:[{title:"Schedulis",path:"schedulis",icon:"fi-schedule"}]}]},{mainTitle:this.$t("message.headerNavBar.LinkisConsole"),subTitle:"Linkis Console",children:[{classify:this.$t("message.headerNavBar.LinkisConsole"),children:[{title:"Linkis Console",path:"console",icon:"fi-resource"}]}]},{mainTitle:this.$t("message.headerNavBar.DatalinkDXP"),subTitle:"datalink dxp",children:[{classify:this.$t("message.headerNavBar.DatalinkDXP"),children:[{title:"Datalink DXP",path:"dxp",icon:"fi-datalink-dxp"}]}]}],current:null}},methods:{onMouseOver:function(e){if(e.children)return this.current=e;this.current=null},handleClick:function(e){if(e.path){if("dxp"===e.path)return void(window.location.href="http://192.168.1.47:8787/dxp-console");var t=this.$route.query;this.gotoCommonIframe(e.path,t)}else this.$Message.warning(this.$t("message.constants.warning.comingSoon"));this.$emit("click",e)}}},f=p,m=(s("fcc4"),s("2877")),g=Object(m["a"])(f,u,h,!1,null,null,null),b=g.exports;function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var w={directives:{clickoutside:d["a"]},components:{userMenu:l["default"],navMenu:b},data:function(){return{isUserMenuShow:!1,userName:"",isNavMenuShow:!1,currentProject:{},projectList:[],isSandbox:!1}},created:function(){this.init()},mounted:function(){this.getCurrentProject()},computed:{moudleName:function(){var e,t=this,s={"/home":"Scriptis","/console":"Console","/kanban":"Visualis","/workflow":"Workflow","/process":"Workflow"};return Object.keys(s).forEach((function(i){t.$route.path.indexOf(i)>-1&&(e=s[i])})),e}},watch:{$route:function(e){this.projectID=e.query.projectID,this.getCurrentProject()}},methods:{init:function(){var e=this;o["a"].fetch("/dss/getBaseInfo","get").then((function(t){Object(r["isEmpty"])(t)||(e.userName=t.userInfo.basic.username,c["a"].set("baseInfo",t),c["a"].set("userInfo",t.userInfo),e.$router.app.$emit("username",t.userInfo.basic.username),e.$emit("set-init"))}))},goto:function(e){this.$router.push({name:e})},getClass:function(e){var t=[];return this.$route.name!==e&&this.$route.meta.parent!==e||t.push("selected"),t},handleOutsideClick:function(){this.isUserMenuShow=!1},handleUserClick:function(){this.isUserMenuShow=!this.isUserMenuShow},clearSession:function(){this.$emit("clear-session")},handleNavMenuClose:function(){this.isNavMenuShow=!1},mouseover:function(){this.isNavMenuShow="/project"!=this.$route.path},mouseleave:function(){this.isNavMenuShow=!1},getCurrentProject:function(){var e=c["a"].get("projectList","local");this.projectList=e;var t=this.$route.query.projectID,s={};t&&this.projectList.forEach((function(e){e.dwsProjectList&&e.dwsProjectList.forEach((function(e){e.id==t&&(s=y({},e))}))})),this.currentProject=s},changeProj:function(e,t){t.id==this.currentProject.id&&e.id==this.$route.query.projectTaxonomyID||(["/process"].includes(this.$route.path)?this.$router.replace({path:"/project"}):this.$router.replace({path:this.$route.path,query:y({},this.$route.query,{projectTaxonomyID:e.id,projectID:t.id,projectVersionID:t.latestVersion.id})}))},goHome:function(){this.$router.push("/")},linkTo:function(e){var t="";"book"===e?t="https://github.com/WeBankFinTech/DataSphereStudio/blob/master/docs/zh_CN/ch3/DSS_User_Manual.md":"github"===e?t="https://github.com/WeBankFinTech/DataSphereStudio":"freedback"===e&&(t="https://wj.qq.com/s2/4943071/c037/ ","en"===localStorage.getItem("locale")&&(t="https://wj.qq.com/s2/4943706/5a8b"));var s=window.open("about:blank");setTimeout((function(){s.location.href=t}),500)}}},T=w,S=(s("cbf5"),Object(m["a"])(T,i,a,!1,null,null,null));t["default"]=S.exports},"66db":function(e,t,s){"use strict";var i=s("45f8"),a=s.n(i);a.a},"66ed":function(e,t,s){"use strict";s.r(t),t["default"]={name:"Project",events:["Project:copy","Project:loading","Project:copyReset","Project:getData","Project:updataPercent"],dispatchs:{Project:["copy","loading","copyReset","getData","updataPercent","removePercent"],IndexedDB:["addProjectCache","clearProjectCache"]},data:{API_PATH:"http://localhost:8088/api/rest_j/v1/"},component:function(){return Promise.resolve().then(s.bind(null,"9a04"))}}},6751:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"project-type"},[s("div",{staticClass:"project-type-module"},[s("div",{staticClass:"project-type-header"},[s("svg",{attrs:{t:"1573033007700",viewBox:"0 0 1025 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"113086",width:"20",height:"20"}},[s("path",{attrs:{d:"M451.310305 529.689024L50.690586 339.234666a72.444333 72.444333 0 0 1 0-135.09716L451.374302 13.619151a144.888665 144.888665 0 0 1 122.041821 0l400.491726 190.518355a72.444333 72.444333 0 0 1 0 135.033163L573.416123 529.753021c-38.71804 17.98309-83.387778 17.98309-122.041821 0z",fill:"#5580EB","p-id":"113087"}}),s("path",{attrs:{d:"M512.299218 784.460127c-29.118526 0-57.853071-6.655663-84.027747-19.519012l-392.940107-195.190119a54.333249 54.333249 0 1 1 48.18956-96.891095l392.556127 195.190119c22.91084 11.135436 49.597489 11.135436 72.444333 0l392.940107-195.190119a54.333249 54.333249 0 1 1 48.189561 96.891095l-393.324088 195.190119a189.43041 189.43041 0 0 1-84.027746 19.519012z m0 229.620375a189.43041 189.43041 0 0 1-84.027747-19.519012l-392.940107-195.190118a54.333249 54.333249 0 1 1 48.18956-96.891095l392.556127 195.190118c22.846843 11.26343 49.597489 11.26343 72.444333 0l392.940107-195.190118a54.333249 54.333249 0 1 1 48.189561 96.827098l-393.324088 195.190119a189.43041 189.43041 0 0 1-84.027746 19.583008z",fill:"#5580EB",opacity:".5","p-id":"113088"}})]),s("span",{staticClass:"project-type-header-label"},[e._v(e._s(e.$t("message.project.applicationStudio")))])]),s("div",{staticClass:"project-type-more",class:{en:e.isEnEnv,cn:!e.isEnEnv}}),s("div",{staticClass:"project-type-list"},[s("div",{staticClass:"project-type-list-item-wrap"},[s("svg",{attrs:{t:"1572508997540",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3412","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"30",height:"30"}},[s("path",{attrs:{d:"M468.89187555 244.16003161L405.84786173 124.9330568H77.68240987v774.65170172h368.68449976c-9.0617679-19.02971259-16.44063605-38.96560197-21.8776968-59.54876049H133.6064632V303.7087921h782.03056989v197.15817876c7.24941431 6.47269136 15.01664395 12.03920592 21.74824296 19.15916642 12.81592889 13.72210569 23.81950419 28.60929581 34.04635654 44.14375507V244.16003161H468.89187555z m-335.28541235-59.67821433h239.74848791l31.45728 59.5487605H133.6064632v-59.5487605z m614.38786371 536.32720592h111.71865284v59.5487605h-111.71865284v119.22697482h-55.92405333v-119.22697482h-111.71865283v-59.5487605h111.71865283v-119.22697481h55.92405333v119.22697481z m-27.83257283-238.32449579c-138.77450272 0-251.39933235 120.00369778-251.39933235 268.09887606 0 148.09517827 112.49537581 268.22832987 251.26987852 268.22832986 138.90395653 0 251.39933235-120.00369778 251.39933234-268.09887605 0-71.07015111-26.40858075-139.29231803-73.52977383-189.64985678s-111.0713837-78.57847309-177.74010468-78.57847309z m-0.12945383 476.64899161c-107.83503803-0.25890765-195.21637136-93.4656632-195.34582519-208.55011555 0.12945383-115.21390617 87.51078717-208.42066173 195.47527902-208.67956939 52.16989235 0 101.36234667 21.74824297 138.2566874 61.10220642 37.02379457 39.35396347 57.21859161 91.78276347 57.21859161 147.57736297-0.12945383 115.21390617-87.64024098 208.55011555-195.60473284 208.55011555z",fill:"#2d8cf0","p-id":"3413"}})]),s("div",{staticClass:"project-type-list-item",staticStyle:{color:"#2d8cf0"},on:{click:e.createProject}},[s("p",{staticClass:"project-type-list-item-title"},[e._v(e._s(e.$t("message.project.createProject")))])])])])]),s("div",{staticClass:"project-type-module"},[s("div",{staticClass:"project-type-header"},[s("svg",{attrs:{t:"1572509911758",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9923","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"18",height:"18"}},[s("path",{attrs:{d:"M447.7 62H94.1C76.4 62 62 74.6 62 90.1v478.1c0 15.5 14.4 28.1 32.1 28.1h353.6c17.8 0 32.1-12.6 32.1-28.1V90.1c0.1-15.5-14.3-28.1-32.1-28.1z m-32.1 478.1H126.3V118.3h289.3v421.8z",fill:"#37B1C9","p-id":"9924"}}),s("path",{attrs:{d:"M447.7 652.6H94.1c-17.8 0-32.1 12.6-32.1 28.1v253.1c0 15.5 14.4 28.1 32.1 28.1h353.6c17.8 0 32.1-12.6 32.1-28.1v-253c0.1-15.6-14.3-28.2-32.1-28.2z m-32.1 253.2H126.3V708.9h289.3v196.9zM929.9 62H576.3c-17.8 0-32.1 12.6-32.1 28.1v253.1c0 15.5 14.4 28.1 32.1 28.1h353.6c17.8 0 32.1-12.6 32.1-28.1V90.1c0-15.5-14.4-28.1-32.1-28.1z m-32.2 253.1H608.4V118.3h289.3v196.8z",fill:"#9BD8E4","p-id":"9925"}}),s("path",{attrs:{d:"M929.9 427.6H576.3c-17.8 0-32.1 12.6-32.1 28.1v478.1c0 15.5 14.4 28.1 32.1 28.1h353.6c17.8 0 32.1-12.6 32.1-28.1v-478c0-15.6-14.4-28.2-32.1-28.2z m-32.2 478.2H608.4V483.9h289.3v421.9z",fill:"#37B1C9","p-id":"9926"}})]),s("span",{staticClass:"project-type-header-label"},[e._v(e._s(e.$t("message.project.integratedSystem")))]),s("div",{staticClass:"project-type-header-help",on:{click:e.linkTo}},[s("Icon",{attrs:{type:"ios-help-circle-outline help"}}),s("span",[e._v(e._s(e.$t("message.project.howToIntegratedsystem")))])],1)]),s("div",{staticClass:"project-type-list"},e._l(e.systemMap,(function(t){return s("div",{key:t.name,staticClass:"project-type-list-item-wrap",on:{click:function(s){return e.goto(t.path)}}},[t.font?s("i",{staticClass:"project-type-list-icon",class:t.font,style:{color:t.color,"font-size":t.iconSize||"30px"}}):s("img",{staticClass:"project-type-list-img",style:{width:t.iconSize||"30px",height:t.iconSize||"30px"},attrs:{src:t.icon,alt:""}}),s("div",{staticClass:"project-type-list-item"},[s("p",{staticClass:"project-type-list-item-title",style:{color:t.color}},[e._v(e._s(t.name))]),s("p",{staticClass:"project-type-list-item-sub"},[e._v(e._s(t.subName))])])])})),0)])])},a=[],n=(s("7138"),s("40b6")),r=(s("8e61"),[{name:"Exchangis",font:"fi-exchange",subName:n["a"].t("message.project.exchangisSubTitle"),color:"#66CC99",path:"exchangis"},{name:"Scriptis",font:"fi-scriptis",subName:n["a"].t("message.project.scriptisSubTitle"),color:"#6666FF",iconSize:"28px",path:"linkis"},{name:"Visualis",font:"fi-visualis",subName:n["a"].t("message.project.visualisSubTitle"),color:"#0099FF",iconSize:"34px",path:"visualis"},{name:"Qualitis",font:"fi-qualitis",subName:n["a"].t("message.project.qualitisSubTitle"),color:"#339999",path:"qualitis"},{name:"Schedulis",font:"fi-schedule",subName:n["a"].t("message.project.schedulisSubTitle"),color:"#6666CC",path:"schedulis"}]),o={size:3},c={systemMap:r,setting:o},l={data:function(){return{systemMap:c.systemMap,setting:c.setting}},computed:{isEnEnv:function(){return"en"===localStorage.getItem("locale")}},methods:{goto:function(e){this.gotoCommonIframe(e)},createProject:function(){this.$emit("add-project")},linkTo:function(){var e=window.open("about:blank");setTimeout((function(){e.location.href="https://github.com/WeBankFinTech/DataSphereStudio/blob/master/docs/zh_CN/ch4/%E7%AC%AC%E4%B8%89%E6%96%B9%E7%B3%BB%E7%BB%9F%E6%8E%A5%E5%85%A5DSS%E6%8C%87%E5%8D%97.md"}))}}},d=l,u=(s("0981"),s("2877")),h=Object(u["a"])(d,i,a,!1,null,null,null);t["default"]=h.exports},"685e":function(e,t,s){e.exports=s.p+"img/flow.b8a44315.svg"},"69e0":function(e,t,s){e.exports=s.p+"img/dssLogo6.28ea220c.png"},"69f1":function(e,t,s){"use strict";var i=s("4288"),a=s.n(i);a.a},"6b6d":function(e,t,s){"use strict";s.d(t,"c",(function(){return h})),s.d(t,"b",(function(){return p})),s.d(t,"a",(function(){return f}));s("6b54"),s("87b3"),s("2397");var i=s("308d"),a=s("6bb5"),n=s("4e2b"),r=(s("d25f"),s("d225")),o=s("b0b4"),c=s("bb91");function l(e){return function(){var t,s=Object(a["a"])(e);if(d()){var n=Object(a["a"])(this).constructor;t=Reflect.construct(s,arguments,n)}else t=s.apply(this,arguments);return Object(i["a"])(this,t)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var u=[{rule:/\.(bi)$/i,logo:"fi-bi"},{rule:/\.(sql)$/i,logo:"fi-spark"},{rule:/\.(hql)$/i,logo:"fi-hive"},{rule:/\.(out)$/i,logo:"fi-storage"},{rule:/\.scala$/i,logo:"fi-scala"},{rule:/\.jdbc$/i,logo:"fi-jdbc"},{rule:/\.python$/i,logo:"fi-python"},{rule:/\.py$/i,logo:"fi-spark-python"},{rule:/\.r$/i,logo:"fi-r"},{rule:/\.qmlsql$/i,logo:"fi-spark"},{rule:/\.qmlpy$/i,logo:"fi-python"},{rule:/\.txt$/i,logo:"fi-txt"},{rule:/\.log$/i,logo:"fi-log"}],h=function(){function e(t){Object(r["a"])(this,e),this.id=t.id,this.execID=null,this.taskID=t.taskID,this.filename=t.filename,this.filepath=t.filepath,this.fileList=t.fileList||[],this.unsave=t.unsave||!1,this.saveAs=t.saveAs||!1,this.noLoadCache=t.noLoadCache||!1,this.type=t.type||"workspaceScript",this.data=t.data||null,this.code=t.code,this.params=t.params,this.isShow=!0,this.ismodifyByOldTab=t.ismodifyByOldTab||!1,this.owner=c["a"].methods.getUserName(),this.specialSetting=t.specialSetting,this.nodeName=t.nodeName||null}return Object(o["a"])(e,[{key:"logo",get:function(){var e=this,t=u.filter((function(t){return t.rule.test(e.filename)}));return t.length>0?t[0].logo:"javascript: void 0"}}]),e}(),p=function e(t){Object(r["a"])(this,e),this.id=t.id,this.fileName=t.fileName,this.filepath=t.filepath,this.data=t.data||t.code||"",this.oldData=t.data||"",this.log=t.log||{},this.logLine=t.logLine||1,this.history=[],this.progress={current:null,progressInfo:[],waitingSize:null,costTime:null},this.steps=[],this.result=null,this.resultList=null,this.params=t.params||{variable:[],configuration:{special:{},runtime:{args:"",env:[]},startup:{}}},this.lang=t.lang,this.executable=t.executable||!1,this.configurable=t.configurable||!0,this.application=t.application,this.runType=t.runType,this.ext=t.ext,this.scriptType=t.scriptType,this.abbr=t.abbr,this.readOnly=t.readOnly||!1,this.running=!1,this.status=t.status?t.status:"Inited",this.scriptViewState={}},f=function(e){Object(n["a"])(s,e);var t=l(s);function s(e){var i;return Object(r["a"])(this,s),i=t.call(this,e),i.readOnly=!0,i.executable=!1,i.configurable=!1,i}return s}(p)},"6b92":function(e,t,s){},"6bb7":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-bgc"},[i("Row",{staticStyle:{padding:"20px 25px 10px"}},[e.myReadonly?e._e():i("i-col",{staticClass:"entry",attrs:{xs:6,sm:5,md:4,lg:4}},[i("div",{on:{click:e.addProject}},[i("Icon",{staticClass:"icon-blod",attrs:{type:"ios-add",size:"25"}}),i("span",[e._v(e._s(e.$t("message.workflow.createWorkflow")))])],1)])],1),i("div",[e.dataList.length>0?e._l(e.dataList,(function(t){return i("project-content-item",{key:t.id,attrs:{"hide-button-bar":!1,"hide-publish-andcopy":!0,"current-data":t,"data-list":t.dwsFlowList,readonly:e.myReadonly,"tag-prop":"uses"},on:{goto:e.gotoWorkflow,detail:e.versionDetail,modify:e.projectModify,delete:e.deleteWorkflow}},[i("div",{staticClass:"header-search"},[i("Input",{staticClass:"search-input",attrs:{search:"",placeholder:e.$t("message.workflow.searchWorkflow")},on:{"on-change":function(s){return e.searchWorkflow(s,t.id)}}})],1)])})):[i("div",{staticClass:"no-data-bgc"},[i("img",{staticClass:"no-data-img",attrs:{src:s("bbdc"),alt:e.$t("message.workflow.searchWorkflow")}}),i("div",[e._v(e._s(e.$t("message.workflow.searchWorkflow")))])])]],2),i("Modal",{attrs:{title:"删除工作流分类"},on:{"on-ok":e.deleteProjectClassifyConfirm},model:{value:e.deleteClassifyShow,callback:function(t){e.deleteClassifyShow=t},expression:"deleteClassifyShow"}},[e._v("\n    确认删除工作流分类"+e._s(e.deleteClassifyItem.name)+"?")]),i("Modal",{attrs:{title:e.$t("message.workflow.deleteWorkflow")},on:{"on-ok":e.deleteProjectConfirm},model:{value:e.deleteProjectShow,callback:function(t){e.deleteProjectShow=t},expression:"deleteProjectShow"}},[e._v(e._s(e.$t("message.workflow.confirmDelete",{name:e.deleteProjectItem.name})))]),i("WorkflowForm",{ref:"workflowForm",attrs:{"workflow-data":e.currentWorkflowData,"classify-list":e.cacheData,"add-project-show":e.ProjectShow,"action-type":e.actionType},on:{show:e.ProjectShowAction,confirm:e.ProjectConfirm}}),i("VersionDetail",{attrs:{"version-detail-show":e.versionDetailShow,"version-data":e.versionData},on:{versionDetailShow:e.versionDetailAction,goto:e.versionGotoWorkflow}}),e.loading?i("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)},a=[],n=(s("1c01"),s("58b2"),s("8e6e"),s("456d"),s("ac6a"),s("f3e2"),s("b54a"),s("57e7"),s("6d67"),s("bd86")),r=(s("7f7f"),s("d25f"),s("466c"),s("ec7c")),o=s("17cb"),c=s("9c5a"),l=s("7138"),d=s("b593"),u=s("d958"),h=s.n(u);function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var m={components:{projectContentItem:r["a"],WorkflowForm:o["default"],VersionDetail:c["default"]},data:function(){return{addClassifyShow:!1,deleteClassifyShow:!1,ProjectShow:!1,versionDetailShow:!1,deleteProjectShow:!1,deleteClassifyItem:"",deleteProjectItem:"",isRootFlow:!1,actionType:"",loading:!1,projectClassify:{name:"",descipte:""},dataList:[],cacheData:[],params:"",versionData:[],flowTaxonomyID:0,readonly:"false",currentWorkflowData:null}},computed:{myReadonly:function(){return"true"===this.readonly||(this.readonly,!1)}},watch:{isRootFlow:function(e){this.getParams(e),this.getFlowData(this.params)},$route:function(){this.fetchFlowData()}},created:function(){this.fetchFlowData()},methods:{fetchFlowData:function(){this.getParams(this.isRootFlow),this.getFlowData(this.params),this.readonly=this.$route.query.readonly||"false"},getParams:function(e,t){this.params=t?"?projectTaxonomyID=".concat(this.$route.query.projectTaxonomyID,"&projectVersionID=").concat(this.$route.query.projectVersionID,"&flowTaxonomyID=").concat(t,"&isRootFlow=").concat(!e):"?projectTaxonomyID=".concat(this.$route.query.projectTaxonomyID,"&projectVersionID=").concat(this.$route.query.projectVersionID,"&isRootFlow=").concat(!e)},getFlowData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.loading=!0,d["a"].fetch("/dss/tree".concat(t),{},"get").then((function(t){e.cacheData=t.data,e.dataList=e.cacheData,l["a"].set("flowsList",e.cacheData),e.loading=!1})).catch((function(){e.loading=!1}))},addProject:function(){this.ProjectShow=!0,this.actionType="add",this.init()},ProjectConfirm:function(e){var t=this;e.projectVersionID=+this.$route.query.projectVersionID;var s=this.cacheData.filter((function(t){return t.id===e.taxonomyID}));if(this.checkName(s[0].dwsFlowList,e.name,e.id))return this.$Message.warning(this.$t("message.workflow.nameUnrepeatable"));this.loading=!0,"add"===this.actionType?d["a"].fetch("/dss/addFlow",e,"post").then((function(){t.$Message.success(t.$t("message.workflow.createdSuccess")),t.getParams(t.isRootFlow),t.getFlowData(t.params)})).catch((function(){t.loading=!1})):d["a"].fetch("/dss/updateFlowBaseInfo",e,"post").then((function(){t.loading=!1,t.$Message.success(t.$t("message.workflow.eitorSuccess",{name:e.name})),t.getParams(t.isRootFlow),t.getFlowData(t.params)})).catch((function(){t.loading=!1,t.currentWorkflowData.uses=t.$refs.workflowForm.originBusiness}))},addWorkflowClassifyShow:function(){this.init(),this.actionType="add",this.addClassifyShow=!0},modifyClassify:function(e){this.init(),this.actionType="modify",this.addClassifyShow=!0,this.projectClassify.name=e.name,this.projectClassify.description=e.description,this.projectClassify.id=e.id},addProjectClassifyConfirm:function(e){var t=this;if(this.checkName(this.cacheData,e.name,e.id))return this.$Message.warning("分类名不可重复！");this.loading=!0,"add"===this.actionType?(e.projectVersionID=+this.$route.query.projectVersionID,d["a"].fetch("/dss/addFlowTaxonomy",e,"post").then((function(){t.$Message.success(t.$t("message.workflow.createdSuccess")),t.getParams(t.isRootFlow),t.getFlowData(t.params)})).catch((function(){t.loading=!1}))):(e.projectVersionID=+this.$route.query.projectVersionID,d["a"].fetch("/dss/updateFlowTaxonomy",e,"post").then((function(){t.$Message.success("修改分类".concat(e.name,"成功！")),t.getParams(t.isRootFlow),t.getFlowData(t.params)})).catch((function(){t.loading=!1})))},projectClassifyDelete:function(e){this.deleteClassifyShow=!0,this.deleteClassifyItem=e},deleteProjectClassifyConfirm:function(){var e=this;this.loading=!0;var t={id:this.deleteClassifyItem.id,projectVersionID:+this.$route.query.projectVersionID};d["a"].fetch("/dss/deleteFlowTaxonomy",t,"post").then((function(){e.$Message.success("删除分类".concat(e.deleteClassifyItem.name,"成功！")),e.getParams(e.isRootFlow),e.getFlowData(e.params)})).catch((function(){e.loading=!1}))},deleteWorkflow:function(e){this.deleteProjectShow=!0,this.deleteProjectItem=e},deleteProjectConfirm:function(){var e=this;if(!this.deleteProjectItem.rootFlow)return this.$Message.error(this.$t("message.workflow.notDelete"));this.loading=!0;var t={id:this.deleteProjectItem.id,sure:!1,projectVersionID:+this.$route.query.projectVersionID};d["a"].fetch("/dss/deleteFlow",t,"post").then((function(s){e.loading=!1,s.warmMsg?e.$Modal.confirm({title:e.$t("message.workflow.mandatoryDelete"),content:s.warmMsg,onOk:function(){t.sure=!0,e.loading=!0,d["a"].fetch("/dss/deleteProject",t,"post").then((function(){e.$Message.success(e.$t("message.workflow.deleteSuccess",{name:e.deleteProjectItem.name})),e.getParams(e.isRootFlow),e.getFlowData(e.params)})).catch((function(){e.loading=!1}))}}):(e.$Message.success(e.$t("message.workflow.deleteSuccess",{name:e.deleteProjectItem.name})),e.getParams(e.isRootFlow),e.getFlowData(e.params))})).catch((function(){e.loading=!1}))},init:function(){this.projectClassify={name:"",description:""},this.currentWorkflowData={name:"",description:"",taxonomyID:1,uses:""}},projectModify:function(e,t){this.init(),this.ProjectShow=!0,this.actionType="modify",this.currentWorkflowData=t,this.currentWorkflowData.taxonomyID=e},ClassifyShow:function(e){this.addClassifyShow=e},ProjectShowAction:function(e){this.ProjectShow=e},gotoWorkflow:function(e,t){this.$emit("open-workflow",f({},this.$route.query,{flowTaxonomyID:e.id,flowId:t.id,readonly:this.$route.query.readonly||"false",parentReadonly:this.readonly,name:t.name,version:""}))},versionDetail:function(e,t){var s=this;this.versionDetailShow=!0;for(var i={id:t.id,projectVersionID:+this.$route.query.projectVersionID},a=0;a<this.dataList.length;a++)for(var n=0;n<this.dataList[a].dwsFlowList.length;n++)if(this.dataList[a].dwsFlowList[n].id===t.id){this.flowTaxonomyID=this.dataList[a].id;break}d["a"].fetch("/dss/listAllFlowVersions",i,"get").then((function(e){s.versionData=e.versions.map((function(e){return e.name=t.name,e}))}))},versionDetailAction:function(e){this.versionDetailShow=e},searchWorkflow:function(e,t){if(e.target.value){var s=l["a"].get("flowsList");this.dataList=s.map((function(s){return t===s.id&&(s.dwsFlowList=s.dwsFlowList.filter((function(t){return-1!=t.name.indexOf(e.target.value)}))),s}))}else this.dataList=l["a"].get("flowsList")},checkName:function(e,t,s){var i=!1;return e.map((function(e){e.name===t&&e.id!==s&&(i=!0)})),i},active:function(e){var t=this;e?(this.getParams(this.isRootFlow,e.id),this.loading=!0,d["a"].fetch("/dss/tree".concat(this.params),{},"get").then((function(e){t.dataList=e.data,t.loading=!1})).catch((function(){t.loading=!1}))):(this.getParams(this.isRootFlow),this.getFlowData(this.params))},breadcrumbClick:function(e){e.goBack?this.goBack():e.link},versionGotoWorkflow:function(e){this.$emit("open-workflow",f({},this.$route.query,{flowId:e.flowID,version:e.version,readonly:0!==e._index||this.myReadonly?"true":"false",parentReadonly:this.readonly,name:"".concat(e.name,"(历史版本)")}))},goBack:function(){this.$router.go(-1)},charCompare:function(e,t){return void 0===e||null===e||""===e||" "===e||"　"===e?-1:void 0===t||null===t||""===t||" "===t||"　"===t?1:(this.notChinese(e)||(e=h()(e)[0][0]),this.notChinese(t)||(t=h()(t)[0][0]),e.localeCompare(t))},notChinese:function(e){var t=e.charCodeAt(0);return t>=0&&t<=128},gotoVisualis:function(){var e=this.$route.query;this.$router.push({path:"/kanban",query:e})},modelHidden:function(e){this.projectModelShow=e},updateWorkflow:function(){var e=this;d["a"].fetch("/dss/tree",{},"get").then((function(t){var s=e.$route.query.projectTaxonomyID,i=e.$route.query.projectID;t.data.forEach((function(t){t.id===s&&t.dwsProjectList.forEach((function(t){if(t.id===i){var a=t.latestVersion.id;e.$router.push({name:"Workflow",query:{projectTaxonomyID:s,projectID:i,projectVersionID:a}})}}))}))}))}}},g=m,b=(s("5767"),s("2877")),v=Object(b["a"])(g,i,a,!1,null,"c3db49b8",null);t["default"]=v.exports},"6f56":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"runtime-args"},[s("div",{staticClass:"setting-title-wrap"},[s("h3",{staticClass:"setting-title"},[e._v(e._s(e.$t("message.workBench.body.setting.runTimeArgs.settingTitle")))])]),s("Form",{ref:"paramForm",staticClass:"custom-variable-content",attrs:{model:e.script.params}},[s("FormItem",[s("Input",{attrs:{type:"text",placeholder:e.$t("message.workBench.body.setting.runTimeArgs.placeholder")},model:{value:e.script.params.configuration.runtime.args,callback:function(t){e.$set(e.script.params.configuration.runtime,"args",t)},expression:"script.params.configuration.runtime.args"}})],1)],1)],1)},a=[],n={props:{script:{type:Object,required:!0}},data:function(){return{}}},r=n,o=s("2877"),c=Object(o["a"])(r,i,a,!1,null,null,null);t["default"]=c.exports},"6f9b":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("ul",{staticClass:"we-toolbar"},[s("li",{on:{click:function(t){return e.openPanel("log")}}},[s("Icon",{attrs:{type:"md-list-box",size:"14"}}),s("span",{staticClass:"v-toolbar-icon"},[e._v(e._s(e.$t("message.workBench.body.script.toolbarProgress.log")))])],1)])])},a=[],n={props:{status:String,application:String},data:function(){return{}},methods:{openPanel:function(e){this.$emit("open-panel",e)}}},r=n,o=s("2877"),c=Object(o["a"])(r,i,a,!1,null,null,null);t["default"]=c.exports},"708c":function(e,t,s){},7138:function(e,t,s){"use strict";s("ac6a"),s("f3e2"),s("28a5"),s("c5f6"),s("3b2b"),s("a481");var i={getItem:function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,s,i,a,n){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var r="";if(s)switch(s.constructor){case Number:r=s===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+s;break;case String:r="; expires="+s;break;case Date:r="; expires="+s.toUTCString();break}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+r+(a?"; domain="+a:"")+(i?"; path="+i:"")+(n?"; secure":""),!0},removeItem:function(e,t,s){return!(!e||!this.hasItem(e))&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(s?"; domain="+s:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=0;t<e.length;t++)e[t]=decodeURIComponent(e[t]);return e}},a="session",n="local",r="cookie";t["a"]={set:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,i=arguments.length>3?arguments[3]:void 0,n=this._map(s),r=n.storage,o=n.isWebStorage,d=void 0===o||o;d?c.set(e,t,r):l.set(e,t,i)},get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,s=this._map(t),i=s.storage,n=s.isWebStorage,r=void 0===n||n;return r?c.get(e,i):l.get(e)},clear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=this._map(e),s=t.storage,i=t.isWebStorage,n=void 0===i||i;n?c.clear(s):l.clear()},remove:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,s=this._map(t),i=s.storage,n=s.isWebStorage,r=void 0===n||n;r?c.remove(e,i):l.remove(e)},_map:function(e){var t,s=!0;switch(!0){case e===a:t="sessionStorage";break;case e===n:t="localStorage";break;case e===r:t="cookie",s=!1;break;default:t="sessionStorage"}return{isWebStorage:s,storage:t}}};var o=!0,c={set:function(e,t,s){try{window[s].setItem(e,JSON.stringify(t))}catch(i){!o&&console.error(i)}},get:function(e,t){try{return window[t].getItem(e)?JSON.parse(window[t].getItem(e)):window[t].getItem(e)}catch(s){!o&&console.error(s,e)}},clear:function(e){window[e].clear()},remove:function(e,t){window[t].removeItem(e)}},l={set:function(e,t,s){s?i.setItem(e,t,s):i.setItem(e,t)},get:function(e){return i.getItem(e)},clear:function(){i.keys().forEach((function(e){i.removeItem(e)}))},remove:function(e){i.removeItem(e)}}},7178:function(e,t,s){},"74a6":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"iframeClass"},[s("iframe",{staticClass:"iframeClass",attrs:{id:"iframe",src:e.visualSrc,frameborder:"0",width:"100%",height:"100%"}})])},a=[],n=(s("1c01"),s("58b2"),s("8e6e"),s("f3e2"),s("d25f"),s("ac6a"),s("456d"),s("bd86")),r=s("b593"),o=s("0971");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d={props:{parametes:{type:[String,Object],default:null},node:{type:[String,Object],default:null}},data:function(){return{height:1200,visualSrc:""}},mounted:function(){this.node.jobContent=this.node.jobContent||{},this.getUrl(),window.addEventListener("message",this.msgEvent,!1)},methods:{getUrl:function(){var e=this,t=this.$route.query.projectID,s=this.node.jobContent&&this.node.jobContent.id;r["a"].fetch("dss/getAppJointProjectID",{projectID:t,nodeType:this.node.nodeType},"get").then((function(t){var i=o["a"].replaceHolder(e.node.jumpUrl,l({},e.node.jobContent,{nodeId:s||e.node.key,projectId:t.appJointProjectID,nodeName:e.node.title}));e.visualSrc=i}))},msgEvent:function(e){if(e.data){var t=JSON.parse(e.data);"qualitis"===t.type&&t.nodeId===this.node.key&&("add"===t.data.action?this.node.jobContent.ruleGroupId=t.data.ruleGroupId:"delete"===t.data.action&&(this.node.jobContent.ruleGroupId=""))}this.$emit("save",{},l({},this.node))}},beforeDestroy:function(){window.removeEventListener("message",this.msgEvent,!1)}},u=d,h=(s("b2a9"),s("2877")),p=Object(h["a"])(u,i,a,!1,null,"27ca84b1",null);t["default"]=p.exports},7594:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"import-table"},[s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n      "+e._s(e.$t("message.createTable.LYSX"))+"\n    ")]),"hive"===e.source.importType?s("hive",{attrs:{hive:e.source.hive,"db-list":e.dbList},on:{"get-fields":e.getFields,"get-tables":e.getTables}}):e._e(),"csv"===e.source.importType||"xlsx"===e.source.importType?s("csv",{attrs:{"import-type":e.source.importType,options:e.source.table},on:{"get-fields":e.getFields}}):e._e()],1),s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n      "+e._s(e.$t("message.createTable.MBZD"))+"\n    ")]),s("div",{staticClass:"import-table-fields"},[s("fields-table",{attrs:{fields:e.target.fieldList,"table-columns":"hive"===e.source.importType?e.hiveFieldsColumns:e.csvOrXlsxfieldsColumns,"max-size":5,"can-be-delete":"hive"===e.source.importType,"special-field-key":e.specialFieldKey},on:{"on-delete":e.onDelete,"on-tag-click":e.onTagClick}})],1)]),e.partitionTable?s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n      "+e._s(e.$t("message.createTable.partitionAttr"))+"\n    ")]),s("div",{staticClass:"import-table-fields"},[s("fields-table",{attrs:{fields:e.target.partitionList,"table-columns":e.partTableColumns,"max-size":1}})],1)]):e._e(),s("fieldsModal",{ref:"fieldModal",attrs:{"field-list":e.target.fieldList,"actived-field-item":e.activedFieldItem}})],1)},a=[],n=(s("ac6a"),s("f3e2"),s("6d67"),s("c5f6"),s("b788")),r=s("055c"),o=s("468d"),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field-table"},[s("div",{staticClass:"field-table-header"},[e._l(e.tableColumns,(function(t,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isHide,expression:"!item.isHide"}],key:i,staticClass:"field-table-item",style:{width:t.width,"min-width":t.minWidth}},[e._v(e._s(t.title))])})),e.canBeDelete?s("div",{staticClass:"field-table-item",staticStyle:{"min-width":"60px"}},[e._v(e._s(e.$t("message.createTable.action")))]):e._e(),s("div",{style:{width:e.fields.length>e.remain?"18px":"0"}})],2),s("virtual-list",{ref:"columnTables",staticClass:"field-table",attrs:{size:46,remain:e.remain,wtag:"ul"}},e._l(e.fields,(function(t,i){return s("li",{key:i,staticClass:"field-table-body",class:{actived:t.name===e.current},on:{click:function(s){return e.handleItemClick(t,i)}}},[e._l(e.tableColumns,(function(a,n){return s("div",{directives:[{name:"show",rawName:"v-show",value:!a.isHide,expression:"!field.isHide"}],key:n,staticClass:"field-table-item",class:{nowrap:!a.wrap},style:{width:a.width,"min-width":a.minWidth},attrs:{title:e.formatValue(t,a)}},["input"===a.inputType?s("Input",{key:a.key,model:{value:t[a.key],callback:function(s){e.$set(t,a.key,s)},expression:"item[field.key]"}}):"select"===a.inputType?s("Select",{key:a.key,attrs:{transfer:"",multiple:a.multiple,"max-tag-count":1,"max-tag-placeholder":e.maxTagPlaceholder},on:{click:function(e){e.preventDefault(),e.stopPropagation()},"on-change":function(t){return e.handleChange(arguments,a.key)},"on-open-change":function(t){return e.handleOpen(arguments,a.key,i)}},model:{value:t[a.key],callback:function(s){e.$set(t,a.key,s)},expression:"item[field.key]"}},e._l(a.opt,(function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1):"tag"===a.inputType?s("div",{staticClass:"field-table-item-tag",on:{click:function(s){return s.stopPropagation(),e.handleTagClick(t,i)}}},[s("span",{staticClass:"field-table-item-tag-item"},[e._v(e._s(t[a.key][0]))]),s("span",{directives:[{name:"show",rawName:"v-show",value:t[a.key].length>1,expression:"item[field.key].length > 1"}],staticClass:"field-table-item-tag-item"},[e._v("...")]),s("Icon",{staticClass:"field-table-item-tag-arrow",attrs:{type:"ios-arrow-down"}})],1):s("span",[e._v(e._s(e.formatValue(t,a)))])],1)})),e.canBeDelete?s("div",{staticClass:"field-table-item-action"},[s("Button",{attrs:{type:"error",size:"small"},on:{click:function(s){return e.handleDelete(t,i)}}},[e._v(e._s(e.$t("message.createTable.delete")))])],1):e._e()],2)})),0)],1)},l=[],d=(s("7f7f"),s("c1df")),u=s.n(d),h=function(e,t){var s="",i=e[t.key];if(!t.type)return i;if(t.linkfields&&"total"===t.type)return e&&e[t.linkfields]&&e[t.linkfields].length||0;switch(t.type){case"boolean":s=i?"是":"否";break;case"timestramp":s="0"==i?0:u.a.unix(i).format("YYYY-MM-DD HH:mm:ss");break}return s},p={formatValue:h},f=s("7dc5"),m={components:{virtualList:f["a"]},props:{fields:{type:Array},maxSize:{type:Number},tableColumns:{type:Array},canBeDelete:{type:Boolean,default:!1},specialFieldKey:String},data:function(){return{current:""}},computed:{remain:function(){return this.fields.length>this.maxSize?this.maxSize:this.fields.length}},methods:{formatValue:function(e,t){return p.formatValue(e,t)},handleItemClick:function(e,t){this.current=e.name,this.$emit("click",e,t)},handleOpen:function(e,t,s){this.$emit("on-open-change",e[0],t,s)},handleDelete:function(e,t){this.$emit("on-delete",e,t)},handleChange:function(e,t){this.$emit("on-change",e,t)},maxTagPlaceholder:function(){return"..."},handleTagClick:function(e,t){this.$emit("on-tag-click",e,t)}}},g=m,b=(s("ca65"),s("2877")),v=Object(b["a"])(g,c,l,!1,null,null,null),y=v.exports,w=s("2fce"),T=s("b593"),S={components:{hive:r["default"],csv:o["default"],fieldsTable:y,fieldsModal:w["default"]},props:{dbList:{type:Array,required:!0},source:{type:Object,required:!0},target:{type:Object,require:!0},partitionTable:{type:Number,default:1}},data:function(){return{hiveFieldsColumns:n["a"].importTableFieldsConfig,csvOrXlsxfieldsColumns:n["a"].importTableFieldsCsvAndXlsxConfig,partTableColumns:n["a"].importTablePartitionsConfig,specialFieldKey:"sourceFields",activedFieldItem:null}},methods:{getFields:function(e){"hive"===this.source.importType?this.$emit("get-fields",e):this.getFileContent(e)},getTables:function(e){this.$emit("get-tables",e)},getFileContent:function(e){var t=this,s=e.separator;"\\t"===e.separator?s="%5Ct":"%20"===e.separator&&(s=" ");var i="xlsx"===this.source.importType?"":e.chartset,a="xlsx"===this.source.importType?"":s,n=!1,r="";e.quote&&(n=!0,r=e.quote);var o="/filesystem/formate?path=".concat(e.exportPath,"&encoding=").concat(i,"&fieldDelimiter=").concat(a,"&hasHeader=").concat(e.isHasHeader,"&escapeQuotes=").concat(n,"&quote=").concat(r);T["a"].fetch(o,{},{method:"get",timeout:"600000"}).then((function(e){if(!e.formate.columnName.length)return t.target.fieldList=[];t.target.fieldList=e.formate.columnName.map((function(e){return{name:e,type:"",alias:"",sourceFields:"",rule:"",partitionField:0,primary:0,comment:"",length:"",express:""}})),e.formate.columnType.forEach((function(e,s){t.target.fieldList[s].type=e})),t.target.fieldList=t.target.fieldList.slice(),t.target.sheetName=e.formate.sheetName})).catch((function(){}))},onDelete:function(e,t){this.target.fieldList.splice(t,1)},onTagClick:function(e){this.activedFieldItem=e,this.$refs.fieldModal.open()}}},E=S,N=Object(b["a"])(E,i,a,!1,null,null,null);t["default"]=N.exports},7604:function(e,t,s){"use strict";var i=s("dfcc"),a=s.n(i);a.a},"77dd":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"workbench workbench-tabs"},[e.workListLength>0?[e.node?e._e():i("div",{staticClass:"workbench-tab-wrapper",class:{"full-screen":e.isTopPanelFull}},[i("div",{staticClass:"workbench-tab"},[e._l(e.worklist,(function(t){return[t.isShow&&"backgroundScript"!==t.type?i("div",{key:t.id,staticClass:"workbench-tab-item",class:{active:t.id==e.current}},[i("we-title",{attrs:{work:t},on:{"on-choose":e.chooseWork,"on-remove":e.removeWork}})],1):e._e()]}))],2),e.isControlBtnShow?i("div",{staticClass:"workbench-tab-control"},[i("Icon",{attrs:{type:"ios-arrow-dropleft-circle"},on:{click:function(t){return e.tabMoving("right")}}}),i("Icon",{attrs:{type:"ios-arrow-dropright-circle"},on:{click:function(t){return e.tabMoving("left")}}})],1):e._e(),i("div",{staticClass:"workbench-tab-button"},[i("Dropdown",{attrs:{trigger:"click",placement:"bottom-end"},on:{"on-click":e.dropdownClick}},[i("Icon",{attrs:{type:"md-list"}}),i("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[i("DropdownItem",{attrs:{name:"other"}},[e._v(e._s(e.$t("message.workBench.container.closeDropDown.others")))]),i("DropdownItem",{attrs:{name:"all"}},[e._v(e._s(e.$t("message.workBench.container.closeDropDown.all")))]),i("DropdownItem",{attrs:{name:"left"}},[e._v(e._s(e.$t("message.workBench.container.closeDropDown.left")))]),i("DropdownItem",{attrs:{name:"right"}},[e._v(e._s(e.$t("message.workBench.container.closeDropDown.right")))]),e.isTopPanelFull?i("DropdownItem",{attrs:{name:"releaseFullScreen"}},[e._v(e._s(e.$t("message.constants.logPanelList.releaseFullScreen")))]):i("DropdownItem",{attrs:{name:"fullScreen",divided:""}},[e._v(e._s(e.$t("message.constants.logPanelList.fullScreen")))])],1)],1)],1)]),i("div",{staticClass:"workbench-container",class:{node:e.node}},e._l(e.worklist,(function(t){return i("we-body",{directives:[{name:"show",rawName:"v-show",value:e.current==t.id,expression:"current==work.id"}],key:t.id,attrs:{work:t,node:e.node,readonly:e.readonly},on:{"remove-work":e.removeWork}})})),1)]:e._e(),0!=e.workListLength||e.loading?e._e():[i("div",{staticClass:"bg-page"},[i("img",{staticClass:"bg-img",attrs:{src:s("e933")}}),e._l(e.tips.split("\n"),(function(t,s){return i("p",{key:s,staticClass:"bg-text",class:{weight:-1!==t.indexOf("？"),indent:-1===t.indexOf("？")}},[e._v(e._s(t))])}))],2)],[e.loading?i("Spin",{attrs:{size:"large",fix:""}}):e._e()],i("Modal",{attrs:{closable:!1,width:"360"},model:{value:e.showCloseModal,callback:function(t){e.showCloseModal=t},expression:"showCloseModal"}},[i("p",{staticClass:"modal-title",attrs:{slot:"header"},slot:"header"},[i("Icon",{attrs:{type:"md-help-circle"}}),i("span",[e._v(e._s(e.$t("message.workBench.container.closeHint")))])],1),i("div",{staticClass:"modal-content"},[i("p",{staticStyle:{"word-break":"break-all"}},[e._v(e._s(e.closeModal.text))])]),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:e.closeModal.cancel}},[e._v(e._s(e.$t("message.workBench.container.footer.cancel")))]),i("Button",{attrs:{type:"warning"},on:{click:e.closeModal.close}},[e._v(e._s(e.$t("message.workBench.container.footer.close")))]),e.closeModal.save?i("Button",{attrs:{type:"primary"},on:{click:e.closeModal.save}},[e._v(e._s(e.$t("message.workBench.container.footer.save")))]):e._e(),e.closeModal.saveAs?i("Button",{attrs:{type:"primary"},on:{click:e.closeModal.saveAs}},[e._v(e._s(e.$t("message.workBench.container.footer.saveAs")))]):e._e()],1)]),i("save-as",{ref:"saveAs",on:{"save-complete":e.saveAsComplete}})],2)},a=[],n=(s("2caf"),s("ac4d"),s("8a81"),s("1c4c"),s("6b54"),s("87b3"),s("456d"),s("6d67"),s("7f7f"),s("5df3"),s("96cf"),s("3b8d")),r=(s("20d6"),s("7514"),s("57e7"),s("ac6a"),s("f3e2"),s("c5f6"),s("b593")),o=s("7138"),c=s("0971"),l=s("3ca7"),d=s("f3fe"),u=s("e76f"),h=s("6b6d"),p=s("2ef0"),f=s("bbdf");function m(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=g(e))){var t=0,s=function(){};return{s:s,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,n=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return n=e.done,e},e:function(e){r=!0,a=e},f:function(){try{n||null==i.return||i.return()}finally{if(r)throw a}}}}function g(e,t){if(e){if("string"===typeof e)return b(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(s):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}var v={components:{"we-body":d["default"],"we-title":l["default"],saveAs:u["default"]},props:{width:Number,parameters:{type:Object,default:function(){return{content:"",params:{}}}},node:Object,readonly:{type:Boolean,default:!1}},data:function(){return{worklist:[],current:"",lastCurrent:"",closeModal:{text:"",cancel:function(){},close:function(){},save:function(){},saveAs:function(){}},showCloseModal:!1,userName:"",tabMove:{maxTabLen:0,leftTab:0,rightTab:0},isControlBtnShow:!1,tips:this.$t("message.workBench.container.tips"),isTopPanelFull:!1,loading:!1}},computed:{workListLength:function(){return this.worklist.length}},watch:{current:function(e,t){t&&(this.dispatch("Workbench:setResultCache",{id:t}),this.revealInSidebar())},$route:function(e){this.openQueryTab()}},mounted:function(){this.userName=this.getUserName();var e=o["a"].get("isCacheLoading");e||this.init()},methods:{init:function(){var e=this;o["a"].set("isCacheLoading",!0),this.loading=!0,this.dispatch("IndexedDB:getGlobalCache",{id:this.userName},(function(t){t?(t.hiveList&&t.hiveList.length||e.dispatch("HiveSidebar:getAllDbsAndTables",{userName:e.userName},(function(t){t.isError&&e.$Message.warning(e.$t("message.workBench.container.warning.noDBInfo")),e.dispatch("IndexedDB:updateGlobalCache",{id:e.userName,hiveList:t.list}),o["a"].set("isCacheLoading",!1)})),t.variableList&&t.variableList.length||e.dispatch("GlobalValiable:getGlobalVariable",(function(t){t.isError&&e.$Message.warning(e.$t("message.container.notVarible")),e.dispatch("IndexedDB:updateGlobalCache",{id:e.userName,variableList:t.list}),o["a"].set("isCacheLoading",!1)})),t.fnList&&t.fnList.length?o["a"].set("isCacheLoading",!1):e.dispatch("fnSidebar:getAllLoadedFunction",(function(t){t.isError&&e.$Message.warning(e.$t("message.workBench.container.warning.noUDF")),e.dispatch("IndexedDB:updateGlobalCache",{id:e.userName,fnList:t.list}),o["a"].set("isCacheLoading",!1)})),e.getWorkList({list:t.tabList}).then((function(){e.openQueryTab(),e.$nextTick((function(){e.loading=!1;var t=e.width||e.getInnerWidth();e.tabMove.maxTabLen=Math.floor(t/100)-1,e.changeTabParams("init")}))}))):(e.dispatch("HiveSidebar:getAllDbsAndTables",{userName:e.userName},(function(t){t.isError&&e.$Message.warning(e.$t("message.workBench.container.warning.noDBInfo")),e.dispatch("fnSidebar:getAllLoadedFunction",(function(s){s.isError&&e.$Message.warning(e.$t("message.workBench.container.warning.noUDF")),e.dispatch("GlobalValiable:getGlobalVariable",(function(i){i.isError&&e.$Message.warning(e.$t("message.container.notVarible")),e.dispatch("IndexedDB:setGlobalCache",{key:e.userName,hiveList:t.list,fnList:s.list,variableList:i.list,tabList:[]}),o["a"].set("isCacheLoading",!1)}))}))})),e.getWorkList({list:[]}).then((function(){e.openQueryTab(),e.$nextTick((function(){e.loading=!1,e.tabMove.maxTabLen=Math.floor(e.width/100),e.changeTabParams("init")}))})))}))},getWorkList:function(e){var t=this,s=e.list;return new Promise((function(e,i){t.node?(t.tips="",t.node.key&&t.dispatch("IndexedDB:getTabs",(function(s){var i="Workbench:add",a=t.getSupportModes(),n=f["c"][t.node.type],r=a.find((function(e){return e.flowType&&e.flowType.toLowerCase()==n})),o=""+(new Date).getTime()+Math.ceil(100*Math.random())+r.ext;t[i]({id:t.node.key,filename:t.node.jobContent&&t.node.jobContent.script?t.node.jobContent.script:o,filepath:"",type:"node",code:t.parameters.content,params:t.parameters.params,saveAs:!1,nodeName:t.node.title}),e()}))):t.dispatch("IndexedDB:getTabs",(function(i){i.forEach((function(e){if("node"!==e.type&&e.owner===t.userName){var i=s.indexOf(e.data.id),a="Workbench:add";-1===i&&t[a]({id:e.data.id,filename:e.filename,filepath:e.filepath,code:e.data.data,type:e.type,data:e.data,saveAs:e.saveAs})}})),e()}))}))},"Workbench:add":function(e,t){var s=this;if(!e.id||!e.filename)return this.$Notice.close("developerWarning"),this.$Notice.error({title:this.$t("message.workBench.container.developerWarning.notice.title"),desc:this.$t("message.workBench.container.developerWarning.notice.desc"),name:"developerWarning",duration:3});var i=Object(p["find"])(this.getSupportModes(),(function(t){return t.rule.test(e.filename)&&t.isCanBeOpen}));if(!i)return this.$Notice.close("unSupport"),this.$Notice.warning({title:this.$t("message.workBench.container.unSupport.notice.title"),desc:this.$t("message.workBench.container.unSupport.notice.desc"),name:"unSupport",duration:3});var a=null;if("backgroundScript"!==e.type){var n=Object(p["find"])(this.worklist,(function(t){return t.id==e.id}));if(!n){if(this.worklist.length>=20)return this.$Notice.close("boyondQuota"),t&&t(!1),this.$Notice.warning({title:this.$t("message.container.boyondQuota.title"),desc:this.$t("message.container.boyondQuota.desc"),name:"boyondQuota",duration:3});if(a=new h["c"](e),"follow"===e.addWay){var r=this.worklist.findIndex((function(e){return e.id===s.current}));this.worklist.splice(-1===r?0:r+1,0,a)}else this.worklist.push(a);n=a}this.chooseWork(n),t&&t(!0)}else a=new h["c"](e),this.worklist.push(a),t&&t(!0)},"Workbench:checkExist":function(e,t){r["a"].fetch("/filesystem/isExist",{path:e.path},"get").then((function(e){e.isExist?t(!0):t(!1)}))},"Workbench:openFile":function(e,t){var s=this,i=e.filename.slice(e.filename.indexOf("/")+1,e.filename.length),a=Object(p["find"])(this.getSupportModes(),(function(e){return e.rule.test(i)&&e.isCanBeOpen}));if(!a)return this.$Notice.close("unSupport"),this.$Notice.warning({title:this.$t("message.workBench.container.notice.unSupport.title"),desc:this.$t("message.workBench.container.notice.unSupport.desc"),name:"unSupport",duration:3});var n=c["a"].md5(e.path),o=this.worklist.find((function(e){return e.id===n}));if(o)return this.chooseWork(o);var l="Workbench:add";r["a"].fetch("/filesystem/openFile",{path:e.path},"get").then((function(i){var a=e.code&&!i.fileContent,r=a?e.params:s.convertSettingParams(i.params);s[l]({id:n,filename:e.filename,filepath:e.path,code:i.fileContent||e.code,params:r,type:e.type,saveAs:e.saveAs||!1,unsave:a,ismodifyByOldTab:a},(function(e){s.changeTabParams("change"),t(i)}))}))},"Workbench:deleteDirOrFile":function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,s){var i,a,n,r,o,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=c["a"].md5(t),a=Object(p["find"])(this.worklist,(function(e){return e.id===i})),a){e.next=30;break}if(n=0,r=[],this.worklist.forEach((function(e){0===e.filepath.indexOf(t)&&(n++,e.unsave&&(e.saveAs=!0),r.push(e))})),n){e.next=10;break}s("none"),e.next=28;break;case 10:o=m(r),e.prev=11,o.s();case 13:if((l=o.n()).done){e.next=19;break}return d=l.value,e.next=17,this.removeWork(d);case 17:e.next=13;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](11),o.e(e.t0);case 24:return e.prev=24,o.f(),e.finish(24);case 27:s("save");case 28:e.next=31;break;case 30:a.unsave?s("unsave"):(this.removeWork(a),s("save"));case 31:case"end":return e.stop()}}),e,this,[[11,21,24,27]])})));function t(t,s){return e.apply(this,arguments)}return t}(),"Workbench:saveAs":function(e){this.$refs.saveAs.open(e)},"Workbench:updateTab":function(e,t){var s=this,i=e.newNode,a=e.findWork,n=e.oldLabel,r=a||Object(p["find"])(this.worklist,(function(e){return e.filename===n}));if(r){var o=c["a"].md5(i.path),l=this.dispatch("IndexedDB:changeLogKey",{oldKey:r.id,newKey:o}),d=this.dispatch("IndexedDB:changeHistoryKey",{oldKey:r.id,newKey:o}),u=this.dispatch("IndexedDB:changResultKey",{oldKey:r.id,newKey:o}),h=this.dispatch("IndexedDB:changProgressKey",{oldKey:r.id,newKey:o}),f=this.dispatch("IndexedDB:changeTabKey",{oldKey:r.id,newKey:o});Promise.all([l,d,u,h,f]).then((function(){setTimeout((function(){r.unsave=!1,s.$Modal.remove(),s.removeWork(r);var e="Workbench:openFile";s[e]({path:i.path,filename:i.name,saveAs:!1,code:a&&a.data.data||"",params:a&&a.data.params||{}},(function(){t&&t(),setTimeout((function(){s.dispatch("Workbench:save",s.worklist[s.worklist.length-1])}),500)}))}),300)}))}},"Workbench:updateFlowsTab":function(e,t){var s=Object(p["find"])(this.worklist,(function(t){return t.id===e.key}));this.$set(s.data,"data",t.content),this.$set(s.data,"params",this.convertSettingParams(t.params)),this.dispatch("Workbench:resetScriptData",s.data.id)},"Workbench:updateFlowsNodeName":function(e){this.worklist=this.worklist.map((function(t){return t.id===e.key&&(t.nodeName=e.title),t}))},"Workbench:pasteInEditor":function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.node&&Object.keys(s).length<=0){var i=Object(p["find"])(this.worklist,(function(e){return e.id===t.current}));if(!i)return this.$Message.warning(this.$t("message.workBench.container.warning.noSelectedScript"));this.dispatch("Workbench:insertValue",{id:this.current,value:e})}else{var a=Object(p["find"])(this.worklist,(function(e){return e.id===s.key}));a&&s.key===this.current&&this.dispatch("Workbench:insertValue",{id:s.key,value:e})}},"Workbench:getWorksLangList":function(e){var t=Object(p["uniq"])(this.worklist.map((function(e){return e.data.lang})));e(t)},"Workbench:setTabPanelSize":function(){this.isTopPanelFull=!1},"Workbench:removeWork":function(e){this.removeWork(e)},chooseWork:function(e){if(e){var t=e.type;this.dispatch(this.getMethodName({type:t,isInvert:!1}),e),this.dispatch(this.getMethodName({type:t,isInvert:!0}),""),this.lastCurrent=this.current,this.current=e.id,this.dispatch("IndexedDB:toggleTab",e.id),this.dispatch("Workbench:setParseAction",e.id),this.panelControl(this.isTopPanelFull?"fullScreen":"releaseFullScreen")}},removeWork:function(e){var t=this;return new Promise((function(s,i){var a=function(){var i=t.worklist.indexOf(e);if(-1!=i&&(t.worklist.splice(i,1),t.dispatch("IndexedDB:removeTab",e.id),t.dispatch("IndexedDB:removeGlobalCache",{id:t.userName,tabId:e.id}),t.changeTabParams("change")),e.id==t.current)if(t.workListLength>0){var a=Object(p["last"])(t.worklist);t.current=a.id;var n=a.type,r=t.worklist.findIndex((function(e){return e.id===t.lastCurrent}));-1!==r&&(t.current=t.lastCurrent,n=t.worklist[r].type,a=t.worklist[r]),t.dispatch(t.getMethodName({type:n,isInvert:!1}),a),t.dispatch(t.getMethodName({type:n,isInvert:!0}),""),t.dispatch("IndexedDB:toggleTab",t.current)}else t.isTopPanelFull=!1,t.current="",t.dispatch("WorkSidebar:setHighLight",""),t.dispatch("HdfsSidebar:setHighLight","");e.id===t.$route.query.id&&t.$router.push("/"),s()};if(e.unsave)if(t.chooseWork(e),t.showCloseModal=!0,t.closeModal.cancel=function(){t.showCloseModal=!1,t.close=function(){},t.save=function(){},t.saveAs=function(){},s()},t.closeModal.close=function(){t.showCloseModal=!1,a()},e.saveAs){var n="hdfsScript"===e.type?"".concat(e.filename,"-").concat(t.$t("message.workBench.container.removeWork.readOnly")):"".concat(e.filename,"-").concat(t.$t("message.workBench.container.removeWork.temporary"));t.closeModal.text=n,t.closeModal.save=null,t.closeModal.saveAs=function(){t.dispatch("Workbench:saveAs",e)}}else t.closeModal.text="".concat(e.filename,"-").concat(t.$t("message.workBench.container.removeWork.normal")),t.closeModal.save=function(){t.showCloseModal=!1,t.dispatch("Workbench:save",e),a()},t.closeModal.saveAs=null;else a()}))},closeTabs:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var s,i,a,n,r,o,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=[],e.t0=t,e.next="other"===e.t0?4:"all"===e.t0?6:"left"===e.t0?8:"right"===e.t0?19:30;break;case 4:return this.worklist.forEach((function(e){e.id!=c.current&&s.push(e)})),e.abrupt("break",30);case 6:return s=this.worklist.slice(0),e.abrupt("break",30);case 8:i=0;case 9:if(!(i<this.workListLength)){e.next=18;break}if(this.worklist[i].id==this.current){e.next=14;break}s.push(this.worklist[i]),e.next=15;break;case 14:return e.abrupt("break",18);case 15:i++,e.next=9;break;case 18:return e.abrupt("break",30);case 19:a=this.workListLength-1;case 20:if(!(a>0)){e.next=29;break}if(this.worklist[a].id==this.current){e.next=25;break}s.push(this.worklist[a]),e.next=26;break;case 25:return e.abrupt("break",29);case 26:a--,e.next=20;break;case 29:return e.abrupt("break",30);case 30:n=m(s),e.prev=31,n.s();case 33:if((r=n.n()).done){e.next=39;break}return o=r.value,e.next=37,this.removeWork(o);case 37:e.next=33;break;case 39:e.next=44;break;case 41:e.prev=41,e.t1=e["catch"](31),n.e(e.t1);case 44:return e.prev=44,n.f(),e.finish(44);case 47:case"end":return e.stop()}}),e,this,[[31,41,44,47]])})));function t(t){return e.apply(this,arguments)}return t}(),saveAsComplete:function(e,t){var s=this,i=this.worklist.find((function(e){return e.id===s.current}));this.closeModal.close();var a="Workbench:updateTab";this[a]({newNode:t,findWork:i,oldLabel:null})},openQueryTab:function(){var e=this,t=!Object(p["isEmpty"])(this.$route.query)&&this.$route.query.taskID;if("Home"===this.$route.name&&t){var s=this.$route.query.taskID,i=this.$route.query.filename,a=c["a"].md5(i),n={id:a,taskID:s,filename:i,filepath:"",saveAs:!0,type:"historyScript"},r="Workbench:add";this[r](n),this.$nextTick((function(){var t=Object(p["find"])(e.workList,(function(t){return t.taskID===e.$route.query.taskID}));e.chooseWork(t)}))}},getMethodName:function(e){var t=e.type,s=e.isInvert,i={workspaceScript:"WorkSidebar:setHighLight",hdfsScript:"HdfsSidebar:setHighLight"};return s&&(t="workspaceScript"===t?"hdfsScript":"workspaceScript"),i[t]},changeTabParams:function(e){this.workListLength>this.tabMove.maxTabLen?("init"===e?(this.tabMove.rightTab=this.workListLength-this.tabMove.maxTabLen,this.tabMove.leftTab=0):(this.tabMove.leftTab=this.workListLength-this.tabMove.maxTabLen,this.tabMove.rightTab=0),this.handleTabShowOrHidden(),this.isControlBtnShow=!0):(this.tabMove.leftTab=0,this.tabMove.rightTab=0,this.isControlBtnShow=!1,"init"!==e&&this.handleTabShowOrHidden())},tabMoving:function(e){"right"===e&&this.tabMove.leftTab>=1?(this.tabMove.leftTab-=1,this.tabMove.rightTab+=1):"left"===e&&this.tabMove.rightTab>=1&&(this.tabMove.leftTab+=1,this.tabMove.rightTab-=1),this.handleTabShowOrHidden()},handleTabShowOrHidden:function(){var e=this;this.worklist.forEach((function(t,s){e.tabMove.leftTab>0&&s<=e.tabMove.leftTab-1||e.tabMove.rightTab>0&&s>e.workListLength-e.tabMove.rightTab-1?t.isShow=!1:t.isShow=!0}))},getInnerWidth:function(){var e=document.getElementsByClassName("workbench workbench-tabs")[0];return e.offsetWidth},panelControl:function(e){this.isTopPanelFull="fullScreen"===e,this.dispatch("Workbench:setEditorPanelSize",{id:this.current,status:e})},dropdownClick:function(e){var t=["fullScreen","releaseFullScreen"];-1===t.indexOf(e)?this.closeTabs(e):this.panelControl(e)},revealInSidebar:function(){var e=this,t=this.worklist.find((function(t){return t.id===e.current}));t&&this.dispatch("WorkSidebar:revealInSideBar",t)},convertSettingParams:function(e){var t=[],s={special:{},runtime:{args:"",env:[]},startup:{}};return Object(p["isEmpty"])(e)||(t=Object(p["isEmpty"])(e.variable)?[]:c["a"].convertObjectToArray(e.variable),s=Object(p["isEmpty"])(e.configuration)?{}:{special:{},runtime:{args:e.configuration.runtime.args||"",env:Object(p["isEmpty"])(e.configuration.runtime.env)?[]:c["a"].convertObjectToArray(e.configuration.runtime.env)},startup:{}}),{variable:t,configuration:s}}}},y=v,w=(s("b8b0"),s("2877")),T=Object(w["a"])(y,i,a,!1,null,null,null);t["default"]=T.exports},"77e6":function(e,t,s){"use strict";var i=s("f34e"),a=s.n(i);a.a},"78dc":function(e,t,s){},"7a38":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"engine-box"},[e.loading?s("Spin",{attrs:{size:"large",fix:""}}):e._e(),e.ideEngineList.length>0?s("div",{staticClass:"engine-content"},[s("div",{staticClass:"engine-header-bar"},[s("h3",{staticClass:"data-type-title"},[e._v(e._s(e.$t("message.resourceSimple.YS")))]),s("div",{staticClass:"classify"},[s("span",[e._v(e._s(e.$t("message.resourceSimple.FL")))]),s("Select",{model:{value:e.ideSelectData,callback:function(t){e.ideSelectData=t},expression:"ideSelectData"}},e._l(e.typeList,(function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)]),e._l(e.ideClassList,(function(t){return s("div",{key:t,staticClass:"engine-list"},[s("span",{staticClass:"engline-name"},[e._v(e._s(e.calssifyName(t)))]),s("ul",{staticClass:"engine-ul"},[e._l(e.ideEngineList,(function(i,a){return[i.applicationName===t||i.engineStatus===t||"Idle"===t&&("Error"===i.engineStatus||"ShuttingDown"===i.engineStatus||"Dead"===i.engineStatus)?s("li",{key:a,staticClass:"engine-li",class:[{active:i.isActive},e.supportColor(i.engineStatus)],on:{click:function(e){i.isActive=!i.isActive}}},[s("Icon",{staticClass:"engine-icon",class:e.supportIcon(i),attrs:{custom:"job-content-icon",size:"30"}}),s("Icon",{directives:[{name:"show",rawName:"v-show",value:i.isActive,expression:"subitem.isActive"}],staticClass:"engine-right",class:e.supportColor(i.engineStatus),attrs:{type:"md-checkmark"}})],1):e._e()]}))],2)])}))],2):e._e(),e.boardEngineList.length>0?s("div",{staticClass:"engine-content"},[s("div",{staticClass:"engine-header-bar"},[s("h3",{staticClass:"data-type-title"},[e._v(e._s(e.$t("message.resourceSimple.ZH")))]),s("div",{staticClass:"classify"},[s("span",[e._v(e._s(e.$t("message.resourceSimple.FL")))]),s("Select",{model:{value:e.boardSelectData,callback:function(t){e.boardSelectData=t},expression:"boardSelectData"}},e._l(e.typeList,(function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)]),e._l(e.boardClassList,(function(t){return s("div",{key:t,staticClass:"engine-list"},[s("span",{staticClass:"engline-name"},[e._v(e._s(e.calssifyName(t)))]),s("ul",{staticClass:"engine-ul"},[e._l(e.boardEngineList,(function(i,a){return[i.applicationName===t||i.engineStatus===t||"Idle"===t&&("Error"===i.engineStatus||"ShuttingDown"===i.engineStatus||"Dead"===i.engineStatus)?s("li",{key:a,staticClass:"engine-li",class:[{active:i.isActive},e.supportColor(i.engineStatus)],on:{click:function(e){i.isActive=!i.isActive}}},[s("Icon",{staticClass:"engine-icon",class:e.supportIcon(i),attrs:{custom:"job-content-icon",size:"30"}}),s("Icon",{directives:[{name:"show",rawName:"v-show",value:i.isActive,expression:"subitem.isActive"}],staticClass:"engine-right",class:e.supportColor(i.engineStatus),attrs:{type:"md-checkmark"}})],1):e._e()]}))],2)])}))],2):e._e(),e.otherEngineList.length>0?s("div",{staticClass:"engine-content"},[s("div",{staticClass:"engine-header-bar"},[s("h3",{staticClass:"data-type-title"},[e._v("Other")]),s("div",{staticClass:"classify"},[s("span",[e._v(e._s(e.$t("message.resourceSimple.FL")))]),s("Select",{model:{value:e.otherSelectData,callback:function(t){e.otherSelectData=t},expression:"otherSelectData"}},e._l(e.typeList,(function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)]),e._l(e.otherClassList,(function(t){return s("div",{key:t,staticClass:"engine-list"},[s("span",{staticClass:"engline-name"},[e._v(e._s(e.calssifyName(t)))]),s("ul",{staticClass:"engine-ul"},[e._l(e.otherEngineList,(function(i,a){return[i.applicationName===t||i.engineStatus===t||"Idle"===t&&("Error"===i.engineStatus||"ShuttingDown"===i.engineStatus||"Dead"===i.engineStatus)?s("li",{key:a,staticClass:"engine-li",class:[{active:i.isActive},e.supportColor(i.engineStatus)],on:{click:function(e){i.isActive=!i.isActive}}},[s("Icon",{staticClass:"engine-icon",class:e.supportIcon(i),attrs:{custom:"job-content-icon",size:"30"}}),s("Icon",{directives:[{name:"show",rawName:"v-show",value:i.isActive,expression:"subitem.isActive"}],staticClass:"engine-right",class:e.supportColor(i.engineStatus),attrs:{type:"md-checkmark"}})],1):e._e()]}))],2)])}))],2):e._e(),0===e.ideEngineList.length&&0===e.boardEngineList.length&&0===e.otherEngineList.length?s("span",{staticClass:"no-data"},[e._v(e._s(e.$t("message.resourceSimple.ZWSJ")))]):e._e()],1)},a=[],n=(s("6762"),s("2fdb"),s("6d67"),s("d25f"),s("b593")),r={name:"Job",filters:{},data:function(){return{btnSize:"small",loading:!1,ideSelectData:0,boardSelectData:0,otherSelectData:0,typeList:[{value:0,label:this.$t("message.resourceSimple.LX")},{value:1,label:this.$t("message.resourceSimple.AZT")}],ideEngineList:[],boardEngineList:[],otherEngineList:[],ideClassList:[],boardClassList:[],otherClassList:[]}},computed:{activeList:function(){return this.ideEngineList.concat(this.boardEngineList).concat(this.otherEngineList).filter((function(e){return e.isActive}))}},watch:{ideSelectData:function(){this.ideClassList=[],this.getClassListAction(this.ideSelectData,this.ideEngineList,this.ideClassList)},boardSelectData:function(){this.boardClassList=[],this.getClassListAction(this.boardSelectData,this.boardEngineList,this.boardClassList)},otherSelectData:function(){this.otherClassList=[],this.getClassListAction(this.otherSelectData,this.otherEngineList,this.otherClassList)},loading:function(e){this.$emit("change-loading",e)},activeList:function(e){var t=!!e.length>0;this.$emit("disabled",!t)}},methods:{calssifyName:function(e){switch(e){case"sparkEngine":return"Spark";case"hiveEngine":return"Hive";case"pythonEngine":return"Python";case"pipelineEngine":return"PipeLine";case"pipeLineEngine":return"PipeLine";case"Idle":return this.$t("message.resourceSimple.KX");case"Error":return this.$t("message.resourceSimple.KX");case"Busy":return this.$t("message.resourceSimple.FM");case"Starting":return this.$t("message.resourceSimple.QD");default:}},killJob:function(){var e=this;if(this.loading)return this.$Message.warning(this.$t("message.resourceSimple.DDJK"));var t=[],s=!1;return this.activeList.map((function(e){"Starting"===e.engineStatus&&(s=!0),t.push({ticketId:e.ticketId,moduleName:e.moduleName,engineManagerInstance:e.engineManagerInstance,creator:e.creator})})),s?this.$Message.warning(this.$t("message.resourceSimple.QDYQWFJS")):0===t.length?this.$Message.warning(this.$t("message.resourceSimple.WXZYQ")):(this.loading=!0,void n["a"].fetch("/resourcemanager/enginekill",t).then((function(){setTimeout((function(){e.getEngineData()}),3e3)})).catch((function(){e.loading=!1})))},getEngineData:function(){var e=this;this.ideEngineList=[],this.boardEngineList=[],this.ideClassList=[],this.boardClassList=[],this.otherEngineList=[],this.otherClassList=[],this.loading=!0,n["a"].fetch("/resourcemanager/engines").then((function(t){e.loading=!1,t.engines.map((function(t){t.isActive=!1,"pipelineEngine"===t.applicationName&&(t.applicationName="pipeLineEngine"),"IDE"===t.creator?e.ideEngineList.push(t):"Visualis"===t.creator?e.boardEngineList.push(t):e.otherEngineList.push(t)})),e.getClassListAction(e.ideSelectData,e.ideEngineList,e.ideClassList),e.getClassListAction(e.boardSelectData,e.boardEngineList,e.boardClassList),e.getClassListAction(e.otherSelectData,e.otherEngineList,e.otherClassList)})).catch((function(){e.loading=!1}))},getClassListAction:function(e,t,s){0===e?t.map((function(e){s.includes(e.applicationName)||s.push(e.applicationName)})):t.map((function(e){s.includes("Idle")||"Error"!==e.engineStatus&&"ShuttingDown"!==e.engineStatus&&"Dead"!==e.engineStatus||s.push("Idle"),s.includes(e.engineStatus)||"Error"===e.engineStatus||"ShuttingDown"===e.engineStatus||"Dead"===e.engineStatus||s.push(e.engineStatus)}))},supportColor:function(e){switch(e){case"Busy":return"yellow";case"Error":return"green";case"ShuttingDown":return"green";case"Dead":return"green";case"Idle":return"green";case"Starting":return"blue";default:}},supportIcon:function(e){var t=[{rule:"hiveEngine",logo:"fi-hive"},{rule:"pythonEngine",logo:"fi-python"},{rule:"sparkEngine",logo:"fi-spark"},{rule:"pipeLineEngine",logo:"fi-storage"},{rule:"pipelineEngine",logo:"fi-storage"}],s=this.supportColor(e.engineStatus),i=t.filter((function(t){return t.rule===e.applicationName}));return i.length>0?"is-leaf ".concat(i[0].logo," ").concat(s):"fi-file ".concat(s)}}},o=r,c=s("2877"),l=Object(c["a"])(o,i,a,!1,null,null,null);t["default"]=l.exports},"7a3f":function(e,t,s){"use strict";var i=s("8c4f"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"layout-body"},[s("layout-header",{on:{"clear-session":e.clearSession,"set-init":e.setInit}}),e.isInit?s("keep-alive",[e.$route.meta.keepAlive?s("router-view"):e._e()],1):e._e(),!e.$route.meta.keepAlive&&e.isInit?s("router-view"):e._e(),e.isInit?s("layout-footer"):e._e()],1)},n=[],r=s("0a88"),o=s("d3e2"),c=s("7138"),l={components:{layoutFooter:o["default"].component,layoutHeader:r["default"].component},data:function(){return{isInit:!1}},created:function(){this.clearSession()},mounted:function(){document.addEventListener("copy",(function(e){var t=e.clipboardData.getData("text/plain")||e.target.value||e.target.outerText;c["a"].set("copyString",t)}),!1)},methods:{clearSession:function(){c["a"].set("scriptTree","","SESSION"),c["a"].set("hdfsTree","","SESSION"),c["a"].set("shareRootPath","","SESSION"),c["a"].set("hdfsRootPath","","SESSION"),c["a"].set("hiveTree","","SESSION"),c["a"].set("udfTree","","SESSION"),c["a"].set("functionTree","","SESSION"),c["a"].set("userInfo","","SESSION"),c["a"].set("copyString",""),c["a"].set("baseInfo","")},setInit:function(){this.isInit=!0}}},d=l,u=s("2877"),h=Object(u["a"])(d,a,n,!1,null,null,null),p=h.exports,f=i["a"].prototype.push;i["a"].prototype.push=function(e){return f.call(this,e).catch((function(e){return e}))};var m=new i["a"]({routes:[{path:"",name:"layout",redirect:"/project",component:p,meta:{title:"DataSphere Studio",publicPage:!0},children:[{path:"home",name:"Home",meta:{title:"Scriptis",keepAlive:!0,publicPage:!0},component:function(){return s.e("chunk-1f302bd6").then(s.bind(null,"244d"))}},{path:"project",name:"Project",meta:{title:"DataSphere Studio",publicPage:!0},component:function(){return s.e("chunk-2d21ad55").then(s.bind(null,"bcca"))}},{path:"workflow",name:"Workflow",meta:{title:"My Workflow",publicPage:!0,parent:"Project"},component:function(){return s.e("chunk-028c2296").then(s.bind(null,"6c00"))}},{path:"commonIframe",name:"commonIframe",meta:{title:"DSS Component",publicPage:!0},component:function(){return s.e("chunk-d22968fa").then(s.bind(null,"fb94"))}},{path:"console",name:"Console",meta:{title:"linkis console",publicPage:!0},component:function(){return s.e("chunk-ea25eab6").then(s.bind(null,"6007"))},children:[{name:"globalHistory",path:"globalHistory",component:function(){return Promise.resolve().then(s.bind(null,"052e"))},meta:{title:"Global History",publicPage:!0}},{name:"resource",path:"resource",component:function(){return Promise.resolve().then(s.bind(null,"55e0"))},meta:{title:"resource",publicPage:!0}},{name:"setting",path:"setting",component:function(){return Promise.resolve().then(s.bind(null,"cec7"))},meta:{title:"setting",publicPage:!0}},{name:"globalValiable",path:"globalValiable",component:function(){return Promise.resolve().then(s.bind(null,"c670"))},meta:{title:"Global Valiable",publicPage:!0}},{name:"FAQ",path:"FAQ",component:function(){return Promise.resolve().then(s.bind(null,"96d5"))},meta:{title:"FAQ",publicPage:!0}}]}]},{path:"/login",name:"login",meta:{title:"Login",publicPage:!0},component:function(){return s.e("chunk-99fe85ce").then(s.bind(null,"b2b2"))}},{path:"/500",name:"serverErrorPage",meta:{title:"服务器错误",publicPage:!0},component:function(){return s.e("chunk-b4ba7fea").then(s.bind(null,"6415"))}},{path:"/404",name:"pageNotFound",meta:{title:"404",publicPage:!0},component:function(){return s.e("chunk-75a3d238").then(s.bind(null,"8af0"))}},{path:"/403",name:"pageForbidden",meta:{title:"403",publicPage:!0},component:function(){return s.e("chunk-2d0b66db").then(s.bind(null,"1cb5"))}},{path:"*",meta:{title:"DataSphere Studio",publicPage:!0},component:function(){return s.e("chunk-75a3d238").then(s.bind(null,"8af0"))}}]});m.beforeEach((function(e,t,s){e.meta&&(e.meta.publicPage?s():s("/"))})),m.afterEach((function(e){e.meta&&(document.title=e.meta.title||"DataSphere Studio")}));t["a"]=m},"7ac5":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"create-table-view"},[1===e.current?s("first-step",{ref:"firstStep",attrs:{"db-list":e.personalDbList,"attr-info":e.attrInfo,loading:e.loading},on:{"close-tab":e.closeTab,"next-step":e.nextStep,"get-tables":e.getTables}}):e._e(),2===e.current?s("second-step",{ref:"secondStep",attrs:{"db-list":e.dbList,loading:e.loading,"attr-info":e.attrInfo},on:{"get-fields":e.getFields,"get-tables":e.getTables}}):e._e(),2===e.current?s("div",{staticClass:"create-table-view-button-group"},[s("Button",{on:{click:e.prev}},[e._v(e._s(e.$t("message.createTable.FHSYB")))]),s("Button",{attrs:{type:"success",disabled:!e.canBeCreate},on:{click:e.generatingStatements}},[e._v(e._s(e.$t("message.createTable.SCDDL")))]),s("Button",{attrs:{type:"primary",disabled:!e.canBeCreate},on:{click:e.createTable}},[e._v(e._s(e.$t("message.createTable.JB")))])],1):e._e(),s("Modal",{attrs:{title:e.$t("message.createTable.DDLYJ"),"ok-text":e.$t("message.createTable.FZZT")},on:{"on-ok":e.executeCopy,"on-cancel":e.cancel},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[s("p",{staticStyle:{"word-break":"break-all","max-height":"400px","overflow-y":"auto"}},[e._v(e._s(e.statements))])])],1)},a=[],n=(s("6b54"),s("87b3"),s("57e7"),s("4f37"),s("28a5"),s("6d67"),s("20d6"),s("7f7f"),s("2ef0")),r=s("c1df"),o=s.n(r),c=s("b593"),l=s("0971"),d=s("8ff8"),u=s("1551"),h={components:{firstStep:d["default"],secondStep:u["default"]},props:{work:{type:Object,required:!0}},data:function(){var e=this.getCurrentDate();return{dbList:[],personalDbList:[],loading:!1,hiveComponent:null,current:1,attrInfo:{basic:{database:"",name:"",alias:"",usage:"",productName:"",projectName:"",comment:""},model:{partitionTable:1,lifecycle:0,modelLevel:0,useWay:0,externalUse:0},source:{source:"new",importType:"hive",hive:{dbName:"",tbName:""},table:{exportPath:"",type:"share",separator:",",chartset:"utf-8",quote:"",isHasHeader:!1}},target:{new:{newFieldsData:{fields:[{name:"",type:"string",alias:"",length:null,rule:"",primary:0,comment:"",partitionField:0}]},newPartitionsData:{fields:[{name:"ds",type:"string",alias:"",length:8,comment:"",partitionField:1,primary:0}]}},fieldList:[],partitionList:[{name:"ds",type:"string",alias:"",length:8,comment:"",partitionsValue:e,partitionField:1,primary:0}],sheetName:[]}},statements:null,modalShow:!1}},computed:{canBeCreate:function(){var e=this.attrInfo;return"new"===e.source.source&&e.target.new.newFieldsData.fields.length||"import"===e.source.source&&"hive"===e.source.importType&&e.basic.name&&e.target.fieldList.length||"hive"!==e.source.importType&&e.source.table.exportPath&&e.target.fieldList.length}},mounted:function(){this.getIndDbList()},beforeDestroy:function(){this.reset()},methods:{getIndDbList:function(){this.dbList=this.work&&this.work.data,this.personalDbList=this.dbList,this.personalDbList[0].children.length||this.getTables(this.personalDbList[0].name)},extendHive:function(){var e=this;this.hiveComponent||this.dispatch("HiveSidebar:showHive",{},(function(t){e.hiveComponent=t}))},getTables:function(e){var t=this;this.loading=!0;var s=this.dbList.findIndex((function(t){return t.name===e}));this.extendHive();var i="HiveSidebar:getTables";this.hiveComponent[i]({item:this.dbList[s]},(function(e){t.dbList[s].children=e,t.loading=!1}))},getFields:function(e){var t=this;this.loading=!0,this.extendHive();var s="asyncGetTableFieldsInfo";this.hiveComponent[s]({database:e.dbName,tableName:e.name},(function(e){t.loading=!1,e&&(t.attrInfo.target.fieldList=e.map((function(e){return{alias:e.alias,comment:e.comment,express:e.express,length:e.length,name:e.name,partitionField:e.partitionField?1:0,primary:e.primary?1:0,rule:e.rule,type:e.type,sourceFields:[e.name],sourceFieldsOpt:[{label:e.name,value:e.name}]}})))}))},closeTab:function(){this.dispatch("Workbench:removeWork",this.work)},prev:function(){this.current=1},nextStep:function(){this.current=2},getParams:function(){var e=this.attrInfo.basic,t=this.attrInfo.model,s=this.attrInfo.source,i=this.attrInfo.target,a={base:{database:e.database,name:e.name,alias:e.alias,partitionTable:t.partitionTable,comment:e.comment},model:{lifecycle:t.lifecycle,modelLevel:t.modelLevel,useWay:t.useWay,externalUse:t.externalUse},application:{productName:e.productName,projectName:e.projectName,usage:e.usage}},r="xlsx"===s.importType,o="hive"===s.importType,c=i.partitionList[0].partitionsValue,l=i.fieldList.map((function(e){return Object(n["pick"])(e,["alias","comment","express","length","name","partitionField","primary","rule","type"])})),d=i.partitionList.map((function(e){return Object(n["pick"])(e,["name","type","alias","length","comment","partitionField","primary"])})),u=t.partitionTable?i.new.newFieldsData.fields.concat(i.new.newPartitionsData.fields):i.new.newFieldsData.fields,h=t.partitionTable?l.concat(d):l,p="new"===s.source?u:h,f=i.fieldList.map((function(e){var t="",s="",i="",a=e.length;if("decimal"===e.type){var n=e.length.split(",");t=n[0]||"",s=n[1]||"",a=""}return{name:e.name.trim(),comment:e.comment,type:e.type,length:a,scale:t,precision:s,dateFormat:i}})),m=!1,g="";s.table.quote&&(m=!0,g=s.table.quote);var b=s.table.exportPath;b=-1===b.indexOf("://")?b:b.slice(7,b.length);var v={database:e.database,tableName:e.name,importData:!1,isPartition:t.partitionTable,partition:i.partitionList[0].name,partitionValue:c,isOverwrite:!1,columns:f},y={path:b,pathType:s.table.type,hasHeader:s.table.isHasHeader,encoding:r?"":s.table.chartset,fieldDelimiter:r?"":s.table.separator,sheet:i.sheetName&&i.sheetName.toString(),quote:g,escapeQuotes:m},w={importType:["hive","csv","xlsx"].indexOf(s.importType),args:o?{database:s.hive.dbName,table:s.hive.tbName}:r?{exportPath:b,type:s.table.type,isHasHeader:s.table.isHasHeader}:Object.assign({},s.table,{exportPath:b}),destination:JSON.stringify(v),source:JSON.stringify(y)};o&&(delete w.destination,delete w.source);var T={tableBaseInfo:a,tableFieldsInfo:p,importInfo:w};return"new"===s.source&&delete T.importInfo,T},generatingStatements:function(){var e=this,t=this.getParams();c["a"].fetch("/datasource/displaysql",{table:t}).then((function(t){e.statements=t.sql,e.modalShow=!0}))},executeCopy:function(){l["a"].executeCopy(this.statements),this.$Message.success(this.$t("message.createTable.DDLYFZ"))},cancel:function(){this.modalShow=!1},getValidate:function(){var e=this;return new Promise((function(t,s){"new"===e.attrInfo.source.source?e.$refs.secondStep.$refs.createTable.$refs.fieldsForm.validate((function(s){s?t():e.$Message.warning(e.$t("message.newConst.failedNotice"))})):t()}))},createTable:function(){var e=this;this.getValidate().then((function(){var t="create_table_".concat(e.attrInfo.basic.name),s=l["a"].md5(t),i=JSON.stringify(e.getParams());e.dispatch("Workbench:add",{id:s,filename:t+".scala",filepath:"",saveAs:!0,noLoadCache:!0,specialSetting:{runType:"function.mdq"},code:i},(function(t){e.$nextTick((function(){e.dispatch("Workbench:run",{id:s},(function(){}))}))}))}))},getCurrentDate:function(){return o.a.unix(o()().unix()).format("YYYYMMDD")},reset:function(){this.current=1,this.attrInfo={basic:{database:"",name:"",alias:"",usage:"",productName:"",projectName:"",comment:""},model:{partitionTable:1,lifecycle:0,modelLevel:0,useWay:0,externalUse:0},source:{source:"new",importType:"hive",hive:{dbName:"",tbName:""},table:{exportPath:"",type:"share",separator:",",chartset:"utf-8",quote:"",isHasHeader:!1}},target:{new:{newFieldsData:{fields:[{name:"",type:"string",alias:"",length:null,rule:"",primary:0,comment:"",partitionField:0}]},newPartitionsData:{fields:[{name:"ds",type:"string",alias:"",length:8,comment:"",partitionField:1,primary:0}]}},fieldList:[],partitionList:[{name:"ds",type:"string",alias:"",length:8,comment:"",partitionsValue:this.currentDate,partitionField:1,primary:0}],sheetName:[]}},this.statements=null}}},p=h,f=s("2877"),m=Object(f["a"])(p,i,a,!1,null,null,null);t["default"]=m.exports},"7b73":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{attrs:{width:"360","class-name":"delete-modal"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("p",{staticClass:"delete-modal-header",attrs:{slot:"header"},slot:"header"},[s("Icon",{attrs:{type:"ios-information-circle"}}),s("span",[e._v(e._s(e.label)+e._s(e.$t("message.deleteDialog.waring")))])],1),s("div",{staticClass:"delete-modal-content"},[s("p",[s("span",[e._v(e._s(e.$t("message.deleteDialog.action",{label:e.label})))]),s("span",{staticClass:"delete-modal-content-type"},[e._v(e._s(e.type))]),s("span",{staticClass:"delete-modal-content-name"},[e._v(e._s(e.name))])]),s("p",[e._v(e._s(e.$t("message.deleteDialog.isNext")))])]),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{loading:e.loading,type:"error",size:"large",long:""},on:{click:e.del}},[e._v(e._s(-1!==[e.$t("message.deleteType.engine"),e.$t("message.deleteType.task"),e.$t("message.deleteType.engineAndTask")].indexOf(e.type)?e.$t("message.deleteDialog.action",{type:e.type}):e.$t("message.newConst.delete")))])],1)])},a=[],n=(s("7f7f"),s("57e7"),{props:{loading:{type:Boolean,default:!1}},data:function(){return{show:!1,type:"",name:""}},computed:{label:function(){return-1!==[this.$t("message.deleteType.engine"),this.$t("message.deleteType.task"),this.$t("message.deleteType.engineAndTask")].indexOf(this.type)?this.$t("message.deleteDialog.overThe"):this.$t("message.newConst.delete")}},watch:{loading:function(e){e||(this.show=!1)}},methods:{open:function(e){this.show=!0;var t=e.type,s=e.name;this.type=t,this.name=s},close:function(){this.show=!1},del:function(){this.$emit("delete",this.type)}}}),r=n,o=(s("d80b"),s("2877")),c=Object(o["a"])(r,i,a,!1,null,null,null),l=c.exports;t["a"]=l},"7c22":function(e,t,s){"use strict";var i=s("f3bc"),a=s.n(i);a.a},"7dc5":function(e,t,s){"use strict";s("d25f"),s("d92a"),s("57e7"),s("4917"),s("c5f6");var i=s("a026"),a=function(e,t,s){var i;return function(){var a=this,n=arguments,r=function(){i=null,s||e.apply(a,n)},o=s&&!i;clearTimeout(i),i=setTimeout(r,t),o&&e.apply(a,n)}};t["a"]={props:{size:{type:Number,required:!0},remain:{type:Number,required:!0},rtag:{type:String,default:"div"},wtag:{type:String,default:"div"},wclass:{type:String,default:""},start:{type:Number,default:0},offset:{type:Number,default:0},variable:[Function,Boolean],bench:Number,debounce:Number,totop:Function,tobottom:Function,onscroll:Function},created:function(){var e=this.start>=this.remain?this.start:0,t=this.remain+(this.bench||this.remain);this.delta={start:e,end:e+t-1,keeps:t,total:0,offsetAll:0,paddingTop:0,paddingBottom:0,varCache:{},varAverSize:0,varLastCalcIndex:0}},watch:{size:function(){this.alter="size"},remain:function(){this.alter="remain"},bench:function(){this.alter="bench"},start:function(){this.alter="start"},offset:function(){this.alter="offset"}},methods:{onScroll:function(e){var t=this.delta,s=this.$refs.vsl,a=s&&(s instanceof i["default"]?s.$el:s).scrollTop||0;t.total>t.keeps?this.updateZone(a):t.end=t.total-1;var n=t.offsetAll;this.onscroll&&this.onscroll(e,{offset:a,offsetAll:n,start:t.start,end:t.end}),!a&&t.total&&this.triggerEvent("totop"),a>=n&&this.triggerEvent("tobottom")},updateZone:function(e){var t=this.variable?this.getVarOvers(e):Math.floor(e/this.size),s=this.delta,i=this.getZone(t),a=this.bench||this.remain;!i.isLast&&t>s.start&&t-s.start<=a||i.start===s.start&&i.end===s.end||(s.end=i.end,s.start=i.start,this.forceRender())},forceRender:function(){var e=this;window.requestAnimationFrame((function(){e.$forceUpdate()}))},getVarOvers:function(e){var t=0,s=0,i=0,a=this.delta,n=a.total;while(t<=n){if(s=t+Math.floor((n-t)/2),i=this.getVarOffset(s),a.varAverSize||(a.varAverSize=Math.floor(i/s)),i===e)return s;i<e?t=s+1:i>e&&(n=s-1)}return t>0?--t:0},getVarOffset:function(e,t){var s=this.delta,i=s.varCache[e];if(!t&&i)return i.offset;for(var a=0,n=0;n<e;n++){var r=this.getVarSize(n,t);s.varCache[n]={size:r,offset:a},a+=r}return s.varLastCalcIndex=Math.max(s.varLastCalcIndex,e-1),s.varLastCalcIndex=Math.min(s.varLastCalcIndex,s.total-1),a},getVarSize:function(e,t){var s=this.delta.varCache[e];if(!t&&s)return s.size;if("function"===typeof this.variable)return this.variable(e)||0;var i=this.$slots.default[e],a=i&&i.data&&i.data.style;if(a&&a.height){var n=a.height.match(/^(.*)px$/);return n&&+n[1]||0}return 0},getVarPaddingTop:function(){return this.getVarOffset(this.delta.start)},getVarPaddingBottom:function(){var e=this.delta,t=e.total-1;return e.total-e.end<=e.keeps||e.varLastCalcIndex===t?this.getVarOffset(t)-this.getVarOffset(e.end):(e.total-e.end)*(e.varAverSize||this.size)},getVarAllHeight:function(){var e=this.delta;return e.total-e.end<=e.keeps||e.varLastCalcIndex===e.total-1?this.getVarOffset(e.total):this.getVarOffset(e.start)+(e.total-e.end)*(e.varAverSize||this.size)},updateVariable:function(e){this.getVarOffset(e,!0)},getZone:function(e){var t,s,i=this.delta;e=parseInt(e,10),e=Math.max(0,e);var a=i.total-i.keeps,n=e<=i.total&&e>=a||e>i.total;return n?(s=i.total-1,t=Math.max(0,a)):(t=e,s=t+i.keeps-1),{end:s,start:t,isLast:n}},triggerEvent:function(e){this[e]&&this[e]()},setScrollTop:function(e){var t=this.$refs.vsl;t&&((t instanceof i["default"]?t.$el:t).scrollTop=e)},filter:function(){var e,t,s,i=this.delta,a=this.$slots.default;a||(a=[],i.start=0),i.total=a.length;var n=i.total>i.keeps;this.variable?(s=this.getVarAllHeight(),e=n?this.getVarPaddingTop():0,t=n?this.getVarPaddingBottom():0):(s=this.size*i.total,e=this.size*(n?i.start:0),t=this.size*(n?i.total-i.keeps:0)-e),i.paddingTop=e,i.paddingBottom=t,i.offsetAll=s-this.size*this.remain;for(var r=[],o=i.start;o<=Math.ceil(i.end);o++)r.push(a[o]);return r}},mounted:function(){if(this.start){var e=this.getZone(this.start).start;this.setScrollTop(this.variable?this.getVarOffset(e):e*this.size)}else this.offset&&this.setScrollTop(this.offset)},beforeUpdate:function(){var e=this.delta;e.keeps=this.remain+(this.bench||this.remain);var t="start"===this.alter?this.start:e.start,s=this.getZone(t);~["start","size","offset"].indexOf(this.alter)&&this.$nextTick(this.setScrollTop.bind(this,"offset"===this.alter?this.offset:this.variable?this.getVarOffset(s.isLast?e.total:s.start):s.isLast&&e.total-t<=this.remain?e.total*this.size:t*this.size)),(t!==s.start||e.end!==s.end||this.alter)&&(this.alter="",e.end=s.end,e.start=s.start,this.forceRender())},render:function(e){var t=this.filter(),s=this.delta,i=this.debounce;return e(this.rtag,{ref:"vsl",style:{display:"block","overflow-y":"auto",height:this.size*this.remain+"px"},on:{"&scroll":i?a(this.onScroll.bind(this),i):this.onScroll}},[e(this.wtag,{style:{display:"block","padding-top":s.paddingTop+"px","padding-bottom":s.paddingBottom+"px"},class:this.wclass},t)])}}},"7f0d":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"bottomPanel",staticClass:"log-panel"},[s("div",{staticClass:"workbench-tabs"},[s("div",{staticClass:"workbench-tab-wrapper"},[s("div",{staticClass:"workbench-tab"},[s("div",{staticClass:"workbench-tab-item",class:{active:"progress"==e.scriptViewState.showPanel},on:{click:function(t){return e.showPanelTab("progress")}}},[s("span",[e._v(e._s(e.$t("message.workBench.body.script.script.tabs.progress")))])]),e.script.result?s("div",{staticClass:"workbench-tab-item",class:{active:"result"==e.scriptViewState.showPanel},on:{click:function(t){return e.showPanelTab("result")}}},[s("span",[e._v(e._s(e.$t("message.workBench.body.script.script.tabs.result")))])]):e._e(),e.isLogShow?s("div",{staticClass:"workbench-tab-item",class:{active:"log"==e.scriptViewState.showPanel},on:{click:function(t){return e.showPanelTab("log")}}},[s("span",[e._v(e._s(e.$t("message.workBench.body.script.script.tabs.log")))])]):e._e()]),s("div",{staticClass:"workbench-tab-button"},[s("Icon",{attrs:{type:"ios-close",size:"20"},on:{click:e.closeConsole}})],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.scriptViewState.bottomPanelMin,expression:"!scriptViewState.bottomPanelMin"}],staticClass:"workbench-container"},["progress"==e.scriptViewState.showPanel?s("we-progress",{attrs:{current:e.script.progress.current,"waiting-size":e.script.progress.waitingSize,steps:e.script.steps,status:e.script.status,application:e.script.application,"progress-info":e.script.progress.progressInfo,"cost-time":e.script.progress.costTime},on:{"open-panel":e.openPanel}}):e._e(),"result"==e.scriptViewState.showPanel?s("result",{ref:"result",attrs:{result:e.script.result,script:e.script,height:e.scriptViewState.cacheBottomPanelHeight},on:{"on-analysis":e.openAnalysisTab,"on-set-change":e.changeResultSet}}):e._e(),"log"==e.scriptViewState.showPanel?s("log",{attrs:{logs:e.script.log,"log-line":e.script.logLine,"script-view-state":e.scriptViewState,height:e.scriptViewState.cacheBottomPanelHeight}}):e._e()],1)])])},a=[],n=(s("1c01"),s("58b2"),s("8e6e"),s("d25f"),s("28a5"),s("456d"),s("759f"),s("2caf"),s("bd86")),r=(s("0d6d"),s("57e7"),s("20d6"),s("ac6a"),s("f3e2"),s("d92a"),s("96cf"),s("3b8d")),o=s("b593"),c=s("0971"),l=s("7138"),d=s("2ef0"),u=s("d225"),h=function e(t){Object(u["a"])(this,e),this.nodeId=t.nodeId,this.title=t.title,this.log=t.log||{},this.logLine=t.logLine||1,this.history=[],this.progress={current:null,progressInfo:[],waitingSize:null,costTime:null},this.steps=[],this.result=null,this.resultList=null,this.status=t.status?t.status:"Inited",this.scriptViewState={}},p=s("5402"),f=s("024e"),m=s("4419"),g=s("32bd");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var y={components:{result:p["default"],log:f["default"],weProgress:m["default"]},props:{node:{type:Object},stop:{type:Boolean}},data:function(){return{execute:null,scriptViewState:{showPanel:"progress",height:0,bottomPanelHeight:0,cacheBottomPanelHeight:0,bottomPanelMin:!1,cacheLogScroll:0},isBottomPanelFull:!1,isLogShow:!1,localLog:{log:{all:"",error:"",warning:"",info:""},logLine:1},script:{result:{},steps:[],progress:{},log:{all:"",error:"",warning:"",info:""},logLine:1,resultList:null}}},created:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.checkFromCache();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){this.execute&&(this.execute.nodeExecuteStop=!0)},watch:{stop:function(e,t){t&&this.execute&&(this.execute.nodeExecuteStop=!0)}},methods:{createScript:function(){var e=this.node;this.script=new h({nodeId:"".concat(e.title,"_").concat(e.createTime),title:e.title,scriptViewState:this.scriptViewState}),this.dispatch("IndexedDB:addNodeCache",{nodeId:"".concat(e.title,"_").concat(e.createTime),value:this.script})},createExecute:function(e){var t={method:"/api/rest_j/v1/entrance/execute",websocketTag:this.node.id,data:{executeApplicationName:null,executionCode:null,runType:"node",params:null,postType:"http",source:{scriptPath:null},fromLine:this.script.logLine}};this.execute=new g["a"](t,this.$t.bind(this)),this.execute.nodeExecuteStop=!1,e&&this.queryState()},queryState:function(){if(this.node.runState.execID){var e={taskID:this.node.runState.taskID,execID:this.node.runState.execID,isRestore:!0,nodeId:this.node.id};this.execute.halfExecute(e),this.monitoringData()}},monitoringData:function(){var e=this;this.execute.taskID===this.node.runState.taskID&&(this.execute.on("log",(function(t){e.localLog=e.convertLogs(t),"log"===e.scriptViewState.showPanel&&e.localLogShow(),e.updateNodeCache(["log"])})),this.execute.on("result",(function(t){e.showPanelTab("result");var s={headRows:t.metadata,bodyRows:t.fileContent,total:t.totalLine,type:t.type,cache:{offsetX:0,offsetY:0},path:e.execute.currentResultPath,current:1,size:20};e.$set(e.execute.resultList[0],"result",s),e.$set(e.script,"resultSet",0),e.script.result=s,e.script.resultList=e.execute.resultList,e.script.resultSet=0,e.updateNodeCache(["result","resultList","resultSet"]),e.script.progress.current&&(e.script.progress.current=1,e.updateNodeCache("progress"))})),this.execute.on("progress",(function(t){var s=t.progress,i=t.progressInfo,a=t.waitingSize;if(e.executeLastProgress!==s){if(e.executeLastProgress=s,i.length&&!Object(d["isEmpty"])(i[0])?i.forEach((function(t){var s=t.id,i=e.script.progress.progressInfo.findIndex((function(e){return e.id===s}));-1!==i?e.script.progress.progressInfo.splice(i,1,t):e.script.progress.progressInfo.push(t)})):i=[],1==s){var n=l["a"].get(e._running_scripts_key,"local")||{};delete n[e.script.nodeId],l["a"].set(e._running_scripts_key,n,"local")}e.script.progress.current=s,null!==a&&a>=0&&(e.script.progress.waitingSize=a),e.updateNodeCache("progress")}})),this.execute.on("steps",(function(t){if(e.executeLastStatus!==t){if(e.executeLastStatus=t,"Inited"===t)e.script.steps=["Submitted","Inited"];else{var s=Object(d["last"])(e.script.steps);(-1===e.script.steps.indexOf(t)||s!==t)&&e.script.steps.push(t),e.updateNodeCache(["steps"])}"Inited"!==t&&1===e.script.steps.length&&e.script.steps.unshift("ellipsis")}})),this.execute.on("status",(function(t){e.script.status=t,e.updateNodeCache("status")})),this.execute.on("stateEnd",(function(){e.updateNodeCache("log")})),this.execute.on("error",(function(){e.updateNodeCache("log")})),this.execute.on("querySuccess",(function(t){var s=t.type,i=t.task,a=c["a"].convertTimestamp(i.costTime);e.script.progress.costTime=a;var n=e.script.title;e.$Notice.close(n),e.$Notice.success({title:e.$t("message.workBench.body.script.script.notice.querySuccess.title"),desc:"",render:function(t){return t("span",{style:{"word-break":"break-all","line-height":"20px"}},"".concat(e.script.title," ").concat(s).concat(e.$t("message.workBench.body.script.script.notice.querySuccess.render"),"：").concat(a,"！"))},name:n,duration:3})})),this.execute.on("notice",(function(t){var s=t.type,i=t.msg,a=t.autoJoin,n=e.script.title,r=a?"".concat(e.$t("message.workBench.body.script.script.text")).concat(e.script.title," ").concat(i):i;e.$Notice.close(n),e.$Notice[s]({title:e.$t("message.workBench.body.script.script.notice.notice.title"),name:n,desc:"",duration:5,render:function(e){return e("span",{style:{"word-break":"break-all","line-height":"20px"}},r)}})})),this.execute.on("costTime",(function(t){e.script.progress.costTime=c["a"].convertTimestamp(t),e.updateNodeCache("progress")})))},resetQuery:function(){this.showPanelTab("progress"),this.isLogShow=!1,this.localLog={log:{all:"",error:"",warning:"",info:""},logLine:1},this.script.progress={current:null,progressInfo:[],waitingSize:null,costTime:null},this.script.log={all:"",error:"",warning:"",info:""},this.script.logLine=1,this.script.steps=["Submitted"],this.script.diagnosis=null,this.script.result={headRows:[],bodyRows:[],type:"EMPTY",total:0,path:"",cache:{}},this.script.resultList=null},showPanelTab:function(e){this.scriptViewState.showPanel=e,this.script.showPanel=e,this.updateNodeCache("showPanel"),"log"===e&&this.localLogShow()},localLogShow:function(){var e=this;this.debounceLocalLogShow||(this.debounceLocalLogShow=Object(d["debounce"])((function(){e.localLog&&(e.script.log=Object.freeze(v({},e.localLog.log)),e.script.logLine=e.localLog.logLine,e.updateNodeCache("log"))}),1500)),this.debounceLocalLogShow()},openAnalysisTab:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,s,i,a,n,r,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.biLoading){e.next=2;break}return e.abrupt("return",this.$Message.warning(this.$t("message.constants.warning.biLoading")));case 2:return this.biLoading=!0,t=this.getVsBiUrl(),e.next=6,o["a"].fetch("".concat(t,"/api/rest_j/v1/visualis/view"),{fileName:this.script.title,executionCode:this.script.executionCode||this.script.data,resultPath:this.script.result.path,runType:this.script.runType,resultNumber:this.script.result.current>0?this.script.result.current-1:0}).catch((function(){l.biLoading=!1}));case 6:s=e.sent,s&&(i=s.id,a=s.projectId,n="".concat(this.script.title,"_project").concat(a,"_set").concat(this.script.resultSet,".bi"),r=c["a"].md5(n),this.dispatch("Workbench:add",{id:r,title:n,saveAs:!0,type:"visualAnalysis",params:{viewId:i,projectId:a}},(function(){l.biLoading=!1})));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeResultSet:function(e,t){var s=this,i=Object(d["isUndefined"])(e.currentSet)?this.script.resultSet:e.currentSet,a=this.script.resultList[i],n=a&&a.path,r=this.script.resultList[i].hasOwnProperty("result");if(r)this.script.result=this.script.resultList[i].result,this.$set(this.script,"resultSet",i),this.script.resultSet=i,this.script.showPanel="result",this.updateNodeCache(["result","resultList","resultSet","showPanel"]),t();else{var c=5e3,l="/filesystem/openFile";o["a"].fetch(l,{path:n,pageSize:c},"get").then((function(e){var a={headRows:e.metadata,bodyRows:e.fileContent,total:e.totalLine?e.totalLine:0,type:e.fileContent?e.type:0,cache:{offsetX:0,offsetY:0},path:n,current:1,size:20};s.$set(s.script.resultList[i],"result",a),s.$set(s.script,"resultSet",i),s.script.result=a,s.script.resultSet=i,s.script.showPanel="result",s.updateNodeCache(["result","resultList","resultSet","showPanel"]),t()})).catch((function(){t()}))}},closeConsole:function(){this.$emit("close-console")},openPanel:function(e){"log"===e&&(this.isLogShow=!0,this.showPanelTab(e))},checkFromCache:function(){var e=this;this.resetQuery();var t="".concat(this.node.title,"_").concat(this.node.createTime);this.dispatch("IndexedDB:getNodeCache",{nodeId:t,cb:function(s){var i=!0;s?(e.script=Object.assign(new h({nodeId:t,title:e.node.title,scriptViewState:e.scriptViewState}),s),e.localLog={log:s.log,logLine:s.logLine},s.log.all||e.getLogs(),-1!==["Succeed","Failed","Cancelled","Timeout"].indexOf(e.script.status)&&(i=!1)):e.createScript(),e.$nextTick((function(){e.createExecute(i)}))}})},updateNodeCache:function(e){this.dispatch("IndexedDB:updateNodeCache",{nodeId:this.script.nodeId,key:e,value:this.script})},getLogs:function(){var e=this;o["a"].fetch("/entrance/".concat(this.node.runState.execID,"/log"),{fromLine:this.fromLine,size:-1},"get").then((function(t){e.localLog=e.convertLogs(t.log),e.script.log=e.localLog.log,e.script.logLine=e.fromLine=t.fromLine,"log"===e.scriptViewState.showPanel&&e.localLogShow(),e.updateNodeCache(["log"])}))},convertLogs:function(e){var t=this.localLog||{log:{all:"",error:"",warning:"",info:""},logLine:1},s=Array.isArray(e)?e.some((function(e){return e.length>0})):e;if(!s)return t;var i=c["a"].convertLog(e);return Object.keys(i).forEach((function(e){var s=i[e];s&&(t.log[e]+=s+"\n"),"all"===e&&(t.logLine+=s.split("\n").length)})),t}}},w=y,T=s("2877"),S=Object(T["a"])(w,i,a,!1,null,null,null);t["default"]=S.exports},"7f5a":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"create-table"},[s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n      "+e._s(e.$t("message.createTable.baseAttr"))+"\n    ")]),s("Button",{attrs:{slot:"extra",type:"primary",size:"small"},on:{click:function(t){return t.preventDefault(),e.addFieldsItem(t)}},slot:"extra"},[e._v(e._s(e.$t("message.createTable.add")))]),s("Form",{ref:"fieldsForm",attrs:{model:e.target.newFieldsData}},[s("field-list",{attrs:{list:e.target.newFieldsData.fields,"static-data":e.fieldsConfig,"has-action":!0},on:{delete:e.delteFields}})],1)],1),e.partitionTable?s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[e._v("\n      "+e._s(e.$t("message.createTable.partitionAttr"))+"\n    ")]),s("Form",{ref:"partForm",attrs:{model:e.target.newPartitionsData}},[s("field-list",{attrs:{list:e.target.newPartitionsData.fields,"static-data":e.partitionsConfig}})],1)],1):e._e()],1)},a=[],n=(s("c5f6"),s("b788")),r=s("e6b5"),o={components:{fieldList:r["default"]},props:{target:{type:Object,required:!0},partitionTable:{type:Number,default:1}},data:function(){return{fieldsConfig:n["a"].createTableFieldsConfig,partitionsConfig:n["a"].createTablePartitionsConfig}},methods:{addFieldsItem:function(){this.target.newFieldsData.fields.push({name:"",type:"string",alias:"",length:null,rule:"",primary:0,comment:"",partitionField:0})},delteFields:function(e){this.target.newFieldsData.fields.splice(e,1)}}},c=o,l=s("2877"),d=Object(l["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},"83f2":function(e,t,s){"use strict";s.r(t),t["default"]={name:"Process",events:[],dispatchs:{WorkSidebar:["showTree"],Workbench:["updateFlowsTab","updateFlowsNodeName"],IndexedDB:["clearLog","clearResult","clearProgress","updateResult","getNodeCache","updateNodeCache","removeNodeCache","addNodeCache","clearNodeCache","updateProjectCache","getProjectCache"]},methods:{},data:{API_PATH:"http://localhost:8088/api/rest_j/v1/"},component:function(){return Promise.resolve().then(s.bind(null,"c154"))}}},8402:function(e,t,s){"use strict";t["a"]={"zh-CN":{"vue-process":{Basic:"基础信息","node name":"节点名","enter node name":"请输入节点名",describe:"描述","enter-desc":"请输入描述",save:"保存",amplification:"放大",narrow:"缩小",fullscreen:"全屏/取消全屏",format:"一键格式化","return format":"恢复到格式化之前的状态",straight:"直线",slash:"斜线",Width:"节点宽度",formatting:"格式化",cancel:"取消","Whether return format":"是否要恢复到格式化之前的状态？",restore:"恢复","zoom-max":"放大的极限是","zoom-min":"缩小的极限是",copy:"复制",delete:"删除",Parameter:"参数配置","cannot be formatted":"无节点时无法进行格式化！","Unable to connect":"不能连接自己！","repeat nodes":"不能重复连接两个节点！","closed-loop":"不能形成闭环！",paste:"粘贴",parameter:"参数",attribute:"属性",value:"值","attribute name":"请输入属性名","property value":"请输入属性值",search:"搜索"}},en:{"vue-process":{Basic:"Basic information","node name":"Node Name","enter node name":"Please enter the node name",describe:"Description","enter-desc":"Please enter description",save:"Save",amplification:"Zoom out",narrow:"Zoom in",fullscreen:"fullscreen/exit",format:"Format","return format":"Revert format",straight:"Straight",slash:"Slash",Width:"Width",formatting:"Format",cancel:"cancel","Whether return format":"Whether or not to return to format before?",restore:"restore","zoom-max":"Max zoom","zoom-min":"Min zoom",copy:"Copy",delete:"Delete",Parameter:"Parameter","cannot be formatted":"Cannot be formatted","Unable to connect":"Unable to connect itself","repeat nodes":"Can't repeat connect!","closed-loop":"Unable to connect！",paste:"Paste",parameter:"parameter",attribute:"attribute",value:"value","attribute name":"Please enter attribute name","property value":"Please enter value",search:"search"}}}},"843e":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"date-report"},[s("iframe",{attrs:{id:"iframeName",src:e.visualSrc,frameborder:"0",width:"100%",height:e.height}})])},a=[],n={data:function(){return{visualSrc:this.getDataReportUrl(),loading:!0,height:0}},mounted:function(){this.height=this.$route.query.height}},r=n,o=s("2877"),c=Object(o["a"])(r,i,a,!1,null,null,null);t["default"]=c.exports},8471:function(e,t,s){e.exports=s.p+"img/qualitis.f50df4ee.svg"},"84e9":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"editor"},[s("div",{staticClass:"workbench-body-navbar"},[s("div",{staticClass:"workbench-body-navbar-item",on:{click:e.undo}},[s("Icon",{attrs:{type:"ios-undo"}}),s("span",{staticClass:"navbar-item-name"},[e._v(e._s(e.$t("message.workBench.body.script.editor.navBar.undo")))])],1),s("div",{staticClass:"workbench-body-navbar-item",on:{click:e.redo}},[s("Icon",{attrs:{type:"ios-redo"}}),s("span",{staticClass:"navbar-item-name"},[e._v(e._s(e.$t("message.workBench.body.script.editor.navBar.redo")))])],1),"hdfsScript"!==e.scriptType?s("div",{staticClass:"workbench-body-navbar-group"},[e.script.executable?s("div",{directives:[{name:"show",rawName:"v-show",value:!e.script.running,expression:"!script.running"}],staticClass:"workbench-body-navbar-item",class:{disabled:e.loading},attrs:{title:"F3"},on:{click:function(t){return t.stopPropagation(),e.run(t)}}},[s("Icon",{attrs:{type:"ios-play"}}),s("span",{staticClass:"navbar-item-name"},[e._v(e._s(e.$t("message.workBench.body.script.editor.navBar.play")))])],1):e._e(),e.script.executable?s("div",{directives:[{name:"show",rawName:"v-show",value:e.script.running,expression:"script.running"}],staticClass:"workbench-body-navbar-item",on:{click:function(t){return t.stopPropagation(),e.stop(t)}}},[s("Icon",{staticStyle:{color:"red"},attrs:{type:"md-square"}}),s("span",{staticClass:"navbar-item-name"},[e._v(e._s(e.$t("message.workBench.body.script.editor.navBar.stop")))])],1):e._e(),e.script.readOnly||e.isHdfs?e._e():s("div",{staticClass:"workbench-body-navbar-item",attrs:{title:"Ctrl+S"},on:{click:e.save}},[s("Icon",{attrs:{type:"md-checkmark"}}),s("span",{staticClass:"navbar-item-name"},[e._v(e._s(e.$t("message.workBench.body.script.editor.navBar.save")))])],1),e.script.readOnly||e.isHdfs||!e.isSupport?e._e():s("div",{staticClass:"workbench-body-navbar-item",on:{click:e.config}},[s("Icon",{attrs:{type:"ios-build"}}),s("span",{staticClass:"navbar-item-name"},[e._v(e._s(e.$t("message.workBench.body.script.editor.navBar.config")))])],1)]):e._e()]),s("div",{staticClass:"editor-content"},[s("we-editor",{ref:"editor",attrs:{language:e.script.lang,id:e.script.id,"read-only":e.script.readOnly,"script-type":e.scriptType,application:e.script.application,type:"code"},on:{"on-operator":e.heartBeat,"on-run":e.run,"on-save":e.save,"is-parse-success":e.changeParseSuccess},model:{value:e.script.data,callback:function(t){e.$set(e.script,"data",t)},expression:"script.data"}}),s("setting",{directives:[{name:"show",rawName:"v-show",value:e.showConfig,expression:"showConfig"}],ref:"setting",attrs:{script:e.script,work:e.work},on:{"setting-close":e.settingClose}})],1)])},a=[],n=(s("96cf"),s("3b8d")),r=(s("57e7"),s("4429")),o=s("b593"),c=s("7138"),l=s("2ef0"),d={components:{setting:r["default"]},props:{script:{type:Object,required:!0},work:{type:Object,required:!0},scriptType:{type:String,default:"workspaceScript"}},data:function(){return{showConfig:!1,loading:!1,isParseSuccess:!0}},computed:{listenResource:function(){return this.script.running},isHdfs:function(){return 0===this.work.filepath.indexOf("hdfs")},isSupport:function(){return this.script.executable}},watch:{listenResource:function(e){var t=this;e||o["a"].fetch("/jobhistory/list",{pageSize:100,status:"Running,Inited,Scheduled"},"get").then((function(e){t.dispatch("Footer:updateRunningJob",e.tasks.length)})).catch((function(e){}))},"work.unsave":function(e){e||(this.$refs.setting.origin=JSON.stringify(this.script.params))}},methods:{"Workbench:insertValue":function(e){e.id===this.script.id&&this.$refs.editor.insertValueIntoEditor(e.value)},"Workbench:setParseAction":function(e){if(e===this.script.id){var t=this.$refs.editor;if(t){var s=!!c["a"].get("isParserClose","local");t.isParserClose=s,t.closeParser&&t.closeParser.set(!s),t.openParser&&t.openParser.set(s)}}},undo:function(){this.$refs.editor.undo()},redo:function(){this.$refs.editor.redo()},run:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,s,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.script.running){e.next=2;break}return e.abrupt("return",this.$Message.warning(this.$t("message.workBench.body.script.editor.warning.running")));case 2:return t=this.$refs.editor.getValueInRange()||this.script.data,e.next=5,this.validateRepeat();case 5:s=e.sent,this.$refs.editor.deltaDecorations(t,(function(e){return s?i.loading?i.$Message.warning(i.$t("message.constants.warning.api")):t?(i.loading=!0,void i.$emit("on-run",{code:t,id:i.script.id},(function(e){var t=["execute","error","start","downgrade"];t.indexOf(e)>-1&&(i.loading=!1)}))):i.$Message.warning(i.$t("message.workBench.body.script.editor.warning.emptyCode")):i.$Message.warning(i.$t("message.workBench.body.script.editor.warning.invalidArgs"))}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),stop:function(){var e=this;if(this.loading)return this.$Message.warning(this.$t("message.constants.warning.api"));this.loading=!0,this.$emit("on-stop",(function(t){e.loading=!1}))},save:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.validateRepeat();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return",this.$Message.warning(this.$t("message.workBench.body.script.editor.warning.invalidArgs")));case 5:this.$refs.editor.save(),this.$emit("on-save");case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),config:function(){this.showConfig=!this.showConfig},settingClose:function(){this.showConfig=!1},heartBeat:Object(l["throttle"])((function(){o["a"].fetch("/user/heartbeat","get")}),6e4),validateRepeat:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,s,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$refs.setting,s=!0,!this.script.params.variable.length){e.next=6;break}return e.next=5,t.$refs.customVariable.$refs.form.$refs.dynamicForm.validate((function(e){return e||(i.showConfig=!0),e}));case 5:s=e.sent;case 6:if(!t.$refs.envVariable||!this.script.params.configuration.runtime.env.length){e.next=10;break}return e.next=9,t.$refs.envVariable.$refs.form.$refs.dynamicForm.validate((function(e){return e||(i.showConfig=!0),e}));case 9:s=e.sent;case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),changeParseSuccess:function(e){this.isParseSuccess=e}}},u=d,h=s("2877"),p=Object(h["a"])(u,i,a,!1,null,null,null);t["default"]=p.exports},8903:function(e,t,s){"use strict";var i=s("d1ab"),a=s.n(i);a.a},8940:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Form",{attrs:{"label-width":100,"label-position":"left"}},[s("FormItem",{attrs:{label:e.$root.$t("message.publish.desc")}},[s("Input",{attrs:{rows:4,type:"textarea",placeholder:e.$root.$t("message.publish.inputDesc")},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1)],1)},a=[],n=(s("d25f"),s("7f7f"),s("b593")),r=s("5118"),o=s("7138"),c={name:"Publish",props:{currentProjectData:{type:Object,default:null}},data:function(){return{comment:""}},created:function(){},methods:{publish:function(){var e=this;this.dispatch("Project:loading",!0),n["a"].fetch("/dss/publish",{id:this.currentProjectData.id,comment:this.comment}).then((function(){e.dispatch("Project:loading",!1);var t=0;e.checkResult(e.currentProjectData.latestVersion.id,t)})).catch((function(){e.$Message.warning(e.$root.$t("message.publish.error",{name:e.currentProjectData.name})),e.removePercent(),e.dispatch("Project:getData")}))},checkResult:function(e,t){var s=this,i=Object(r["setTimeout"])((function(){t+=8e3,s.currentProjectData.percent="".concat((t/3e3).toFixed(0),"%"),(t/3e3).toFixed(0)>=98&&(s.currentProjectData.percent="98%"),s.dispatch("Project:updataPercent",s.currentProjectData),n["a"].fetch("/dss/publishQuery",{projectVersionID:+e},"get").then((function(a){t<=6e5?"Inited"===a.info.status||"Running"===a.info.status?(clearTimeout(i),s.checkResult(e,t)):"Succeed"===a.info.status?(clearTimeout(i),s.currentProjectData.percent="100%",s.$Message.success(s.$root.$t("message.publish.success",{name:s.currentProjectData.name})),s.removePercent(),s.dispatch("Project:getData"),s.$emit("updateWorkflow")):"Failed"===a.info.status&&(clearTimeout(i),s.removePercent(),s.dispatch("Project:getData"),s.$Modal.error({title:s.$root.$t("message.publish.failed"),content:'<p style="word-break: break-all;">'.concat(a.info.msg,"</p>"),width:500,okText:s.$root.$t("message.publish.cancel")})):(clearTimeout(i),s.$Message.warning(s.$root.$t("message.publish.timeout",{name:s.currentProjectData.name})),s.removePercent(),s.dispatch("Project:getData")),s.dispatch("Project:updataPercent")}))}),8e3)},removePercent:function(){var e=this,t=o["a"].get("precentList");t&&(t=t.filter((function(t){return t.id!==e.currentProjectData.id})),o["a"].set("precentList",t))}}},l=c,d=s("2877"),u=Object(d["a"])(l,i,a,!1,null,null,null);t["default"]=u.exports},"89d5":function(e,t,s){},"8b17":function(e,t,s){"use strict";var i=s("c8b4"),a=s.n(i);a.a},"8b74":function(e,t,s){},"8c5f":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.loading?s("Spin",{attrs:{size:"large",fix:""}}):e._e(),s("div",{staticClass:"job-manager"},[e.jobList.length?e._e():s("div",{staticClass:"job-manager-empty"},[e._v(e._s(e.$t("message.resourceSimple.ZWSJ")))]),e._l(e.jobTypeList,(function(t,i){return s("div",{key:i,staticClass:"job-manager-type"},[e.jobList.length&&e.checkJobLength(t.en)?s("span",{staticClass:"job-manager-title"},[e._v(e._s(t.cn))]):e._e(),e._l(e.jobList,(function(i,a){return s("div",{key:a},[i.requestApplicationName===t.en?s("div",{staticClass:"job-manager-item-wrapper",class:{actived:i.isActive},style:e.getClass(i),on:{click:function(t){return e.handleItemClick(i)},contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),e.handleItemMenu(t,i)}}},[i.isActive?s("Icon",{staticClass:"job-manager-item-active",attrs:{type:"md-checkmark"}}):e._e(),s("span",{staticClass:"job-manager-item-progress",style:{width:i.progress?(100*i.progress).toFixed(2)+"%":0}}),s("i",{staticClass:"job-manager-item-icon",class:e.getIconClass(i)}),s("span",{staticClass:"job-manager-item-label"},[e._v(e._s(e.getLabel(i)))]),s("span",{staticClass:"job-manager-item-progress-label"},[e._v(e._s(i.progress?(100*i.progress).toFixed(2)+"%":""))]),s("Icon",{staticClass:"job-manager-item-close",attrs:{size:"16",type:"ios-close-circle-outline"},on:{click:function(t){e.openKillModal(e.$t("message.resourceSimple.RW"))}}})],1):e._e()])}))],2)})),s("we-menu",{ref:"contextMenu",attrs:{id:"jobManager"}},[e.lastClick&&"Inited"!==e.lastClick.status?s("we-menu-item",{on:{select:function(t){e.openKillModal(e.$t("message.resourceSimple.YQRW"))}}},[s("span",[e._v(e._s(e.$t("message.resourceSimple.JSYQRW")))])]):e._e(),s("we-menu-item",{on:{select:e.openHistoryScript}},[s("span",[e._v(e._s(e.$t("message.resourceSimple.CKJBXX")))])]),s("we-menu-item",{on:{select:e.copyInfos}},[s("span",[e._v(e._s(e.$t("message.resourceSimple.FZJBXX")))])])],1)],2),s("detele-modal",{ref:"killModal",attrs:{loading:e.loading},on:{delete:e.kill}})],1)},a=[],n=(s("d25f"),s("7f7f"),s("7514"),s("96cf"),s("3b8d")),r=(s("ac6a"),s("f3e2"),s("2ef0")),o=s("0971"),c=s("b593"),l=s("7b73"),d={name:"Job",components:{deteleModal:l["a"]},data:function(){return{loading:!1,jobTypeList:[],jobList:[],lastClick:null}},watch:{loading:function(e){this.$emit("change-loading",e)}},methods:{getJobList:function(){var e=this;this.jobList=[],c["a"].fetch("/jobhistory/list",{pageSize:100,status:"Running,Inited,Scheduled"},"get").then((function(t){e.dispatch("Footer:updateRunningJob",t.tasks.length),e.jobTypeList=[{en:"IDE",cn:e.$t("message.resourceSimple.YS")},{en:"visualis",cn:e.$t("message.resourceSimple.ZH")},{en:"flowexecution",cn:e.$t("message.resourceSimple.FLOW1")},{en:"Scheduler",cn:e.$t("message.resourceSimple.FLOW2")}],t.tasks.forEach((function(t,s){var i=Object.assign({},t,{isActive:!1,fileName:e.convertJson(t)});e.jobList.push(i)})),e.jobList=Object(r["orderBy"])(e.jobList,["status","fileName"]),e.$emit("update-job",t.tasks.length)})).catch((function(t){e.isLoading=!1}))},killJob:function(){var e=this,t=this.lastClick;return this.loading?this.$Message.warning(this.$t("message.resourceSimple.DDJK")):t?t.strongerExecId?(this.loading=!0,void c["a"].fetch("/entrance/".concat(t.strongerExecId,"/kill"),"get").then((function(s){e.loading=!1,e.$emit("close-modal"),e.$Notice.close(t.scriptPath),e.$Notice.warning({title:e.$t("message.resourceSimple.YXTS"),desc:"".concat(e.$t("message.resourceSimple.YJTZZXJB"),": ").concat(t.fileName||""," ！"),name:t.scriptPath,duration:3})})).catch((function(){e.loading=!1}))):this.$Message.warning(this.$t("message.resourceSimple.WHQD")):this.$Message.warning(this.$t("message.resourceSimple.QXZYTJL"))},killJobAndEngine:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.lastClick,!this.loading){e.next=3;break}return e.abrupt("return",this.$Message.warning(this.$t("message.resourceSimple.DDJK")));case 3:if(t.strongerExecId){e.next=5;break}return e.abrupt("return",this.$Message.warning(this.$t("message.resourceSimple.WHQD")));case 5:if(t.engineInstance){e.next=7;break}return e.abrupt("return",this.$Message.warning(this.$t("message.resourceSimple.WHQDENGINE")));case 7:return this.loading=!0,e.next=10,c["a"].fetch("/entrance/".concat(t.strongerExecId,"/kill"),"get");case 10:c["a"].fetch("/resourcemanager/engines").then((function(e){var i=e.engines,a=i.find((function(e){return e.engineInstance===t.engineInstance}));if(a){var n=[{ticketId:a.ticketId,moduleName:a.moduleName,engineManagerInstance:a.engineManagerInstance,creator:a.creator}];c["a"].fetch("/resourcemanager/enginekill",n).then((function(e){s.loading=!1,s.$emit("close-modal"),s.$Notice.close(t.scriptPath),s.$Notice.warning({title:s.$t("message.resourceSimple.YXTS"),desc:s.$t("message.resourceSimple.JSYQHRWCG"),name:t.scriptPath,duration:3})})).catch((function(){s.loading=!1}))}})).catch((function(){s.loading=!1}));case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openHistoryScript:function(){var e=this,t=this.lastClick;if("IDE"===t.requestApplicationName){var s=this.getSupportModes(),i=s.find((function(e){return e.rule.test(t.fileName)})),a=i?i.ext:".hql",n="history_item_".concat(t.taskID).concat(a),r=o["a"].md5(n);this.$emit("close-modal"),"Home"===this.$route.name?this.dispatch("Workbench:add",{id:r,taskID:t.taskID,filename:n,filepath:t.scriptPath,saveAs:!0,code:t.executionCode,type:"historyScript"},(function(t){t&&e.$Message.success(e.$t("message.resourceSimple.DKCG"))})):this.$router.push({path:"/",query:{id:r,taskID:t.taskID,filename:n,filepath:t.scriptPath,saveAs:!0,type:"historyScript",code:t.executionCode}})}},getColor:function(e){var t="";return t="Inited"===e.status?"#515a6e":"Running"===e.status?"rgb(45, 140, 240)":"rgba(243, 133, 243, 0.5)",t},getClass:function(e){var t=this.getColor(e);return{color:t}},getIconClass:function(e){var t=this.getSupportModes().filter((function(t){return t.rule.test(e.fileName)||t.runType===e.runType}));return t.length>0?t[0].logo:"flowexecution"===e.requestApplicationName||"Scheduler"===e.requestApplicationName?"fi-workflow1":"fi-bi"},handleItemClick:function(e){this.$emit("change-job-disabled",!1),this.lastClick?this.lastClick!==e&&(this.lastClick.isActive=!1,this.lastClick=e,e.isActive=!0):(this.lastClick=e,e.isActive=!0)},handleItemMenu:function(e,t){this.handleItemClick(t),this.$refs.contextMenu.open(e)},copyInfos:function(){o["a"].executeCopy(JSON.stringify(this.lastClick)),this.$Message.success(this.$t("message.resourceSimple.JBFZDZTRB"))},checkJobLength:function(e){var t=this.jobList.filter((function(t){return t.requestApplicationName===e}));return t.length},openKillModal:function(e){this.$refs.killModal.open({type:e,name:""})},kill:function(e){e===this.$t("message.resourceSimple.YQRW")?this.killJobAndEngine():this.killJob()},getLabel:function(e){return e.fileName?e.fileName:"IDE"===e.requestApplicationName?this.$t("message.resourceSimple.WZJBMC"):"flowexecution"===e.requestApplicationName||"Scheduler"===e.requestApplicationName?this.$t("message.resourceSimple.GZLJB"):this.$t("message.resourceSimple.ZHJB")},convertJson:function(e){if(e.sourceJson){var t=JSON.parse(e.sourceJson);return t.fileName||t.flowName}return""}}},u=d,h=s("2877"),p=Object(h["a"])(u,i,a,!1,null,null,null);t["default"]=p.exports},"8cfe":function(e,t,s){"use strict";s.r(t),t["default"]={name:"resourceSimple",component:function(){return Promise.resolve().then(s.bind(null,"60d6"))},dispatchs:["Workbench:add","Footer:updateRunningJob"]}},"8e61":function(e,t,s){e.exports=s.p+"img/sender.5cb32657.svg"},"8ff8":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"create-table-step-first"},[e.loading?s("Spin",{attrs:{size:"large",fix:""}}):e._e(),e._l(e.info,(function(t,i){return s("Card",{key:i,staticClass:"basic-card",attrs:{bordered:!1}},[s("p",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))]),s("Form",{ref:t.ref,refInFor:!0,staticClass:"basic-card-form",attrs:{model:e.attrInfo[t.key],rules:t.rules,"label-width":100}},e._l(t.map,(function(i,a){return s("FormItem",{key:a,staticClass:"basic-card-form-item",attrs:{label:i.name,prop:i.key}},["input"===i.inputType?s("Input",{attrs:{maxlength:i.maxlength,placeholder:i.placeholder},model:{value:e.attrInfo[t.key][i.key],callback:function(s){e.$set(e.attrInfo[t.key],i.key,s)},expression:"attrInfo[type.key][item.key]"}}):e._e(),"select"===i.inputType?s("Select",{attrs:{placeholder:i.placeholder},on:{"on-change":function(t){return e.handleChange(arguments,i,a)}},model:{value:e.attrInfo[t.key][i.key],callback:function(s){e.$set(e.attrInfo[t.key],i.key,s)},expression:"attrInfo[type.key][item.key]"}},e._l(i.opt,(function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1):e._e(),"radio"===i.inputType?s("RadioGroup",{attrs:{title:i.toolTip},model:{value:e.attrInfo[t.key][i.key],callback:function(s){e.$set(e.attrInfo[t.key],i.key,s)},expression:"attrInfo[type.key][item.key]"}},e._l(i.opt,(function(t){return s("Radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1):e._e(),"textarea"===i.inputType?s("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:i.placeholder,maxlength:i.maxlength},model:{value:e.attrInfo[t.key][i.key],callback:function(s){e.$set(e.attrInfo[t.key],i.key,s)},expression:"attrInfo[type.key][item.key]"}}):e._e()],1)})),1)],1)})),s("p",{staticClass:"create-table-btn-group"},[s("Button",{on:{click:e.closeTab}},[e._v(e._s(e.$t("message.newConst.cancel")))]),s("Button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v(e._s(e.$t("message.createTable.next")))])],1)],2)},a=[],n=(s("20d6"),s("7514"),s("7f7f"),s("6d67"),s("2ef0")),r=void 0,o={props:{dbList:{type:Array,required:!0},attrInfo:{type:Object,required:!0},loading:{type:Boolean,default:!0}},data:function(){var e=this,t=this,s=function(t,s,i){s?/^[\w\u4e00-\u9fa5]+$/.test(s)?i():i(new Error(e.$("message.createTable.nameNotice"))):i()};return{currentDb:0,firstStepData:null,info:[{title:this.$t("message.createTable.baseAttr"),ref:"basicAttr",key:"basic",map:[{key:"database",name:this.$t("message.createTable.daName"),inputType:"select",opt:[]},{key:"name",name:this.$t("message.createTable.tableName"),inputType:"input",placeholder:this.$t("message.createTable.tablePlaceholder"),maxlength:64},{key:"alias",name:this.$t("message.createTable.tableOtherName"),inputType:"input",placeholder:this.$t("message.createTable.aliasPlaceholder"),maxlength:64},{key:"usage",name:this.$t("message.createTable.use"),inputType:"input",placeholder:this.$t("message.createTable.emptyPlaceholder"),maxlength:128},{key:"productName",name:this.$t("message.createTable.product"),inputType:"input",placeholder:this.$t("message.createTable.emptyPlaceholder"),maxlength:64},{key:"projectName",name:this.$t("message.createTable.project"),inputType:"input",placeholder:this.$t("message.createTable.emptyPlaceholder"),maxlength:64},{key:"comment",name:this.$t("message.createTable.tableDesc"),inputType:"textarea",placeholder:this.$t("message.createTable.emptyPlaceholder"),maxlength:128}],rules:{database:[{required:!0,message:this.$t("message.createTable.selectDbName"),trigger:"change"}],name:[{required:!0,message:this.$t("message.createTable.inputTableName"),trigger:"blur"},{type:"string",pattern:/^[a-zA-Z][a-zA-Z0-9_]*$/,message:this.$t("message.createTable.tablePlaceholder"),trigger:"change"},{validator:function(e,s,i){return s?t.handleTbInput(s,i,t):i()}}],alias:[{required:!0,message:this.$t("message.createTable.inputOtherName"),trigger:"change"},{type:"string",pattern:/^[\w\u4e00-\u9fa5]+$/,message:this.$t("message.createTable.aliasPlaceholder"),trigger:"change"}],usage:[{validator:s,trigger:"change"}],productName:[{validator:s,trigger:"change"}],projectName:[{validator:s,trigger:"change"}],comment:[{validator:s,trigger:"change"}]}},{title:this.$t("message.createTable.moduleAttr"),ref:"modelAttr",key:"model",map:[{key:"partitionTable",name:this.$t("message.createTable.partitionType"),inputType:"radio",opt:[{value:1,label:this.$t("message.createTable.partition")},{value:0,label:this.$t("message.createTable.unartition")}]},{key:"lifecycle",name:this.$t("message.createTable.lifecycle"),inputType:"select",opt:[{value:0,label:this.$t("message.createTable.forever")},{value:1,label:this.$t("message.createTable.day")},{value:2,label:this.$t("message.createTable.week")},{value:3,label:this.$t("message.createTable.moon")},{value:4,label:this.$t("message.createTable.midYear")}]},{key:"modelLevel",name:this.$t("message.createTable.moduleRank"),inputType:"select",opt:[{value:0,label:"ODS(".concat(this.$t("message.createTable.resource"),")")},{value:1,label:"DWD(".concat(this.$t("message.createTable.detailLevel"),")")},{value:2,label:"DWS(".concat(this.$t("message.createTable.sumData"),")")},{value:3,label:"ADS(".concat(this.$t("message.createTable.appData"),")")}]},{key:"useWay",name:this.$t("message.createTable.actionType"),inputType:"select",opt:[{value:0,label:this.$t("message.createTable.noeWrite")},{value:1,label:this.$t("message.createTable.ZSGC")},{value:2,label:this.$t("message.createTable.FG")},{value:3,label:this.$t("message.createTable.OED")}]},{key:"externalUse",name:this.$t("message.createTable.isUse"),inputType:"radio",toolTip:this.$t("message.createTable.isDwsExeis"),opt:[{value:1,label:"yes"},{value:0,label:"no"}]}],rules:{partitionTable:[{required:!0,type:"number",message:this.$t("message.createTable.selectPartitionType"),trigger:"blur"}],lifecycle:[{required:!0,type:"number",message:this.$t("message.createTable.selectLife"),trigger:"blur"}],modelLevel:[{required:!0,type:"number",message:this.$t("message.createTable.selectModuleLevel"),trigger:"blur"}],useWay:[{required:!0,type:"number",message:this.$t("message.createTable.selectUseType"),trigger:"blur"}],externalUse:[{required:!0,type:"number",message:this.$t("message.createTable.selectIsUse"),trigger:"blur"}]}}]}},mounted:function(){var e=this;this.$nextTick((function(){e.setDbList()}))},methods:{setDbList:function(){if(this.dbList.length){var e=this.info[0].map[0].opt=this.dbList.map((function(e){return{label:e.name,value:e.name}}));this.attrInfo.basic.database=e[0].value,this.currentDb=0}},handleTbInput:Object(n["debounce"])((function(e,t,s){var i=s.dbList[s.currentDb].children,a=i.find((function(t){return t.name===e}));return a?t(new Error(r.$t("message.createTable.canned"))):t()}),300),closeTab:function(){this.$emit("close-tab")},nextStep:function(){var e=this;this.$refs.basicAttr[0].validate((function(t){if(!t)return e.$Message.warning(e.$t("message.newConst.failedNotice"));e.$refs.modelAttr[0].validate((function(t){if(!t)return e.$Message.warning(e.$t("message.newConst.failedNotice"));e.$emit("next-step",e.info)}))}))},handleChange:function(e,t){var s=t.opt.findIndex((function(t){return t.value===e[0]}));"database"===t.key&&(this.currentDb=s,this.dbList[s].length||this.$emit("get-tables",this.dbList[s].name))}}},c=o,l=s("2877"),d=Object(l["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},"90db":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"visual-analysis"},[s("iframe",{attrs:{id:"iframe",src:e.visualSrc,frameborder:"0"}}),s("Modal",{attrs:{title:e.$t("message.workBench.body.visualAnalysis.modalTitle")},on:{"on-ok":e.confirm,"on-cancel":e.cancel},model:{value:e.project.show,callback:function(t){e.$set(e.project,"show",t)},expression:"project.show"}},[s("Select",{model:{value:e.project.id,callback:function(t){e.$set(e.project,"id",t)},expression:"project.id"}},e._l(e.apps,(function(t){return s("Option",{key:t.id,staticStyle:{width:"200px"},attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1)],1)},a=[],n=(s("96cf"),s("3b8d")),r=s("b593"),o={props:{work:{type:Object,required:!0}},data:function(){var e=this.getWaterMask(),t=this.getUserName(),s=this.getVsBiUrl(),i=this.work.params,a=i.viewId,n=i.projectId,r=i.isSaved,o="".concat(s,"/dss/visualis/#/project/").concat(n,"/widget"),c="".concat(o,"/add?viewId=").concat(a,"&isWterMask=").concat(e,"&username=").concat(t),l="".concat(o,"/").concat(a),d=r?l:c;return{srcPre:o,visualSrc:d,project:{show:!1,id:n,data:{}},apps:[]}},beforeDestroy:function(){window.removeEventListener("message",this.fn,!1)},mounted:function(){var e=this;this.hiddenArrow(),this.fn=function(t){if("string"===typeof t.data){var s=JSON.parse(t.data);"saveWidget"===s.type&&(e.queryApplication(),e.project.show=!0,delete s.type,e.project.data=s)}},window.addEventListener("message",this.fn,!1)},methods:{queryApplication:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].fetch("/application/list");case 2:t=e.sent,this.apps=t.applications;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),saveWidgetToDws:function(e){var t=this;e=Object.assign(e,{projectId:this.project.id});var s=this.getVsBiUrl();r["a"].fetch("".concat(s,"/api/rest_j/v1/visualis/widgets"),e).then((function(){t.$Message.success(t.$t("message.constants.success.save"))}))},confirm:function(){this.saveWidgetToDws(this.project.data)},cancel:function(){},hiddenArrow:function(){var e=document.getElementById("iframe"),t=e.contentWindow;t.onload=function(){var e=t.document.querySelector(".anticon.anticon-left");e.style.display="none"}}}},c=o,l=(s("35a1"),s("2877")),d=Object(l["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},"91ed":function(e,t,s){},"91f4":function(e,t,s){"use strict";var i=s("b073"),a=s.n(i);a.a},9267:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{staticClass:"table-row",attrs:{width:"700"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"table-row-header"},[s("span",[e._v(e._s(e.$t("message.container.tableRow.detail")))]),s("Input",{staticClass:"table-row-input",attrs:{size:"small",placeholder:e.$t("message.container.tableRow.search")},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1)]),s("div",[s("Table",{staticClass:"table-row-table",attrs:{stripe:"",columns:e.columns,data:e.filterRow,"max-height":500}})],1),s("div",{attrs:{slot:"footer"},slot:"footer"})])},a=[],n=(s("3b2b"),s("9865"),s("4917"),s("57e7"),s("f3e2"),s("ac6a"),s("456d"),s("d25f"),s("2ef0")),r={props:{row:{type:Object,default:function(){}}},data:function(){return{show:!1,columns:[{type:"index",width:60,align:"center"},{title:this.$t("message.container.tableRow.columnName"),key:"columnName"},{title:this.$t("message.container.tableRow.value"),key:"value"},{title:this.$t("message.container.tableRow.dataType"),key:"dataType"}],formattedRow:[],filterRow:[],searchText:""}},watch:{searchText:function(e){e?this.filter(this):this.filterRow=this.formattedRow}},methods:{open:function(){this.show=!0,this.format()},format:function(){var e=this;this.formattedRow=[];var t=Object.keys(this.row);t.forEach((function(t){if("cellClassName"!==t){var s=t.slice(t.indexOf(":")+1,t.indexOf(",")),i=t.slice(t.match("dataType").index+9,t.lastIndexOf(",")),a=e.row[t],n={cellClassName:{},columnName:s,value:a,dataType:i};"NULL"===s?n.cellClassName.columnName="is-null":"NULL"===i?n.cellClassName.dataType="is-null":"NULL"===a&&(n.cellClassName.value="is-null"),e.formattedRow.push(n)}})),this.filterRow=this.formattedRow},filter:Object(n["debounce"])((function(e){var t=new RegExp(".*".concat(e.searchText,".*"));e.filterRow=e.formattedRow.filter((function(e){return t.test(e.columnName)||t.test(e.value)||t.test(e.dataType)}))}),500)}},o=r,c=s("2877"),l=Object(c["a"])(o,i,a,!1,null,null,null);t["default"]=l.exports},"96d5":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isSkip?s("iframe",{attrs:{id:"iframeName",src:e.visualSrc,frameborder:"0",width:"100%",height:e.height}}):s("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"},style:{height:e.height+"px"}},[s("span",[e._v(e._s(e.info))])])])},a=[],n=s("daf6"),r={mixins:[n["default"].mixin],data:function(){return{height:0,visualSrc:null,isSkip:!1,info:"请在跳转页面查看……"}},mounted:function(){this.height=this.$route.query.height,this.init()},methods:{init:function(){if(this.$route.query.isSkip){var e=this.$route.query.errCode,t="dev"===n["default"].data.ENVIR?"test.com":window.location.host;this.visualSrc="http://".concat(t,"/dss/help/errorcode/").concat(e,".html"),this.isSkip=!0}else this.isSkip=!1,this.info="请在跳转页面查看……",this.linkTo();this.height||(this.height=window.innerHeight-230)},linkTo:function(){var e=this,t=window.open("about:blank");setTimeout((function(){t.location.href=e.getFAQUrl()}),500)}}},o=r,c=s("2877"),l=Object(c["a"])(o,i,a,!1,null,null,null);t["default"]=l.exports},"99cc":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{staticClass:"associate-script",attrs:{width:"430"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",[e._v(e._s(e.$t("message.process.associateBar.XZGLJB")))])]),s("div",[s("Form",{ref:"associateScript",attrs:{model:e.form,rules:e.rules,"label-width":90}},[s("FormItem",{attrs:{prop:"selectedPath",label:e.$t("message.process.associateBar.XZLJ")}},[s("directory-dialog",{staticClass:"save-as-modal-path",attrs:{tree:e.fileTree,"load-data-fn":e.loadDataFn,"filter-node":e.filterNode,path:e.form.selectedPath,"fs-type":"script"},on:{"set-node":e.setNode}})],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{loading:e.isLoading,type:"primary"},on:{click:e.submit}},[e._v(e._s(e.$t("message.process.associateBar.QD")))])],1)])},a=[],n=(s("7514"),s("9865"),s("96cf"),s("3b8d")),r=s("2ef0"),o=s("7138"),c=s("ed93"),l={components:{directoryDialog:c["a"]},data:function(){return{show:!1,form:{selectedPath:""},fileTree:[],filterNode:function(){},loadDataFn:function(){},isLoading:!1,rules:{selectedPath:[{required:!0,message:this.$t("message.process.associateBar.XZYGJB"),trigger:"blur"}]},nodeData:null,supportModes:null}},methods:{open:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.reset(),this.show=!0,this.nodeData=t,this.supportModes=this.getSupportModes(),this.setFilterNode();case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),reset:function(){this.form.selectedPath="",this.nodeData=null,this.$refs.associateScript.resetFields()},setFilterNode:function(){var e=this;this.fileTree=[],this.$nextTick((function(){e.setFileTree()})),this.filterNode=function(t){var s=e.nodeData.type.slice(e.nodeData.type.lastIndexOf(".")+1,e.nodeData.type.length),i=e.supportModes.find((function(e){return e.rule.test(t.label)&&e.flowType===s}));return!t.isLeaf||t.isLeaf&&i}},setNode:function(e,t){this.form.selectedPath=e.path},setFileTree:function(){var e=this;if(Object(r["isEmpty"])(this.fileTree)){var t=o["a"].get("scriptTree","SESSION");!t||t&&Object(r["isEmpty"])(t)?this.dispatch("WorkSidebar:showTree",(function(t){e.shareComponent=t,t.getRootPath((function(s){t.getTree((function(s){s&&(e.fileTree.push(s),e.loadDataFn=t.loadDataFn)}))}))})):(this.fileTree=Object(r["cloneDeep"])(t),this.shareComponent?this.loadDataFn=this.shareComponent.loadDataFn:this.dispatch("WorkSidebar:showTree",(function(t){e.shareComponent=t,e.loadDataFn=t.loadDataFn})))}},submit:function(){var e=this;this.isLoading||this.$refs.associateScript.validate((function(t){t?(e.isLoading=!0,e.$emit("click",e.nodeData,e.form.selectedPath,(function(){e.isLoading=!1,e.show=!1}))):e.$Message.warning(e.$t("message.process.associateBar.CKYZ"))}))}}},d=l,u=s("2877"),h=Object(u["a"])(d,i,a,!1,null,null,null);t["default"]=h.exports},"9a04":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-bgc"},[i("div",{staticClass:"page-bgc-header"},[i("div",{staticClass:"header-info"},[i("h1",[e._v(e._s(e.$t("message.project.infoHeader")))]),i("p",[e._v(e._s(e.$t("message.project.infoBodyFirstRow")))]),i("p",[e._v(e._s(e.$t("message.project.infoBodySecondRow")))])]),i("feature",{on:{"add-project":e.addProject}})],1),e.dataList.length>0?e._l(e.dataList,(function(t){return i("project-content-item",{key:t.id,attrs:{"hide-button-bar":!1,"hide-publish-andcopy":!1,"data-list":t.dwsProjectList,"current-data":t,"precent-list":e.precentList,"tag-prop":"business"},on:{goto:e.gotoWorkflow,modify:e.projectModify,delete:e.deleteProject,copy:e.copyProject,publish:e.publishProject,detail:e.versionDetail}},[i("div",{staticClass:"header-search"},[i("Input",{staticClass:"search-input",attrs:{search:"",placeholder:e.$t("message.project.search")},on:{"on-change":function(s){return e.searchProject(s,t.id)}}}),i("Dropdown",{staticClass:"sort-icon",on:{"on-click":function(s){return e.sortTypeChange(s,t.id)}}},[e._v("\n          "+e._s(e.sortType[t.id])+"\n          "),i("svg",{staticClass:"icon",attrs:{t:"1569743752958",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3388",width:"16",height:"16"}},[i("path",{attrs:{d:"M0 90.4h361.5v90.4h-361.5v-90.4z",fill:"","p-id":"3389"}}),i("path",{attrs:{d:"M0 512h512.1v90.4h-512.1v-90.4z",fill:"","p-id":"3390"}}),i("path",{attrs:{d:"M0 928.267h994.1v90.4h-994.1v-90.4z",fill:"","p-id":"3391"}}),i("path",{attrs:{d:"M753.1 0h90.4v722.8h-90.4v-722.8z",fill:"","p-id":"3392"}}),i("path",{attrs:{d:"M1024 575.801l-61.3-63.7-164.4 194.7-164.5-194.7-61.3 63.7 225.801 267.3 57.5-68.1z",fill:"","p-id":"3393"}})]),i("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.sortTypeList,(function(t){return i("DropdownItem",{key:t.value,attrs:{name:t.value}},[e._v("\n              "+e._s(t.lable)+"\n            ")])})),1)],1)],1)])})):[i("div",{staticClass:"no-data-bgc"},[i("img",{staticClass:"no-data-img",attrs:{src:s("30a0"),alt:e.$t("message.project.noData")}})])],i("Modal",{attrs:{title:e.$t("message.project.deleteProject")},on:{"on-ok":e.deleteProjectConfirm},model:{value:e.deleteProjectShow,callback:function(t){e.deleteProjectShow=t},expression:"deleteProjectShow"}},[e._v("\n    "+e._s(e.$t("message.project.confirmDeleteProject"))+e._s(e.deleteProjectItem.name)+"?\n    "),i("br"),i("br"),i("div",{staticClass:"radio-box"},[i("Radio",{attrs:{size:"large"},model:{value:e.deleteProjectItem.ifDelScheduler,callback:function(t){e.$set(e.deleteProjectItem,"ifDelScheduler",t)},expression:"deleteProjectItem.ifDelScheduler"}},[e._v(e._s(e.$t("message.project.deleteWtss")))])],1)]),i("ProjectForm",{ref:"projectForm",attrs:{"action-type":e.actionType,"project-data":e.currentProjectData,"classify-list":e.cacheData,"add-project-show":e.ProjectShow},on:{show:e.ProjectShowAction,confirm:e.ProjectConfirm}}),i("Modal",{attrs:{title:e.commonTitle,width:"VersionDetail"===e.currentForm?"910":"520","footer-hide":"VersionDetail"===e.currentForm},on:{"on-ok":e.commonComfirm,"on-cancel":e.commonCancel},model:{value:e.projectModelShow,callback:function(t){e.projectModelShow=t},expression:"projectModelShow"}},[e.projectModelShow?i(e.currentForm,{ref:"publish",tag:"component",attrs:{"current-project-data":e.currentProjectData},on:{modelHidden:e.modelHidden}}):e._e()],1),e.loading?i("Spin",{attrs:{size:"large",fix:""}}):e._e()],2)},a=[],n=(s("28a5"),s("55dd"),s("57e7"),s("6d67"),s("7f7f"),s("d25f"),s("ac6a"),s("f3e2"),s("ec7c")),r=s("b491"),o=s("42d2"),c=s("466c"),l=s("1890"),d=s("256d"),u=s("6751"),h=s("7138"),p=s("b593"),f=s("d958"),m=s.n(f),g={components:{projectContentItem:n["a"],ProjectForm:r["default"],VersionDetail:l["default"],copyForm:o["default"],publishForm:c["default"].component.publish,resource:d["default"],feature:u["default"]},data:function(){return{ProjectShow:!1,deleteProjectShow:!1,deleteProjectItem:"",actionType:"",loading:!1,projectModelShow:!1,currentProjectClassify:{name:"",descipte:""},currentProjectData:{name:"",description:"",taxonomyID:1,business:"",applicationArea:"",product:""},dataList:[],cacheData:[],currentForm:"publishForm",commonTitle:"",precentList:[],sortType:{},showResourceView:!1,projectResources:[],activeItem:{}}},computed:{sortTypeList:function(){return[{lable:this.$t("message.project.sortUpdateTime"),value:"updateTime"},{lable:this.$t("message.project.sortName"),value:"name"}]},tips:function(){return this.$t("message.project.tips")}},created:function(){this.getclassListData()},mounted:function(){var e=this;this.$nextTick((function(){e.precentList=h["a"].get("precentList")||[]}))},methods:{getclassListData:function(){var e=this;return this.loading=!0,p["a"].fetch("/dss/tree",{},"get").then((function(t){return e.cacheData=t.data,e.dataList=e.cacheData,e.activeItem=e.dataList[0],e.dataList.forEach((function(t){e.sortType[t.id]=e.$t("message.project.updteTime")})),e.sortTypeChange(),h["a"].set("projectList",e.cacheData,"local"),e.loading=!1,e.cacheData}))},addProject:function(){this.ProjectShow=!0,this.actionType="add",this.init()},ProjectConfirm:function(e){var t=this,s=this.cacheData.filter((function(t){return t.id===e.taxonomyID}));if(this.checkName(s[0].dwsProjectList,e.name,e.id))return this.$Message.warning(this.$t("message.project.nameUnrepeatable"));this.loading=!0,"add"===this.actionType?p["a"].fetch("/dss/addProject",e,"post").then((function(){t.$Message.success("".concat(t.$t("message.project.createProject")).concat(t.$t("message.newConst.success"))),t.getclassListData().then((function(s){var i=s[0].dwsProjectList.filter((function(t){return t.name===e.name}))[0];t.$router.push({name:"Workflow",query:{projectTaxonomyID:1,projectID:i.latestVersion.projectID,projectVersionID:i.latestVersion.id}})}))})).catch((function(){t.loading=!1})):p["a"].fetch("/dss/updateProject",e,"post").then((function(){t.$Message.success(t.$t("message.project.eidtorProjectSuccess",{name:e.name})),t.getclassListData()})).catch((function(){t.loading=!1,t.currentProjectData.business=t.$refs.projectForm.originBusiness}))},deleteProject:function(e){this.deleteProjectShow=!0,this.deleteProjectItem=e,this.deleteProjectItem.ifDelScheduler=!1},deleteProjectConfirm:function(){var e=this;this.loading=!0;var t={id:this.deleteProjectItem.id,sure:!1,ifDelScheduler:this.deleteProjectItem.ifDelScheduler};p["a"].fetch("/dss/deleteProject",t,"post").then((function(s){e.loading=!1,s.warmMsg?e.$Modal.confirm({title:e.$t("message.project.deleteTitle"),content:s.warmMsg,onOk:function(){t.sure=!0,e.loading=!0,p["a"].fetch("/dss/deleteProject",t,"post").then((function(){e.$Message.success("".concat(e.$t("message.project.deleteProject")).concat(e.deleteProjectItem.name).concat(e.$t("message.newConst.success"))),e.getclassListData()})).catch((function(){e.loading=!1}))},onCancel:function(){}}):(e.$Message.success(e.$t("message.project.deleteProjectSuccess",{name:e.deleteProjectItem.name})),e.getclassListData())})).catch((function(){e.loading=!1}))},init:function(){this.currentProjectClassify={name:"",description:""},this.currentProjectData={name:"",description:"",taxonomyID:1,business:"",applicationArea:"",product:""}},projectModify:function(e,t){this.init(),this.ProjectShow=!0,this.actionType="modify",this.currentProjectData=t,this.currentProjectData.taxonomyID=e},ProjectShowAction:function(e){this.ProjectShow=e},gotoWorkflow:function(e,t){h["a"].set("currentProject",t);var s={projectTaxonomyID:e.id,projectID:t.id,projectVersionID:t.latestVersion.id,projectName:t.name};this.$router.push({name:"Workflow",query:s}),this.dispatch("IndexedDB:clearProjectCache"),this.dispatch("IndexedDB:addProjectCache",{projectID:t.id,value:{projectData:s}})},searchProject:function(e,t){if(e.target.value){var s=h["a"].get("projectList","local");this.dataList=s.map((function(s){return t===s.id&&(s.dwsProjectList=s.dwsProjectList.filter((function(t){return-1!=t.name.indexOf(e.target.value)}))),s}))}else this.dataList=h["a"].get("projectList","local");this.sortTypeChange()},checkName:function(e,t,s){var i=!1;return e.map((function(e){e.name===t&&e.id!==s&&(i=!0)})),i},active:function(e){var t=this;this.activeItem=e,e?(this.loading=!0,p["a"].fetch("/dss/tree?projectTaxonomyID=".concat(e.id),"get").then((function(e){t.dataList=e.data,t.sortTypeChange(),t.loading=!1})).catch((function(){t.loading=!1}))):this.getclassListData()},copyProject:function(e,t){this.init(),this.currentForm="copyForm",this.currentProjectData=t,this.currentProjectData.taxonomyID=e,this.commonTitle=this.$t("message.project.projectCopy"),this.projectModelShow=!0},publishProject:function(e,t){this.init(),this.currentForm="publishForm",this.currentProjectData=t,this.currentProjectData.taxonomyID=e,this.commonTitle=this.$t("message.project.projectPublish"),this.projectModelShow=!0},versionDetail:function(e,t){this.init(),this.currentForm="VersionDetail",this.currentProjectData=t,this.currentProjectData.taxonomyID=e,this.commonTitle=this.$t("message.project.projectVersion"),this.projectModelShow=!0},commonComfirm:function(){var e=this;if("copyForm"===this.currentForm){var t=function(t){var s=e.cacheData.filter((function(t){return t.id===e.currentProjectData.taxonomyID}));if(e.checkName(s[0].dwsProjectList,t,e.currentProjectData.id))return e.$Message.warning(e.$t("message.project.nameUnrepeatable"))};this.dispatch("Project:copy",t)}else"publishForm"===this.currentForm&&(this.$refs.publish.publish(),this.currentProjectData.percent="2%",this.precentList.push(this.currentProjectData),h["a"].set("precentList",this.precentList))},commonCancel:function(){"copyForm"===this.currentForm?this.dispatch("Project:copyReset"):this.currentForm},modelHidden:function(e){this.projectModelShow=e,this.getclassListData()},"Project:loading":function(e){this.loading=e},"Project:getData":function(){this.getclassListData(),this.precentList=h["a"].get("precentList")||[]},"Project:updataPercent":function(e){this.precentList=this.precentList.map((function(t){return t.id===e.id&&(t=e),t})),h["a"].set("precentList",this.precentList)},arraySortByName:function(e){var t=this;return void 0===e||null===e?[]:(e.sort((function(e,s){var i=e.name,a=s.name;if(void 0===i||null===i||""===i||" "===i||"　"===i)return-1;if(void 0===a||null===a||""===a||" "===a||"　"===a)return 1;var n=i.split("");for(var r in n)if(0!==t.charCompare(i[r],a[r]))return t.charCompare(i[r],a[r]);return-1})),e.sort((function(e){return"我的工程"===e.name||"我参与的工程"===e.name?-1:void 0})))},charCompare:function(e,t){return void 0===e||null===e||""===e||" "===e||"　"===e?-1:void 0===t||null===t||""===t||" "===t||"　"===t?1:(this.notChinese(e)||(e=m()(e)[0][0]),this.notChinese(t)||(t=m()(t)[0][0]),e.localeCompare(t))},notChinese:function(e){var t=e.charCodeAt(0);return t>=0&&t<=128},sortTypeChange:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"updateTime",s=arguments.length>1?arguments[1]:void 0;this.sortType[s]="updateTime"===t?this.$t("message.project.updteTime"):this.$t("message.project.name"),this.dataList=this.dataList.map((function(i){return s&&s!==i.id||(i.dwsProjectList=i.dwsProjectList.sort((function(s,i){return"updateTime"===t?i.latestVersion[t]-s.latestVersion[t]:e.charCompare(s[t],i[t])}))),i}))},showResourceViewAction:function(e,t){this.showResourceView=!0,this.projectResources=t.projectResources=[]},updateResources:function(e){this.projectResources=e.map((function(e){return{fileName:e.fileName,resourceId:e.resourceId,version:e.version}}))},gotoScriptis:function(){this.$router.push("/home")}}},b=g,v=(s("a7f2"),s("2877")),y=Object(v["a"])(b,i,a,!1,null,"ce1cef5e",null);t["default"]=y.exports},"9a70":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"workflow-resource"},[s("div",{staticClass:"workflow-resource-upload"},[s("Upload",{ref:"upload",attrs:{action:e.updateUrl,headers:e.headers,data:e.uploadData,"default-file-list":e.uploadFiles,"max-size":e.maxSize,"before-upload":e.beforeUpload,"on-success":e.handleSuccess,"on-error":e.handleError,"on-progress":e.handleProgress,"on-exceeded-size":e.exceededSize,"on-remove":e.handleRemove,"on-preview":e.handlePreview,type:"drag",disabled:e.readonly}},[s("div",{staticStyle:{padding:"20px 0"}},[s("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),s("p",{staticClass:"el-upload__text"},[e._v(e._s(e.$t("message.process.resourceBar.TZDLSC")))])],1)])],1),e.isUploading?s("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)},a=[],n=(s("7f7f"),s("7514"),s("6d67"),s("2ef0")),r=s("b593"),o=s("83f2"),c=s("bbdf"),l={props:{resources:{type:Array,default:function(){return[]}},flowName:String,isRipetition:{type:Boolean,default:!1},nodeType:{type:String,default:""},readonly:{type:Boolean,default:!1}},data:function(){return{uploadFiles:[],updateUrl:"",uploadData:null,msg:null,path:null,maxSize:0,isUploading:!1}},computed:{headers:function(){return{}}},watch:{resources:function(e,t){this.setData(),e.length||this.reset()}},mounted:function(){this.init()},methods:{init:function(){this.updateUrl="".concat(o["default"].data.API_PATH,"bml/upload"),this.uploadData={system:"WTSS",isExpire:!0},this.maxSize=1024e3},setData:function(){this.resources.length&&(this.uploadFiles=this.resources.map((function(e){return e.name=e.fileName,e})))},reset:function(){this.uploadFiles=[],this.msg=null,this.path=null},beforeUpload:function(e){var t=this.uploadFiles.find((function(t){return t.name===e.name})),s=/^[-.\w\u4e00-\u9fa5]{1,200}\.[A-Za-z]+$/,i=e.size>=104857600;if(this.isRipetition){if(this.nodeType===c["b"].SPARKPY){if(!/\.zip$/i.test(e.name))return this.$Message.warning(this.$t("message.process.resourceBar.PYSPARKNODE")),!1}else if(this.nodeType===c["b"].SPARKSQL&&!/\.jar$/i.test(e.name))return this.$Message.warning(this.$t("message.process.resourceBar.SPARKNOSW")),!1;t&&(this.uploadData.resourceId=t.resourceId)}return t&&!this.isRipetition?(this.$Message.warning(this.$t("message.process.resourceBar.WJYCZ")),!1):s.test(e.name)?i?(this.$Message.warning(this.$t("message.process.resourceBar.SCBCG100")),!1):void 0:(this.$Message.warning(this.$t("message.process.resourceBar.WJMCBHF")),!1)},handleSuccess:function(e,t,s){0===e.status?(this.$Message.success(this.$t("message.process.resourceBar.SCCG",{name:t.name})),this.isRipetition&&(Object(n["remove"])(s,(function(e){return e.name===t.name&&e.resourceId!==t.resourceId})),Object(n["remove"])(this.uploadFiles,(function(e){return e.name===t.name}))),this.uploadFiles.push(Object.assign(t,{fileName:t.name,resourceId:e.data.resourceId,version:e.data.version})),this.$emit("update-resources",this.uploadFiles)):(Object(n["remove"])(s,(function(e){return e.name===t.name})),this.$Message.warning(e.message)),this.isUploading=!1},handleError:function(e,t,s){this.$Message.error(t.message),this.isUploading=!1},handleProgress:function(e,t,s){"uploading"===t.status?this.isUploading=!0:this.isUploading=!1},exceededSize:function(e,t){this.$Message.warning(this.$t("message.process.resourceBar.WJCCXE"))},handleRemove:function(e,t){var s=this;r["a"].fetch("/bml/deleteResource",{resourceId:e.resourceId},"post").then((function(t){Object(n["remove"])(s.uploadFiles,(function(t){return t.resourceId===e.resourceId})),s.$emit("update-resources",s.uploadFiles),s.$Message.success(s.$t("message.process.resourceBar.WJBSC",{name:e.name}))}))},handlePreview:function(e,t){}}},d=l,u=(s("608f"),s("2877")),h=Object(u["a"])(d,i,a,!1,null,null,null);t["default"]=h.exports},"9c5a":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{attrs:{title:e.$t("message.workflow.versionDetail"),"footer-hide":!0,width:"810"},model:{value:e.versionDetail,callback:function(t){e.versionDetail=t},expression:"versionDetail"}},[s("div",{staticClass:"version-content"},[s("Table",{attrs:{columns:e.columns,data:e.versionData,"max-height":"600",border:""},scopedSlots:e._u([{key:"action",fn:function(t){var i=t.row;return[s("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.viewVersion(i)}}},[e._v(e._s(e.$t("message.workflow.open")))])]}}])})],1)])},a=[],n=s("c1df"),r=s.n(n),o={props:{versionDetailShow:{type:Boolean,default:!1},versionData:{type:Array,defatult:[]}},data:function(){return{versionDetail:!1}},watch:{versionDetailShow:function(e){this.versionDetail=e},versionDetail:function(e){this.$emit("versionDetailShow",e)}},computed:{columns:function(){return[{title:this.$t("message.project.version"),key:"version",width:130,align:"center"},{title:this.$t("message.project.updator"),key:"updator",width:130,align:"center"},{title:this.$t("message.project.comment"),key:"comment",width:200,align:"center"},{title:this.$t("message.project.uptateTime"),key:"updateTime",width:186,align:"center",render:function(e,t){return e("span",{},r()(t.row.updateTime).format("YYYY-MM-DD HH:mm:ss"))}},{title:this.$t("message.project.action"),slot:"action",align:"center",width:130}]}},created:function(){},methods:{viewVersion:function(e){this.versionDetail=!1,this.$emit("goto",e)}}},c=o,l=(s("5d9e"),s("2877")),d=Object(l["a"])(c,i,a,!1,null,"350c8cf5",null);t["default"]=d.exports},"9ca7":function(e,t,s){e.exports=s.p+"img/flow.30898144.svg"},"9f24":function(e,t,s){"use strict";s.r(t),t["default"]={name:"Workflow",data:{API_PATH:"http://localhost:8088/api/rest_j/v1/"},component:function(){return Promise.resolve().then(s.bind(null,"6bb7"))}}},"9f2c":function(e,t,s){},a015:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"process-module"},[s("vueProcess",{ref:"process",attrs:{shapes:e.shapes,value:e.originalData,"ctx-menu-options":e.nodeMenuOptions,"view-options":e.viewOptions,disabled:e.workflowIsExecutor},on:{change:e.change,message:e.message,"node-click":e.click,"node-dblclick":e.dblclick,"node-baseInfo":e.saveNodeBaseInfo,"node-param":e.saveNodeParam,"node-delete":e.nodeDelete,"ctx-menu-associate":e.checkAssociated,add:e.addNode,"ctx-menu-relySelect":e.relySelect,"ctx-menu-mycopy":e.copyNode,"ctx-menu-mypaste":e.pasteNode,"ctx-menu-allDelete":e.allDelete,"ctx-menu-console":e.openConsole}},[e.myReadonly||"flow"!==e.type?e._e():[s("div",{staticClass:"button",attrs:{title:e.$t("message.process.params")},on:{click:function(t){return t.stopPropagation(),e.showParamView(t)}}},[s("svg",{ref:"paramButton",staticClass:"icon",attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1275"}},[s("path",{attrs:{d:"M192.402 273.2c-69.475 0-126 56.525-126 126s56.525 126 126 126 126-56.525 126-126-56.525-126-126-126zM192.402 448.4c-27.129 0-49.2-22.071-49.2-49.2s22.071-49.2 49.2-49.2 49.2 22.071 49.2 49.2-22.075 49.2-49.2 49.2z",fill:"","p-id":"1276"}}),s("path",{attrs:{d:"M192.402 242c23.861 0 43.2-19.339 43.2-43.2v-92.4c0-23.861-19.339-43.2-43.2-43.2s-43.2 19.339-43.2 43.2v92.4c0 23.861 19.339 43.2 43.2 43.2z",fill:"","p-id":"1277"}}),s("path",{attrs:{d:"M192.402 557.6c-23.861 0-43.2 19.339-43.2 43.2v319.2c0 23.861 19.339 43.2 43.2 43.2s43.2-19.339 43.2-43.2v-319.2c0-23.861-19.344-43.2-43.2-43.2z",fill:"","p-id":"1278"}}),s("path",{attrs:{d:"M516.224 389.216c-69.471 0-125.995 56.525-125.995 126s56.52 126 125.995 126c69.48 0 126-56.52 126-126s-56.52-126-126-126zM516.224 564.416c-27.125 0-49.195-22.071-49.195-49.2s22.071-49.2 49.195-49.2c27.134 0 49.2 22.071 49.2 49.2s-22.066 49.2-49.2 49.2z",fill:"","p-id":"1279"}}),s("path",{attrs:{d:"M516.229 356c23.856 0 43.2-19.339 43.2-43.2v-207.6c0-23.861-19.339-43.2-43.2-43.2-23.861 0-43.2 19.339-43.2 43.2v207.6c0 23.861 19.344 43.2 43.2 43.2z",fill:"","p-id":"1280"}}),s("path",{attrs:{d:"M516.229 676.4c-23.861 0-43.2 19.339-43.2 43.2v199.2c0 23.861 19.339 43.2 43.2 43.2 23.856 0 43.2-19.339 43.2-43.2v-199.2c0-23.861-19.339-43.2-43.2-43.2z",fill:"","p-id":"1281"}}),s("path",{attrs:{d:"M840.061 499.083c-69.48 0-126 56.52-126 126 0 69.475 56.52 125.995 126 125.995s126-56.52 126-125.995c0-69.48-56.525-126-126-126zM840.061 674.278c-27.129 0-49.2-22.071-49.2-49.195 0-27.129 22.071-49.2 49.2-49.2s49.2 22.071 49.2 49.2c0 27.125-22.071 49.195-49.2 49.195z",fill:"","p-id":"1282"}}),s("path",{attrs:{d:"M840.061 466.4c23.861 0 43.2-19.339 43.2-43.2v-318c0-23.861-19.339-43.2-43.2-43.2s-43.2 19.339-43.2 43.2v318c0 23.861 19.339 43.2 43.2 43.2z",fill:"","p-id":"1283"}}),s("path",{attrs:{d:"M840.061 786.8c-23.861 0-43.2 19.339-43.2 43.2v88.8c0 23.861 19.339 43.2 43.2 43.2s43.2-19.339 43.2-43.2v-88.8c0-23.861-19.344-43.2-43.2-43.2z",fill:"","p-id":"1284"}})]),s("span",[e._v(e._s(e.$t("message.process.params")))])]),s("div",{staticClass:"devider"}),s("div",{staticClass:"button",attrs:{title:e.$t("message.process.resource")},on:{click:function(t){return t.stopPropagation(),e.showResourceView(t)}}},[s("svg",{ref:"resourceButton",staticClass:"icon",attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2276",width:"16",height:"16"}},[s("path",{attrs:{d:"M111.395066 570.932204l87.488587 0 0 255.842922-87.488587 0 0-255.842922Z","p-id":"2277"}}),s("path",{attrs:{d:"M825.115324 570.932204l87.488587 0 0 255.842922-87.488587 0 0-255.842922Z","p-id":"2278"}}),s("path",{attrs:{d:"M111.395066 826.775126l801.208844 0 0 87.866187-801.208844 0 0-87.866187Z","p-id":"2279"}}),s("path",{attrs:{d:"M563.245128 722.759121 463.476867 722.759121 463.476867 287.760866 320.414567 429.16234 256.453836 365.201609 512.296759 109.358687 768.138658 365.201609 704.178951 429.16234 561.710169 290.830785Z","p-id":"2280"}})]),s("span",[e._v(e._s(e.$t("message.process.resource")))])]),s("div",{staticClass:"devider"}),e.workflowIsExecutor?e._e():s("div",{staticClass:"button",attrs:{title:e.$t("message.process.run")},on:{click:e.workflowRun}},[s("span",{staticClass:"icon fi-play",staticStyle:{"padding-top":"2px"}}),s("span",[e._v(e._s(e.$t("message.process.run")))])]),e.workflowIsExecutor?s("div",{staticClass:"button",attrs:{title:e.$t("message.process.stop")},on:{click:e.workflowStop}},[s("span",{staticClass:"icon fi-stop",staticStyle:{"padding-top":"2px",color:"red"}}),s("span",[e._v(e._s(e.$t("message.process.stop")))])]):e._e(),s("div",{staticClass:"devider"}),s("div",{staticClass:"button",attrs:{title:e.$t("message.process.save")},on:{click:e.showSaveView}},[s("svg",{staticClass:"icon",attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4564"}},[s("path",{attrs:{d:"M176.64 1024c-97.28 0-176.64-80.384-176.64-178.688V178.688c0-98.816 79.36-178.688 176.64-178.688h670.72c97.28 0 176.64 80.384 176.64 178.688V845.312c0 98.816-79.36 178.688-176.64 178.688h-670.72z m0-936.96c-50.688 0-91.648 41.472-91.648 92.16V845.312c0 50.688 40.96 92.16 91.648 92.16h670.72c50.688 0 91.648-41.472 91.648-92.16V178.688c0-50.688-40.96-92.16-91.648-92.16h-3.584v437.248h-663.04v-437.248h-4.096z m581.632 350.208v-350.208h-492.544v350.208h492.544z m-160.768-35.328v-240.128h84.992v240.128h-84.992z","p-id":"4565"}})]),s("span",[e._v(e._s(e.$t("message.process.save")))])])],e.myReadonly||"subFlow"!==e.type?e._e():[s("div",{staticClass:"button",attrs:{title:e.$t("message.process.params")},on:{click:e.showParamView}},[s("svg",{ref:"paramButton",staticClass:"icon",attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1275"}},[s("path",{attrs:{d:"M192.402 273.2c-69.475 0-126 56.525-126 126s56.525 126 126 126 126-56.525 126-126-56.525-126-126-126zM192.402 448.4c-27.129 0-49.2-22.071-49.2-49.2s22.071-49.2 49.2-49.2 49.2 22.071 49.2 49.2-22.075 49.2-49.2 49.2z",fill:"","p-id":"1276"}}),s("path",{attrs:{d:"M192.402 242c23.861 0 43.2-19.339 43.2-43.2v-92.4c0-23.861-19.339-43.2-43.2-43.2s-43.2 19.339-43.2 43.2v92.4c0 23.861 19.339 43.2 43.2 43.2z",fill:"","p-id":"1277"}}),s("path",{attrs:{d:"M192.402 557.6c-23.861 0-43.2 19.339-43.2 43.2v319.2c0 23.861 19.339 43.2 43.2 43.2s43.2-19.339 43.2-43.2v-319.2c0-23.861-19.344-43.2-43.2-43.2z",fill:"","p-id":"1278"}}),s("path",{attrs:{d:"M516.224 389.216c-69.471 0-125.995 56.525-125.995 126s56.52 126 125.995 126c69.48 0 126-56.52 126-126s-56.52-126-126-126zM516.224 564.416c-27.125 0-49.195-22.071-49.195-49.2s22.071-49.2 49.195-49.2c27.134 0 49.2 22.071 49.2 49.2s-22.066 49.2-49.2 49.2z",fill:"","p-id":"1279"}}),s("path",{attrs:{d:"M516.229 356c23.856 0 43.2-19.339 43.2-43.2v-207.6c0-23.861-19.339-43.2-43.2-43.2-23.861 0-43.2 19.339-43.2 43.2v207.6c0 23.861 19.344 43.2 43.2 43.2z",fill:"","p-id":"1280"}}),s("path",{attrs:{d:"M516.229 676.4c-23.861 0-43.2 19.339-43.2 43.2v199.2c0 23.861 19.339 43.2 43.2 43.2 23.856 0 43.2-19.339 43.2-43.2v-199.2c0-23.861-19.339-43.2-43.2-43.2z",fill:"","p-id":"1281"}}),s("path",{attrs:{d:"M840.061 499.083c-69.48 0-126 56.52-126 126 0 69.475 56.52 125.995 126 125.995s126-56.52 126-125.995c0-69.48-56.525-126-126-126zM840.061 674.278c-27.129 0-49.2-22.071-49.2-49.195 0-27.129 22.071-49.2 49.2-49.2s49.2 22.071 49.2 49.2c0 27.125-22.071 49.195-49.2 49.195z",fill:"","p-id":"1282"}}),s("path",{attrs:{d:"M840.061 466.4c23.861 0 43.2-19.339 43.2-43.2v-318c0-23.861-19.339-43.2-43.2-43.2s-43.2 19.339-43.2 43.2v318c0 23.861 19.339 43.2 43.2 43.2z",fill:"","p-id":"1283"}}),s("path",{attrs:{d:"M840.061 786.8c-23.861 0-43.2 19.339-43.2 43.2v88.8c0 23.861 19.339 43.2 43.2 43.2s43.2-19.339 43.2-43.2v-88.8c0-23.861-19.344-43.2-43.2-43.2z",fill:"","p-id":"1284"}})]),s("span",[e._v(e._s(e.$t("message.process.params")))])]),s("div",{staticClass:"devider"}),s("div",{staticClass:"button",attrs:{title:e.$t("message.process.resource")},on:{click:e.showResourceView}},[s("svg",{ref:"resourceButton",staticClass:"icon",attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2276",width:"16",height:"16"}},[s("path",{attrs:{d:"M111.395066 570.932204l87.488587 0 0 255.842922-87.488587 0 0-255.842922Z","p-id":"2277"}}),s("path",{attrs:{d:"M825.115324 570.932204l87.488587 0 0 255.842922-87.488587 0 0-255.842922Z","p-id":"2278"}}),s("path",{attrs:{d:"M111.395066 826.775126l801.208844 0 0 87.866187-801.208844 0 0-87.866187Z","p-id":"2279"}}),s("path",{attrs:{d:"M563.245128 722.759121 463.476867 722.759121 463.476867 287.760866 320.414567 429.16234 256.453836 365.201609 512.296759 109.358687 768.138658 365.201609 704.178951 429.16234 561.710169 290.830785Z","p-id":"2280"}})]),s("span",[e._v(e._s(e.$t("message.process.resource")))])]),s("div",{staticClass:"devider"}),e.workflowIsExecutor?e._e():s("div",{staticClass:"button",attrs:{title:e.$t("message.process.run")},on:{click:e.workflowRun}},[s("span",{staticClass:"icon fi-play",staticStyle:{"padding-top":"2px"}}),s("span",[e._v(e._s(e.$t("message.process.run")))])]),e.workflowIsExecutor?s("div",{staticClass:"button",attrs:{title:e.$t("message.process.stop")},on:{click:e.workflowStop}},[s("span",{staticClass:"icon fi-stop",staticStyle:{"padding-top":"2px",color:"red"}}),s("span",[e._v(e._s(e.$t("message.process.stop")))])]):e._e(),s("div",{staticClass:"devider"}),s("div",{staticClass:"button",attrs:{title:e.$t("message.process.save")},on:{click:e.showSaveView}},[s("svg",{staticClass:"icon",attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4564"}},[s("path",{attrs:{d:"M176.64 1024c-97.28 0-176.64-80.384-176.64-178.688V178.688c0-98.816 79.36-178.688 176.64-178.688h670.72c97.28 0 176.64 80.384 176.64 178.688V845.312c0 98.816-79.36 178.688-176.64 178.688h-670.72z m0-936.96c-50.688 0-91.648 41.472-91.648 92.16V845.312c0 50.688 40.96 92.16 91.648 92.16h670.72c50.688 0 91.648-41.472 91.648-92.16V178.688c0-50.688-40.96-92.16-91.648-92.16h-3.584v437.248h-663.04v-437.248h-4.096z m581.632 350.208v-350.208h-492.544v350.208h492.544z m-160.768-35.328v-240.128h84.992v240.128h-84.992z","p-id":"4565"}})]),s("span",[e._v(e._s(e.$t("message.process.save")))])])]],2),s("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:e.isParamModalShow,expression:"isParamModalShow"}],staticClass:"process-module-param"},[s("div",{staticClass:"process-module-param-modal-header"},[s("h3",[e._v(e._s(e.isResourceShow?e.$t("message.process.resource"):e.$t("message.process.params"))+e._s(e.$t("message.process.seting")))])]),s("div",{staticClass:"process-module-param-modal-content"},[s("argument",{directives:[{name:"show",rawName:"v-show",value:!e.isResourceShow,expression:"!isResourceShow"}],attrs:{props:e.props},on:{"change-props":e.onPropsChange}}),s("resource",{directives:[{name:"show",rawName:"v-show",value:e.isResourceShow,expression:"isResourceShow"}],attrs:{resources:e.resources,"flow-name":e.name},on:{"update-resources":e.updateResources}})],1)]),s("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleOutsideClickNode,expression:"handleOutsideClickNode"},{name:"show",rawName:"v-show",value:e.nodebaseinfoShow,expression:"nodebaseinfoShow"}],staticClass:"process-module-param",on:{click:e.clickBaseInfo}},[s("div",{staticClass:"process-module-param-modal-header"},[s("h3",[e._v(e._s(e.$t("message.process.baseInfo")))])]),s("div",{staticClass:"process-module-param-modal-content"},[s("nodeParameter",{attrs:{"node-data":e.clickCurrentNode,"flow-name":e.name,readonly:e.myReadonly,nodes:e.json&&e.json.nodes},on:{saveNode:e.saveNode,paramsChange:e.paramsChange}})],1)]),s("Modal",{attrs:{width:"450"},model:{value:e.saveModal,callback:function(t){e.saveModal=t},expression:"saveModal"}},[s("div",{staticClass:"process-module-title",attrs:{slot:"header"},slot:"header"},[e._v("\n      "+e._s(e.$t("message.process.save"))+"\n    ")]),s("Form",{ref:"formSave",attrs:{model:e.saveModel,"label-width":85}},[s("FormItem",{attrs:{label:e.$t("message.newConst.comment"),prop:"comment",rules:[{required:!0,message:e.$t("message.process.inputComment")},{message:e.$t("message.process.commentLengthLimit"),max:255}]}},[s("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",placeholder:e.$t("message.process.inputComment")},model:{value:e.saveModel.comment,callback:function(t){e.$set(e.saveModel,"comment",t)},expression:"saveModel.comment"}})],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("message.process.confirmSave")))])],1)],1),s("Modal",{model:{value:e.importModal,callback:function(t){e.importModal=t},expression:"importModal"}},[s("div",{staticClass:"process-module-title",attrs:{slot:"header"},slot:"header"},[e._v("\n      "+e._s(e.$t("message.process.importJson"))+"\n    ")]),s("Upload",{ref:"uploadJson",attrs:{type:"drag",multiple:"","before-upload":e.handleUpload,format:[e.json],"max-size":2001e3,action:""}},[s("div",{staticStyle:{padding:"20px 0"}},[s("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),s("p",[e._v(e._s(e.$t("message.process.uplaodJson")))])],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.importModel.names.length,expression:"importModel.names.length"}]},e._l(e.importModel.names,(function(t){return s("div",{key:t},[e._v("\n        "+e._s(t)+"\n      ")])})),0),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary"},on:{click:e.importJSON}},[e._v(e._s(e.$t("message.process.confirmImport")))])],1)],1),e.loading?s("Spin",{attrs:{size:"large",fix:""}}):e._e(),s("Modal",{staticClass:"repetition-name",attrs:{title:e.$t("message.process.nodeNameNotice")},model:{value:e.repetitionNameShow,callback:function(t){e.repetitionNameShow=t},expression:"repetitionNameShow"}},[e._v("\n    "+e._s(e.$t("message.process.repeatNode"))+e._s(e.repeatTitles.join(", "))+"?\n    "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary"},on:{click:e.repetitionName}},[e._v(e._s(e.$t("message.newConst.ok")))])],1)]),s("associate-script",{ref:"associateScript",on:{click:e.associateScript}}),s("Modal",{attrs:{title:e.addNodeTitle},model:{value:e.addNodeShow,callback:function(t){e.addNodeShow=t},expression:"addNodeShow"}},[s("Form",{ref:"addFlowfoForm",attrs:{"label-position":"left","label-width":110,model:e.clickCurrentNode}},[s("FormItem",{attrs:{label:e.$t("message.process.nodeName"),prop:"title",rules:[{required:!0,message:e.$t("message.process.inputNodeName"),trigger:"blur"},{type:"string",pattern:/^[a-zA-Z][a-zA-Z0-9_]*$/,message:e.$t("message.newConst.validNameDesc"),trigger:"change"},{validator:e.validatorName,trigger:"blur"},{min:1,max:128,message:e.$t("message.process.lengthLimit"),trigger:"change"}]}},[s("Input",{attrs:{placeholder:e.$t("message.process.inputNodeName")},model:{value:e.clickCurrentNode.title,callback:function(t){e.$set(e.clickCurrentNode,"title",t)},expression:"clickCurrentNode.title"}})],1),s("FormItem",{attrs:{label:e.$t("message.process.nodeDesc")}},[s("Input",{attrs:{type:"textarea",placeholder:e.$t("message.process.inputNodeDesc")},model:{value:e.clickCurrentNode.desc,callback:function(t){e.$set(e.clickCurrentNode,"desc",t)},expression:"clickCurrentNode.desc"}})],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"text",size:"large"},on:{click:e.addFlowCancel}},[e._v(e._s(e.$t("message.newConst.cancel")))]),s("Button",{attrs:{type:"primary",size:"large"},on:{click:e.addFlowOk}},[e._v(e._s(e.$t("message.newConst.ok")))])],1)],1),e._l(e.json&&e.json.nodes,(function(t){return[e.openningNode&&t.createTime===e.openningNode.createTime?s("console",{key:t.createTime,staticClass:"process-console",style:{left:e.shapeWidth+"px",width:"calc(100% - "+e.shapeWidth+"px)"},attrs:{node:t,stop:e.workflowIsExecutor},on:{"close-console":function(s){return e.closeConsole(t)}}}):e._e()]}))],2)},a=[],n=(s("1c01"),s("58b2"),s("8e6e"),s("7514"),s("78ce"),s("4f7f"),s("1c4c"),s("57e7"),s("4917"),s("bd86")),r=(s("5df3"),s("456d"),s("759f"),s("d25f"),s("8615"),s("6d67"),s("ac6a"),s("f3e2"),s("2caf"),s("7f7f"),s("6762"),s("2fdb"),s("c5f6"),s("dd7d")),o=s("9a70"),c=s("d6c6"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"designer",class:{"show-toolbar":e.showActionView},style:e.getStyle(),on:{mousemove:e.moveShape,mouseup:e.stopMoveShape}},[e.showViews.shapeView?s("ShapeView",{ref:"shapeView",attrs:{shapes:e.myShapes}}):e._e(),e.showActionView?s("ActionView",[e._t("default")],2):e._e(),e.showViews.control?s("ControlView",{on:{format:e.format,resetToOriginalData:e.resetToOriginalData}}):e._e(),s("NodeView",{ref:"designerView",on:{"box-select":e.boxSelectChange,"node-view-scroll":e.nodeViewScroll}}),e.state.editBaseInfoNode?s("BaseInfo",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.closeBaseInfo,expression:"closeBaseInfo"}],attrs:{node:e.state.editBaseInfoNode}}):e._e(),e.state.editParamNode?s("ParamInfo",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.closeParam,expression:"closeParam"}],attrs:{node:e.state.editParamNode}}):e._e()],1)},d=[];!function(e){var t,s='<svg><symbol id="icon-quanping" viewBox="0 0 1024 1024"><path d="M270.08 64.064l-179.2 0C76.032 64.064 64 76.096 64 90.944l0 178.688c0 0.128 0 0.256 0 0.384C64 284.928 76.032 296.96 90.88 296.96s27.008-12.032 27.008-26.944c0-1.536-0.256-3.136-0.512-4.608L117.376 122.176c0-2.496 1.984-4.48 4.416-4.48l145.408 0C268.16 117.76 269.12 117.952 270.08 117.952c14.848 0 26.944-12.032 26.944-26.944S284.928 64.064 270.08 64.064z"  ></path><path d="M847.552 830.784c0 9.856-8.128 17.856-17.92 17.856L190.528 848.64c-9.856 0-17.856-8-17.856-17.856L172.672 191.744c0-9.92 8-17.92 17.856-17.92l639.104 0c9.792 0 17.92 8 17.92 17.92L847.552 830.784z"  ></path><path d="M753.792 64.064l179.2 0c14.848 0 26.88 12.032 26.88 26.88l0 178.688C959.872 269.76 960 269.888 960 270.016c0 14.912-12.096 26.944-27.008 26.944s-26.944-12.032-26.944-26.944c0-1.536 0.256-3.136 0.448-4.608L906.496 122.176c0-2.496-1.92-4.48-4.48-4.48l-145.344 0c-1.024 0.064-1.856 0.256-2.88 0.256-14.848 0-26.88-12.032-26.88-26.944S738.944 64.064 753.792 64.064z"  ></path><path d="M270.08 959.936l-179.2 0C76.032 959.936 64 947.968 64 933.12l0-178.752c0-0.128 0-0.256 0-0.384 0-14.912 12.032-27.008 26.88-27.008s27.008 12.032 27.008 27.008c0 1.536-0.256 3.136-0.512 4.608l0 143.168c0 2.496 1.984 4.48 4.416 4.48l145.408 0c0.96-0.064 1.856-0.256 2.816-0.256 14.848 0 26.944 12.032 26.944 26.944S284.928 959.936 270.08 959.936z"  ></path><path d="M753.792 959.936l179.2 0c14.848 0 26.88-12.032 26.88-26.816l0-178.752c0-0.128 0.128-0.256 0.128-0.384 0-14.912-12.096-27.008-27.008-27.008s-26.944 12.032-26.944 27.008c0 1.536 0.256 3.136 0.448 4.608l0 143.168c0 2.496-1.92 4.48-4.48 4.48l-145.344 0c-1.024-0.064-1.856-0.256-2.88-0.256-14.848 0-26.88 12.032-26.88 26.944S738.944 959.936 753.792 959.936z"  ></path></symbol><symbol id="icon-process" viewBox="0 0 1024 1024"><path d="M983.964 953.145 846.307 953.145c-21.721 0-39.33-17.575-39.33-39.249L806.977 796.141c0-21.677 17.609-39.249 39.33-39.249l39.33 0L885.637 580.263c0-21.679-17.607-39.251-39.33-39.251L531.664 541.012l0 215.88 39.332 0c21.721 0 39.33 17.572 39.33 39.249l0 117.756c0 21.674-17.609 39.249-39.33 39.249L433.34 953.146c-21.723 0-39.33-17.575-39.33-39.249L394.01 796.141c0-21.677 17.607-39.249 39.33-39.249l39.33 0 0-215.88L177.693 541.012c-21.721 0-39.33 17.572-39.33 39.251l0 176.629 39.33 0c21.721 0 39.33 17.572 39.33 39.249l0 117.756c0 21.674-17.609 39.249-39.33 39.249L40.036 953.146c-21.721 0-39.33-17.575-39.33-39.249L0.706 796.141c0-21.677 17.609-39.249 39.33-39.249l39.33 0L79.366 560.636c0-43.355 35.219-78.502 78.663-78.502L472.67 482.134 472.67 266.257l-39.33 0c-21.723 0-39.33-17.575-39.33-39.253L394.01 109.252c0-21.679 17.607-39.251 39.33-39.251l137.657 0c21.721 0 39.33 17.572 39.33 39.251l0 117.751c0 21.679-17.609 39.253-39.33 39.253l-39.332 0 0 215.878 334.309 0c43.441 0 78.66 35.147 78.66 78.502l0 196.255 39.33 0c21.721 0 39.33 17.572 39.33 39.249l0 117.756C1023.294 935.571 1005.684 953.145 983.964 953.145z"  ></path></symbol><symbol id="icon-shanchu" viewBox="0 0 1024 1024"><path d="M216.127386 857.184717c0 54.490032 44.134173 98.624205 98.624205 98.624205l394.496819 0c54.490032 0 98.624205-44.134173 98.624205-98.624205L807.872614 265.439488 216.127386 265.439488 216.127386 857.184717zM857.184717 117.503181 684.591847 117.503181l-49.312102-49.312102L388.719232 68.191078l-49.312102 49.312102L166.815283 117.503181l0 98.624205 690.369434 0L857.184717 117.503181z"  ></path></symbol><symbol id="icon-canshu" viewBox="0 0 1024 1024"><path d="M192.402 273.2c-69.475 0-126 56.525-126 126s56.525 126 126 126 126-56.525 126-126-56.525-126-126-126zM192.402 448.4c-27.129 0-49.2-22.071-49.2-49.2s22.071-49.2 49.2-49.2 49.2 22.071 49.2 49.2-22.075 49.2-49.2 49.2z" fill="" ></path><path d="M192.402 242c23.861 0 43.2-19.339 43.2-43.2v-92.4c0-23.861-19.339-43.2-43.2-43.2s-43.2 19.339-43.2 43.2v92.4c0 23.861 19.339 43.2 43.2 43.2z" fill="" ></path><path d="M192.402 557.6c-23.861 0-43.2 19.339-43.2 43.2v319.2c0 23.861 19.339 43.2 43.2 43.2s43.2-19.339 43.2-43.2v-319.2c0-23.861-19.344-43.2-43.2-43.2z" fill="" ></path><path d="M516.224 389.216c-69.471 0-125.995 56.525-125.995 126s56.52 126 125.995 126c69.48 0 126-56.52 126-126s-56.52-126-126-126zM516.224 564.416c-27.125 0-49.195-22.071-49.195-49.2s22.071-49.2 49.195-49.2c27.134 0 49.2 22.071 49.2 49.2s-22.066 49.2-49.2 49.2z" fill="" ></path><path d="M516.229 356c23.856 0 43.2-19.339 43.2-43.2v-207.6c0-23.861-19.339-43.2-43.2-43.2-23.861 0-43.2 19.339-43.2 43.2v207.6c0 23.861 19.344 43.2 43.2 43.2z" fill="" ></path><path d="M516.229 676.4c-23.861 0-43.2 19.339-43.2 43.2v199.2c0 23.861 19.339 43.2 43.2 43.2 23.856 0 43.2-19.339 43.2-43.2v-199.2c0-23.861-19.339-43.2-43.2-43.2z" fill="" ></path><path d="M840.061 499.083c-69.48 0-126 56.52-126 126 0 69.475 56.52 125.995 126 125.995s126-56.52 126-125.995c0-69.48-56.525-126-126-126zM840.061 674.278c-27.129 0-49.2-22.071-49.2-49.195 0-27.129 22.071-49.2 49.2-49.2s49.2 22.071 49.2 49.2c0 27.125-22.071 49.195-49.2 49.195z" fill="" ></path><path d="M840.061 466.4c23.861 0 43.2-19.339 43.2-43.2v-318c0-23.861-19.339-43.2-43.2-43.2s-43.2 19.339-43.2 43.2v318c0 23.861 19.339 43.2 43.2 43.2z" fill="" ></path><path d="M840.061 786.8c-23.861 0-43.2 19.339-43.2 43.2v88.8c0 23.861 19.339 43.2 43.2 43.2s43.2-19.339 43.2-43.2v-88.8c0-23.861-19.344-43.2-43.2-43.2z" fill="" ></path></symbol><symbol id="icon-geshishua" viewBox="0 0 1024 1024"><path d="M701.248 177.6l175.104-113.024 83.456 114.88-131.136 162.304-127.424-164.16z m-133.376-61.568c51.264 6.976 300.608 346.624 294.272 384.704s-145.536 143.68-145.536 143.68L400.64 238.592s116.032-129.6 167.232-122.56zM370.368 288.448l305.024 396.672-187.136 272L65.664 359.04s83.776-3.84 153.536-24.32c45.632-13.504 151.232-46.272 151.168-46.272z"  ></path></symbol><symbol id="icon-niantie" viewBox="0 0 1024 1024"><path d="M739.556 398.222V170.667H512V56.889H284.444v113.778H56.89v739.555h341.333v56.89h398.222l170.667-170.668V398.222H739.556zM341.333 113.778h113.778v56.889H341.333v-56.89z m-56.889 113.778H568.89v56.888H227.556v-56.888h56.888zM113.778 853.333V227.556h56.889v113.777h455.11V227.556h56.89v170.666H398.222v455.111H113.778z m796.444-79.644L768 910.222h-28.444V739.556h170.666v34.133z m-227.555-91.022v227.555H455.11v-455.11h455.111v227.555H682.667z" fill="#73777A" ></path></symbol><symbol id="icon-suoxiao" viewBox="0 0 1024 1024"><path d="M946.9 897.7L744 695.2c24.4-29.2 44.2-61.7 59.1-97 20.2-47.7 30.4-98.3 30.4-150.5s-10.2-102.8-30.4-150.5c-19.5-46-47.3-87.4-82.8-122.9s-76.8-63.4-122.8-82.8c-47.7-20.2-98.3-30.4-150.4-30.4S344.4 71.3 296.8 91.5c-46 19.5-87.3 47.4-122.8 82.8-35.5 35.5-63.3 76.8-82.8 122.9-20.2 47.7-30.4 98.3-30.4 150.5S71 550.5 91.2 598.2c19.5 46 47.3 87.4 82.8 122.9s76.8 63.4 122.8 82.8c47.7 20.2 98.3 30.4 150.4 30.4s102.7-10.2 150.4-30.4c34.9-14.8 67.1-34.4 96.1-58.5l203 202.6c6.9 6.9 16 10.4 25.1 10.4 9.1 0 18.2-3.5 25.2-10.5 13.8-13.8 13.8-36.3-0.1-50.2zM447.2 763.2c-84.2 0-163.3-32.8-222.8-92.4C164.8 611.2 132 532 132 447.7c0-84.3 32.8-163.5 92.3-223.1 59.5-59.6 138.7-92.4 222.8-92.4s163.3 32.8 222.8 92.4c59.5 59.6 92.3 138.8 92.3 223.1 0 83.9-32.5 162.8-91.6 222.3-0.4 0.4-0.8 0.8-1.2 1.1-0.3 0.3-0.6 0.6-0.8 0.9-59.3 58.9-137.9 91.2-221.4 91.2z"  ></path><path d="M574 416H303.7c-19.7 0-35.6 12.8-35.6 32.5S284 481 303.7 481H574c19.7 0 35.6-12.8 35.6-32.5S593.7 416 574 416z"  ></path></symbol><symbol id="icon-fangda" viewBox="0 0 1024 1024"><path d="M943.8 892.5l-201.4-201c24.2-29 43.9-61.3 58.7-96.3 20-47.3 30.1-97.6 30.1-149.4s-10.1-102-30.1-149.4c-19.3-45.7-47-86.7-82.1-122-35.2-35.2-76.2-62.9-121.9-82.2-47.3-20-97.5-30.2-149.3-30.2-51.8 0-102 10.2-149.3 30.2-45.7 19.3-86.7 47-121.9 82.2s-62.8 76.3-82.1 122c-20 47.3-30.1 97.6-30.1 149.4s10.1 102 30.1 149.4c19.3 45.7 47 86.7 82.1 122 35.2 35.2 76.2 62.9 121.9 82.2 47.3 20 97.5 30.2 149.3 30.2 51.7 0 102-10.2 149.3-30.2 34.6-14.7 66.6-34.1 95.3-58l201.5 201c6.9 6.9 15.9 10.3 24.9 10.3 9.1 0 18.1-3.5 25-10.4 13.8-13.7 13.8-36.1 0-49.8zM669.7 666.6c-0.4 0.4-0.8 0.7-1.2 1.1-0.3 0.3-0.6 0.6-0.8 0.9-59 58.3-137 90.4-219.9 90.4-83.5 0-162.1-32.6-221.2-91.7-59.1-59.1-91.6-137.8-91.6-221.4s32.5-162.3 91.6-221.4c59.1-59.1 137.6-91.7 221.2-91.7s162.1 32.6 221.2 91.7c59.1 59.1 91.6 137.8 91.6 221.4 0 83.3-32.3 161.6-90.9 220.7z"  ></path><path d="M573.7 419H473v-98c0-19.5-13-35.3-32.5-35.3S408 301.5 408 321v98H305.3c-19.5 0-35.3 13-35.3 32.5s15.8 32.5 35.3 32.5H408v105.4c0 19.5 13 35.3 32.5 35.3s32.5-15.8 32.5-35.3V484h100.7c19.5 0 35.3-13 35.3-32.5S593.2 419 573.7 419z"  ></path></symbol><symbol id="icon-peizhi" viewBox="0 0 1024 1024"><path d="M462.88 196.82a192.07 192.07 0 0 0-218.54-37.52l128 128-90.51 90.51-128-128a192.06 192.06 0 0 0 256.06 256.06L757 853a32 32 0 0 0 45.25 0l45.25-45.25a32 32 0 0 0 0-45.25L500.4 415.36a192.07 192.07 0 0 0-37.52-218.54z"  ></path></symbol><symbol id="icon-fuzhi" viewBox="0 0 1024 1024"><path d="M740.6 183.3v71.5h-57.2v-71.5c0-3.8-1.4-7.3-4.2-10-2.8-2.8-6.2-4.2-10-4.2H183.4c-3.8 0-7.3 1.4-10 4.2-2.7 2.8-4.2 6.2-4.2 10v485.9c0 3.8 1.4 7.3 4.2 10 2.8 2.8 6.2 4.2 10 4.2h71.5v57.2h-71.5c-19.6 0-36.5-7-50.4-20.9-14-14-21-30.9-21-50.5V183.3c0-19.6 7-36.5 20.9-50.4 13.9-13.9 30.8-20.9 50.4-20.9h485.9c19.6 0 36.5 7.1 50.4 20.9 14 14 21 30.8 21 50.4z m171.5 171.5v485.9c0 19.6-7.1 36.5-20.9 50.4-14 14-30.8 20.9-50.4 20.9H354.9c-19.6 0-36.5-7.1-50.4-20.9-14-14-20.9-30.8-20.9-50.4V354.8c0-19.6 7-36.5 20.9-50.4 13.9-13.9 30.8-20.9 50.4-20.9h485.9c19.6 0 36.5 7.1 50.4 20.9 13.9 14 20.9 30.8 20.9 50.4z"  ></path></symbol><symbol id="icon-ziyuanxhdpi" viewBox="0 0 1248 1024"><path d="M889.555493 629.597406S780.028779 1009.372754 496.438364 841.514532c0 0-91.220549-44.058905-130.315071-181.510277l169.099318-135.279454L0 435.986444v515.054802l155.136989-135.279454A551.667132 551.667132 0 0 0 593.864393 1023.955631c288.554799-5.895206 316.479457-267.766442 295.6911-394.358225zM357.435622 393.478909S467.27261 13.393287 752.104121 181.561782c0 0 91.220549 43.748631 130.315071 181.510277L713.630148 498.041239l533.671241 89.048632V72.035068l-155.136989 134.96918A552.597954 552.597954 0 0 0 653.436996 0.051505c-288.554799 4.964384-316.479457 266.835621-296.001374 393.427404z"  ></path></symbol><symbol id="icon-search" viewBox="0 0 1024 1024"><path d="M192 448c0-141.152 114.848-256 256-256s256 114.848 256 256-114.848 256-256 256-256-114.848-256-256z m710.624 409.376l-206.88-206.88A318.784 318.784 0 0 0 768 448c0-176.736-143.264-320-320-320S128 271.264 128 448s143.264 320 320 320a318.784 318.784 0 0 0 202.496-72.256l206.88 206.88 45.248-45.248z" fill="#181818" ></path></symbol><symbol id="icon-list" viewBox="0 0 1024 1024"><path d="M128 256h64V192H128zM320 256h576V192H320zM128 544h64v-64H128zM320 544h576v-64H320zM128 832h64v-64H128zM320 832h576v-64H320z" fill="#181818" ></path></symbol><symbol id="icon-turn_left" viewBox="0 0 1024 1024"><path d="M640 768l-256-256 256-256z" fill="#181818" ></path></symbol><symbol id="icon-turn_right" viewBox="0 0 1024 1024"><path d="M384 256l256 256-256 256z" fill="#181818" ></path></symbol><symbol id="icon-turn_down" viewBox="0 0 1024 1024"><path d="M768 384l-256 256-256-256z" fill="#181818" ></path></symbol><symbol id="icon-turn_top" viewBox="0 0 1024 1024"><path d="M256.32 640l256-256 256 256z" fill="#181818" ></path></symbol></svg>',i=(t=document.getElementsByTagName("script"))[t.length-1].getAttribute("data-injectcss");if(i&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(t){console&&console.log(t)}}!function(t){if(document.addEventListener)if(~["complete","loaded","interactive"].indexOf(document.readyState))setTimeout(t,0);else{var s=function e(){document.removeEventListener("DOMContentLoaded",e,!1),t()};document.addEventListener("DOMContentLoaded",s,!1)}else document.attachEvent&&(a=t,n=e.document,r=!1,(o=function(){try{n.documentElement.doScroll("left")}catch(t){return void setTimeout(o,50)}i()})(),n.onreadystatechange=function(){"complete"==n.readyState&&(n.onreadystatechange=null,i())});function i(){r||(r=!0,a())}var a,n,r,o}((function(){var e,t;(e=document.createElement("div")).innerHTML=s,s=null,(t=e.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",function(e,t){t.firstChild?function(e,t){t.parentNode.insertBefore(e,t)}(e,t.firstChild):t.appendChild(e)}(t,document.body))}))}(window);var u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"designer-control"},[s("div",{staticClass:"designer-control-header"}),s("div",{staticClass:"designer-control-buttons"},[s("div",{staticClass:"designer-control-button",attrs:{title:e.t("vue-process.amplification")},on:{click:e.zoomout}},[s("Icon",{attrs:{name:"fangda"}})],1),s("div",{staticClass:"designer-control-button",attrs:{title:e.t("vue-process.narrow")},on:{click:e.zoomin}},[s("Icon",{attrs:{name:"suoxiao"}})],1),s("div",{staticClass:"designer-control-button",attrs:{title:e.t("vue-process.narrow")},on:{click:e.toggleFullScreen}},[s("Icon",{attrs:{name:"quanping"}})],1),s("div",{staticClass:"designer-control-button",attrs:{title:e.t("vue-process.format")},on:{click:function(t){e.formatDialogVisible=!e.formatDialogVisible,e.confirmResetDialogVisible=!1}}},[s("Icon",{attrs:{name:"geshishua"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.state.isFormatted,expression:"state.isFormatted"}],staticClass:"designer-control-button",attrs:{title:e.t("vue-process.return format")},on:{click:function(t){e.confirmResetDialogVisible=!e.confirmResetDialogVisible,e.formatDialogVisible=!1}}},[s("Icon",{attrs:{name:"ziyuanxhdpi"}})],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.formatDialogVisible,expression:"formatDialogVisible"}],staticClass:"designer-control-dialog"},[s("div",{staticClass:"line-type"},[s("input",{attrs:{id:"straight",type:"radio",name:"straight",value:"straight"},domProps:{checked:"straight"===e.linkType},on:{click:function(t){e.linkType="straight"}}}),s("label",{attrs:{for:"straight"}},[e._v("\n        "+e._s(e.t("vue-process.straight"))+"\n      ")]),s("input",{attrs:{id:"curve",type:"radio",name:"curve",value:"curve"},domProps:{checked:"curve"===e.linkType},on:{click:function(t){e.linkType="curve"}}}),s("label",{attrs:{for:"curve"}},[e._v("\n        "+e._s(e.t("vue-process.slash"))+"\n      ")])]),s("div",{staticClass:"node-width-container"},[s("label",{attrs:{for:"nodeWidth"}},[e._v("\n        "+e._s(e.t("vue-process.Width"))+"(40-150)：\n      ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.nodeWidth,expression:"nodeWidth"}],attrs:{id:"nodeWidth",type:"number",name:"nodeWidth",min:"40",max:"150"},domProps:{value:e.nodeWidth},on:{blur:e.nodeWidthBlur,input:function(t){t.target.composing||(e.nodeWidth=t.target.value)}}})]),s("div",{staticClass:"operations"},[s("div",{staticClass:"format",on:{click:e.format}},[e._v("\n        "+e._s(e.t("vue-process.formatting"))+"\n      ")]),s("div",{staticClass:"cancel",on:{click:function(t){e.formatDialogVisible=!1}}},[e._v("\n        "+e._s(e.t("vue-process.cancel"))+"\n      ")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.confirmResetDialogVisible,expression:"confirmResetDialogVisible"}],staticClass:"designer-control-dialog reset"},[s("div",{staticClass:"hint"},[e._v("\n      "+e._s(e.t("vue-process.Whether return format"))+"\n    ")]),s("div",{staticClass:"operations"},[s("div",{staticClass:"format",on:{click:e.resetToOriginalData}},[e._v("\n        "+e._s(e.t("vue-process.restore"))+"\n      ")]),s("div",{staticClass:"cancel",on:{click:function(t){e.confirmResetDialogVisible=!1}}},[e._v("\n        "+e._s(e.t("vue-process.cancel"))+"\n      ")])])]),s("div",[e._v("\n    "+e._s(100*e.state.baseOptions.pageSize+"%")+"\n  ")])])},h=[],p=(s("20d6"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:e.click}},[s("use",{attrs:{"xlink:href":e.type}})])}),f=[],m={props:{name:{type:String,required:!0}},computed:{type:function(){return this.name?"#icon-".concat(this.name):null}},methods:{click:function(e){this.$emit("click",e)}}},g=m,b=(s("8903"),s("2877")),v=Object(b["a"])(g,p,f,!1,null,null,null),y=v.exports;s("34ef"),s("a481"),s("6b54"),s("87b3");function w(e){var t=Object.prototype.toString,s={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"};return s[t.call(e)]}function T(e,t){var s;if("string"===w(t))s=[t];else{if("array"!==w(t))return null;s=t}var i=e.$parent,a=i.$options.name;while(i&&(!a||s.indexOf(a)<0))i=i.$parent,i&&(a=i.$options.name);return i}function S(){var e;return e=crypto&&crypto.getRandomValues?([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})):"".concat((new Date).getTime(),".").concat(Math.ceil(1e3*Math.random())),e}s("28a5");var E=s("a026"),N=s("8402"),C=N["a"],k=function(){var e=Object.getPrototypeOf(this||E["default"]).$t;if("function"===typeof e&&E["default"].locale)return e.apply(this,arguments)},O=function(e){var t=k.apply(this,arguments);if(null!==t&&void 0!==t)return t;var s=e.split("."),i=C["zh-CN"];E["default"].config.lang&&C[E["default"].config.lang]?i=C[E["default"].config.lang]:console.warn("no language config '".concat(E["default"].config.lang,"'"));for(var a=0,n=s.length;a<n;a++){var r=s[a];if(t=i[r],a===n-1)return t;if(!t)return"";i=t}return""};function x(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function I(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?x(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):x(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function R(){return{state:{disabled:!1,fullScreen:!1,shapes:[],nodes:[],links:[],linkType:"straight",isFormatted:!1,draging:{type:"",data:{}},choosing:{type:"",key:""},copying:{type:"",key:""},editBaseInfoNode:null,editParamNode:null,baseOptions:{pageSize:1,shapeViewOffsetX:0,shapeViewOffsetY:0,nodeViewOffsetX:0,nodeViewOffsetY:0},shapeOptions:{viewWidth:250,width:36,height:36},nodeOptions:{width:150,height:40,borderWidth:2,radiusWidth:4,anchorSize:12,borderColor:"#666"},linkerOptions:{lineWidth:2,borderWidth:10,extWidth:30,borderColor:"#666"},gridOptions:{show:!1,height:5e3,width:5e3},snapLineX:{show:!1,left:0,top:0},snapLineY:{show:!1,left:0,top:0}},getters:{},mutations:{UPDATE_DISABLED:function(e,t){e.disabled=t},TRUNCATE_NODE:function(e){e.nodes.splice(0,e.nodes.length)},ADD_NODE:function(e,t){e.nodes.push(t)},UPDATE_NODE:function(e,t){for(var s=e.nodes.length,i=0;i<s;i++)if(e.nodes[i].key==t.key){e.nodes.splice(i,1,t.obj);break}},UPDATE_ALLNODES:function(e,t){e.nodes=t},DELETE_NODE:function(e,t){e.nodes.splice(t,1)},TRUNCATE_LINKER:function(e){e.links.splice(0,e.links.length)},ADD_LINKER:function(e,t){e.links.push(t)},UPDATE_LINKER:function(e,t){e.links.splice(t.index,1,t.obj)},UPDATE_ALLLINKERS:function(e,t){e.links=t},DELETE_LINKER:function(e,t){e.links.splice(t,1)},DELETE_LINKER_BY_KEY:function(e,t){for(var s=0;s<e.links.length;s++)e.links[s].key===t&&e.links.splice(s,1)},UPDATE_LINKTYPE:function(e,t){e.linkType=t},UPDATE_ISFORMATTED:function(e,t){e.isFormatted=t},UPDATE_PAGESIZE:function(e,t){e.baseOptions.pageSize=t},UPDATE_SHAPEVIEW_OFFSET:function(e,t){e.baseOptions.shapeViewOffsetX=t.x,e.baseOptions.shapeViewOffsetY=t.y},UPDATE_NODEVIEW_OFFSET:function(e,t){e.baseOptions.nodeViewOffsetX=t.x,e.baseOptions.nodeViewOffsetY=t.y},UPDATE_DRAGING:function(e,t){e.draging.type=t.type,e.draging.data=t.obj},UPDATE_SNAPLINE_X:function(e,t){e.snapLineX.show=t.show,e.snapLineX.left=t.left,e.snapLineX.top=t.top},UPDATE_SNAPLINE_Y:function(e,t){e.snapLineY.show=t.show,e.snapLineY.left=t.left,e.snapLineY.top=t.top},UPDATE_FULL_SCREEN:function(e,t){e.fullScreen=t},UPDATE_CHOOSING:function(e,t){var s=e.choosing.type!=t.type;e.choosing={type:t.type,key:t.key};var i=e.nodes.length;if("node"==t.type)for(var a=t.key&&t.key.length>0,n=0;n<i;n++){var r=a&&t.key.indexOf(e.nodes[n].key)>-1;e.nodes[n].selected=r}else if(s&&"link"==t.type)for(var o=0;o<i;o++)e.nodes[o].selected=!1},UPDATE_COPYING:function(e,t){e.copying.type=t.type,e.copying.key=t.key},UPDATE_GIRD_OPTION:function(e,t){e.gridOptions=Object.assign(e.gridOptions,t)},UPDATE_NODE_OPTION:function(e,t){e.nodeOptions=Object.assign(e.nodeOptions,t)},UPDATE_EDIT_BASEINFO_NODE:function(e,t){e.editBaseInfoNode=t},UPDATE_EDIT_PARAM_NODE:function(e,t){e.editParamNode=t},UPDATE_SHAPE_OPTIONS:function(e,t){e.shapeOptions=I({},e.shapeOptions,{},t)}},actions:{initDeginer:function(e,t){var s=this,i=e.commit,a=e.state;if(i(this,"TRUNCATE_NODE"),i(this,"TRUNCATE_LINKER"),t.value){var n=[];if(t.shapes.forEach((function(e){n=n.concat(e.children)})),Array.isArray(t.value.nodes)){t.value.nodes.forEach((function(e){e.selected=!!e.selected;var t=n.filter((function(t){return t.type==e.type}));if(t.length>0){var r=t[0],o=["layout","type","title","desc","image","ready","viewOffsetX","viewOffsetY","width","height","borderWidth","radiusWidth","anchorSize","borderColor","key","x","y","createTime","lastUpdateTime"],c={};for(var l in e)-1===o.indexOf(l)&&(c[l]=e[l]);i(s,"ADD_NODE",Object.assign({ready:!0,image:r.image,type:r.type,key:e.key,title:e.title,desc:e.desc,params:e.params,resources:e.resources,createTime:e.createTime,lastUpdateTime:e.lastUpdateTime},a.nodeOptions,e.layout,c))}}));var r=t.value.nodes.filter((function(e){return e.selected})).map((function(e){return e.key}));i(this,"UPDATE_CHOOSING",{type:"node",key:r})}Array.isArray(t.value.edges)&&t.value.edges.forEach((function(e){var t=a.nodes.filter((function(t){return t.key==e.source}))[0],n=a.nodes.filter((function(t){return t.key==e.target}))[0];t&&n&&i(s,"ADD_LINKER",I({key:e.key||S(),beginNode:t,beginNodeArrow:e.sourceLocation,endNode:n,endNodeArrow:e.targetLocation},a.linkerOptions))}))}t.gridOptions&&i(this,"UPDATE_GIRD_OPTION",t.gridOptions),t.nodeOptions&&i(this,"UPDATE_NODE_OPTION",t.nodeOptions)},setDisabled:function(e,t){var s=e.commit;s(this,"UPDATE_DISABLED",t)},setDraging:function(e,t){var s=e.commit;s(this,"UPDATE_DRAGING",{type:t.type,obj:t.data})},clearDraging:function(e){var t=e.commit;t(this,"UPDATE_DRAGING",{type:"",obj:{}})},deleteNode:function(e,t){var s=this,i=e.commit,a=e.state;a.nodes.forEach((function(e,a){e.key===t&&i(s,"DELETE_NODE",a)}));for(var n=0;n<a.links.length;n++){var r=a.links[n];r.beginNode.key!==t&&r.endNode.key!==t||(i(this,"DELETE_LINKER",n),n--)}},getNodeByKey:function(e,t){var s=e.state;return s.nodes.filter((function(e){return e.key==t}))[0]},getLinkByKey:function(e,t){var s=e.state;return s.links.filter((function(e){return e.key==t}))[0]}}}}var D=function(e,t){if(e.mutations[t]){for(var s,i=arguments.length,a=new Array(i>2?i-2:0),n=2;n<i;n++)a[n-2]=arguments[n];(s=e.mutations[t]).call.apply(s,[e,e.state].concat(a))}},L=function(e){var t={};return Array.isArray(e)&&e.forEach((function(e){t[e]=function(){for(var t,s=this.$store,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(t=s.actions[e]).call.apply(t,[s,{commit:D,state:s.state}].concat(a))}})),t},A={beforeCreate:function(){var e=T(this,"Designer");this.$store=e?e.$store:R()},data:function(){return{state:this.$store.state}},methods:{t:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return O.apply(this,t)}}},P={components:{Icon:y},mixins:[A],data:function(){return{pageSizeList:[{text:"50%",value:.5},{text:"75%",value:.75},{text:"100%",value:1},{text:"125%",value:1.25},{text:"150%",value:1.5},{text:"175%",value:1.75},{text:"200%",value:2},{text:"300%",value:3}],formatDialogVisible:!1,confirmResetDialogVisible:!1,linkType:"curve",nodeWidth:40}},mounted:function(){this.designer=T(this,"Designer")},methods:{zoomout:function(){var e=this,t=this.pageSizeList.findIndex((function(t){return t.value===e.state.baseOptions.pageSize}));if(-1!==t){if(t+1>this.pageSizeList.length-1)return this.designer.$emit("message",{type:"info",msg:"".concat(this.t("vue-process.zoom-max")," 300%")});D(this.$store,"UPDATE_PAGESIZE",this.pageSizeList[t+1].value)}},zoomin:function(){var e=this,t=this.pageSizeList.findIndex((function(t){return t.value===e.state.baseOptions.pageSize}));if(-1!==t){if(t-1<0)return this.designer.$emit("message",{type:"info",msg:"".concat(this.t("vue-process.zoom-min")," 50%")});D(this.$store,"UPDATE_PAGESIZE",this.pageSizeList[t-1].value)}},toggleFullScreen:function(){D(this.$store,"UPDATE_FULL_SCREEN",!this.state.fullScreen)},nodeWidthBlur:function(e){var t=150,s=40,i=parseInt(e.target.value);isNaN(i)?this.nodeWidth=s:(i<s&&(this.nodeWidth=s),i>t&&(this.nodeWidth=t))},format:function(){var e={linkType:this.linkType,nodeWidth:parseInt(this.nodeWidth)};this.$emit("format",e),this.formatDialogVisible=!1},resetToOriginalData:function(){this.$emit("resetToOriginalData"),this.confirmResetDialogVisible=!1}}},_=P,$=Object(b["a"])(_,u,h,!1,null,null,null),M=$.exports,j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"designer-toolbar"},[e._t("default")],2)},F=[],B={mixins:[A],data:function(){return{}},mounted:function(){},methods:{}},H=B,K=Object(b["a"])(H,j,F,!1,null,null,null),U=K.exports,W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"designer-shape",style:e.getBaseStyle},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchValue,expression:"searchValue"}],staticClass:"shape-search",attrs:{placeholder:e.t("vue-process.search")},domProps:{value:e.searchValue},on:{input:function(t){t.target.composing||(e.searchValue=t.target.value)}}}),e._l(e.search,(function(t,i){return s("div",{key:i,staticClass:"shape-container",class:{top:0==i}},[s("div",{staticClass:"shape-title",class:{open:t.show},on:{click:function(s){return e.toggleTitle(t)}}},[s("Icon",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!shape.show"}],attrs:{name:"turn_right"}}),s("Icon",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"shape.show"}],attrs:{name:"turn_top"}}),e._v("\n      "+e._s(t.title)+"\n    ")],1),t.children&&t.children.length>0?s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"shape.show"}],staticClass:"shape-content"},e._l(t.children,(function(t,i){return s("div",{key:i,staticClass:"shape-box",attrs:{title:t.title},on:{mousedown:function(s){return e.beginDragShap(t,s)}}},[s("img",{staticClass:"shape-box-img",style:e.getBoxStyle,attrs:{src:t.image,alt:t.title},on:{error:e.error}}),s("div",{staticClass:"shape-title-txt",attrs:{title:t.title}},[e._v(e._s(t.title))])])})),0):e._e()])})),s("div",{directives:[{name:"show",rawName:"v-show",value:"shape"==e.state.draging.type,expression:"state.draging.type=='shape'"}],ref:"dragShapBox",staticClass:"shape-box-draging",style:e.getBoxStyle},["shape"==e.state.draging.type?s("img",{staticClass:"shape-box-img",attrs:{src:e.state.draging.data.image}}):e._e()])],2)},V=[];function X(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function Y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?X(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):X(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var z={components:{Icon:y},mixins:[A],props:{shapes:{type:Array,required:!0}},data:function(){return{searchValue:""}},computed:{getBaseStyle:function(){return{width:this.state.shapeOptions.viewWidth+"px"}},getBoxStyle:function(){return{height:this.state.shapeOptions.height+"px",width:this.state.shapeOptions.width+"px","line-height":this.state.shapeOptions.height+"px"}},search:function(){var e=this,t=[];return this.searchValue?this.shapes.forEach((function(s){if(Array.isArray(s.children)){var i=s.children.filter((function(t){return t.title&&-1!=t.title.indexOf(e.searchValue)}));i.length>0&&t.push(Object.assign({},s,{children:i}))}})):t=this.shapes,t}},mounted:function(){this.$watch("state.fullScreen",(function(){this.initView()})),this.$nextTick(this.initView)},methods:Y({},L(["setDraging","clearDraging"]),{initView:function(){var e=this.$el.getBoundingClientRect();D(this.$store,"UPDATE_SHAPEVIEW_OFFSET",{x:e.left,y:e.top})},toggleTitle:function(e){e.show=!e.show},beginDragShap:function(e,t){this.state.disabled||(this.changeDragShapOffset(t),this.setDraging({type:"shape",data:e}))},changeDragShapOffset:function(e){var t=this,s=this.$refs.dragShapBox;requestAnimationFrame((function(){s.style.left=e.pageX-t.state.baseOptions.shapeViewOffsetX-t.state.shapeOptions.width/2+"px",s.style.top=e.pageY-t.state.baseOptions.shapeViewOffsetY-t.state.shapeOptions.height/2+"px"}))},error:function(e){console.log(e)}})},G=z,Z=Object(b["a"])(G,W,V,!1,null,null,null),J=Z.exports,q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"viewport",staticClass:"designer-viewport",style:e.getBaseStyle,on:{mousemove:e.mousemove,mousedown:e.mousedown,mouseup:e.mouseup,contextmenu:function(t){return t.preventDefault(),e.showMenu(t)}}},[s("div",{style:e.getGridStyle}),s("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.clickoutsideNode,expression:"clickoutsideNode"}]},e._l(e.state.nodes,(function(t){return s("Noder",{key:t.key,ref:"nodes",refInFor:!0,attrs:{k:t.key,type:t.type,title:t.title,x:t.x,y:t.y,height:t.height,width:t.width,"radius-width":t.radiusWidth,"border-width":t.borderWidth,"border-color":t.borderColor,"anchor-size":t.anchorSize,image:t.image,selected:t.selected,"run-state":t.runState},on:{"operat-node":e.operatNode}})})),1),s("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.clickoutsideLink,expression:"clickoutsideLink"}]},[e._l(e.state.links,(function(t){return s("Linker",{key:t.key,attrs:{k:t.key,"begin-node":t.beginNode,"begin-node-arrow":t.beginNodeArrow,"end-node":t.endNode,"end-node-arrow":t.endNodeArrow,"line-width":t.lineWidth,"border-width":t.borderWidth,"ext-width":t.extWidth,"border-color":t.borderColor},on:{"after-calculate":e.afterCalculate}})})),s("canvas",{ref:"canvas",staticClass:"canvas",attrs:{width:"10000",height:"10000"}})],2),s("div",{directives:[{name:"show",rawName:"v-show",value:e.state.snapLineX.show,expression:"state.snapLineX.show"}],staticClass:"snap-line",style:e.getSnapLineXStyle()}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.state.snapLineY.show,expression:"state.snapLineY.show"}],staticClass:"snap-line",style:e.getSnapLineYStyle()}),"link"==e.state.draging.type?s("Linker",{staticClass:"drag-linker-box",attrs:{k:e.state.draging.data.key,"begin-node":e.state.draging.data.beginNode,"begin-node-arrow":e.state.draging.data.beginNodeArrow,"end-node":e.state.draging.data.endNode,"end-node-arrow":e.state.draging.data.endNodeArrow,"line-width":e.state.draging.data.lineWidth,"border-width":e.state.draging.data.borderWidth,"ext-width":e.state.draging.data.extWidth,"border-color":e.state.draging.data.borderColor},on:{"after-calculate":e.afterCalculate}}):e._e(),s("div",{staticClass:"box-select-layer",style:e.boxSelectLayerStyle})],1)},Q=[],ee=(s("6c7b"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"node-box",class:{"node-selected":e.isChoose},style:e.getNodeStyle,attrs:{title:e.title},on:{click:e.click,dblclick:e.dblclick,mousedown:function(t){return t.stopPropagation(),e.mousedown(t)},mouseup:e.mouseup,contextmenu:function(e){e.preventDefault(),e.stopPropagation()}}},[e.selfNode.template?[e.component?s(e.component,{ref:e.k,tag:"component",attrs:{node:e.selfNode}}):e._e()]:[s("canvas",{ref:"canvas",staticClass:"node-box-bg"}),s("div",{staticClass:"node-box-content",style:{"line-height":e.height*e.state.baseOptions.pageSize+"px"},attrs:{title:e.title}},[e._v("\n      "+e._s(e.title)+"\n    ")]),e.runState.isShowTime?s("span",{staticClass:"executor-pending"},[e._v("\n      "+e._s(e.executorTime)+"\n    ")]):e._e(),s("Icon",{staticClass:"executor-icon",class:e.runState.colorClass,attrs:{title:e.runState.title,type:e.runState.iconType,size:"20"}})],e._l(e.arrows,(function(t,i){return s("div",{key:i,staticClass:"node-anchor",style:e.getNodeAnchorStyle(t),on:{mousedown:function(s){return s.stopPropagation(),e.clickAnchor(t,s)}}})}))],2)}),te=[],se=s("75fc"),ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.close,expression:"close"}],staticClass:"designer-menu",style:e.getStyle,on:{contextmenu:function(e){e.preventDefault(),e.stopPropagation()}}},[s("ul",{staticClass:"designer-menu-ul"},e._l(e.data,(function(t,i){return s("li",{key:i,staticClass:"designer-menu-li",on:{click:function(s){return e.choose(t,i)}}},[t.icon?s("Icon",{staticClass:"designer-menu-li-icon",attrs:{name:t.icon}}):t.img?s("img",{staticClass:"designer-menu-li-icon menu-img",attrs:{src:t.img}}):s("span",{staticClass:"designer-menu-li-icon"}),s("span",{staticClass:"designer-menu-li-text"},[e._v("\n        "+e._s(t.text)+"\n      ")])],1)})),0)])},ae=[],ne=function(e,t){var s=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!s.contains(i))},re={},oe=1,ce={inserted:function(e,t){e.outsideKey=oe++;var s={documentHandler:function(s){if(ne(e,s.target)||e===s.target)return!1;t.value&&t.value()}};re[e.outsideKey]=s,document.addEventListener("click",s.documentHandler)},unbind:function(e){var t=re[e.outsideKey];document.removeEventListener("click",t.documentHandler),delete re[e.outsideKey]}},le={components:{Icon:y},directives:{clickoutside:ce},props:{data:{type:Array,required:!0},left:{type:[Number,String],default:0},top:{type:[Number,String],default:0}},computed:{getStyle:function(){var e=Number(this.left),t=Number(this.top);return e="NaN"==e.toString()?this.left:this.left+"px",t="NaN"==t.toString()?this.top:this.top+"px",{left:e,top:t}}},methods:{choose:function(e,t){this.$emit("choose",e,t),this.$emit("close")},close:function(){this.$emit("close")}}},de=le,ue=Object(b["a"])(de,ie,ae,!1,null,null,null),he=ue.exports;function pe(e){void 0===e.autoClose&&(e.autoClose=!0);var t=document.body,s=new E["default"]({components:{contentMenu:he},data:function(){return e},methods:{chooseMenu:function(){e.choose&&e.choose.apply(e,arguments)},close:function(){e.autoClose&&(this.$destroy(),this.$el.remove())}},template:'<contentMenu :data="data" :left="left" :top="top" @choose="chooseMenu" @close="close"></contentMenu>'});return s.$mount(),t.appendChild(s.$el),{destroy:function(){s.$destroy(),s.$el.remove(),s=null}}}function fe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function me(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var ge={mixins:[A],props:{k:{type:[String,Number],required:!0},type:{type:String,required:!0},title:{type:String,required:!0},x:{type:Number,required:!0},y:{type:Number,required:!0},height:{type:Number,required:!0},width:{type:Number,required:!0},borderWidth:{type:Number,required:!0},borderColor:{type:String,required:!0},radiusWidth:{type:Number,required:!0},anchorSize:{type:Number,required:!0},image:{type:String,required:!0},runState:{type:[Object],default:function(){return{}}},selected:{type:Boolean,default:!1}},data:function(){return{component:null,currentBorderColor:this.borderColor,arrows:["left","top","right","bottom"],isChoose:this.selected}},computed:{getNodeStyle:function(){var e={left:this.x*this.state.baseOptions.pageSize+"px",top:this.y*this.state.baseOptions.pageSize+"px",height:this.height*this.state.baseOptions.pageSize+"px",width:this.width*this.state.baseOptions.pageSize+"px"};return"canvas"==this.nodeType&&(e=me({},e,{"background-image":"url(".concat(this.image,")"),"background-repeat":"no-repeat","background-position":"5% center","background-size":"20%"})),me({},e,{},this.runState.nodeStyle)},getImageStyle:function(){return{transform:"translate(-50%, -50%) scale(".concat(this.state.baseOptions.pageSize,")")}},selfNode:function(){return this.getNodeByKey(this.k)},nodeType:function(){return this.selfNode&&this.selfNode.template?"html":"canvas"},executorTime:function(){return this.runState.time}},watch:{runState:{handler:function(){this.runState.borderColor&&(this.currentBorderColor=this.runState.borderColor)},deep:!0},width:function(){"canvas"==this.nodeType&&this.initCanvas()},selected:function(e){this.isChoose=e}},created:function(){"html"==this.nodeType&&"string"==typeof this.selfNode.template?this.component=E["default"].component("html-node-".concat(this.k),{props:{node:{type:Object,default:function(){return{}}}},template:this.selfNode.template}):"function"==typeof this.selfNode.template&&(this.component=E["default"].component("html-node-".concat(this.k),this.selfNode.template))},mounted:function(){var e=this;this.designer=T(this,"Designer"),this.shape=null,this.designer.myShapes.forEach((function(t){t.type===e.type?e.shape=t:t.children&&t.children.length&&t.children.forEach((function(t){t.type===e.type&&(e.shape=t)}))})),"html"!=this.nodeType&&(this.initCanvas(),this.$watch("state.baseOptions.pageSize",(function(){this.initCanvas()})),this.$watch("currentBorderColor",(function(){this.initCanvas()})),this.$watch("state.choosing",(function(e){e&&"node"==e.type&&(this.isChoose=e.key.indexOf(this.k)>-1)})))},beforeDestroy:function(){this.contentMenu&&(this.contentMenu.destroy(),this.contentMenu=null)},methods:me({},L(["setDraging","clearDraging","getNodeByKey"]),{initCanvas:function(){this.canvasCtx||(this.canvas=this.$refs.canvas,this.canvasCtx=this.canvas.getContext("2d")),this.canvas.height=this.height*this.state.baseOptions.pageSize,this.canvas.width=this.width*this.state.baseOptions.pageSize;var e=this.canvasCtx;e.clearRect(0,0,e.canvas.width,e.canvas.height),e.lineWidth=this.borderWidth*this.state.baseOptions.pageSize,e.strokeStyle=this.currentBorderColor,e.lineCap="round",e.lineJoin="round",this.roundedRect(e,this.borderWidth/2*this.state.baseOptions.pageSize,this.borderWidth/2*this.state.baseOptions.pageSize,(this.width-this.borderWidth)*this.state.baseOptions.pageSize,(this.height-this.borderWidth)*this.state.baseOptions.pageSize,this.radiusWidth*this.state.baseOptions.pageSize)},roundedRect:function(e,t,s,i,a,n){e.beginPath(),e.moveTo(t,s+n),e.lineTo(t,s+a-n),e.quadraticCurveTo(t,s+a,t+n,s+a),e.lineTo(t+i-n,s+a),e.quadraticCurveTo(t+i,s+a,t+i,s+a-n),e.lineTo(t+i,s+n),e.quadraticCurveTo(t+i,s,t+i-n,s),e.lineTo(t+n,s),e.quadraticCurveTo(t,s,t,s+n),e.stroke()},getNodeAnchorStyle:function(e){var t=this.anchorSize*this.state.baseOptions.pageSize,s=this.width*this.state.baseOptions.pageSize,i=this.height*this.state.baseOptions.pageSize,a=this.borderWidth*this.state.baseOptions.pageSize,n={height:t+"px",width:t+"px","border-radius":t/2+"px"};return"top"==e?Object.assign(n,{left:s/2-t/2+"px",top:-t/2+a/2+"px"}):"bottom"==e?Object.assign(n,{left:s/2-t/2+"px",top:i-t/2-a/2+"px"}):"left"==e?Object.assign(n,{left:-t/2+a/2+"px",top:(i-t)/2+"px"}):"right"==e?Object.assign(n,{left:s-t/2-a/2+"px",top:(i-t)/2+"px"}):void 0},showMenu:function(e){var t=this;this.contentMenu&&(this.contentMenu.destroy(),this.contentMenu=null);var s=this.designer.myMenuOptions,i=s.defaultMenu,a=s.userMenu,n=s.beforeShowMenu,r=Object(se["a"])(i);a&&Array.isArray(a)&&(r=r.concat(a)),"function"===typeof n&&(r=n(this.selfNode,r,"node"),Array.isArray(r)?r=r.map((function(e){var t={text:e.text,value:e.value};return e.img?t.img=e.img:e.icon&&(t.icon=e.icon),t})):console.warn("ctxMenuOptions.beforeShowMenu返回值必须是一个数组")),r.length<1||(this.contentMenu=pe({data:r,left:e.clientX,top:e.clientY,choose:function(e){t.designer.$emit("ctx-menu-".concat(e.value),t.selfNode,"node"),t.$emit("operat-node",e.value,t.k)}}))},mousedown:function(e){if(this._is_drag=!1,1==e.which){if(this.state.disabled)return;var t=[];"node"==this.state.choosing.type&&(t=e.ctrlKey||this.state.choosing.key.length>1?this.state.choosing.key:[]),t.indexOf(this.k)<0&&t.push(this.k);var s={},i=[];this.state.nodes.forEach((function(e){t.indexOf(e.key)>-1&&(s[e.key]={beginX:parseInt(e.x),beginY:parseInt(e.y)},i.push(e))})),this.designer&&D(this.$store,"UPDATE_CHOOSING",{type:"node",key:t}),this.setDraging({type:"node",data:{key:this.key,beginX:parseInt(this.x),beginY:parseInt(this.y),beginPageX:e.pageX,beginPageY:e.pageY,selectedNodesBegin:s,nodes:i}})}this._mouseBeginX=e.clientX,this._mouseBeginY=e.clientY},mouseup:function(e){if(3==e.which&&this.showMenu(e),!this.state.disabled){if(this._mouseEndX=e.clientX,this._mouseEndY=e.clientY,this.isdrag(this._mouseBeginX,this._mouseBeginY,this._mouseEndX,this._mouseEndY))return this._is_drag=!0,e.preventDefault(),!1;var t=[];e.ctrlKey&&"node"==this.state.choosing.type&&(t=this.state.choosing.key||[]),t.indexOf(this.k)<0&&t.push(this.k),this.designer&&D(this.$store,"UPDATE_CHOOSING",{type:"node",key:t})}},click:function(e){if(!this.state.disabled)return this._is_drag||e.ctrlKey?(e.preventDefault(),e.stopPropagation(),!1):void this.designer.$emit("node-click",this.selfNode)},isdrag:function(e,t,s,i){return Math.sqrt((e-s)*(e-s)+(t-i)*(t-i))>4},clickAnchor:function(e,t){if(!this.state.disabled){var s=this.selfNode,i={top:"bottom",bottom:"top",left:"right",right:"left"},a=i[e],n=this.x,r=this.y;"top"==a&&(r+=this.height),"bottom"==a&&(r-=this.height),"left"==a&&(n+=this.width),"right"==a&&(n-=this.width);var o=Object.assign({},s,{key:S(),x:n,y:r});this.setDraging({type:"link",data:me({key:S(),beginNode:s,beginNodeArrow:e,endNode:o,endNodeArrow:a,beginX:t.pageX-this.state.baseOptions.nodeViewOffsetX,beginY:t.pageY-this.state.baseOptions.nodeViewOffsetY,endX:0,endY:0},this.state.linkerOptions)})}},dblclick:function(){this.designer&&this.designer.$emit("node-dblclick",this.selfNode)},getHtmlNodeRect:function(){if(this.$refs[this.k]){var e=this.$refs[this.k];return e.$el.getBoundingClientRect()}}})},be=ge,ve=Object(b["a"])(be,ee,te,!1,null,null,null),ye=ve.exports,we=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"linker-box"})},Te=[],Se={mixins:[A],props:{k:{type:[String,Number],required:!0},beginNode:{type:Object,required:!0},beginNodeArrow:{type:String,required:!0},endNode:{type:Object,required:!0},endNodeArrow:{type:String,required:!0},lineWidth:{type:[Number],required:!0},borderWidth:{type:[Number],required:!0},extWidth:{type:[Number],required:!0},borderColor:{type:String,required:!0}},data:function(){return{currentBorderColor:this.borderColor}},computed:{beginX:function(){var e=0;return"top"!=this.beginNodeArrow&&"bottom"!=this.beginNodeArrow||(e=this.beginNode.x+this.beginNode.width/2),"left"==this.beginNodeArrow&&(e=this.beginNode.x),"right"==this.beginNodeArrow&&(e=this.beginNode.x+this.beginNode.width),e*this.state.baseOptions.pageSize},beginY:function(){var e=0;return"top"==this.beginNodeArrow&&(e=this.beginNode.y),"bottom"==this.beginNodeArrow&&(e=this.beginNode.y+this.beginNode.height),"left"==this.beginNodeArrow&&(e=this.beginNode.y+this.beginNode.height/2),"right"==this.beginNodeArrow&&(e=this.beginNode.y+this.beginNode.height/2),e*this.state.baseOptions.pageSize},endX:function(){var e=0;return"top"!=this.endNodeArrow&&"bottom"!=this.endNodeArrow||(e=this.endNode.x+this.endNode.width/2),"left"==this.endNodeArrow&&(e=this.endNode.x),"right"==this.endNodeArrow&&(e=this.endNode.x+this.endNode.width),e*this.state.baseOptions.pageSize},endY:function(){var e=0;return"top"==this.endNodeArrow&&(e=this.endNode.y),"bottom"==this.endNodeArrow&&(e=this.endNode.y+this.endNode.height),"left"==this.endNodeArrow&&(e=this.endNode.y+this.endNode.height/2),"right"==this.endNodeArrow&&(e=this.endNode.y+this.endNode.height/2),e*this.state.baseOptions.pageSize}},watch:{"beginNode.runState":function(e){e.borderColor&&(this.currentBorderColor=e.borderColor)},"state.linkType":function(){this.calculate()}},mounted:function(){var e=this;this.nodes=[],this.designer=T(this,"Designer"),this.calculate(),this.$watch("beginX",(function(){e.calculate()})),this.$watch("beginY",(function(){e.calculate()})),this.$watch("endX",(function(){e.calculate()})),this.$watch("endY",(function(){e.calculate()}))},methods:{calculate:function(){if(!(Math.abs(this.endY-this.beginY)<5&&Math.abs(this.endX-this.beginX)<5)){this.nodes.splice(0,this.nodes.length);var e=this.beginX,t=this.beginY,s=this.endX,i=this.endY,a=this.extWidth;this.nodes.push({x:e,y:t});var n=t;"right"==this.beginNodeArrow&&"left"==this.endNodeArrow&&(s>=e?(e=Math.round(e+(s-e)/2),this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t})):Math.abs(i-t)>(this.beginNode.height+this.endNode.height)/2*this.state.baseOptions.pageSize+10?(e+=a,this.nodes.push({x:e,y:t}),t=Math.round(t+(i-t)/2),this.nodes.push({x:e,y:t}),e=s-a,this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t})):(e=Math.max(e,s+this.endNode.width*this.state.baseOptions.pageSize)+a,this.nodes.push({x:e,y:t}),t=i>t?i+this.endNode.height/2*this.state.baseOptions.pageSize+a:i-this.endNode.height/2*this.state.baseOptions.pageSize-a,this.nodes.push({x:e,y:t}),e=s-a,this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t}))),"right"==this.beginNodeArrow&&"top"==this.endNodeArrow&&(s>=e?i>=t?(e=s,this.nodes.push({x:e,y:t})):(e=Math.round(s-this.endNode.width/2*this.state.baseOptions.pageSize)>=e?Math.round((s-this.endNode.width/2*this.state.baseOptions.pageSize+e)/2):Math.round(s+this.endNode.width/2*this.state.baseOptions.pageSize+a),this.nodes.push({x:e,y:t}),t=i-a,this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t})):(i>t+this.beginNode.height/2*this.state.baseOptions.pageSize?(e+=a,this.nodes.push({x:e,y:t}),t=Math.round((i+t+this.beginNode.height/2*this.state.baseOptions.pageSize)/2)):(e=Math.max(e,Math.round(s+this.endNode.width/2*this.state.baseOptions.pageSize))+a,this.nodes.push({x:e,y:t}),t=Math.min(i,Math.round(t-this.beginNode.height/2*this.state.baseOptions.pageSize))-a),this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t}))),"right"==this.beginNodeArrow&&"bottom"==this.endNodeArrow&&(s>=e?i<=t?(e=s,this.nodes.push({x:e,y:t})):(e=Math.round(s-this.endNode.width/2*this.state.baseOptions.pageSize)>=e?Math.round((s-this.endNode.width/2*this.state.baseOptions.pageSize+e)/2):Math.round(s+this.endNode.width/2*this.state.baseOptions.pageSize+a),this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t})):(i<t-this.beginNode.height/2*this.state.baseOptions.pageSize?(e+=a,this.nodes.push({x:e,y:t}),t=Math.round((i+t-this.beginNode.height/2*this.state.baseOptions.pageSize)/2)):(e=Math.max(e,Math.round(s+this.endNode.width/2*this.state.baseOptions.pageSize))+a,this.nodes.push({x:e,y:t}),t=Math.max(i,Math.round(t+this.beginNode.height/2*this.state.baseOptions.pageSize))+a),this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t}))),"right"==this.beginNodeArrow&&"right"==this.endNodeArrow&&(i-this.endNode.height/2*this.state.baseOptions.pageSize>=t+this.beginNode.height/2*this.state.baseOptions.pageSize||i+this.endNode.height/2*this.state.baseOptions.pageSize<=t-this.beginNode.height/2*this.state.baseOptions.pageSize?(e=Math.max(s,e)+a,this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t})):(e+=a,this.nodes.push({x:e,y:t}),t=s>e?i>t?i-this.endNode.height/2*this.state.baseOptions.pageSize-a:i+this.endNode.height/2*this.state.baseOptions.pageSize+a:i<t?t-this.endNode.height/2*this.state.baseOptions.pageSize-a:t+this.endNode.height/2*this.state.baseOptions.pageSize+a,this.nodes.push({x:e,y:t}),e=s+a,this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t}))),"bottom"==this.beginNodeArrow&&"left"==this.endNodeArrow&&(s>=e?i>=t?(t=i,this.nodes.push({x:e,y:t})):(t+=a,this.nodes.push({x:e,y:t}),e=s>e+this.beginNode.width/2*this.state.baseOptions.pageSize?Math.round((s+e+this.beginNode.width/2*this.state.baseOptions.pageSize)/2):Math.min(s,Math.round(e-this.beginNode.width/2*this.state.baseOptions.pageSize))-a,this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t})):(t=Math.round(i-this.endNode.height/2*this.state.baseOptions.pageSize)>=t?Math.round((i-this.endNode.height/2*this.state.baseOptions.pageSize+t)/2):Math.max(t,Math.round(i+this.endNode.height/2*this.state.baseOptions.pageSize))+a,this.nodes.push({x:e,y:t}),e=Math.min(e-Math.round(this.beginNode.width/2*this.state.baseOptions.pageSize),s)-a,this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t}))),"bottom"==this.beginNodeArrow&&"right"==this.endNodeArrow&&(s<=e?i>=t?(t=i,this.nodes.push({x:e,y:t})):(t+=a,this.nodes.push({x:e,y:t}),e=s<e-this.beginNode.width/2*this.state.baseOptions.pageSize?Math.round((s+e-this.beginNode.width/2*this.state.baseOptions.pageSize)/2):Math.max(s,Math.round(e+this.beginNode.width/2*this.state.baseOptions.pageSize))+a,this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t})):(t=Math.round(i-this.endNode.height/2*this.state.baseOptions.pageSize)>=t?Math.round((i-this.endNode.height/2*this.state.baseOptions.pageSize+t)/2):Math.max(t,Math.round(i+this.endNode.height/2*this.state.baseOptions.pageSize))+a,this.nodes.push({x:e,y:t}),e=Math.max(e+Math.round(this.beginNode.width/2*this.state.baseOptions.pageSize),s)+a,this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t}))),"bottom"==this.beginNodeArrow&&"top"==this.endNodeArrow&&"straight"===this.state.linkType&&(i>=t?e!==s&&(t=Math.round((t+i)/2),this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t})):s+this.endNode.width/2*this.state.baseOptions.pageSize<e-this.beginNode.width/2*this.state.baseOptions.pageSize?(t+=a,this.nodes.push({x:e,y:t}),e=Math.round((s+this.endNode.width/2*this.state.baseOptions.pageSize+e-this.beginNode.width/2*this.state.baseOptions.pageSize)/2),this.nodes.push({x:e,y:t}),t=i-a,this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t})):s+this.endNode.width/2*this.state.baseOptions.pageSize>=e-this.beginNode.width/2*this.state.baseOptions.pageSize&&s+this.endNode.width/2*this.state.baseOptions.pageSize<e+this.beginNode.width/2*this.state.baseOptions.pageSize?(t+=a,this.nodes.push({x:e,y:t}),e=Math.min(Math.round(s-this.endNode.width/2*this.state.baseOptions.pageSize),Math.round(e-this.beginNode.width/2*this.state.baseOptions.pageSize))-a,this.nodes.push({x:e,y:t}),t=Math.min(t-a-this.beginNode.height*this.state.baseOptions.pageSize,i)-a,this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t})):s-this.endNode.width/2*this.state.baseOptions.pageSize>e-this.beginNode.width/2*this.state.baseOptions.pageSize&&s-this.endNode.width/2*this.state.baseOptions.pageSize<=e+this.beginNode.width/2*this.state.baseOptions.pageSize?(t+=a,this.nodes.push({x:e,y:t}),e=Math.max(Math.round(s+this.endNode.width/2*this.state.baseOptions.pageSize),Math.round(e+this.beginNode.width/2*this.state.baseOptions.pageSize))+a,this.nodes.push({x:e,y:t}),t=Math.min(t-a-this.beginNode.height*this.state.baseOptions.pageSize,i)-a,this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t})):s-this.endNode.width/2*this.state.baseOptions.pageSize>e+this.beginNode.width/2*this.state.baseOptions.pageSize&&(t+=a,this.nodes.push({x:e,y:t}),e=Math.round((s-this.endNode.width/2*this.state.baseOptions.pageSize+e+this.beginNode.width/2*this.state.baseOptions.pageSize)/2),this.nodes.push({x:e,y:t}),t=i-a,this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t}))),"bottom"==this.beginNodeArrow&&"bottom"==this.endNodeArrow&&(s+this.endNode.width/2*this.state.baseOptions.pageSize<=e-this.beginNode.width/2*this.state.baseOptions.pageSize||s-this.endNode.width/2*this.state.baseOptions.pageSize>=e+this.beginNode.width/2*this.state.baseOptions.pageSize?(t=Math.max(t,i)+a,this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t})):(t+=a,this.nodes.push({x:e,y:t}),i<=t?(e=s<=e?e-this.beginNode.width/2*this.state.baseOptions.pageSize-a:e+this.endNode.width/2*this.state.baseOptions.pageSize+a,this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t})):(e=s<=e?s+this.endNode.width/2*this.state.baseOptions.pageSize+a:s-this.endNode.width/2*this.state.baseOptions.pageSize-a,this.nodes.push({x:e,y:t}),t=Math.max(this.beginY,i)+a,this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t})))),"left"==this.beginNodeArrow&&"right"==this.endNodeArrow&&(s<=e?(e=Math.round(e+(s-e)/2),this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t})):Math.abs(i-t)>(this.beginNode.height+this.endNode.height)/2*this.state.baseOptions.pageSize+10?(e-=a,this.nodes.push({x:e,y:t}),t=Math.round(t+(i-t)/2),this.nodes.push({x:e,y:t}),e=s+a,this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t})):(e=Math.min(e,s-this.endNode.width*this.state.baseOptions.pageSize)-a,this.nodes.push({x:e,y:t}),t=i>t?i+this.endNode.height/2*this.state.baseOptions.pageSize+a:i-this.endNode.height/2*this.state.baseOptions.pageSize-a,this.nodes.push({x:e,y:t}),e=s+a,this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t}))),"left"==this.beginNodeArrow&&"top"==this.endNodeArrow&&(s<=e?i>=t?(e=s,this.nodes.push({x:e,y:t})):(e=Math.round(s+this.endNode.width/2*this.state.baseOptions.pageSize)<=e?Math.round((s+this.endNode.width/2*this.state.baseOptions.pageSize+e)/2):Math.round(s-this.endNode.width/2*this.state.baseOptions.pageSize-a),this.nodes.push({x:e,y:t}),t=i-a,this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t})):(i>t+this.beginNode.height/2*this.state.baseOptions.pageSize?(e-=a,this.nodes.push({x:e,y:t}),t=Math.round((i+t+this.beginNode.height/2*this.state.baseOptions.pageSize)/2)):(e=Math.min(e,Math.round(s-this.endNode.width/2*this.state.baseOptions.pageSize))-a,this.nodes.push({x:e,y:t}),t=Math.min(i,Math.round(t-this.beginNode.height/2*this.state.baseOptions.pageSize))-a),this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t}))),"left"==this.beginNodeArrow&&"bottom"==this.endNodeArrow&&(s<=e?i<=t?(e=s,this.nodes.push({x:e,y:t})):(e=Math.round(s+this.endNode.width/2*this.state.baseOptions.pageSize)<=e?Math.round((s+this.endNode.width/2*this.state.baseOptions.pageSize+e)/2):Math.round(s-this.endNode.width/2*this.state.baseOptions.pageSize-a),this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t})):(i<t-this.beginNode.height/2*this.state.baseOptions.pageSize?(e-=a,this.nodes.push({x:e,y:t}),t=Math.round((i+t-this.beginNode.height/2*this.state.baseOptions.pageSize)/2)):(e=Math.min(e,Math.round(s-this.endNode.width/2*this.state.baseOptions.pageSize))-a,this.nodes.push({x:e,y:t}),t=Math.max(i,Math.round(t+this.beginNode.height/2*this.state.baseOptions.pageSize))+a),this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t}))),"left"==this.beginNodeArrow&&"left"==this.endNodeArrow&&(i-this.endNode.height/2*this.state.baseOptions.pageSize>=t+this.beginNode.height/2*this.state.baseOptions.pageSize||i+this.endNode.height/2*this.state.baseOptions.pageSize<=t-this.beginNode.height/2*this.state.baseOptions.pageSize?(e=Math.min(s,e)-a,this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t})):(e-=a,this.nodes.push({x:e,y:t}),t=s<e?i>t?i-this.endNode.height/2*this.state.baseOptions.pageSize-a:i+this.endNode.height/2*this.state.baseOptions.pageSize+a:i<t?t-this.endNode.height/2*this.state.baseOptions.pageSize-a:t+this.endNode.height/2*this.state.baseOptions.pageSize+a,this.nodes.push({x:e,y:t}),e=s-a,this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t}))),"top"==this.beginNodeArrow&&"left"==this.endNodeArrow&&(s>=e?i<=t?(t=i,this.nodes.push({x:e,y:t})):(t-=a,this.nodes.push({x:e,y:t}),e=s>e+this.beginNode.width/2*this.state.baseOptions.pageSize?Math.round((s+e+this.beginNode.width/2*this.state.baseOptions.pageSize)/2):Math.min(s,Math.round(e-this.beginNode.width/2*this.state.baseOptions.pageSize))-a,this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t})):(i+this.endNode.height/2*this.state.baseOptions.pageSize<t?t=Math.round((t+i+this.endNode.height/2*this.state.baseOptions.pageSize)/2):(t=Math.round(i-this.endNode.height/2*this.state.baseOptions.pageSize-a),t>n&&(t=n-a)),this.nodes.push({x:e,y:t}),e=Math.min(e-Math.round(this.beginNode.width/2*this.state.baseOptions.pageSize),s)-a,this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t}))),"top"==this.beginNodeArrow&&"right"==this.endNodeArrow&&(i<t?s<=e?(t=i,this.nodes.push({x:e,y:t})):(t=Math.round((i+t+this.endNode.height/2*this.state.baseOptions.pageSize)/2),this.nodes.push({x:e,y:t}),e=s+a,this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t})):(t-=a,this.nodes.push({x:e,y:t}),s<e-this.beginNode.width/2*this.state.baseOptions.pageSize?(e=Math.round((s+e-this.beginNode.width/2*this.state.baseOptions.pageSize)/2),this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t})):(e=Math.max(e+this.beginNode.width/2*this.state.baseOptions.pageSize,s)+a,this.nodes.push({x:e,y:t}),t=i,this.nodes.push({x:e,y:t})))),"top"==this.beginNodeArrow&&"top"==this.endNodeArrow&&(s+this.endNode.width/2*this.state.baseOptions.pageSize<e||s-this.endNode.width/2*this.state.baseOptions.pageSize>e?(t=Math.min(i,t)-a,this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t})):i>t+this.beginNode.height*this.state.baseOptions.pageSize?(t-=a,this.nodes.push({x:e,y:t}),e=s<e?e-this.beginNode.width/2*this.state.baseOptions.pageSize-a:e+this.beginNode.width/2*this.state.baseOptions.pageSize+a,this.nodes.push({x:e,y:t}),t=Math.round((n+this.beginNode.height*this.state.baseOptions.pageSize+i)/2),this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t})):i-this.endNode.height/2*this.state.baseOptions.pageSize<t&&(t=Math.round((t+i+this.endNode.height*this.state.baseOptions.pageSize)/2),this.nodes.push({x:e,y:t}),e=s<e?s+this.endNode.width/2*this.state.baseOptions.pageSize+a:s-this.beginNode.width/2*this.state.baseOptions.pageSize-a,this.nodes.push({x:e,y:t}),t=i-a,this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t}))),"top"==this.beginNodeArrow&&"bottom"==this.endNodeArrow&&"straight"===this.state.linkType&&(i<=t?(t=(i+t)/2,this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t})):(t-=a,this.nodes.push({x:e,y:t}),s-this.endNode.width/2*this.state.baseOptions.pageSize>=e+this.beginNode.width/2*this.state.baseOptions.pageSize?(e=(e-this.beginNode.width*this.state.baseOptions.pageSize/2+s+this.endNode.width*this.state.baseOptions.pageSize/2)/2,this.nodes.push({x:e,y:t})):s>=e?(e=s+this.endNode.width*this.state.baseOptions.pageSize/2+a,this.nodes.push({x:e,y:t})):s+this.endNode.width/2*this.state.baseOptions.pageSize>=e-this.beginNode.width/2*this.state.baseOptions.pageSize?(e=s-this.endNode.width*this.state.baseOptions.pageSize/2-a,this.nodes.push({x:e,y:t})):(e=(e-this.beginNode.width*this.state.baseOptions.pageSize/2+s+this.endNode.width*this.state.baseOptions.pageSize/2)/2,this.nodes.push({x:e,y:t})),t=i+a,this.nodes.push({x:e,y:t}),e=s,this.nodes.push({x:e,y:t}))),this.nodes.push({x:s,y:i}),this.emitChange()}},emitChange:function(){this.$emit("after-calculate",{key:this.k,nodes:this.nodes,stroke:this.currentBorderColor,fill:this.currentBorderColor,lineWidth:this.lineWidth})}}},Ee=Se,Ne=Object(b["a"])(Ee,we,Te,!1,null,null,null),Ce=Ne.exports;function ke(e,t,s,i,a,n,r,o,c){"string"==typeof t&&(t=parseInt(t)),"string"==typeof s&&(s=parseInt(s)),"string"==typeof i&&(i=parseInt(i)),"string"==typeof a&&(a=parseInt(a)),n="undefined"!=typeof n?n:3,r="undefined"!=typeof r?r:1,o="undefined"!=typeof o?o:Math.PI/9,c="undefined"!=typeof c?c:10;var l,d,u,h,p="function"!=typeof n?Oe:n,f=Math.sqrt((i-t)*(i-t)+(a-s)*(a-s)),m=(f-c/3)/f;1&r?(l=Math.round(t+(i-t)*m),d=Math.round(s+(a-s)*m)):(l=i,d=a),2&r?(u=t+(i-t)*(1-m),h=s+(a-s)*(1-m)):(u=t,h=s),e.beginPath(),e.moveTo(u,h),e.lineTo(l,d),e.stroke();var g=Math.atan2(a-s,i-t),b=Math.abs(c/Math.cos(o));if(1&r){var v=g+Math.PI+o,y=i+Math.cos(v)*b,w=a+Math.sin(v)*b,T=g+Math.PI-o,S=i+Math.cos(T)*b,E=a+Math.sin(T)*b;p(e,y,w,i,a,S,E,n)}if(2&r){var N=g+o,C=t+Math.cos(N)*b,k=s+Math.sin(N)*b,O=g-o,x=t+Math.cos(O)*b,I=s+Math.sin(O)*b;p(e,C,k,t,s,x,I,n)}}function Oe(e,t,s,i,a,n,r,o){switch("string"==typeof t&&(t=parseInt(t)),"string"==typeof s&&(s=parseInt(s)),"string"==typeof i&&(i=parseInt(i)),"string"==typeof a&&(a=parseInt(a)),"string"==typeof n&&(n=parseInt(n)),"string"==typeof r&&(r=parseInt(r)),e.save(),e.beginPath(),e.moveTo(t,s),e.lineTo(i,a),e.lineTo(n,r),o){case 0:var c=Math.sqrt((n-t)*(n-t)+(r-s)*(r-s));e.arcTo(i,a,t,s,.55*c),e.fill();break;case 1:e.beginPath(),e.moveTo(t,s),e.lineTo(i,a),e.lineTo(n,r),e.lineTo(t,s),e.fill();break;case 2:e.stroke();break;case 3:var l=(t+i+n)/3,d=(s+a+r)/3;e.quadraticCurveTo(l,d,t,s),e.fill();break;case 4:var u,h,p,f,m=5;if(n==t)c=r-s,u=(i+t)/2,p=(i+t)/2,h=a+c/m,f=a-c/m;else{c=Math.sqrt((n-t)*(n-t)+(r-s)*(r-s));var g=(t+n)/2,b=(s+r)/2,v=(g+i)/2,y=(b+a)/2,w=(r-s)/(n-t),T=c/(2*Math.sqrt(w*w+1))/m,S=w*T;u=v-T,h=y-S,p=v+T,f=y+S}e.bezierCurveTo(u,h,p,f,t,s),e.fill();break}e.restore()}function xe(e,t,s){var i=t.nodes,a=void 0===i?[]:i,n=t.lineWidth,r=t.stroke,o=t.fill;e.strokeStyle=r,e.fillStyle=o,e.lineWidth=n*s.baseOptions.pageSize,e.lineCap="round",e.lineJoin="round",a.forEach((function(t,i){0==i?(e.beginPath(),e.moveTo(t.x,t.y)):i==a.length-1?ke(e,a[i-1].x,a[i-1].y,t.x,t.y,3,1,Math.PI/8,10*s.baseOptions.pageSize):(e.lineTo(t.x,t.y),e.stroke())}))}function Ie(e,t,s){t.forEach((function(t){xe(e,t,s)}))}var Re=Ie;function De(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function Le(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?De(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):De(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Ae={directives:{clickoutside:ce},components:{Noder:ye,Linker:Ce},mixins:[A],data:function(){return{scrollTop:0,scrollLeft:0,initDatas:[],currentMaxRowY:0,boxSelectLayerStyle:{}}},computed:{getBaseStyle:function(){return{left:this.state.shapeOptions.viewWidth+"px"}},getGridStyle:function(){return{height:this.state.gridOptions.height*this.state.baseOptions.pageSize+"px",width:this.state.gridOptions.width*this.state.baseOptions.pageSize+"px"}}},mounted:function(){var e=this;this.designer=T(this,"Designer"),this.$refs.viewport.addEventListener("scroll",(function(t){e.scrollTop=t.srcElement.scrollTop,e.scrollLeft=t.srcElement.scrollLeft,e.$emit("node-view-scroll",{scrollTop:e.scrollTop,scrollLeft:e.scrollLeft})})),this.$watch("state.fullScreen",(function(){this.initView()})),this.$nextTick(this.initView)},updated:function(){this.state&&this.state.nodes&&this.state.nodes.length&&("number"===typeof this.state.nodes[0].width&&(this.state.nodeOptions.width=this.state.nodes[0].width,D(this.$store,"UPDATE_NODE_OPTION",this.state.nodeOptions)),this.state.nodes[0].linkType&&this.state.nodes[0].linkType!==this.state.linkType&&D(this.$store,"UPDATE_LINKTYPE",this.state.nodes[0].linkType))},beforeDestroy:function(){this.contentMenu&&(this.contentMenu.destroy(),this.contentMenu=null)},methods:Le({},L(["setDraging","clearDraging","deleteNode","getNodeByKey"]),{initView:function(){var e=this,t=this.$el.getBoundingClientRect();D(this.$store,"UPDATE_NODEVIEW_OFFSET",{x:t.left,y:t.top});var s=[];this.state.nodes.forEach((function(t,i){if(t.template){var a=e.$refs.nodes[i],n=a.getHtmlNodeRect();if(t.width!==n.width||t.height!==n.height){var r=Le({},t,{width:n.width,height:n.height});s.push(r),e.updateNode(t.key,r)}}})),s.length&&this.state.links.forEach((function(t,i){var a=s.find((function(e){return e.key===t.beginNode.key})),n=s.find((function(e){return e.key===t.endNode.key})),r=Le({},t);a&&(r.beginNode=a),n&&(r.endNode=n),(a||n)&&e.updateLink(i,r)}))},autoFormat:function(e){var t=this,s=this.state,i=s.nodes,a=s.links,n=s.nodeOptions,r=s.linkType;i.forEach((function(e){e.childNodes=[],e.parentNodes=[]}));var o={initNodes:JSON.parse(JSON.stringify(i)),initLinks:JSON.parse(JSON.stringify(a)),initNodeWidth:n.width,initLinkType:r};this.initDatas.push(o);var c={initX:100,initY:100,nodeWidth:e.nodeWidth,nodeHeight:40,nodeWidthGap:40,nodeHeightGap:100,treesWidthGap:100,treesHeightGap:100,maxReturnX:3e3};if(!(i&&i.length>0))return this.designer.$emit("message",{type:"error",msg:this.t("vue-process.cannot be formatted")});if(!(a&&a.length>0)){var l=6;return i.forEach((function(s,i){s.x=c.initX+i%l*(c.nodeWidth+c.nodeWidthGap),s.y=c.initY+Math.floor(i/l)*(c.nodeHeight+c.nodeHeightGap),s.width=e.nodeWidth,t.updateNode(s.key,s)})),void this.updateAfterFormat(e)}var d={crossLevelConnection:!1,1:[]};if(i.forEach((function(e){e.alreadySetLevel=!1,e.alreadyFindPair=!1,e.level=0,e.allChildrenKeys=[],e.alreadySetXY=!1,e.alreadyFindAllConnectedNodes=!1,a.forEach((function(t){t.beginNode.key===e.key&&e.childNodes.push(t.endNode),t.endNode.key===e.key&&e.parentNodes.push(t.beginNode)})),e.parentNodes.length||(e.level=1,d["1"].push(e))})),this.setNodesWithLevel(d,1),this.currentMaxRowY=0,d.crossLevelConnection){var u=[];i.forEach((function(e){if(!e.alreadySetXY){e.x=0,e.y=0;var s={nodes:[e],currentMaxX:{0:0},index:u.length};u.push(s),e.alreadySetXY=!0,t.updateNode(e.key,e),0===e.childNodes.length&&0===e.parentNodes.length||t.setAllConnectedNodesXY(u,s.index,a)}}));var h=[{initX:c.initX,initY:c.initY}];u.forEach((function(e,s){var i=0;Object.keys(e.currentMaxX).forEach((function(e){1-e>i&&(i=1-e)})),h[s].distance=i;var a={};e.nodes.forEach((function(e){a[e.y+i]?a[e.y+i]+=1:a[e.y+i]=1})),t.getRealXY(a,h,u,s,c)})),u.forEach((function(s,i){var a=h[i],n=a.distance;s.nodes.forEach((function(s){a[s.y+n].locatedNodes?a[s.y+n].locatedNodes+=1:a[s.y+n].locatedNodes=1,s.x=a[s.y+n].x+(a[s.y+n].locatedNodes-1)*(c.nodeWidth+c.nodeWidthGap),s.y=a[s.y+n].y,s.width=e.nodeWidth,t.updateNode(s.key,s)}))}));for(var p=0;p<a.length;p++)Math.abs(a[p].beginNode.y-a[p].endNode.y)>c.nodeHeight+c.nodeHeightGap?(a[p].beginNodeArrow="left",a[p].endNodeArrow="left"):a[p].beginNode.y-a[p].endNode.y===0?a[p].beginNode.x>a[p].endNode.x?(a[p].beginNodeArrow="left",a[p].endNodeArrow="right"):(a[p].beginNodeArrow="right",a[p].endNodeArrow="left"):a[p].endNode.y>a[p].beginNode.y?(a[p].beginNodeArrow="bottom",a[p].endNodeArrow="top"):(a[p].beginNodeArrow="bottom",a[p].endNodeArrow="bottom"),this.updateLink(p,a[p])}else{d["1"].forEach((function(e){e.alreadySetLevel=!0,t.setAllChildrenKeys(e,e)}));var f=[];d["1"].forEach((function(e,s){if(!e.alreadyFindPair){var i=[e];d["1"].forEach((function(a,n){s===n||a.alreadyFindPair||t.hasSameChild(e,a)&&(i.push(a),a.alreadyFindPair=!0)})),e.alreadyFindPair=!0,f.push(i)}})),f.forEach((function(e,t){var s=[];e.forEach((function(e){s.push(e.key),s=s.concat(e.allChildrenKeys)})),f[t]=Array.from(new Set(s))}));var m=[];f.forEach((function(e){var s=[];e.forEach((function(e){s.push(t.findNodeByKey(e,i))})),m.push(s)}));var g=[{initX:c.initX,initY:c.initY}];m.forEach((function(e,s){var i={};e.forEach((function(e){i[e.level]?i[e.level]+=1:i[e.level]=1})),t.getRealXY(i,g,m,s,c)})),m.forEach((function(s,i){var a=g[i];s.forEach((function(s){a[s.level].locatedNodes?a[s.level].locatedNodes+=1:a[s.level].locatedNodes=1,s.x=a[s.level].x+(a[s.level].locatedNodes-1)*(c.nodeWidth+c.nodeWidthGap),s.y=a[s.level].y,s.width=e.nodeWidth,t.updateNode(s.key,s)}))}));for(var b=0;b<a.length;b++)a[b].beginNodeArrow="bottom",a[b].endNodeArrow="top",this.updateLink(b,a[b])}this.updateAfterFormat(e)},updateNode:function(e,t){D(this.$store,"UPDATE_NODE",{key:e,obj:t})},updateAllNodes:function(e){D(this.$store,"UPDATE_ALLNODES",e)},updateLink:function(e,t){D(this.$store,"UPDATE_LINKER",{index:e,obj:t})},updateAllLinks:function(e){D(this.$store,"UPDATE_ALLLINKERS",e)},updateAfterFormat:function(e){var t=this;this.state.nodeOptions.width=e.nodeWidth,D(this.$store,"UPDATE_NODE_OPTION",this.state.nodeOptions),D(this.$store,"UPDATE_LINKTYPE",e.linkType),D(this.$store,"UPDATE_ISFORMATTED",!0),this.state.nodes.forEach((function(e){e.childNodes=[],e.parentNodes=[],e.linkType=t.state.linkType})),this.updateAllNodes(this.state.nodes)},findNode:function(e,t,s){if("down"===s&&e.childNodes&&e.childNodes.length)for(var i=0;i<e.childNodes.length;i++){if(e.childNodes[i].key===t.key)return!0;this.findNode(e.childNodes[i],t,"down")}if("up"===s&&e.parentNodes&&e.parentNodes.length)for(var a=0;a<e.parentNodes.length;a++){if(e.parentNodes[a].key===t.key)return!0;this.findNode(e.parentNodes[a],t,"up")}return!1},setNodesWithLevel:function(e,t){var s=!1;e[t].forEach((function(i){if(i.childNodes.length)for(var a=0;a<i.childNodes.length;a++){if(i.childNodes[a].level&&i.childNodes[a].level!==t+1)return e.crossLevelConnection=!0;i.childNodes[a].alreadySetLevel||(i.childNodes[a].level=t+1),i.childNodes[a].alreadySetLevel||(e[t+1+""]?e[t+1+""].push(i.childNodes[a]):e[t+1+""]=[i.childNodes[a]],i.childNodes[a].alreadySetLevel=!0),i.childNodes[a].childNodes.length&&(s=!0)}})),s&&this.setNodesWithLevel(e,t+1)},setAllChildrenKeys:function(e,t){var s=this;e.childNodes.length&&e.childNodes.forEach((function(e){t.allChildrenKeys.push(e.key),s.setAllChildrenKeys(e,t)}))},hasSameChild:function(e,t){for(var s=0;s<e.allChildrenKeys.length;s++)for(var i=0;i<t.allChildrenKeys.length;i++)if(e.allChildrenKeys[s]===t.allChildrenKeys[i])return!0;return!1},findNodeByKey:function(e,t){for(var s=0;s<t.length;s++)if(e===t[s].key)return t[s]},setAllConnectedNodesXY:function(e,t,s){var i=this,a=e[t];a.nodes.forEach((function(n){n.alreadyFindAllConnectedNodes||s.forEach((function(r,o){if(!r.beginNode.alreadySetXY||!r.endNode.alreadySetXY){if(n.key===r.beginNode.key)if(n.childNodes.length>1){for(var c=!1,l=0;l<n.childNodes.length;l++)if(n.childNodes[l].key!==r.endNode.key&&(c=i.findNode(n.childNodes[l],r.endNode,"down"),c))break;c||r.endNode.alreadySetXY||i.setNodeXY(n,r.endNode,a,"down")}else r.endNode.alreadySetXY||i.setNodeXY(n,r.endNode,a,"down");if(n.key===r.endNode.key)if(n.parentNodes.length>1){for(var d=!1,u=0;u<n.parentNodes.length;u++)if(n.parentNodes[u].key!==r.beginNode.key&&(d=i.findNode(n.parentNodes[u],r.beginNode,"up"),d))break;d||r.beginNode.alreadySetXY||i.setNodeXY(n,r.beginNode,a,"up")}else r.beginNode.alreadySetXY||i.setNodeXY(n,r.beginNode,a,"up")}o===s.length-1&&(n.alreadyFindAllConnectedNodes=!0,i.setAllConnectedNodesXY(e,t,s))}))}))},setNodeXY:function(e,t,s,i){t.y="down"===i?e.y+1:e.y-1,t.x=void 0!==s.currentMaxX[t.y]?s.currentMaxX[t.y]+1:0,s.currentMaxX[t.y]=t.x,t.alreadySetXY=!0,s.nodes.push(t)},getRealXY:function(e,t,s,i,a){var n=1;Object.values(e).forEach((function(e){e>n&&(n=e)}));var r=n*a.nodeWidth+(n-1)*a.nodeWidthGap,o=r/2+t[i].initX;Object.keys(e).forEach((function(s){t[i][s]={},t[i][s].x=o-(e[s]*a.nodeWidth+(e[s]-1)*a.nodeWidthGap)/2,t[i][s].y=t[i].initY+(s-1)*(a.nodeHeight+a.nodeHeightGap)}));var c=Object.keys(e).length*a.nodeHeight+(Object.keys(e).length-1)*a.nodeHeightGap;if(t.length<s.length){var l=t[i].initX+r+a.treesWidthGap;t[i+1]={},c>this.currentMaxRowY&&(this.currentMaxRowY=c),l<=a.maxReturnX?(t[i+1].initX=l,t[i+1].initY=t[i].initY):(t[i+1].initX=a.initX,t[i+1].initY=t[i].initY+this.currentMaxRowY+a.treesHeightGap,this.currentMaxRowY=0)}},resetFormat:function(){var e=this,t=this.initDatas,s=t[t.length-1],i=s.initNodes,a=s.initLinks,n=s.initNodeWidth,r=s.initLinkType;this.updateAllNodes(i),this.updateAllLinks(a),this.state.links.forEach((function(t){t.beginNode=e.findNodeByKey(t.beginNode.key,e.state.nodes),t.endNode=e.findNodeByKey(t.endNode.key,e.state.nodes)})),this.updateAllLinks(this.state.links),this.state.nodeOptions.width=n,D(this.$store,"UPDATE_NODE_OPTION",this.state.nodeOptions),D(this.$store,"UPDATE_LINKTYPE",r),t.splice(t.length-1,1),0===t.length&&D(this.$store,"UPDATE_ISFORMATTED",!1)},canAddLink:function(e,t){var s=this,i=function e(t,i){s.state.links.forEach((function(s){s.endNode==t&&-1==i.indexOf(s.beginNode)&&(i.push(s.beginNode),e(s.beginNode,i))}))};if(e&&t){if(e==t)return console.error(this.t("vue-process.Unable to connect")),this.designer.$emit("message",{type:"error",msg:this.t("vue-process.Unable to connect")}),!1;if(this.state.links.filter((function(s){return s.beginNode==e&&s.endNode==t||s.endNode==e&&s.beginNode==t})).length>0)return console.error(this.t("vue-process.repeat nodes")),this.designer.$emit("message",{type:"error",msg:this.t("vue-process.repeat nodes")}),!1;var a=[];return i(e,a),-1==a.indexOf(t)||(console.error(this.t("vue-process.closed-loop")),this.designer.$emit("message",{type:"error",msg:this.t("vue-process.closed-loop")}),!1)}return!1},calculateLinkToNode:function(e,t,s,i){for(var a={x:e,y:t,node:null,arrow:""},n=0;n<this.state.nodes.length;n++){var r=this.state.nodes[n];if(s!==r.key){var o=r.x*this.state.baseOptions.pageSize,c=(r.x+r.width/2)*this.state.baseOptions.pageSize,l=(r.x+r.width)*this.state.baseOptions.pageSize,d=r.y*this.state.baseOptions.pageSize,u=(r.y+r.height/2)*this.state.baseOptions.pageSize,h=(r.y+r.height)*this.state.baseOptions.pageSize;if("left"==i||"right"==i){if(e>=o-20&&e<c&&t<=h&&t>=d){a.x=o,a.arrow="left",a.node=r;break}if(e<=l+20&&e>=c&&t<=h&&t>=d){a.x=l,a.arrow="right",a.node=r;break}if(e<=l&&e>=o){if(t<d&&t>d-20){a.y=d,a.arrow="top",a.node=r;break}if(t>h&&t<h+20){a.y=h,a.arrow="bottom",a.node=r;break}}}if("bottom"==i||"top"==i){if(t>=d-20&&t<u&&e<=l&&e>=o){a.y=d,a.arrow="top",a.node=r;break}if(t<=h+20&&t>=u&&e<=l&&e>=o){a.y=h,a.arrow="bottom",a.node=r;break}if(t<=h&&t>=d){if(e<o&&e>o-20){a.x=o,a.arrow="left",a.node=r;break}if(e>l&&e<l+20){a.x=l,a.arrow="right",a.node=r;break}}}}}return a},mousedown:function(e){var t=this,s=this.$el.getBoundingClientRect(),i=e.pageX-s.left+this.$el.scrollLeft,a=e.pageY-s.top+this.$el.scrollTop;if(e.shiftKey)this.setDraging({type:"box-select",data:{beginX:i,beginY:a}});else{if(this.state.disabled)return;if(!this.calcLinks)return;var n=this.findLinkByXY(i,a),r={};Object.keys(this.calcLinks).forEach((function(e){r[e]=Le({},t.calcLinks[e])})),n?(this._xyInLinkKey=n,D(this.$store,"UPDATE_CHOOSING",{type:"link",key:n}),delete r[n],r[n]=Le({},this.calcLinks[n],{stroke:"#3399ff",fill:"#3399ff"})):this._xyInLinkKey&&(this._xyInLinkKey=!1),this.drawLinkerRAF(r)}},mousemove:function(e){if(!this.state.disabled&&this.state.draging.type){if("node"==this.state.draging.type){var t=this.state.draging.data;if(null!=t.beginPageX&&null!=t.beginPageY)for(var s=(e.pageX-t.beginPageX)/this.state.baseOptions.pageSize,i=(e.pageY-t.beginPageY)/this.state.baseOptions.pageSize,a=0,n=t.nodes.length;a<n;a++){var r=t.nodes[a],o=t.selectedNodesBegin[r.key].beginX+s,c=t.selectedNodesBegin[r.key].beginY+i;if(this._cacheMaxXY&&(o+r.width>this._cacheMaxXY.maxX&&(this._cacheMaxXY.maxX=o+r.width,this._need_resize=this._cacheMaxXY),c+r.height>this._cacheMaxXY.maxY&&(this._need_resize=this._cacheMaxXY,this._cacheMaxXY.maxY=c+r.height)),o<0||c<0)break;var l=Object.assign(r,{x:o,y:c});t.nodes.length<2&&this.calculateSnap({compareNode:l,x:l.x+l.width/2,y:l.y+l.height/2}),D(this.$store,"UPDATE_NODE",{key:r.key,obj:l})}}if("link"==this.state.draging.type){var d,u=this.state.draging.data,h=e.pageX-this.state.baseOptions.nodeViewOffsetX+this.scrollLeft,p=e.pageY-this.state.baseOptions.nodeViewOffsetY+this.scrollTop,f=0,m=0;d=u.endNodeArrow,d=Math.abs(p-(u.beginY+this.scrollTop))>Math.abs(h-(u.beginX+this.scrollLeft))?p-u.beginY>0?"top":"bottom":h-u.beginX>0?"left":"right";var g=this.calculateLinkToNode(h,p,u.beginNode.key,d);g.arrow?(d=g.arrow,h=g.x,p=g.y,this.setDraging({type:"link",data:Object.assign(u,{preEndNode:g.node})})):this.setDraging({type:"link",data:Object.assign(u,{preEndNode:null})}),"top"==d&&(f=h-u.endNode.width/2*this.state.baseOptions.pageSize,m=p),"bottom"==d&&(f=h-u.endNode.width/2*this.state.baseOptions.pageSize,m=p-u.endNode.height*this.state.baseOptions.pageSize),"left"==d&&(f=h,m=p-u.endNode.height/2*this.state.baseOptions.pageSize),"right"==d&&(f=h-u.endNode.width*this.state.baseOptions.pageSize,m=p-u.endNode.height/2*this.state.baseOptions.pageSize),u=this.state.draging.data,this.setDraging({type:"link",data:Object.assign(u,{endNode:Object.assign(u.endNode,{x:f/this.state.baseOptions.pageSize,y:m/this.state.baseOptions.pageSize}),endNodeArrow:d,endX:h,endY:p})})}if("box-select"==this.state.draging.type){var b=this.$el.getBoundingClientRect(),v=this.state.draging.data,y=v.beginX,w=v.beginY,T=e.pageX-b.left+this.$el.scrollLeft-v.beginX,S=e.pageY-b.top+this.$el.scrollTop-v.beginY;T<0&&(y+=T,T*=-1),S<0&&(w+=S,S*=-1),this.boxSelectLayerStyle={left:"".concat(y,"px"),top:"".concat(w,"px"),width:"".concat(T,"px"),height:"".concat(S,"px"),display:"block"}}}},mouseup:function(){var e=this;if(!this.state.disabled&&this.state.draging.type){if("node"==this.state.draging.type){var t=this.state.draging.data;this.state.snapLineX.show&&(this.state.nodes.forEach((function(s){s.key===t.key&&D(e.$store,"UPDATE_NODE",{key:t.key,obj:Object.assign(s,{lastUpdateTime:Date.now(),y:e.state.snapLineX.top-s.height/2})})})),D(this.$store,"UPDATE_SNAPLINE_X",{show:!1,left:0,top:0})),this.state.snapLineY.show&&(this.state.nodes.forEach((function(s){s.key===t.key&&D(e.$store,"UPDATE_NODE",{key:t.key,obj:Object.assign(s,{lastUpdateTime:Date.now(),x:e.state.snapLineY.left-s.width/2})})})),D(this.$store,"UPDATE_SNAPLINE_Y",{show:!1,left:0,top:0})),this.clearDraging(),this.$emit("moveNode")}if("link"==this.state.draging.type){var s=this.state.draging.data;s.preEndNode&&this.canAddLink(s.beginNode,s.preEndNode)&&D(this.$store,"ADD_LINKER",Le({key:s.key,beginNode:s.beginNode,beginNodeArrow:s.beginNodeArrow,endNode:s.preEndNode,endNodeArrow:s.endNodeArrow},this.state.linkerOptions)),delete this.calcLinks[s.key],this.drawLinkerRAF(),this.clearDraging()}"box-select"==this.state.draging.type&&(this.boxSelected(),this.clearDraging())}},operatNode:function(e,t){var s=this;if(!this.state.disabled){var i=this.getNodeByKey(t);if("config"==e)D(this.$store,"UPDATE_EDIT_BASEINFO_NODE",i);else if("param"==e)D(this.$store,"UPDATE_EDIT_PARAM_NODE",i);else if("delete"==e){var a=!1;this.state.links.forEach((function(e){e.beginNode.key!==t&&e.endNode.key!==t||(delete s.calcLinks[e.key],a=!0)})),this.state.links.length<1&&(this.calcLinks={},a=!0),this.deleteNode(t),a&&this.drawLinkerRAF(),this.designer.$emit("node-delete",i)}else"copy"==e&&D(this.$store,"UPDATE_COPYING",{type:"node",key:t})}},operatLiner:function(e,t){this.state.disabled||"delete"==e&&(D(this.$store,"DELETE_LINKER_BY_KEY",t),delete this.calcLinks[t],this.drawLinkerRAF())},showMenu:function(e){var t=this;if(!this.state.disabled){if(this.contentMenu&&(this.contentMenu.destroy(),this.contentMenu=null),this._xyInLinkKey)return this.showLinkerMenu(e,this._xyInLinkKey);this._left=e.offsetX,this._top=e.offsetY;var s,i=[];"node"==this.state.copying.type&&""!=this.state.copying.key&&(s=this.getNodeByKey(this.state.copying.key),s&&i.push({icon:"fuzhi",text:this.t("vue-process.paste"),value:"paste"}));var a=this.designer.myMenuOptions,n=a.beforeShowMenu,r=a.beforePaste;"function"===typeof n&&(i=n(null,i,"view"),Array.isArray(i)?i=i.map((function(e){var t={text:e.text,value:e.value};return e.img?t.img=e.img:e.icon&&(t.icon=e.icon),t})):console.warn("ctxMenuOptions.beforeShowMenu返回值必须是一个数组")),i.length<1||(this.contentMenu=pe({data:i,left:e.clientX,top:e.clientY,choose:function(i){if(!t.state.disabled){if(i&&"paste"==i.value){var a=Object.assign({},s,{key:S(),createTime:Date.now(),x:t._left/t.state.baseOptions.pageSize,y:t._top/t.state.baseOptions.pageSize});"function"===typeof r&&(a=r(a)),a&&(D(t.$store,"ADD_NODE",a),D(t.$store,"UPDATE_COPYING",{type:"",key:""}))}t.designer.$emit("ctx-menu-".concat(i.value),e,"view")}}}))}},showLinkerMenu:function(e,t){var s=this,i=[{icon:"shanchu",text:this.t("vue-process.delete"),value:"delete"}],a=this.designer.myMenuOptions.beforeShowMenu;"function"===typeof a&&(i=a(this.k,i,"link"),Array.isArray(i)?i=i.map((function(e){var t={text:e.text,value:e.value};return e.img?t.img=e.img:e.icon&&(t.icon=e.icon),t})):console.warn("ctxMenuOptions.beforeShowMenu返回值必须是一个数组")),i.length<1||(this.contentMenu=pe({data:i,left:e.clientX,top:e.clientY,choose:function(e){s.state.disabled||(s.operatLiner(e.value,t),s.designer.$emit("ctx-menu-".concat(e.value),t,"link"))}}))},getSnapLineXStyle:function(){return{width:this.state.gridOptions.width*this.state.baseOptions.pageSize+"px",height:"1px",left:this.state.snapLineX.left*this.state.baseOptions.pageSize+"px",top:this.state.snapLineX.top*this.state.baseOptions.pageSize+"px"}},getSnapLineYStyle:function(){return{width:"1px",height:this.state.gridOptions.height*this.state.baseOptions.pageSize+"px",left:this.state.snapLineY.left*this.state.baseOptions.pageSize+"px",top:this.state.snapLineY.top*this.state.baseOptions.pageSize+"px"}},calculateSnap:function(e){for(var t=e.x,s=e.y,i=e.compareNode,a=0;a<this.state.nodes.length;a++){var n=this.state.nodes[a];if(i.key!==n.key){var r=n.x+n.width/2;if(Math.abs(t-r)<6){D(this.$store,"UPDATE_SNAPLINE_Y",{show:!0,left:r,top:0});break}D(this.$store,"UPDATE_SNAPLINE_Y",{show:!1,left:r,top:0})}}for(var o=0;o<this.state.nodes.length;o++){var c=this.state.nodes[o];if(i.key!==c.key){var l=c.y+c.height/2;if(Math.abs(s-l)<6){D(this.$store,"UPDATE_SNAPLINE_X",{show:!0,left:0,top:l});break}D(this.$store,"UPDATE_SNAPLINE_X",{show:!1,left:0,top:l})}}},boxSelected:function(){var e=this;if(this.boxSelectLayerStyle.width){var t=[];this.state.nodes.forEach((function(s,i){var a=e.$refs.nodes[i],n=getComputedStyle(a.$el),r=n.left,o=n.top,c=n.width,l=n.height,d={left:r,top:o,width:c,height:l};e.isInBoxSelect(d,e.boxSelectLayerStyle)&&(t.push(s.key),s.selected=!0)})),setTimeout((function(){D(e.$store,"UPDATE_CHOOSING",{type:"node",key:t})}),0),t.length&&this.$emit("box-select"),this.boxSelectLayerStyle={}}},isInBoxSelect:function(e,t){var s=e.top,i=e.left,a=e.width,n=e.height;s=s.replace("px","")-0,i=i.replace("px","")-0,a=a.replace("px","")-0,n=n.replace("px","")-0;var r=t.top.replace("px","")-0,o=t.left.replace("px","")-0,c=t.width.replace("px","")-0,l=t.height.replace("px","")-0,d=s>r&&i>o&&s+n<r+l&&i+a<o+c;return d},clickoutsideNode:function(){this.state.disabled||"node"==this.state.choosing.type&&D(this.$store,"UPDATE_CHOOSING",{type:"node",key:[]})},clickoutsideLink:function(){this.state.disabled||(this._xyInLinkKey&&(this._xyInLinkKey=!1,this.drawLinkerRAF()),"link"==this.state.choosing.type&&D(this.$store,"UPDATE_CHOOSING",{type:"link",key:[]}))},drawLinkers:function(e){var t=this;if(this.canvasCtx||(this.canvas=this.$refs.canvas,this.canvasCtx=this.canvas.getContext("2d"),this._need_resize=!0),this._need_resize){if(!0===this._need_resize){var s=this.getMaxXY();this._cacheMaxXY=s}var i=this._cacheMaxXY.maxX>1e4?1e4:this._cacheMaxXY.maxX,a=this._cacheMaxXY.maxY>1e4?1e4:this._cacheMaxXY.maxY;this.canvas.width=i+800,this.canvas.height=a+800,this._need_resize=!1}var n=this.canvasCtx;if(n){var r={};this.state.links.forEach((function(e){r[e.key]=t.calcLinks[e.key]})),this.calcLinks=r;var o=Object.keys(e).map((function(t){var s=e[t],i=s.nodes,a=s.stroke,n=s.fill,r=s.lineWidth;return{key:t,nodes:i,lineWidth:r,stroke:a,fill:n}}));n.clearRect(0,0,n.canvas.width,n.canvas.height),Re(n,o,this.state)}},afterCalculate:function(e){this.calcLinks=this.calcLinks||{},this.calcLinks[e.key]=e;var t=Object.keys(this.calcLinks).length;t>=this.state.links.length&&this.drawLinkerRAF()},drawLinkerRAF:function(e){var t=this;e=e||this.calcLinks||{},this._scheduledAnimationFrame||(this._scheduledAnimationFrame=!0,window.requestAnimationFrame((function(){t._scheduledAnimationFrame=!1,t.drawLinkers(e)})))},findLinkByXY:function(e,t){var s,i=this,a=10;return Object.keys(this.calcLinks).forEach((function(n){for(var r=i.calcLinks[n],o=r.nodes,c=r.lineWidth,l=0;l<o.length-1;l++){var d=o[l],u=o[l+1],h={x:e,y:t},p=e<=u.x&&e>=d.x||e>=u.x&&e<=d.x,f=t<=u.y&&t>=d.y||t>=u.y&&t<=d.y;if(p||f){var m=i.disToLine(d,u,h);m<10*c&&m<a&&(a=m,s=n)}}})),s},disToLine:function(e,t,s){var i;if(t.x===e.x)i=Math.abs(t.x-s.x);else if(t.y===e.y)i=Math.abs(t.y-s.y);else{var a=(e.y-t.y)/(e.x-t.x),n=(e.y*t.x-t.y*e.x)/(t.x-e.x);i=Math.abs(a*s.x+n-s.y)}return i},getMaxXY:function(){var e=0,t=0;return this.state.nodes.forEach((function(s,i){0===i?(e=s.x+s.width,t=s.y+s.height):(s.y>t&&(t=s.y+s.height),s.x>e&&(e=s.x+s.width))})),{maxX:e,maxY:t}},_updateCalLinks:function(){this.calcLinks={},this.drawLinkerRAF()}})},Pe=Ae,_e=(s("1ae8"),Object(b["a"])(Pe,q,Q,!1,null,"c7243596",null)),$e=_e.exports,Me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"right-draw baseinfo"},[s("div",{staticClass:"right-draw-title"},[e._v("\n    "+e._s(e.t("vue-process.Basic"))+"\n  ")]),s("div",{staticClass:"right-draw-content"},[s("div",{staticClass:"row"},[s("label",{staticClass:"row-name"},[e._v("\n        "+e._s(e.t("vue-process.node name"))+"\n      ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],staticClass:"row-input",attrs:{placeholder:e.t("vue-process.enter node name")},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}})]),s("div",{staticClass:"row"},[s("label",{staticClass:"row-name"},[e._v("\n        "+e._s(e.t("vue-process.describe"))+"\n      ")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.desc,expression:"desc"}],staticClass:"row-input",attrs:{placeholder:e.t("vue-process.enter-desc")},domProps:{value:e.desc},on:{input:function(t){t.target.composing||(e.desc=t.target.value)}}})]),s("div",{staticClass:"row"},[s("button",{staticClass:"designer-button row-button",on:{click:e.save}},[e._v("\n        "+e._s(e.t("vue-process.save"))+"\n      ")])])])])},je=[],Fe={mixins:[A],props:{node:{type:Object,required:!0}},data:function(){return{title:this.node.title,desc:this.node.desc}},mounted:function(){this.designer=T(this,"Designer")},methods:{save:function(){D(this.$store,"UPDATE_NODE",{key:this.node.key,obj:Object.assign(this.node,{lastUpdateTime:Date.now(),title:this.title,desc:this.desc})}),this.designer&&(this.designer.$emit("node-baseInfo",this.node),this.designer.closeBaseInfo())}}},Be=Fe,He=Object(b["a"])(Be,Me,je,!1,null,null,null),Ke=He.exports,Ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"right-draw paraminfo"},[s("div",{staticClass:"right-draw-title"},[e._v("\n    "+e._s(e.t("vue-process.parameter"))+"\n    "),s("svg",{staticClass:"icon",attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9075"},on:{click:e.add}},[s("path",{attrs:{d:"M510.352119 912.416237c-220.548741 0-399.339141-178.82643-399.339141-399.403615S289.803378 113.622281 510.352119 113.622281c220.550637 0 399.341037 178.813156 399.341037 399.390341S730.902756 912.416237 510.352119 912.416237zM510.352119 163.544178c-192.982281 0-349.421037 156.461511-349.421037 349.468444S317.369837 862.482963 510.352119 862.482963s349.421037-156.463407 349.421037-349.470341S703.3344 163.544178 510.352119 163.544178zM660.104533 537.979259 535.313067 537.979259l0 124.81043c0 13.778489-11.174874 24.957156-24.959052 24.957156-13.784178 0-24.957156-11.178667-24.957156-24.957156l0-124.81043-124.795259 0c-13.784178 0-24.959052-11.17677-24.959052-24.966637 0-13.780385 11.17677-24.957156 24.959052-24.957156l124.795259 0 0-124.816119c0-13.778489 11.174874-24.951467 24.957156-24.951467 13.786074 0 24.959052 11.171081 24.959052 24.951467l0 124.816119 124.791467 0c13.786074 0 24.959052 11.17677 24.959052 24.957156C685.063585 526.802489 673.890607 537.979259 660.104533 537.979259z",fill:"#333333","p-id":"9076"}})])]),s("div",{staticClass:"right-draw-content"},[s("div",{staticClass:"row"},[s("label",{staticClass:"half"},[e._v("\n        "+e._s(e.t("vue-process.attribute"))+"\n      ")]),s("label",{staticClass:"half"},[e._v("\n        "+e._s(e.t("vue-process.value"))+"\n      ")])]),e._l(e.arr,(function(t,i){return s("div",{key:i,staticClass:"row"},[s("label",{staticClass:"half"},[s("Icon",{attrs:{name:"shanchu"},on:{click:function(t){return e.del(i)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.key,expression:"item.key"}],attrs:{placeholder:e.t("vue-process.attribute name")},domProps:{value:t.key},on:{input:function(s){s.target.composing||e.$set(t,"key",s.target.value)}}})],1),s("label",{staticClass:"half"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],attrs:{placeholder:e.t("vue-process.property value")},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})])])})),s("div",{staticClass:"row"},[s("button",{staticClass:"designer-button row-button",on:{click:e.save}},[e._v("\n        "+e._s(e.t("vue-process.save"))+"\n      ")])])],2)])},We=[],Ve={components:{Icon:y},mixins:[A],props:{node:{type:Object,required:!0}},data:function(){var e=this.node.params,t=[];for(var s in e)t.push({key:s,value:e[s]});return 0===t.length&&t.push({key:"",value:""}),{arr:t}},mounted:function(){this.designer=T(this,"Designer")},methods:{save:function(){var e={};this.arr.forEach((function(t){e[t.key]=t.value})),D(this.$store,"UPDATE_NODE",{key:this.node.key,obj:Object.assign(this.node,{lastUpdateTime:Date.now(),params:e})}),this.designer&&(this.designer.$emit("node-param",this.node),this.designer.closeParam())},add:function(){this.arr.push({key:"",value:""})},del:function(e){this.arr.length<=1||this.arr.splice(e,1)}}},Xe=Ve,Ye=Object(b["a"])(Xe,Ue,We,!1,null,null,null),ze=Ye.exports;function Ge(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function Ze(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ge(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Je={showBaseInfoOnAdd:!0,shapeView:!0,control:!0},qe={defaultMenu:{copy:!0,delete:!0,config:!0,param:!0},userMenu:[],beforeShowMenu:function(e,t){return t},beforePaste:function(e){return e}},Qe={name:"Designer",directives:{clickoutside:ce},components:{ControlView:M,ActionView:U,ShapeView:J,NodeView:$e,BaseInfo:Ke,ParamInfo:ze},mixins:[A],props:{value:{type:Object,default:function(){return{}}},shapes:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},gridOptions:{type:Object,default:function(){return{}}},nodeOptions:{type:Object,default:function(){return{}}},viewOptions:{type:Object,default:function(){return Je}},ctxMenuOptions:{type:Object,default:function(){return qe}}},data:function(){return{showViews:Object.assign(Ze({},Je),this.viewOptions),nodeViewScrollTop:0,nodeViewScrollLeft:0,showActionView:void 0!==this.$slots.default}},computed:{myShapes:function(){var e=this,t=[];return this.shapes&&this.shapes.length>0&&this.shapes.forEach((function(s){e.$set(s,"show",!0),t.push(s)})),t},myMenuOptions:function(){var e=[];if(this.ctxMenuOptions){var t=Ze({},qe.defaultMenu,{},this.ctxMenuOptions.defaultMenu);t.copy&&e.push({icon:"fuzhi",text:this.t("vue-process.copy"),value:"copy"}),t.delete&&e.push({icon:"shanchu",text:this.t("vue-process.delete"),value:"delete"}),t.param&&e.push({icon:"canshu",text:this.t("vue-process.Parameter"),value:"param"}),t.config&&e.push({icon:"peizhi",text:this.t("vue-process.Basic"),value:"config"})}return Object.assign(Ze({},qe),Ze({},this.ctxMenuOptions,{defaultMenu:e}))}},watch:{viewOptions:function(e){var t=this,s=this.showViews.shapeView;this.showViews=Object.assign({},Je,e),s!==this.showViews.shapeView&&(D(this.$store,"UPDATE_SHAPE_OPTIONS",{viewWidth:this.showViews.shapeView?250:0}),this.$refs.designerView&&this.$nextTick((function(){t.$refs.designerView.initView()})))}},created:function(){this.initDeginer({value:this.value,shapes:this.shapes,gridOptions:this.gridOptions,nodeOptions:this.nodeOptions}),this.setDisabled(this.state.disabled),this.$watch("value",(function(){var e=this;setTimeout((function(){e.initDeginer({value:e.value,shapes:e.shapes}),e.$refs.designerView._updateCalLinks()}),0)})),this.$watch("disabled",(function(){this.setDisabled(this.disabled)})),this.$watch("state.nodes",(function(){var e=this.getResult("nodes");this.$emit("change",e)})),this.$watch("state.links",(function(){var e=this.getResult("links");this.$emit("change",e)}))},mounted:function(){var e=this;this._cacheChange={},D(this.$store,"UPDATE_SHAPE_OPTIONS",{viewWidth:this.showViews.shapeView?250:0}),this.$nextTick((function(){e.$refs.designerView.initView()}))},methods:Ze({},L(["initDeginer","setDisabled","setDraging","clearDraging","getNodeByKey"]),{getStyle:function(){if(this.state.fullScreen)return{position:"fixed",left:0,right:0,top:0,bottom:0,"z-index":100}},getResult:function(e){var t=[],s=[];return this._cacheChange.links&&"nodes"==e?t=this._cacheChange.links:(this.state.links.forEach((function(e){t.push({source:e.beginNode.key,target:e.endNode.key,sourceLocation:e.beginNodeArrow,targetLocation:e.endNodeArrow})})),this._cacheChange.links=t),this._cacheChange.nodes&&"links"==e?s=this._cacheChange.nodes:(this.state.nodes.forEach((function(e){var t=["layout","type","title","desc","image","ready","viewOffsetX","viewOffsetY","width","height","borderWidth","radiusWidth","anchorSize","borderColor","key","x","y","createTime","lastUpdateTime"],i={key:e.key,title:e.title,desc:e.desc,type:e.type,layout:{height:e.height,width:e.width,x:e.x,y:e.y},params:e.params,resources:e.resources,createTime:e.createTime,lastUpdateTime:e.lastUpdateTime};for(var a in e)-1===t.indexOf(a)&&(i[a]=e[a]);s.push(i)})),this._cacheChange.nodes=s),{edges:t,nodes:s}},nodeViewScroll:function(e){var t=e.scrollTop,s=e.scrollLeft;this.nodeViewScrollTop=t,this.nodeViewScrollLeft=s},addNode:function(e){var t=this.state.draging.data,s=Object.assign({type:t.type,title:t.title,desc:"",image:t.image,ready:!1},this.state.nodeOptions,{key:S(),x:(e.pageX-this.state.baseOptions.nodeViewOffsetX-this.state.nodeOptions.width*this.state.baseOptions.pageSize/2)/this.state.baseOptions.pageSize+this.nodeViewScrollLeft/this.state.baseOptions.pageSize,y:(e.pageY-this.state.baseOptions.nodeViewOffsetY-this.state.nodeOptions.height*this.state.baseOptions.pageSize/2)/this.state.baseOptions.pageSize+this.nodeViewScrollTop/this.state.baseOptions.pageSize});D(this.$store,"ADD_NODE",s),this._new_node=s,this.setDraging({type:"shape",data:s})},moveShape:function(e){if(!this.state.disabled&&"shape"==this.state.draging.type&&(this.$refs.shapeView.changeDragShapOffset(e),e.pageX-this.state.baseOptions.shapeViewOffsetX>this.state.shapeOptions.viewWidth-this.state.shapeOptions.width/2))if(0==this.state.nodes.length)this.addNode(e);else{var t=this.state.nodes[this.state.nodes.length-1];t.ready||t.key!=this.state.draging.data.key?this.addNode(e):D(this.$store,"UPDATE_NODE",{key:t.key,obj:Object.assign(t,{x:(e.pageX-this.state.baseOptions.nodeViewOffsetX-this.state.nodeOptions.width*this.state.baseOptions.pageSize/2)/this.state.baseOptions.pageSize+this.nodeViewScrollLeft/this.state.baseOptions.pageSize,y:(e.pageY-this.state.baseOptions.nodeViewOffsetY-this.state.nodeOptions.height*this.state.baseOptions.pageSize/2)/this.state.baseOptions.pageSize+this.nodeViewScrollTop/this.state.baseOptions.pageSize})})}},stopMoveShape:function(e){if(!this.state.disabled&&"shape"==this.state.draging.type&&this.state.nodes.length>0){var t=this.state.nodes[this.state.nodes.length-1];e.pageX-this.state.baseOptions.shapeViewOffsetX>this.state.shapeOptions.viewWidth?(D(this.$store,"UPDATE_NODE",{key:t.key,obj:Object.assign(t,{createTime:Date.now(),ready:!0})}),this.showViews.showBaseInfoOnAdd&&D(this.$store,"UPDATE_EDIT_BASEINFO_NODE",t)):(t.ready||D(this.$store,"DELETE_NODE",this.state.nodes.length-1),this._new_node=null),this._new_node&&(this.$emit("add",Ze({},this._new_node)),this._new_node=null),this.clearDraging()}},closeBaseInfo:function(){D(this.$store,"UPDATE_EDIT_BASEINFO_NODE",null)},closeParam:function(){D(this.$store,"UPDATE_EDIT_PARAM_NODE",null)},setNodeRunState:function(e,t){var s=this.getNodeByKey(e);if(s){this.$set(s,"runState",t);var i=this.getResult("nodes");this.$emit("change",i)}},format:function(e){this.$refs.designerView.autoFormat(e)},resetToOriginalData:function(){this.$refs.designerView.resetFormat()},getSelectedNodes:function(){return this.state.nodes.filter((function(e){return e.selected})).map((function(e){return Ze({},e)}))},getState:function(){return this.state},boxSelectChange:function(){var e=this.getResult("nodes");this.$emit("change",e)}})},et=Qe,tt=(s("b575"),Object(b["a"])(et,l,d,!1,null,null,null)),st=tt.exports,it=st,at=s("7f0d"),nt=s("bbdf"),rt=s("40b6"),ot=[{title:rt["a"].t("message.shape.DXP"),children:[{type:nt["b"].DATALINKDXP,title:"datalinkdxp",image:nt["a"][nt["b"].DATALINKDXP].icon,editParam:!1,editBaseInfo:!1}]},{title:rt["a"].t("message.shape.dataDev"),children:[{type:nt["b"].SHELL,title:"shell",image:nt["a"][nt["b"].SHELL].icon,editParam:!1,editBaseInfo:!1},{type:nt["b"].HQL,title:"hql",image:nt["a"][nt["b"].HQL].icon,editParam:!1,editBaseInfo:!1},{type:nt["b"].SPARKSQL,title:"sql",image:nt["a"][nt["b"].SPARKSQL].icon,editParam:!1,editBaseInfo:!1},{type:nt["b"].SPARKPY,title:"pyspark",image:nt["a"][nt["b"].SPARKPY].icon,editParam:!1,editBaseInfo:!1},{type:nt["b"].SCALA,title:"scala",image:nt["a"][nt["b"].SCALA].icon,editParam:!1,editBaseInfo:!1},{type:nt["b"].PYTHON,title:"python",image:nt["a"][nt["b"].PYTHON].icon,editParam:!1,editBaseInfo:!1},{type:nt["b"].JDBC,title:"jdbc",image:nt["a"][nt["b"].JDBC].icon,editParam:!1,editBaseInfo:!1}]},{title:rt["a"].t("message.shape.SJZL"),children:[{type:nt["b"].QUALITIS,title:"qualitis",image:nt["a"][nt["b"].QUALITIS].icon,editParam:!1,editBaseInfo:!1}]},{title:rt["a"].t("message.shape.dataVis"),children:[{type:nt["b"].DISPLAY,title:"display",image:nt["a"][nt["b"].DISPLAY].icon,editParam:!1,editBaseInfo:!1},{type:nt["b"].DASHBOARD,title:"dashboard",image:nt["a"][nt["b"].DASHBOARD].icon,editParam:!1,editBaseInfo:!1}]},{title:rt["a"].t("message.shape.dataSend"),children:[{type:nt["b"].SENDMAIL,title:"sendemail",image:nt["a"][nt["b"].SENDMAIL].icon,editParam:!1,editBaseInfo:!1}]},{title:rt["a"].t("message.shape.XHJD"),children:[{type:nt["b"].EVENTCHECKERF,title:"eventsender",image:nt["a"][nt["b"].EVENTCHECKERF].icon,editParam:!1,editBaseInfo:!1},{type:nt["b"].EVENTCHECKERW,title:"eventreceiver",image:nt["a"][nt["b"].EVENTCHECKERW].icon,editParam:!1,editBaseInfo:!1},{type:nt["b"].DATACHECKER,title:"datachecker",image:nt["a"][nt["b"].DATACHECKER].icon,editParam:!1,editBaseInfo:!1},{type:nt["b"].RMBSENDER,title:"rmbsender",image:nt["a"][nt["b"].RMBSENDER].icon,editParam:!1,editBaseInfo:!1}]},{title:rt["a"].t("message.shape.GNJD"),children:[{type:nt["b"].FLOW,title:"subFlow",image:nt["a"][nt["b"].FLOW].icon,editParam:!1,editBaseInfo:!1},{type:nt["b"].CONNECTOR,title:"connector",image:nt["a"][nt["b"].CONNECTOR].icon,editParam:!1,editBaseInfo:!1}]}],ct=s("b593"),lt=s("a779"),dt=s("99cc"),ut=s("2ef0"),ht=s("5118");function pt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function ft(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var mt={components:{vueProcess:it,argument:r["default"],resource:o["default"],nodeParameter:c["default"],associateScript:dt["default"],console:at["default"]},directives:{clickoutside:lt["a"]},props:{flowId:{type:[String,Number],default:""},version:{type:[String,Number],default:""},readonly:{type:String,default:"false"},projectVersionID:{type:[String,Number],default:""},importReplace:{type:Boolean,default:!1},openFiles:{type:Object,default:function(){}},tabs:{type:Array,default:function(){return[]}}},data:function(){return{isRootFlow:!0,name:"",versionId:"",state:"",shapes:ot,originalData:null,json:null,props:[],resources:[],saveModal:!1,saveModel:{comment:""},isParamModalShow:!1,isResourceShow:!1,importModal:!1,importModel:{names:[],files:[],jsons:[]},jsonChange:!1,loading:!1,ops:[],repetitionNameShow:!1,repeatTitles:[],nodebaseinfoShow:!1,clickCurrentNode:{},timerClick:"",viewOptions:{showBaseInfoOnAdd:!1,shapeView:!0,control:!0},paramsIsChange:!1,addNodeShow:!1,cacheNode:null,isDelete:!1,addNodeTitle:"创建子工作流",IframeProjectLoading:!1,nodeBasicInfoData:[],workflowIsExecutor:!1,openningNode:null,shapeWidth:0,workflowExeteId:"",excuteTimer:""}},computed:{myReadonly:function(){return"true"===this.readonly||(this.readonly,!1)},type:function(){return this.isRootFlow?"flow":"subFlow"},nodeMenuOptions:function(){var e=this;return{defaultMenu:{config:!1,param:!1,copy:!1,delete:!this.workflowIsExecutor},userMenu:[],beforeShowMenu:function(t,i,a){return t&&t.runState&&t.runState.showConsole&&t.runState.taskID&&i.push({text:e.$t("message.process.console"),value:"console",img:s("bc96")}),e.workflowIsExecutor||"node"===a&&([nt["b"].SPARKSQL,nt["b"].HQL,nt["b"].SPARKPY,nt["b"].SCALA,nt["b"].JDBC].includes(t.type)&&i.push({text:e.$t("message.process.associate"),value:"associate",img:s("c554")}),i.push({text:e.$t("message.process.relySelect"),value:"relySelect",img:s("9ca7")}),t.enableCopy&&i.push({text:e.$t("message.newConst.copy"),value:"mycopy",img:s("ba58")})),"view"===a&&(i.push({text:e.$t("message.newConst.paste"),value:"mypaste",img:s("3a9b")}),i.push({text:e.$t("message.process.allDelete"),value:"allDelete",img:s("d347")})),i}}}},watch:{jsonChange:function(e){this.$emit("isChange",e)}},mounted:function(){var e=this;this.getBaseInfo(),this.setShapes(),this.myReadonly||(this.timer=setInterval((function(){e.jsonChange&&!e.nodebaseinfoShow&&e.autoSave("自动保存",!0)}),3e5))},beforeDestroy:function(){this.timer&&clearInterval(this.timer),this.excuteTimer&&Object(ht["clearTimeout"])(this.excuteTimer)},methods:{getBaseInfo:function(){var e=this;this.loading=!0,this.getCache().then((function(t){e.getOriginJson()}))},init:function(e){var t=this;e&&(this.originalData=this.json=JSON.parse(JSON.stringify(e)),this.resources=e.resources,this.props=e.props),this.$nextTick((function(){t.init=!0,t.loading=!1}))},getOriginJson:function(){var e=this;ct["a"].fetch("/dss/get",{id:this.flowId,version:this.version,projectVersionID:+this.projectVersionID},"get").then((function(t){var s=e.convertJson(t.flow);e.init(s)})).catch((function(){e.loading=!1}))},convertJson:function(e){var t,s=this;return this.name=e.name,this.state=e.state,this.isRootFlow=e.rootFlow,this.rank=e.rank,this.version?(t=e.flowVersions[0]?e.flowVersions[0].json:"",this.versionId=e.flowVersions[0]?e.flowVersions[0].id:""):(t=e.latestVersion?e.latestVersion.json:"",this.versionId=e.latestVersion?e.latestVersion.id:""),t&&(t=JSON.parse(t),Array.isArray(t.nodes)&&t.nodes.forEach((function(e){e.type=e.jobType,delete e.jobType,e=s.bindNodeBasicInfo(e)}))),t},setShapes:function(){var e=this,t=this.getProjectList(),s="";t.forEach((function(e){s?s+="&application=".concat(e.name):s="?application=".concat(e.name)})),ct["a"].fetch("/dss/listNodeType".concat(s),"get").then((function(t){var s=[];Object.values(t.nodeTypes).map((function(e){e.map((function(e){s.push(e)}))})),e.nodeBasicInfoData=s,e.shapes=e.shapes.map((function(e){return e.children=e.children.filter((function(e){return s.some((function(t){return t.nodeType===e.type}))})),e}))}))},change:function(e){this.json=e,this.init&&(this.heartBeat(),this.jsonChange=!0)},initNode:function(e){var t=this;if(e=this.bindNodeBasicInfo(e),this.clickCurrentNode=JSON.parse(JSON.stringify(e)),[nt["b"].DISPLAY,nt["b"].DASHBOARD].includes(this.clickCurrentNode.type)&&(this.clickCurrentNode.jobContent&&this.clickCurrentNode.jobContent.id||this.$set(this.clickCurrentNode,"jobContent",{id:""})),this.clickCurrentNode.jobContent&&this.clickCurrentNode.jobContent.jobParams){var s=function(e){var t={maxReceiveHours:12,maxCheckHours:1,queryFrequency:10,timeScape:24,"spark-driver-memory":2,"spark-executor-memory":3,"spark-executor-cores":1,"spark-executor-instances":2};for(var s in e)e.hasOwnProperty(s)&&Object.keys(t).includes(s)&&(e[s]?e[s]=Number(e[s]):e[s]=t[s]);return e};this.clickCurrentNode.jobContent.jobParams=s(this.clickCurrentNode.jobContent.jobParams)}if(!this.clickCurrentNode.jobContent||!this.clickCurrentNode.jobContent.jobParams)if(this.clickCurrentNode.type===nt["b"].EVENTCHECKERW)this.$set(this.clickCurrentNode,"jobContent",{jobParams:{msgType:"RECEIVE",msgReceiver:"".concat(this.$route.query.projectName,"@").concat(this.name,"@").concat(this.clickCurrentNode.title),msgTopic:"",msgName:"",queryFrequency:10,maxReceiveHours:12,msgSavekey:"",onlyReceiveToday:"true"}});else if(this.clickCurrentNode.type===nt["b"].EVENTCHECKERF)this.$set(this.clickCurrentNode,"jobContent",{jobParams:{msgType:"SEND",msgSender:"".concat(this.$route.query.projectName,"@").concat(this.name,"@").concat(this.clickCurrentNode.title),msgTopic:"",msgName:"",msgBody:""}});else if(this.clickCurrentNode.type===nt["b"].DATACHECKER)this.$set(this.clickCurrentNode,"jobContent",{jobParams:{sourceType:"job",checkObject:"",maxCheckHours:1,jobDesc:""}});else if(this.clickCurrentNode.type===nt["b"].RMBSENDER)this.$set(this.clickCurrentNode,"jobContent",{jobParams:{rmbTargetDcn:"",rmbServiceld:"",rmbEnvironment:"",rmbMessageType:"",rmbMessage:""}});else if([nt["b"].SPARKSQL,nt["b"].SPARKPY,nt["b"].SCALA].includes(this.clickCurrentNode.type)){var i=Object(ht["setTimeout"])((function(){t.loading=!0}),2e3);Promise.all([ct["a"].fetch("/configuration/getFullTreesByAppName",{appName:"spark",creator:"IDE"},"get"),ct["a"].fetch("/configuration/getFullTreesByAppName",{appName:"通用设置",creator:"通用设置"},"get")]).then((function(e){Object(ht["clearTimeout"])(i),t.loading=!1;var s=e[0].fullTree[0].settings,a={"spark-driver-memory":2,"spark-executor-memory":3,"spark-executor-cores":1,"spark-executor-instances":2,"wds-linkis-yarnqueue":""};s.length>0&&(s.forEach((function(e){"spark.driver.cores"===e.key?a["spark-driver-memory"]=+e.value||+e.defaultValue:"spark.executor.memory"===e.key?a["spark-executor-memory"]=+e.value||+e.defaultValue:"spark.executor.cores"===e.key?a["spark-executor-cores"]=+e.value||+e.defaultValue:"spark.executor.instances"===e.key&&(a["spark-executor-instances"]=+e.value||+e.defaultValue)})),a["wds-linkis-yarnqueue"]=e[1].fullTree[0].settings[0].value||e[1].fullTree[0].settings[0].defaultValue),t.clickCurrentNode.jobContent?t.$set(t.clickCurrentNode.jobContent,"jobParams",a):t.$set(t.clickCurrentNode,"jobContent",{jobParams:a})})).catch((function(){t.loading=!1}))}else this.clickCurrentNode.type===nt["b"].HQL?this.clickCurrentNode.jobContent?this.$set(this.clickCurrentNode.jobContent,"jobParams",{"wds-linkis-yarnqueue":""}):this.$set(this.clickCurrentNode,"jobContent",{jobParams:{"wds-linkis-yarnqueue":""}}):this.clickCurrentNode.type===nt["b"].SENDMAIL?this.$set(this.clickCurrentNode,"jobContent",{jobParams:{category:"",subject:"",content:"",to:"",cc:"",bcc:""}}):this.clickCurrentNode.type===nt["b"].QUALITIS?this.$set(this.clickCurrentNode,"jobContent",ft({},this.clickCurrentNode.jobContent,{jobParams:{filter:"",executeUser:""}})):this.clickCurrentNode.type===nt["b"].JDBC&&(this.clickCurrentNode.jobContent?this.$set(this.clickCurrentNode.jobContent,"jobParams",{jdbcUrl:"",jdbcUsername:"",jdbcPassword:""}):this.$set(this.clickCurrentNode,"jobContent",{jobParams:{jdbcUrl:"",jdbcUsername:"",jdbcPassword:""}}));this.clickCurrentNode.params&&!Object(ut["isEmpty"])(this.clickCurrentNode.params.configuration)||this.$set(this.clickCurrentNode,"params",{configuration:{special:{},runtime:{},startup:{}}})},click:function(e){var t=this;Object(ht["clearTimeout"])(this.timerClick),this.timerClick=Object(ht["setTimeout"])((function(){t.workflowIsExecutor||(t.initNode(e),t.nodebaseinfoShow=!0,t.$emit("node-click",e))}),200)},dblclick:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];if(t[0]=this.bindNodeBasicInfo(t[0]),t[0].supportJump)if(Object(ht["clearTimeout"])(this.timerClick),t[0].parentFlowID=+this.flowId,t[0].type===nt["b"].FLOW){var i=t[0].jobContent?t[0].jobContent.embeddedFlowId:"";i?this.$emit("node-dblclick",t):(this.addNodeShow=!0,this.clickCurrentNode=JSON.parse(JSON.stringify(t[0])),this.addNodeTitle=this.$t("message.process.createNode"))}else if([nt["b"].DISPLAY,nt["b"].DASHBOARD].includes(t[0].type)){if(this.workflowIsExecutor)return;var a=t[0].jobContent?t[0].jobContent.id:"";a?this.$emit("node-dblclick",t):(this.addNodeShow=!0,this.clickCurrentNode=JSON.parse(JSON.stringify(t[0])),this.addNodeTitle=this.$t("message.process.createNode"))}else{if(this.workflowIsExecutor)return;this.$emit("node-dblclick",t)}},message:function(e){var t={warning:"warn",error:"error",info:"info"};this.$Message[t[e.type]]({content:e.msg,duration:2})},saveNodeBaseInfo:function(e){var t=this;this.$emit("saveBaseInfo",e),this.dispatch("Workbench:updateFlowsNodeName",e);var s=e,i=!1;if(s.type==nt["b"].FLOW){if(this.rank>=4)return this.$Message.warning(this.$t("message.process.rankLimit"));s.jobContent||(s.jobContent={});var a=/^[a-zA-Z][a-zA-Z0-9_]*$/;if(!s.title.match(a))return this.$Message.warning(this.$t("message.newConst.validNameDesc"));if(s.jobContent.embeddedFlowId){var n=!1;this.ops=this.ops.map((function(e){return e.subsubFlowID===s.jobContent.embeddedFlowId&&"update"==e.op&&(e.params.name=s.title,e.params.description=s.desc,n=!0),e})),n||this.ops.push({id:s.jobContent.embeddedFlowId,nodeType:s.type,op:"update",params:{name:s.title,description:s.desc}})}else i=!0,ct["a"].fetch("/dss/addFlow",{name:s.title,description:s.desc,parentFlowID:Number(this.flowId),projectVersionID:+this.projectVersionID}).then((function(e){t.$Notice.success({desc:t.$t("message.process.createSubSuccess")}),s.jobContent.embeddedFlowId=e.flow.id,t.ops.push({id:e.flow.id,nodeType:s.type,op:"add",params:{name:s.title,description:s.desc}})}))}if(this.saveCommonIframe(e,(function(){i=!0})),this.json.nodes=this.json.nodes.map((function(e){return e.createTime===s.createTime&&e.key===s.key&&(e.title=s.title,e.desc=s.desc,e.jobContent=s.jobContent,e.resources=s.resources||[],e.params=s.params),e})),this.originalData=this.json,this.jsonChange=!0,!i)return this.$Message.success(this.$t("message.process.saveParamsNotice"))},saveNodeParam:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.$emit("saveParam",t)},showImportJsonView:function(){this.importModel.files=[],this.importModel.jsons=[],this.importModel.names=[],this.$refs.uploadJson.clearFiles(),this.importModal=!0},handleUpload:function(e){if(-1===e.name.indexOf(".json"))return this.$Message.warning(this.$t("message.process.uploadJson")),!1;var t=e.size>=1048576;return t?this.$Message.warning(this.$t("message.process.JsonLimit")):(this.importModel.names.indexOf(e.name)<0&&(this.importModel.names.push(e.name),this.importModel.files.push(e)),!1)},readFileJson:function(e){var t=this;return new Promise((function(s){var i=new FileReader;i.onload=function(i){t.importModel.json=i.target.result,s({name:e.name,json:i.target.result})},i.readAsText(e)}))},importJSON:function(){var e=this;if(this.importModel.files.length<1)return this.$Message.warning(this.$t("message.process.jsonFormat"));var t=this.importModel.files.map((function(t){return e.readFileJson(t)}));Promise.all(t).then((function(t){var s=!0;t.forEach((function(t){var i={};try{i=JSON.parse(t.json)}catch(u){return s=!1,e.$Message.warning("".concat(e.$t("message.process.jsonFormat"),"：").concat(u.message))}for(var a=0;a<i.edges.length;a++){var n=i.edges[a];if(!n.source||!n.target||!n.sourceLocation||!n.targetLocation)return e.$Message.warning(e.$t("message.process.jsonEdgeNotice"))}for(var r=0;r<i.nodes.length;r++){var o=i.nodes[r];if(!(o.layout&&o.jobType&&o.id))return s=!1,e.$Message.warning(e.$t("message.process.jsonNodeNotice"));if(o.layout){var c=o.layout;if(void 0===c.x||void 0===c.y||void 0===c.width||void 0===c.height)return s=!1,e.$Message.warning(e.$t("message.process.jsonLayoutNotice"))}}i.nodes.forEach((function(t){t.key=t.id,t.createTime=+new Date,t.name=+new Date+""+Math.ceil(1e3*Math.random()),t.type=t.jobType,t.title=t.id,t.jobContent&&t.jobContent.code&&(t.resources=[]),t=e.bindNodeBasicInfo(t),delete t.id,delete t.jobType}));var l=[];if(e.shapes.forEach((function(e){e.children&&(l=l.concat(e.children.map((function(e){return e.type})).filter((function(e){return e}))))})),l=Array.from(new Set(l)),i.edges&&!Array.isArray(i.edges))return s=!1,e.$Message.warning(e.$t("message.process.jsonEdgesNoArray"));if(i.nodes&&!Array.isArray(i.nodes))return s=!1,e.$Message.warning(e.$t("message.process.jsonNodesNoArray"));var d=i.nodes.filter((function(e){return l.indexOf(e.type)<0}));if(d.length===i.nodes.length||i.nodes.length<1)return s=!1,e.$Message.warning("".concat(e.$t("message.process.jsonNoType"),"（").concat(l.join("、"),"）"));d.forEach((function(t){return at["default"].warn("".concat(e.$t("message.process.nosupprotType")).concat(t.type),t)})),s&&e.importModel.jsons.push(i)})),s&&e.mergeJson()}))},mergeJson:function(){var e=this;this.importModel.jsons.forEach((function(t){e.changeJsonData(t)})),this.importModal=!1},changeJsonData:function(e){var t=this;this.importReplace?this.originalData=e:this.json?(Array.isArray(this.json.nodes)&&Array.isArray(e.nodes)&&(e.nodes=e.nodes.filter((function(e){return!t.json.nodes.some((function(t){return t.key===e.key}))})),e.nodes=this.json.nodes.concat(e.nodes).map((function(e){return e.type===nt["b"].CONNECTOR&&(e.title=e.key=e.key+"_"+t.rank),e}))),Array.isArray(this.json.edges)&&Array.isArray(e.edges)&&(e.edges=e.edges.filter((function(e){return!t.json.edges.some((function(t){return t.source===e.source&&t.target===e.target}))})),e.edges=this.json.edges.concat(e.edges).map((function(e){return/^CONNECTOR_/.test(e.source)&&(e.source=e.source+"_"+t.rank),/^CONNECTOR_/.test(e.target)&&(e.target=e.target+"_"+t.rank),e}))),this.json=this.originalData=e):this.json=this.originalData=e},showSaveView:function(){this.workflowIsExecutor||this.validateJSON()&&(this.saveModal=!0)},save:function(){var e=this;this.$refs.formSave.validate((function(t){if(t){var s=e.openFiles[e.name]||[],i=e.tabs.filter((function(e){return s.includes(e.key)&&e.node.isChange}));if(e.openningNode=null,i.length>0)e.$Modal.confirm({title:e.$t("message.process.cancelNotice"),content:e.$t("message.process.noSaveHtml"),okText:e.$t("message.process.confirmSave"),cancelText:e.$t("message.newConst.cancel"),onOk:function(){e.saveModal=!1;var t=JSON.parse(JSON.stringify(e.json));t.nodes.forEach((function(t){e.$refs.process.setNodeRunState(t.key,{borderColor:"#666"})})),e.autoSave(e.saveModel.comment,!1)},onCancel:function(){}});else{e.saveModal=!1;var a=JSON.parse(JSON.stringify(e.json));a.nodes.forEach((function(t){e.$refs.process.setNodeRunState(t.key,{borderColor:"#666"})})),e.autoSave(e.saveModel.comment,!1)}}}))},autoSave:function(e,t){var s=this;if(!this.validateJSON())return!1;this.json.ops=this.ops;var i=JSON.parse(JSON.stringify(this.json));i.edges.forEach((function(e){var t=i.nodes.filter((function(t){return t.key==e.source}));if(t.length>0){var s=t[0];e.source=s.key}var a=i.nodes.filter((function(t){return t.key==e.target}));if(a.length>0){var n=a[0];e.target=n.key}}));var a=!1;if(i.nodes.forEach((function(e){var t=/^[a-zA-Z][a-zA-Z0-9_]*$/;if(!e.title.match(t))return a=!0;e.id=e.key,e.jobType=e.type,e.selected=!1,delete e.type,delete e.menu,e.resources||(e.resources=[]),e.runState&&delete e.runState})),a)return this.$Message.warning(this.$t("message.newConst.validNameDesc"));var n=i.nodes.filter((function(e){return[nt["b"].RMBSENDER,nt["b"].DATACHECKER,nt["b"].EVENTCHECKERW,nt["b"].EVENTCHECKERF,nt["b"].QUALITIS].includes(e.jobType)&&(!e.jobContent||!e.jobContent.jobParams)})).map((function(e){return e.title})),r=i.nodes.filter((function(e){return!e.jobContent&&e.jobType===nt["b"].FLOW&&s.rank>=4}));return r.length>0?this.$Message.warning(this.$t("message.process.deleteNodeSave")):n.length>0&&!t?void this.$Modal.confirm({title:this.$t("message.process.saveAbnormal"),content:this.$t("message.process.emptyNodeHtml",{emptyNode:n.join(",")}),okText:this.$t("message.process.continueSave"),cancelText:this.$t("message.process.backEditor"),loading:!0,onOk:function(){s.saveRequest(i,e,t,s.$Modal.remove)},onCancel:function(){}}):this.saveRequest(i,e,t)},saveRequest:function(e,t,s,i){var a=this,n=function(e){var t={maxReceiveHours:"12",maxCheckHours:"1",queryFrequency:"10",timeScape:"24","spark-driver-memory":"2","spark-executor-memory":"3","spark-executor-cores":"1","spark-executor-instances":"2",onlyReceiveToday:"true",msgSavekey:"msg.body"};for(var s in e)e.hasOwnProperty(s)&&Object.keys(t).includes(s)&&(e[s]?e[s]=String(e[s]):e[s]=t[s]);return e},r=Date.now(),o=JSON.parse(JSON.stringify(Object.assign(e,{comment:t,type:this.type,updateTime:r,props:this.props,resources:this.resources})));return o.nodes=o.nodes.map((function(e){return e.jobContent&&e.jobContent.jobParams&&(e.jobContent.jobParams=n(e.jobContent.jobParams)),e})),ct["a"].fetch("/dss/saveFlow",{id:Number(this.flowId),json:JSON.stringify(o),comment:this.saveModel.comment||t,projectVersionID:+this.projectVersionID,ops:e.ops||[]}).then((function(e){return s?a.$Notice.success({desc:a.$t("message.process.autoSaveWorkflow")}):(a.$Notice.success({desc:a.$t("message.process.saveWorkflowCuccess")}),a.saveModel.comment=""),a.jsonChange=!1,a.ops=[],i&&i(),a.$emit("updateWorkflowList"),e})).catch((function(){i&&i()}))},showParamView:function(){this.workflowIsExecutor||(this.isResourceShow?(this.isParamModalShow=!0,this.isResourceShow=!1):this.isParamModalShow=!this.isParamModalShow)},showResourceView:function(){this.workflowIsExecutor||(this.isResourceShow?this.isParamModalShow=!this.isParamModalShow:(this.isParamModalShow=!0,this.isResourceShow=!0))},validateJSON:function(){if(!this.json)return this.$Modal.warning({title:this.$t("message.process.notice"),content:this.$t("message.process.dragNode")}),!1;var e=this.json.edges,t=this.json.nodes;if(!t||0===t.length)return this.$Modal.warning({title:this.$t("message.process.notice"),content:this.$t("message.process.dragNode")}),!1;var s=[],i=[],a=[],n=[];return t.forEach((function(t){a.includes(t.title)?n.push(t.title):a.push(t.title),e.some((function(e){return e.target==t.key}))||s.push(t),e.some((function(e){return e.source==t.key}))||i.push(t)})),!(n.length>0)||(this.repeatTitles=n,this.repetitionNameShow=!0,!1)},onPropsChange:function(e){this.props=e},handleOutsideClick:function(e){var t=this.$refs.paramButton,s=this.$refs.resourceButton;t&&t.contains(e.target)||e.target===t||s&&s.contains(e.target)||e.target===s||this.isParamModalShow&&(this.isParamModalShow=!1)},handleOutsideClickNode:function(e){"node-box-content"!==e.target.className&&"node-box"!==e.target.className&&this.nodebaseinfoShow&&(this.nodebaseinfoShow=!1)},updateResources:function(e){this.resources=e.map((function(e){return{fileName:e.fileName,resourceId:e.resourceId,version:e.version}})),this.jsonChange=!0},nodeDelete:function(e){if(this.isDelete=!0,e.type===nt["b"].FLOW&&e.jobContent&&e.jobContent.embeddedFlowId&&this.ops.push({id:e.jobContent.embeddedFlowId,nodeType:e.type,op:"delete",params:{name:e.title,description:e.desc}}),[nt["b"].DISPLAY,nt["b"].DASHBOARD].includes(e.type)&&e.jobContent&&e.jobContent.id){var t=nt["b"].DASHBOARD==e.type?e.jobContent.dashboardId:e.jobContent.id;this.ops.push({id:t,nodeType:e.type,op:"delete",params:{name:e.title,description:e.desc,projectID:+this.$route.query.projectID}})}this.$emit("deleteNode",e)},repetitionName:function(){this.repetitionNameShow=!1},saveNode:function(e){if(this.myReadonly)return this.$Message.warning(this.$t("message.process.readonly"));this.saveNodeBaseInfo(e)},checkAssociated:function(e){var t=this;return this.myReadonly?this.$Message.warning(this.$t("message.process.readonlyNoAssociated")):-1===[nt["b"].SPARKSQL,nt["b"].HQL,nt["b"].SPARKPY,nt["b"].SCALA].indexOf(e.type)?this.$Notice.warning({desc:this.$t("message.process.noAssociated")}):void(e.jobContent&&e.jobContent.script?this.$Modal.confirm({title:this.$t("message.process.repeateAssociated"),content:this.$t("message.process.repeateAssociatedHtml"),okText:this.$t("message.process.confirmAssociated"),cancelText:this.$t("message.newConst.cancel"),onOk:function(){t.openAssociateScriptModal(e)},onCancel:function(){t.$Modal.remove()}}):this.openAssociateScriptModal(e))},openAssociateScriptModal:function(e){this.$refs.associateScript.open(e)},associateScript:function(e,t,s){var i=this;ct["a"].fetch("/filesystem/openFile",{path:t},"get").then((function(t){var a=i.getSupportModes(),n=new Date,r=nt["c"][e.type],o=a.find((function(e){return e.flowType===r})),c="".concat(n.getTime()).concat(o.ext),l={fileName:c,scriptContent:t.fileContent,metadata:t.params};ct["a"].fetch("/filesystem/saveScriptToBML",l,"post").then((function(a){i.$Message.success(i.$t("message.process.associaSuccess")),e.params=t.params;var n={fileName:c,resourceId:a.resourceId,version:a.version};i.$emit("check-opened",e,(function(t){i.$emit("save-node",n,e),t?ct["a"].fetch("/filesystem/openScriptFromBML",n,"get").then((function(t){i.dispatch("Workbench:updateFlowsTab",e,{content:t.scriptContent,params:t.metadata})})):(i.dispatch("IndexedDB:clearLog",e.key),i.dispatch("IndexedDB:clearResult",e.key),i.dispatch("IndexedDB:clearProgress",e.key))})),s(!0)})).catch((function(){s(!1),i.$Message.error(i.$t("message.process.associaError"))}))})).catch((function(){s(!1)}))},paramsChange:function(e){this.paramsIsChange=e},addNode:function(e){e=this.bindNodeBasicInfo(e),e.shouldCreationBeforeNode&&(this.addNodeShow=!0,this.clickCurrentNode=JSON.parse(JSON.stringify(e)),this.addNodeShow=!0,this.addNodeTitle=this.$t("message.process.createNode"))},validatorName:function(e,t,s){t==="".concat(this.name,"_")?s(new Error(this.$t("message.process.nodeNameValid"))):s()},addFlowCancel:function(){var e=this;this.addNodeShow=!1,this.json.nodes=this.json.nodes.filter((function(t){return e.clickCurrentNode.key!=t.key})),this.originalData=this.json},addFlowOk:function(){var e=this;this.$refs.addFlowfoForm.validate((function(t){if(t){if(e.addNodeShow=!1,e.myReadonly)return e.$Message.warning(e.$t("message.process.readonlyNoCeated"));e.saveNodeBaseInfo(e.clickCurrentNode)}}))},relySelect:function(e){var t=this,s=[],i=function e(i){t.json.edges.forEach((function(t){t.source===i&&(s.push(t),e(t.target))}))};i(e.key),this.json.nodes=this.json.nodes.map((function(t){return s.some((function(e){return e.target===t.key}))||t.key===e.key?t.selected=!0:t.selected=!1,t})),this.originalData=this.json},heartBeat:Object(ut["throttle"])((function(){ct["a"].fetch("/user/heartbeat","get")}),6e4),copyNode:function(e){return e=this.bindNodeBasicInfo(e),!1===e.enable_copy?this.$Message.warning(this.$t("message.process.noCopy")):this.myReadonly?this.$Message.warning(this.$t("message.process.readonlyNoCopy")):void(this.cacheNode=JSON.parse(JSON.stringify(e)))},pasteNode:function(e){if(this.myReadonly)return this.$Message.warning(this.$t("message.process.noPaste"));if(!this.cacheNode)return this.$Message.warning(this.$t("message.process.firstCopy"));var t=this.$refs.process.getState().baseOptions.pageSize,s=""+(new Date).getTime()+Math.ceil(100*Math.random());this.cacheNode.key=s,this.cacheNode.createTime=Date.now(),this.cacheNode.layout={height:this.cacheNode.height,width:this.cacheNode.width,x:e.offsetX/t,y:e.offsetY/t},[nt["b"].DISPLAY,nt["b"].DASHBOARD,nt["b"].FLOW].includes(this.cacheNode.type)&&delete this.cacheNode.jobContent,this.json.nodes.push(this.cacheNode),this.nodeSelectedFalse(this.cacheNode),this.originalData=this.json},nodeSelectedFalse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.json.nodes=this.json.nodes.map((function(t){return e.key&&e.key===t.key?t.selected=!0:t.selected=!1,t})),this.originalData=this.json},clickBaseInfo:function(){var e=this,t=Object(ht["setTimeout"])((function(){e.nodeSelectedFalse(e.clickCurrentNode),Object(ht["clearTimeout"])(t)}),0)},allDelete:function(){var e=this;if(this.myReadonly)return this.$Message.warning(this.$t("message.process.noDelete"));var t=this.$refs.process.getSelectedNodes().map((function(e){return e.key}));this.json.nodes=this.json.nodes.filter((function(s){if(!t.includes(s.key))return s.selected=!1,!0;e.json.edges=e.json.edges.filter((function(e){return!(e.source===s.key||e.target===s.key)}))})),this.originalData=this.json},openConsole:function(e){this.nodeSelectedFalse(e),this.openningNode=e,this.shapeWidth=this.$refs.process&&this.$refs.process.state.shapeOptions.viewWidth},closeConsole:function(e){this.openningNode=null},saveCommonIframe:function(e,t){var s=this;if([nt["b"].DISPLAY,nt["b"].DASHBOARD].includes(e.type)&&(e.jobContent||(e.jobContent={}),!e.jobContent.id)){t();var i={id:+this.$route.query.projectID,nodeType:e.type,params:{avatar:"18",description:e.desc,name:e.title,projectId:+this.$route.query.projectID,publish:!0}};ct["a"].fetch("/dss/createAppjointNode",i).then((function(t){var i={};try{i=JSON.parse(t.result)}catch(a){i=t.result}i.payload.id?(nt["b"].DISPLAY===e.type&&(e.jobContent.id=i.payload.displayId),nt["b"].DASHBOARD===e.type&&(e.jobContent.id=i.payload.dashboardPortalId,e.jobContent.dashboardId=i.payload.id),s.$Message.success({content:s.$t("message.process.createdSuccess")})):s.$Message.error({content:i.header.msg,duration:4})}))}},bindNodeBasicInfo:function(e){return this.nodeBasicInfoData.map((function(t){t.nodeType===e.type&&(e=Object.assign(e,t))})),e},workflowRun:function(){var e=this;this.dispatch("IndexedDB:clearNodeCache"),this.openningNode=null,this.autoSave("执行保存",!1).then((function(t){var s={executeApplicationName:"flowexecution",executionCode:JSON.stringify({projectVersionId:+e.$route.query.projectVersionID,flowId:e.flowId,version:t.flowVersion}),runType:"json",params:{},source:{projectName:e.$route.query.projectName,flowName:e.name},requestApplicationName:"flowexecution"};ct["a"].fetch("/entrance/execute",s).then((function(t){var s=t.execID;e.workflowExeteId=s,e.queryWorkflowExecutor(s)})).catch((function(){e.workflowIsExecutor=!1})),e.workflowIsExecutor=!0}))},workflowStop:function(){var e=this;Object(ht["clearTimeout"])(this.excuteTimer),ct["a"].fetch("/entrance/".concat(this.workflowExeteId,"/kill"),"get").then((function(t){e.workflowIsExecutor=!1,e.flowExecutorNode(e.workflowExeteId,!0)})).catch((function(){e.workflowIsExecutor=!1}))},queryWorkflowExecutor:function(e){var t=this;ct["a"].fetch("/entrance/".concat(e,"/status"),{},"get").then((function(s){t.flowExecutorNode(e);var i=s.status;["Inited","Scheduled","Running"].includes(i)?t.excuteTimer=Object(ht["setTimeout"])((function(){t.queryWorkflowExecutor(e)}),1e3):(t.workflowIsExecutor=!1,"Succeed"===i&&t.$Message.success("工作流执行成功"),"Failed"===i&&(t.$Message.error("工作流执行失败"),t.flowExecutorNode(e,!0)),"Cancelled"===i&&(t.$Message.error("工作流执行已取消"),t.flowExecutorNode(e,!0)),"Timeout"===i&&(t.$Message.error("工作流执行超时"),t.flowExecutorNode(e,!0)))}))},flowExecutorNode:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ct["a"].fetch("/entrance/".concat(e,"/execution"),{},"get").then((function(i){var a={pendingJobs:{color:"rgba(102, 102, 102, 0.3)",status:0,iconType:"",colorClass:"",isShowTime:!1,title:"等待执行",showConsole:!1},runningJobs:{color:"rgba(69, 166, 239, 1)",status:1,iconType:"ios-loading",colorClass:{"executor-loading":!0},isShowTime:!0,title:"执行中",showConsole:!0},succeedJobs:{color:"rgba(78, 225, 78, 0.4)",status:2,iconType:"ios-checkmark-circle-outline",colorClass:{"executor-success":!0},isShowTime:!1,title:"执行成功",showConsole:!0},failedJobs:{color:"rgba(231, 77, 98, 0.4)",status:3,iconType:"ios-close-circle-outline",colorClass:{"executor-faile":!0},isShowTime:!1,title:"执行失败",showConsole:!0},skippedJobs:{color:"rgba(236, 152, 47, 0.8)",status:4,iconType:"ios-alert-outline",colorClass:{"executor-skip":!0},isShowTime:!1,title:"跳过",showConsole:!1}},n=i,r=(new Date).getTime();Object.keys(n).forEach((function(i){s&&"runningJobs"===i&&n[i].length>0&&Object(ht["setTimeout"])((function(){t.flowExecutorNode(e,!0)}),2e3),n[i].forEach((function(e){t.$refs.process.setNodeRunState(e.nodeID,{time:t.timeTransition(r-e.startTime),status:a[i].status,borderColor:a[i].color,iconType:a[i].iconType,colorClass:a[i].colorClass,isShowTime:a[i].isShowTime,title:a[i].title,showConsole:a[i].showConsole,execID:e.execID,taskID:e.taskID})}))}))}))},timeTransition:function(e){e=Math.floor(e/1e3);var t=0,s=0,i=0;e>60?(s=Math.floor(e/60),i=Math.floor(e%60),s>=60?(t=Math.floor(s/60),s=Math.floor(s%60)):t=0):(t=0,60==e?(s=1,i=0):(s=0,i=e));var a=function(e){var t=e;return e<10&&(t="0".concat(e)),t},n="".concat(a(t),":").concat(a(s),":").concat(a(i));return n},getCache:function(){var e=this;return new Promise((function(t){e.dispatch("IndexedDB:getProjectCache",{projectID:e.$route.query.projectID,cb:function(s){var i=s&&s.tabList||[],a=null;i.forEach((function(t){t.flowId===e.flowId&&(a=t.json)})),t(a)}})}))}}},gt=mt,bt=(s("608f"),Object(b["a"])(gt,i,a,!1,null,null,null));t["default"]=bt.exports},a209:function(e,t,s){},a720:function(e,t,s){},a773:function(e,t,s){"use strict";s.r(t),t["default"]={name:"Explorer",events:[],component:{index:function(){return Promise.resolve().then(s.bind(null,"e7f4"))},resource:function(){return Promise.resolve().then(s.bind(null,"55e0"))}}}},a779:function(e,t,s){"use strict";var i={},a=1;t["a"]={inserted:function(e,t){e.outsideKey=a++;var s={documentHandler:function(s){return!e.contains(s.target)&&(t.value&&t.value(s),!0)}};i[e.outsideKey]=s,document.addEventListener("click",s.documentHandler)},unbind:function(e){var t=i[e.outsideKey];document.removeEventListener("click",t.documentHandler),delete i[e.outsideKey]}}},a789:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"log-editor-wrap"},[s("div",{staticClass:"log-tools"},[s("div",{staticClass:"log-tools-control"},[s("Tabs",{staticClass:"log-tabs",model:{value:e.curPage,callback:function(t){e.curPage=t},expression:"curPage"}},[s("TabPane",{attrs:{name:"all",label:"All"}}),s("TabPane",{attrs:{label:e.errorLabel,name:"error"}}),s("TabPane",{attrs:{label:e.warnLabel,name:"warning"}}),s("TabPane",{attrs:{name:"info",label:"Info"}})],1),s("Input",{staticClass:"log-search",attrs:{placeholder:"filter",suffix:"ios-search",size:"small"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1)]),s("we-editor",{ref:"logEditor",staticStyle:{height:"calc(100% - 34px)"},attrs:{type:"log"},model:{value:e.curLogs,callback:function(t){e.curLogs=t},expression:"curLogs"}})],1)},a=[],n=(s("3b2b"),s("28a5"),s("d25f"),s("ac6a"),s("456d"),s("6d67"),s("c5f6"),s("2ef0")),r={props:{logs:{type:Object,default:function(){return{all:"",error:"",warning:"",info:""}}},fromLine:{type:Number,default:1}},data:function(){var e=this;return{isLoading:!1,curPage:"all",searchText:"",errorNum:0,warnNum:0,errorLabel:function(t){return t("div",[t("span","Error"),t("Badge",{props:{count:e.errorNum,className:"err-badge"}})])},warnLabel:function(t){return t("div",[t("span","Warning"),t("Badge",{props:{count:e.warnNum,className:"warn-badge"}})])}}},computed:{curLogs:{get:function(){var e=this.formattedLogs();return e[this.curPage]},set:function(e){return e}}},methods:{formattedLogs:function(){var e=this,t={all:"",error:"",warning:"",info:""};return Object.keys(this.logs).map((function(s){t[s]=e.getSearchList(e.logs[s])})),this.getPointNum(t),t},getPointNum:function(e){var t=Object(n["trim"])(e.error).split("\n").filter((function(e){return!!e})),s=Object(n["trim"])(e.warning).split("\n").filter((function(e){return!!e}));this.errorNum=t.length,this.warnNum=s.length},getSearchList:function(e){var t="",s=this.searchText;if(!e)return t;if(s){var i="";Object(n["forEach"])(s,(function(e){/^[\w\u4e00-\u9fa5]$/.test(e)?i+=e:i+="\\".concat(e)}));var a=new RegExp(".*".concat(i,".*"),"gi");t=Object(n["filter"])(e.split("\n"),(function(e){return a.test(e)})).join("\n")}else t=e;return t}}},o=r,c=(s("ba93"),s("2877")),l=Object(c["a"])(o,i,a,!1,null,null,null);t["default"]=l.exports},a7b0:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("we-panel",{attrs:{diretion:"vertical"}},[s("we-panel-item",{ref:"topPanel",staticClass:"editor-panel",attrs:{index:1,"min-size":100}},[s("editor",{ref:"editor",attrs:{script:e.script,work:e.work,"script-type":e.work.type},on:{"on-save":e.save,"on-run":e.run,"on-stop":e.stop}}),e.saveLoading?s("Spin",{staticClass:"new-sidebar-spin",attrs:{size:"large",fix:""}}):e._e()],1),s("we-panel-item",{ref:"bottomPanel",staticClass:"log-panel",attrs:{index:2,height:e.scriptViewState.bottomPanelHeight,"min-size":32},on:{"on-change":e.changeBottomPanel}},[s("div",{staticClass:"workbench-tabs"},[s("div",{staticClass:"workbench-tab-wrapper"},[s("div",{staticClass:"workbench-tab"},[s("div",{staticClass:"workbench-tab-item",class:{active:"progress"==e.scriptViewState.showPanel},on:{click:function(t){return e.showPanelTab("progress")}}},[s("span",[e._v(e._s(e.$t("message.workBench.body.script.script.tabs.progress")))])]),e.script.result?s("div",{staticClass:"workbench-tab-item",class:{active:"result"==e.scriptViewState.showPanel},on:{click:function(t){return e.showPanelTab("result")}}},[s("span",[e._v(e._s(e.$t("message.workBench.body.script.script.tabs.result")))])]):e._e(),e.isLogShow?s("div",{staticClass:"workbench-tab-item",class:{active:"log"==e.scriptViewState.showPanel},on:{click:function(t){return e.showPanelTab("log")}}},[s("span",[e._v(e._s(e.$t("message.workBench.body.script.script.tabs.log")))])]):e._e(),s("div",{staticClass:"workbench-tab-item",class:{active:"history"==e.scriptViewState.showPanel},on:{click:function(t){return e.showPanelTab("history")}}},[s("span",[e._v(e._s(e.$t("message.workBench.body.script.script.tabs.history")))])])]),s("div",{staticClass:"workbench-tab-button"},[s("Dropdown",{attrs:{trigger:"click",placement:"bottom-end",transfer:""},on:{"on-click":e.configLogPanel}},[s("Icon",{attrs:{type:"md-list"}}),s("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[e.isBottomPanelFull?s("DropdownItem",{attrs:{name:"releaseFullScreen"}},[e._v(e._s(e.$t("message.constants.logPanelList.releaseFullScreen")))]):s("DropdownItem",{attrs:{name:"fullScreen"}},[e._v(e._s(e.$t("message.constants.logPanelList.fullScreen")))]),e.scriptViewState.bottomPanelMin?s("DropdownItem",{attrs:{name:"releaseMin"}},[e._v(e._s(e.$t("message.constants.logPanelList.releaseMin")))]):s("DropdownItem",{attrs:{name:"min"}},[e._v(e._s(e.$t("message.constants.logPanelList.min")))])],1)],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.scriptViewState.bottomPanelMin,expression:"!scriptViewState.bottomPanelMin"}],staticClass:"workbench-container"},["progress"==e.scriptViewState.showPanel?s("we-progress",{attrs:{current:e.script.progress.current,"waiting-size":e.script.progress.waitingSize,steps:e.script.steps,status:e.script.status,application:e.script.application,"progress-info":e.script.progress.progressInfo,"cost-time":e.script.progress.costTime},on:{"open-panel":e.openPanel}}):e._e(),"result"==e.scriptViewState.showPanel?s("result",{ref:"result",attrs:{result:e.script.result,script:e.script,height:e.scriptViewState.cacheBottomPanelHeight},on:{"on-analysis":e.openAnalysisTab,"on-set-change":e.changeResultSet}}):e._e(),"log"==e.scriptViewState.showPanel?s("log",{attrs:{logs:e.script.log,"log-line":e.script.logLine,"script-view-state":e.scriptViewState,height:e.scriptViewState.cacheBottomPanelHeight}}):e._e(),"history"==e.scriptViewState.showPanel?s("history",{attrs:{history:e.script.history,"run-type":e.script.runType}}):e._e()],1)])])],1)},a=[],n=(s("ac4d"),s("8a81"),s("5df3"),s("1c4c"),s("6b54"),s("87b3"),s("1c01"),s("58b2"),s("8e6e"),s("d25f"),s("7f7f"),s("57e7"),s("20d6"),s("28a5"),s("456d"),s("ac6a"),s("f3e2"),s("759f"),s("2caf"),s("d92a"),s("bd86")),r=s("a8db"),o=(s("0d6d"),s("96cf"),s("3b8d")),c=s("2ef0"),l=s("b593"),d=s("7138"),u=s("0971"),h=s("6b6d"),p=s("32bd"),f=s("5402"),m=s("84e9"),g=s("024e"),b=s("a90c"),v=s("4419");function y(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=w(e))){var t=0,s=function(){};return{s:s,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,n=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return n=e.done,e},e:function(e){r=!0,a=e},f:function(){try{n||null==i.return||i.return()}finally{if(r)throw a}}}}function w(e,t){if(e){if("string"===typeof e)return T(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(s):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}function S(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function E(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?S(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):S(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var N={components:{result:f["default"],editor:m["default"],log:g["default"],history:b["default"],weProgress:v["default"]},props:{work:{type:Object,required:!0}},data:function(){return{script:{data:"",oldData:"",result:{},steps:[],progress:{},resultList:null},scriptViewState:{showPanel:"progress",height:0,bottomPanelHeight:0,cacheBottomPanelHeight:0,bottomPanelMin:!1,cacheLogScroll:0},execute:null,postType:"socket",userName:"",biLoading:!1,saveLoading:!1,isLogShow:!1,autoSaveTimer:null,isBottomPanelFull:!1}},computed:{isPanelMin:function(){if(!this.script)return null;var e=this.script.log,t=Object(c["isEmpty"])(e)||!(e.all||e.error||e.info||e.warning),s=Object(c["isEmpty"])(this.script.history),i=!this.script.result||Object(c["isEmpty"])(this.script.result),a=Object(c["isEmpty"])(this.script.progress.progressInfo);return t&&s&&i&&a}},watch:{"script.data":function(){this.work.ismodifyByOldTab||(this.work.unsave=this.script.data!=this.script.oldData)},"script.oldData":function(){this.work.ismodifyByOldTab||(this.work.unsave=this.script.data!=this.script.oldData)},"execute.run":function(e){this.work.data.running=this.script.running=e,this.dispatch("IndexedDB:recordTab",this.work)},isPanelMin:function(e){e?this.configLogPanel("min"):this.configLogPanel("releaseMin")},"execute.status":function(e){this.work.data.status=e,this.script.status=e,this.dispatch("IndexedDB:recordTab",this.work)}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,s,i,a,n,r,o,l,u,p=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.userName=this.getUserName(),this.work.data?(delete this.work.data.oldData,this.script=this.work.data,this.scriptViewState=this.script.scriptViewState):(t=Object(c["find"])(this.getSupportModes(),(function(e){return e.rule.test(p.work.filename)})),this.work.specialSetting&&(t=Object(c["find"])(this.getSupportModes(),(function(e){return e.runType===p.work.specialSetting.runType}))),s=/^[.\w\u4e00-\u9fa5]{1,200}\.[A-Za-z]+$/,i=s.test(this.work.filename),this.work.data=this.script=new h["b"](Object.assign(t,{id:this.work.id,fileName:this.work.filename,executable:t.executable?i:t.executable,data:this.work.code,params:this.work.params})),delete this.work.specialSetting,this.script.scriptViewState=this.scriptViewState),delete this.work.code,delete this.work.params,this.script.oldData=this.script.data,this.work.noLoadCache||(this.dispatch("IndexedDB:getResult",{tabId:this.script.id,cb:function(e){e&&(p.script.result=e[e.resultSet].result,p.script.resultList=Object(c["dropRight"])(Object(c["toArray"])(e),3),p.showPanelTab(e.showPanel),p.$refs.result&&p.$nextTick((function(){p.$refs.result.resultSet=e.resultSet,p.$refs.result.initPage()})))}}),this.dispatch("IndexedDB:getLog",{tabId:this.script.id,cb:function(e){p.script.log=Object.freeze(e)}}),this.dispatch("IndexedDB:getProgress",{tabId:this.script.id,cb:function(e){var t=e.content;p.script.progress={current:t.current,progressInfo:t.progressInfo,costTime:t.costTime},p.script.steps=t.steps||[]}})),this.dispatch("IndexedDB:getHistory",{tabId:this.script.id,cb:function(e){p.script.history=Object(c["dropRight"])(Object(c["values"])(e))}}),e.next=9,this.getCacheWork(this.work);case 9:a=e.sent,this._running_scripts_key="running_scripts_"+this.userName,a?(n=a.data,r=a.taskID,o=a.execID,r&&o&&n&&n.running&&(l=JSON.parse(JSON.stringify(this.script.progress)),this.script=a.data,this.script.progress=l,this.run({taskID:r,execID:o,isRestore:!0,id:this.script.id}),this.work.execID=o,this.work.taskID=r)):(u=d["a"].get(this._running_scripts_key,"local")||{},u[this.script.id]?u[this.script.id].execID&&(this.script.steps=u[this.script.id].steps,this.script.progress=u[this.script.id].progress,this.run({taskID:u[this.script.id].taskID,execID:u[this.script.id].execID,isRestore:!0,id:this.script.id}),this.work.execID=u[this.script.id].execID,this.work.taskID=u[this.script.id].taskID):this.script.status="Inited"),this.dispatch("IndexedDB:recordTab",this.work);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=this;this.scriptViewState.height=this.scriptViewState.height||this.$el.clientHeight,this.scriptViewState.bottomPanelHeight=this.scriptViewState.bottomPanelHeight||.4*this.$el.clientHeight,this.$nextTick((function(){e.dispatch("WebSocket:init")})),window.onbeforeunload=function(){return e.work.unsave||e.script.running?"need confirm":null},this.autoSave()},beforeDestroy:function(){clearTimeout(this.autoSaveTimer);var e=d["a"].get(this._running_scripts_key,"local")||{};this.script.running&&this.execute.taskID&&this.execute.id?e[this.script.id]={execID:this.execute.id,taskID:this.execute.taskID,progress:this.script.progress,steps:this.script.steps}:delete e[this.script.id],d["a"].set(this._running_scripts_key,e,"local"),this.execute&&(this.execute.off(),this.execute=null),window.onbeforeunload=null,this.scriptViewState.bottomPanelHeight=this.scriptViewState.cacheBottomPanelHeight||this.scriptViewState.bottomPanelHeight},methods:{"Workbench:save":function(e){e.id==this.script.id&&this.save()},"Workbench:socket":function(e){var t=e.type,s=Object(r["a"])(e,["type"]);"downgrade"===t&&(this.postType="http"),this.execute&&this.execute.trigger(t,Object.assign(s,{execute:this.execute}))},"Workbench:run":function(e,t){e.id===this.script.id&&this.run(e,(function(e){if("start"!==e&&"downgrade"!==e)return t&&t(!0)}))},"Workbench:setResultCache":function(e){if(e.id===this.script.id&&this.$refs.result){this.script.resultList=this.script.resultList||[this.script.result];var t=this.$refs.result.getResult(),s=this.$refs.result.resultSet;this.$set(this.script.resultList[s],"result",t),this.dispatch("IndexedDB:updateResult",E({tabId:this.script.id,resultSet:s,showPanel:this.scriptViewState.showPanel},this.script.resultList))}},"Workbench:setEditorPanelSize":function(e){e.id===this.script.id&&this.$refs.topPanel[e.status]({isDiy:!0,diyStyle:{top:"33px",right:0,bottom:0,left:0}})},getCacheWork:function(e){var t=this,s=e.filepath,i=e.filename;return new Promise((function(e){t.dispatch("IndexedDB:getTabs",(function(t){var a,n=null,r=y(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o.filepath===s&&o.filename===i){n=o;break}}}catch(c){r.e(c)}finally{r.f()}e(n)}))}))},getExecuteData:function(e){var t=Object(c["isString"])(e.code)?e.code:this.script.data,s=e&&"storage"===e.type;this.script.executionCode=s?e.executionCode:t;var i={method:"/api/rest_j/v1/entrance/execute",websocketTag:this.work.id,data:{executeApplicationName:this.script.application,executionCode:this.script.executionCode,runType:this.script.runType,params:this.convertSettingParams(this.script.params),postType:this.postType,source:{scriptPath:this.work.filepath||this.work.filename}}};return s&&(i.method="/api/rest_j/v1/entrance/backgroundservice",i.data.background=e.backgroundType),i},run:function(e,t){var s=this;if(e&&e.id===this.script.id){this.$refs.topPanel.isFullScreen&&(this.dispatch("Workbench:setTabPanelSize"),this.$refs.topPanel.releaseFullScreen()),this.showPanelTab("progress");var i=this.getExecuteData(e);this.execute=new p["a"](i,this.$t.bind(this)),this.isLogShow=!1,this.localLog={log:{all:"",error:"",warning:"",info:""},logLine:1},e&&e.isRestore?this.execute.restore(e):(this.dispatch("IndexedDB:clearLog",this.script.id),this.dispatch("IndexedDB:clearResult",this.script.id),this.dispatch("IndexedDB:clearProgress",this.script.id),this.resetProgress(),this.resetData(),this.execute.start()),!this.work.filepath&&this.work.unsave?this.$Notice.warning({title:this.$t("message.workBench.body.script.script.notice.unsave.title"),desc:this.$t("message.workBench.body.script.script.notice.unsave.desc"),duration:3}):this.save(),this.execute.once("sendStart",(function(e){var i=s.work.filepath||s.work.filename;s.$Notice.close(i),s.$Notice.info({title:s.$t("message.workBench.body.script.script.notice.sendStart.title"),desc:"",render:function(e){return e("span",{style:{"word-break":"break-all","line-height":"20px"}},"".concat(s.$t("message.workBench.body.script.script.notice.sendStart.render")," ").concat(s.work.filename," ！"))},name:i,duration:3}),s.work.execID=s.execute.id,s.work.taskID=s.execute.taskID,e&&(s.script.executionCode=s.script.data=e),s.dispatch("IndexedDB:recordTab",s.work),t&&t("start")})),this.execute.on("updateResource",(function(e){s.dispatch("Footer:updateRunningJob",e)})),this.execute.on("log",(function(e){var t=Array.isArray(e)?e.some((function(e){return e.length>0})):e;if(t){var i=u["a"].convertLog(e);Object.keys(i).forEach((function(e){var t=i[e];t&&(s.localLog.log[e]+=t+"\n"),"all"===e&&(s.localLog.logLine+=t.split("\n").length)})),"log"===s.scriptViewState.showPanel&&s.localLogShow()}})),this.execute.on("history",(function(e){var t=Object(c["findIndex"])(s.script.history,(function(t){return t.taskID===e.taskID})),i=Object(c["find"])(s.script.history,(function(t){return t.taskID===e.taskID})),a=null,n="string"===typeof s.script.executionCode&&s.script.executionCode?s.script.executionCode:s.script.data;i?e.isPartialUpdate?(e.runningTime=i.runningTime||0,delete e.isPartialUpdate,a=Object.assign(i,e)):a=e.hasOwnProperty("logPath")?{taskID:e.taskID,createDate:i.createDate,execID:e.execID||i.execID,runningTime:i.runningTime,data:n,status:e.status,fileName:s.script.fileName,failedReason:e.failedReason}:{taskID:e.taskID,createDate:e.createDate,execID:e.execID||i.execID,runningTime:e.runningTime,data:n,status:e.status,fileName:s.script.fileName,failedReason:e.failedReason}:a={taskID:e.taskID,createDate:e.createDate,execID:e.execID,runningTime:e.runningTime,data:n,status:e.status,fileName:s.script.fileName,failedReason:e.failedReason},-1===t?(s.script.history.unshift(a),s.dispatch("IndexedDB:appendHistory",E({tabId:s.script.id},s.script.history))):(s.script.history.splice(t,1,a),s.dispatch("IndexedDB:updateHistory",E({tabId:s.script.id},s.script.history)))})),this.execute.on("result",(function(e){s.showPanelTab("result");var t={headRows:e.metadata,bodyRows:e.fileContent,total:e.totalLine,type:e.type,cache:{offsetX:0,offsetY:0},path:s.execute.currentResultPath,current:1,size:20};s.$set(s.execute.resultList[0],"result",t),s.$set(s.script,"resultSet",0),s.script.result=t,s.script.resultList=s.execute.resultList,s.dispatch("IndexedDB:getResult",{tabId:s.script.id,cb:function(e){e?s.dispatch("IndexedDB:updateResult",E({tabId:s.script.id,resultSet:0,showPanel:"result"},s.script.resultList)):s.dispatch("IndexedDB:appendResult",E({tabId:s.script.id,resultSet:0,showPanel:"result"},s.script.resultList))}}),s.script.progress.current&&(s.script.progress.current=1,s.dispatch("IndexedDB:updateProgress",{tabId:s.script.id,rst:s.script.progress}))})),this.execute.on("progress",(function(e){var t=e.progress,i=e.progressInfo,a=e.waitingSize;if(s._execute_last_progress!==t){if(s._execute_last_progress=t,i.length&&!Object(c["isEmpty"])(i[0])?i.forEach((function(e){var t=e.id,i=s.script.progress.progressInfo.findIndex((function(e){return e.id===t}));-1!==i?s.script.progress.progressInfo.splice(i,1,e):s.script.progress.progressInfo.push(e)})):i=[],1==t){var n=d["a"].get(s._running_scripts_key,"local")||{};delete n[s.script.id],d["a"].set(s._running_scripts_key,n,"local")}s.script.progress.current=t,null!==a&&a>=0&&(s.script.progress.waitingSize=a),s.dispatch("IndexedDB:updateProgress",{tabId:s.script.id,rst:s.script.progress})}})),this.execute.on("updateExpireHistory",(function(e){var t=Object(c["findIndex"])(s.script.history,(function(t){return t.taskID===e.taskID})),i=Object(c["find"])(s.script.history,(function(t){return t.execID===e.execID}));if(i){var a=null;l["a"].fetch("/jobhistory/".concat(i.taskID,"/get"),"get").then((function(e){a={taskID:e.task.taskID,createDate:e.task.createdTime,execID:e.task.strongerExecId,runningTime:e.task.costTime,data:e.task.executionCode,status:e.task.status,fileName:e.task.fileName,failedReason:e.task.errCode&&e.task.errDesc?e.task.errCode+e.task.errDesc:e.task.errCode||e.task.errDesc||""},s.script.history.splice(t,1,a),s.dispatch("IndexedDB:updateHistory",E({tabId:s.script.id},s.script.history))}))}})),this.execute.on("steps",(function(e){if(s._execute_last_status!==e)if(s._execute_last_status=e,"Inited"===e)s.script.steps=["Submitted","Inited"];else{var t=Object(c["last"])(s.script.steps);(-1===s.script.steps.indexOf(e)||t!==e)&&s.script.steps.push(e),s.dispatch("IndexedDB:updateProgress",{tabId:s.script.id,rst:Object.assign(s.script.progress,{steps:s.script.steps})})}})),this.execute.on("WebSocket:send",(function(e){s.dispatch("WebSocket:send",e)})),this.execute.on("error",(function(e){t&&t(e||"error"),"history"!==s.scriptViewState.showPanel&&(s.showPanelTab("history"),s.isLogShow=!0),s.dispatch("IndexedDB:appendLog",{tabId:s.script.id,rst:s.script.log})})),this.execute.on("stateEnd",(function(){t&&t("end"),s.dispatch("IndexedDB:appendLog",{tabId:s.script.id,rst:s.localLog.log})})),this.execute.on("querySuccess",(function(e){var t=e.type,i=e.task,a=u["a"].convertTimestamp(i.costTime);s.script.progress.costTime=a;var n=s.work.filepath||s.work.filename;s.$Notice.close(n),s.$Notice.success({title:s.$t("message.workBench.body.script.script.notice.querySuccess.title"),desc:"",render:function(e){return e("span",{style:{"word-break":"break-all","line-height":"20px"}},"".concat(s.work.filename," ").concat(t).concat(s.$t("message.workBench.body.script.script.notice.querySuccess.render"),"：").concat(a,"！"))},name:n,duration:3})})),this.execute.on("notice",(function(e){var t=e.type,i=e.msg,a=e.autoJoin,n=s.work.filepath||s.work.filename,r=a?"".concat(s.$t("message.workBench.body.script.script.text")).concat(s.work.filename," ").concat(i):i;s.$Notice.close(n),s.$Notice[t]({title:s.$t("message.workBench.body.script.script.notice.notice.title"),name:n,desc:"",duration:5,render:function(e){return e("span",{style:{"word-break":"break-all","line-height":"20px"}},r)}})})),this.execute.on("costTime",(function(e){s.script.progress.costTime=u["a"].convertTimestamp(e),s.dispatch("IndexedDB:updateProgress",{tabId:s.script.id,rst:s.script.progress})}))}},resetData:function(){this.script.log={all:"",error:"",warning:"",info:""},this.script.logLine=1,this.script.steps=["Submitted"],this.script.result={headRows:[],bodyRows:[],type:"EMPTY",total:0,path:"",cache:{}},this.script.resultList=null},resetProgress:function(){this.script.progress={current:null,progressInfo:[],waitingSize:null,costTime:null}},stop:function(e){var t=this;this.execute&&this.execute.id?l["a"].fetch("/entrance/".concat(this.execute.id,"/kill"),"get").then((function(){t.execute.trigger("stop"),t.execute.trigger("error"),t.execute.trigger("kill");var s=t.work.filepath||t.work.filename;t.$Notice.close(s),t.$Notice.warning({title:t.$t("message.workBench.body.script.script.notice.kill.title"),desc:"".concat(t.$t("message.workBench.body.script.script.notice.kill.desc")," ").concat(t.work.filename," ！"),name:s,duration:3}),e()})).catch((function(){t.execute.trigger("stop"),e()})):(e(),this.script.steps=[],this.script.running=!1)},autoSave:function(){var e=this;clearTimeout(this.autoSaveTimer),!this.work.saveAs&&this.work&&this.work.data&&(this.autoSaveTimer=setTimeout((function(){e.save()}),3e5))},save:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,s,i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={path:this.work.filepath,scriptContent:this.script.data,params:this.convertSettingParams(this.script.params)},s=0===this.work.filepath.indexOf("hdfs"),this.script.data?this.work.unsave&&!s&&(this.work.filepath?(this.work.unsave=!1,i=setTimeout((function(){a.saveLoading=!0}),2e3),this.script.data!==this.work.data.data&&(this.work.data.data=this.script.data),delete this.work.data.oldData,this.dispatch("IndexedDB:recordTab",this.work,(function(){l["a"].fetch("/filesystem/saveScript",t).then((function(){clearTimeout(i),a.saveLoading=!1,a.$Message.success(a.$t("message.constants.success.save")),a.script.oldData=a.script.data,a.$refs.editor.$refs.setting&&(a.$refs.editor.$refs.setting.origin=JSON.stringify(a.script.params)),a.work.ismodifyByOldTab&&(a.work.ismodifyByOldTab=!1)})).catch((function(){clearTimeout(i),a.saveLoading=!1,a.work.unsave=!0}))}))):this.$Modal.confirm({title:this.$t("message.workBench.body.script.script.confirmModal.title"),content:this.$t("message.workBench.body.script.script.confirmModal.content"),okText:this.$t("message.workBench.body.script.script.confirmModal.okText"),cancelText:this.$t("message.workBench.body.script.script.confirmModal.cancelText"),onOk:function(){a.dispatch("Workbench:saveAs",a.work)}})):this.$Message.warning(this.$t("message.workBench.body.script.script.warning.empty")),this.autoSave();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showPanelTab:function(e){this.scriptViewState.showPanel=e,"log"===e&&this.localLogShow()},localLogShow:function(){var e=this;this.debounceLocalLogShow||(this.debounceLocalLogShow=Object(c["debounce"])((function(){e.localLog&&(e.script.log=Object.freeze(E({},e.localLog.log)),e.script.logLine=e.localLog.logLine)}),1500)),this.debounceLocalLogShow()},configLogPanel:function(e){"fullScreen"==e&&(this.isBottomPanelFull=!0,this.$refs.bottomPanel[e]({isDiy:!1})),"releaseFullScreen"==e&&(this.isBottomPanelFull=!1,this.$refs.bottomPanel[e]({isDiy:!1})),"min"==e&&(this.scriptViewState.bottomPanelHeight=32,this.scriptViewState.bottomPanelMin=!0),"releaseMin"==e&&(this.scriptViewState.bottomPanelHeight=.4*this.scriptViewState.height,this.scriptViewState.bottomPanelMin=!1)},changeBottomPanel:function(e){var t=e.height;this.scriptViewState.cacheBottomPanelHeight=t},changeResultSet:function(e,t){var s=this,i=Object(c["isUndefined"])(e.currentSet)?this.script.resultSet:e.currentSet,a=this.script.resultList[i],n=a&&a.path,r=this.script.resultList[i].hasOwnProperty("result");if(r)this.script.result=this.script.resultList[i].result,this.$set(this.script,"resultSet",i),this.dispatch("IndexedDB:updateResult",E({tabId:this.script.id,resultSet:i,showPanel:"result"},this.script.resultList)),t();else{var o=5e3,d="/filesystem/openFile";l["a"].fetch(d,{path:n,pageSize:o},"get").then((function(e){var a={headRows:e.metadata,bodyRows:e.fileContent,total:e.totalLine?e.totalLine:0,type:e.fileContent?e.type:0,cache:{offsetX:0,offsetY:0},path:n,current:1,size:20};s.$set(s.script.resultList[i],"result",a),s.$set(s.script,"resultSet",i),s.script.result=a,s.dispatch("IndexedDB:updateResult",E({tabId:s.script.id,resultSet:i,showPanel:"result"},s.script.resultList)),t()})).catch((function(){t()}))}},openAnalysisTab:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,s,i,a,n,r,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.biLoading){e.next=2;break}return e.abrupt("return",this.$Message.warning(this.$t("message.constants.warning.biLoading")));case 2:return this.biLoading=!0,t=this.getVsBiUrl(),e.next=6,l["a"].fetch("".concat(t,"/api/rest_j/v1/visualis/view"),{fileName:this.work.filename,executionCode:this.script.executionCode||this.script.data,resultPath:this.script.result.path,runType:this.script.runType,resultNumber:this.script.result.current>0?this.script.result.current-1:0}).catch((function(){o.biLoading=!1}));case 6:s=e.sent,s&&(i=s.id,a=s.projectId,n="".concat(this.work.filename,"_project").concat(a,"_set").concat(this.script.resultSet,".bi"),r=u["a"].md5(n),this.dispatch("Workbench:add",{id:r,filename:n,saveAs:!0,type:"visualAnalysis",params:{viewId:i,projectId:a}},(function(){o.biLoading=!1})));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openPanel:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"log"===t&&(this.isLogShow=!0,this.showPanelTab(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),convertSettingParams:function(e){var t=Object(c["isEmpty"])(e.variable)?{}:u["a"].convertArrayToObject(e.variable),s=Object(c["isEmpty"])(e.variable)?{}:{special:{},runtime:{},startup:{}};return{variable:t,configuration:s}}}},C=N,k=s("2877"),O=Object(k["a"])(C,i,a,!1,null,null,null);t["default"]=O.exports},a7f2:function(e,t,s){"use strict";var i=s("1f99"),a=s.n(i);a.a},a84f:function(e,t,s){"use strict";var i=s("399a"),a=s.n(i);a.a},a90c:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"workbench-history"},[s("history-table",{ref:"globalHistory",attrs:{columns:e.column,data:e.list,height:e.tableHeight,"no-data-text":e.$t("message.workBench.body.script.result.emptyText"),size:"small",border:"",stripe:""}}),s("div",{staticClass:"workbench-history-page"},[s("Page",{attrs:{total:e.PageTotal,"page-size-opts":e.page.sizeOpts,"page-size":e.page.size,current:e.page.current,"show-sizer":"","show-total":"",size:"small"},on:{"on-change":e.change,"on-page-size-change":e.changeSize}})],1)],1)},a=[],n=(s("78ce"),s("7514"),s("96cf"),s("3b8d")),r=(s("7f7f"),s("57e7"),s("bc3a")),o=s.n(r),c=s("4de8"),l=s("b593"),d=s("0971"),u=s("2e77"),h=s("410f"),p=["Succeed","Failed","Cancelled","Timeout"],f={components:{historyTable:h["a"].historyTable},mixins:[c["default"].mixin,u["a"]],props:{history:{type:Array,required:!0},runType:String},data:function(){return{column:[],page:{start:0,end:10,current:1,size:10,sizeOpts:[10,20,30,50]},costTimeout:null}},computed:{PageTotal:function(){return this.history.length},firstRecord:function(){return this.history&&this.history[0]},list:function(){return this.history.slice(this.page.start,this.page.end)}},watch:{"firstRecord.runningTime":function(e){this.setInitCostTime()},"firstRecord.status":function(e){-1!==p.indexOf(e)&&clearTimeout(this.costTimeout)}},mounted:function(){this.initData()},beforeDestroy:function(){clearTimeout(this.costTimeout),this.costTimeout=null},methods:{initData:function(){this.pageingData(),this.setInitCostTime(),this.column=[{width:50,align:"center",renderType:"index"},{title:this.$t("message.workBench.body.script.history.columns.taskID.title"),key:"taskID",align:"center",width:80},{title:this.$t("message.workBench.body.script.history.columns.runningTime.title"),key:"runningTime",align:"center",width:80,renderType:"convertTime"},{title:this.$t("message.workBench.body.script.history.columns.createDate.title"),key:"createDate",align:"center",width:100,renderType:"formatTime"},{title:this.$t("message.workBench.body.script.history.columns.status.title"),key:"status",align:"center",width:120,renderType:"tag"},{title:this.$t("message.workBench.body.script.history.columns.data.title"),key:"data",align:"center",ellipsis:!0},{title:this.$t("message.workBench.body.script.history.columns.failedReason.title"),key:"failedReason",align:"center",className:"history-failed",width:220,renderType:"a",renderParams:{hasDoc:this.checkIfHasDoc,action:this.linkTo}},{title:this.$t("message.workBench.body.script.history.columns.control.title"),key:"control",fixed:"right",align:"center",width:140,className:"history-control",renderType:"button",renderParams:[{label:this.$t("message.workBench.body.script.history.columns.control.view"),action:this.viewHistory,isHide:"Home"!==this.$route.name},{label:this.$t("message.workBench.body.script.history.columns.control.download"),action:this.downloadLog}]}]},setInitCostTime:function(){var e=this;this.history.length&&this.history&&-1===p.indexOf(this.history[0].status)&&(clearTimeout(this.costTimeout),this.costTimeout=setTimeout((function(){e.$set(e.history[0],"runningTime",(new Date).getTime()-e.history[0].createDate)}),5e3))},viewHistory:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var s,i,a,n,r,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=this.getSupportModes(),i=s.find((function(e){return e.rule.test(t.row.fileName)})),a=i?i.ext:".hql",t.row.logPath){e.next=6;break}return e.next=6,l["a"].fetch("/jobhistory/".concat(t.row.taskID,"/get"),"get").then((function(e){t.row.logPath=e.task.logPath}));case 6:n="history_item_".concat(t.row.taskID).concat(a),r=d["a"].md5(n),this.dispatch("Workbench:add",{id:r,taskID:t.row.taskID,filename:n,filepath:"",saveAs:!0,code:t.row.data,type:"historyScript",addWay:"follow"},(function(e){e&&o.$Message.success(o.$t("message.workBench.body.script.history.success.open"))}));case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),downloadLog:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var s,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.row.fileName+"__"+Date.now()+".log",t.row.logPath){e.next=4;break}return e.next=4,l["a"].fetch("/jobhistory/".concat(t.row.taskID,"/get"),"get").then((function(e){i.$set(t.row,"logPath",e.task.logPath)}));case 4:o.a.post(c["default"].data.API_PATH+"filesystem/download",{path:t.row.logPath}).then((function(e){var t=document.createElement("a"),a=new Blob([e.data],{type:e.headers["content-type"]});t.href=window.URL.createObjectURL(a),t.download=s;var n=null;n=window.MouseEvent?new MouseEvent("click"):document.createEvent("MouseEvents");var r=t.dispatchEvent(n);i.$nextTick((function(){r&&i.$Message.success(i.$t("message.workBench.body.script.history.success.download"))}))})).catch((function(e){i.$Message.error(e.message)}));case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),change:function(e){this.page.current=e,this.pageingData()},changeSize:function(e){this.page.size=e,this.page.current=1,this.pageingData()},pageingData:function(){this.page.start=(this.page.current-1)*this.page.size,this.page.end=this.page.start+this.page.size},parsingLanguaue:function(){var e=this,t=this.getSupportModes(),s=t.find((function(t){return t.runType===e.runType}));return s?"hql"===s.lang?"sql":s.lang:""},linkTo:function(e){this.$router.push({path:"/console/FAQ",query:{errCode:parseInt(e.row.failedReason),isSkip:!0}})},checkIfHasDoc:function(e,t){var s=[11011,11012,11013,11014,11015,11016,11017],i=parseInt(e.row.failedReason);return-1!==s.indexOf(i)}}},m=f,g=(s("66db"),s("2877")),b=Object(g["a"])(m,i,a,!1,null,null,null);t["default"]=b.exports},abe3:function(e,t,s){"use strict";s.r(t);s("6b54"),s("87b3"),s("2397");var i=s("d225"),a=s("b0b4"),n=s("308d"),r=s("6bb5"),o=s("4e2b"),c=s("d650");function l(e){return function(){var t,s=Object(r["a"])(e);if(d()){var i=Object(r["a"])(this).constructor;t=Reflect.construct(s,arguments,i)}else t=s.apply(this,arguments);return Object(n["a"])(this,t)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var u=function(e){Object(o["a"])(s,e);var t=l(s);function s(e){var a;return Object(i["a"])(this,s),a=t.call(this),a.options=e,a.errHandler=e.errHandler,a.init(),a}return Object(a["a"])(s,[{key:"init",value:function(){try{this.ws=new WebSocket(this.options.url),this.ws.debug=!0}catch(e){this.emit("inconnect",{type:"inconnect",message:"socket连接失败"})}this._onError(),this._onClose(),this._onOpen(),this._onMessage()}},{key:"send",value:function(e){this._validState("send")&&this.ws.send(JSON.stringify(e))}},{key:"close",value:function(e){this.ws.close(e)}},{key:"reconnect",value:function(){return this.init(),this}},{key:"_onMessage",value:function(){var e=this;this.ws.onmessage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.data){var s=JSON.parse(t.data),i=e._validMessage(s);e.emit("data",i)}else e.errHandler&&e.errHandler({type:"message",msg:"接收到无效数据"})}}},{key:"_onOpen",value:function(){var e=this;this.ws.onopen=function(){e.connected=!0,e.emit("open",{msg:"连接成功"})}}},{key:"_onError",value:function(){var e=this;this.ws.onerror=function(t){var s={type:"socket listening error",msg:t};e.errHandler&&e.errHandler(s)}}},{key:"_onClose",value:function(){var e=this;this.ws.onclose=function(t){var s=t.code,i=t.reason,a={msg:"socket close tips",reason:i,code:s};e.connected=!1,e.errHandler&&e.errHandler(a),e.emit("close",a)}}},{key:"_validState",value:function(e){var t=this.ws.readyState,s={0:"正在连接",1:"成功",2:"正在关闭",3:"连接已经关闭或打开连接失败"};if(2===t||3===t){var i={type:e,msg:s[t]};this.errHandler&&this.errHandler(i)}return 1===t}},{key:"_validMessage",value:function(e){if(e instanceof Object)return 0!==e.status&&this.emit("dataError",{type:"network",message:e.message,data:e}),e}},{key:"readyState",get:function(){return this.ws.readyState}}]),s}(c["a"]),h=u,p={timer:null,socket:null,interval:100,retryInterval:1e3,retryTimer:null,retryCounter:3,errCode:0,delayCounter:0},f={name:"WebSocket",events:[],dispatchs:["Workbench:socket"],methods:{init:function(){if(p.socket)return 3===p.socket.readyState?(p.retryCounter=3,f.methods.reconnect()):void 0;p.socket=new h({url:"ws://".concat(window.location.host).concat("/ws/api/entrance/connect"),errHandler:function(e){}}),p.socket.on("inconnect",(function(e){f.methods.downgrade(),console.warn("socket连接失败，后续请求将使用http")})),p.socket.on("close",(function(e){f.methods.clearTimer(),p.errCode=e.code,1001!=e.code&&1005!=e.code?p.retryTimer=setTimeout((function(){f.methods.reconnect(null,e.code)}),p.retryInterval):p.retryCounter=3})),p.socket.on("data",(function(e){f.dispatch("Workbench:socket",{type:"data",data:e})})),p.socket.on("dataError",(function(e){f.dispatch("Workbench:socket",{type:"dataError",data:e})}))},close:function(){p.socket&&p.socket.close(1e3)},send:function(e){p.socket?0===p.socket.readyState?f.methods.delaySend(e):1===p.socket.readyState?p.socket.send(e):1001===p.errCode?(f.methods.reconnect(e,1001),f.methods.reSend(e)):(console.warn("socket readystate".concat(p.socket.readyState,"：本次请求将使用http")),f.methods.downgrade(e)):f.methods.downgrade(e)},delaySend:function(e){if(p.delayCounter>10)return p.delayCounter=0,console.warn("socket readystate重试多次不为open：本次请求将使用http"),f.methods.downgrade(e);f.methods.reSend(e),p.delayCounter++},downgrade:function(e){e&&f.methods.clearResendTimer(),f.methods.clearTimer(),p.retryCounter=1,f.dispatch("Workbench:socket",{type:"downgrade",data:e})},reconnect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;f.methods.clearTimer(),--p.retryCounter>0?p.socket.reconnect(e):(f.methods.downgrade(e),console.warn("错误码".concat(t,"：本次请求将使用http")))},reSend:function(e){f.methods.clearResendTimer(),p.timer=setTimeout((function(){f.methods.send(e)}),p.interval)},clearTimer:function(){clearTimeout(p.retryTimer)},clearResendTimer:function(){clearTimeout(p.timer)}}};t["default"]=f},acd1:function(e,t,s){e.exports=s.p+"img/shell.f2a6172f.svg"},b073:function(e,t,s){},b1bd:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"we-side-bar"},[s("we-navbar",{attrs:{"nav-list":e.navList},on:{"on-add":function(t){return e.openFileModal(!1)},"on-refresh":e.refresh,"text-change":e.setSearchText}}),s("we-file-tree",{ref:"weFileTree",staticClass:"we-side-bar-content",attrs:{tree:e.fileTree,"before-remove":e.beforeRemove,"before-change":e.beforeChange,"filter-text":e.searchText,"node-props":e.nodeProps,"load-data-fn":e.loadDataFn,loading:e.compLoading,"highlight-path":e.highlightPath,"is-root-default-open":e.isRootDefaultOpen},on:{"on-refresh":e.refresh,"work-bench-click":e.benchClick,"work-bench-edit":e.benchEdit,"work-bench-dblclick":e.benchdbClick,"work-bench-contextMenu":e.benchContextMenu}}),s("we-menu",{ref:"treeContextMenu",attrs:{id:"file"}},[e.currentNode.isLeaf?s("we-menu-item",{on:{select:function(t){return e.openToTABAction()}}},[s("span",[e._v(e._s(e.$t("message.workSpace.contextMenu.openToTab")))]),s("span",[e._v("Ctrl+Enter")])]):e._e(),s("we-menu-item",{on:{select:e.copyPathAction}},[s("span",[e._v(e._s(e.$t("message.workSpace.contextMenu.copyPath")))]),s("span",[e._v("Alt+Shift+C")])]),s("we-menu-item",{staticClass:"ctx-divider"}),e.currentNode.isLeaf?e._e():s("we-menu-item",{on:{select:function(t){return e.openFileModal(!1)}}},[s("span",[e._v(e._s(e.$t("message.workSpace.contextMenu.addCatalog")))])]),e.currentNode.isLeaf?e._e():s("we-menu-item",{on:{select:function(t){return e.openFileModal(!0)}}},[s("span",[e._v(e._s(e.$t("message.workSpace.contextMenu.addScript")))])]),e.currentNode.isLeaf?e._e():s("we-menu-item",{on:{select:e.openUploadModal}},[s("span",[e._v(e._s(e.$t("message.constants.upload")))])]),1!=e.currentNode._level?s("we-menu-item",{on:{select:e.handleEditBefore}},[s("span",[e._v(e._s(e.$t("message.constants.rename")))])]):e._e(),1!=e.currentNode._level?s("we-menu-item",{on:{select:e.openDeleteModal}},[s("span",[e._v(e._s(e.$t("message.constants.delete")))])]):e._e(),s("we-menu-item",{staticClass:"ctx-divider"}),e.currentNode.isLeaf?e._e():s("we-menu-item",{on:{select:e.refresh}},[s("span",[e._v(e._s(e.$t("message.constants.refresh")))])])],1),e.timeoutFlag?s("new-dialog",{ref:"newFile",attrs:{type:e.newDialog.type,"is-new":e.newDialog.isNew,node:e.newDialog.node,"is-leaf":e.newDialog.isLeaf,"default-path":e.newDialog.defaultPath,"is-desc-show":!1,"is-path-show":!0,"script-type":e.newDialog.scriptType,tree:e.filterTree,"load-data-fn":e.loadDataFn,"filter-node":e.filterNode},on:{add:e.handleCreate}}):e._e(),s("upload-dialog",{ref:"upload",attrs:{refresh:e.refresh}}),s("we-import-to-hive",{ref:"impotToHive",attrs:{width:560,"fs-type":e.fsType,tree:e.filterTree,"load-data-fn":e.hiveDataLoadFn,"db-list":e.dbList,"filter-node":e.filterToHiveNode},on:{"get-hive":e.getHiveList,"get-tables":e.getHiveTableList,"get-content":e.getFileContent,"get-partitions":e.getPartitions,"on-type-change":e.changeTreeByType,export:e.exportToHive}}),s("delete-dialog",{ref:"delete",attrs:{loading:e.loading},on:{delete:e.handleDelete}})],1)},a=[],n=(s("6b54"),s("87b3"),s("57e7"),s("0cd8"),s("5df3"),s("6d67"),s("96cf"),s("3b8d")),r=(s("a481"),s("28a5"),s("ac6a"),s("f3e2"),s("d25f"),s("9865"),s("7f7f"),s("2ef0")),o=s("b593"),c=s("0971"),l=s("7138"),d=s("1122"),u=s("2b78"),h=s("0551"),p=s("377b"),f=s("b832"),m=s("7b73"),g="file://",b={name:"WorkSidebar",components:{weFileTree:d["a"],weNavbar:u["a"],newDialog:h["a"],uploadDialog:p["a"],weImportToHive:f["a"],deleteDialog:m["a"]},props:{type:{type:String,default:"file"}},data:function(){return{rootPath:"",currentNode:{},searchText:"",nodeProps:{children:"children",label:"name",icon:"icon",isLeaf:"isLeaf"},fileTree:[],filterTree:[],timeoutFlag:!1,navList:["search","newFile","refresh"],hdfsTree:[],hdfsPath:"",loadHdfsDataFn:function(){},fsType:"share",dbList:[],hiveComponent:null,loading:!1,compLoading:!1,treeLoading:!1,highlightPath:"",isRootDefaultOpen:!0,newDialog:{type:"",isNew:!0,node:{},isLeaf:!1,scriptType:[],defaultPath:""}}},computed:{isVaildType:function(){var e;if(this.currentNode&&this.currentNode.data){var t=this.currentNode.data.name,s=[".xlsx",".xls",".csv",".txt"],i=t.substr(t.lastIndexOf("."),t.length);e=-1!==Object(r["indexOf"])(s,i)}return e}},mounted:function(){this.initData()},methods:{initData:function(){var e=this,t=l["a"].get("scriptTree","SESSION");!t||Object(r["isEmpty"])(t)?(this.treeLoading=!0,this.compLoading=!0,this.getRootPath((function(t){t?e.getTree((function(t){e.treeLoading=!1,t&&(e.fileTree.push(t),l["a"].set("scriptTree",e.fileTree,"SESSION"),e.getAcitveTabAndSetHighlight())})):(e.treeLoading=!1,e.compLoading=!1)}))):(this.fileTree=t,this.timeoutFlag=!0,this.getAcitveTabAndSetHighlight())},changeTreeByType:function(e){var t=this;"share"===e?(this.filterTree=Object(r["cloneDeep"])(this.fileTree),this.hiveDataLoadFn=this.loadDataFn):"hdfs"===e&&this.getHdfsTree().then((function(e){var s=e.hdfsTree,i=e.loadDataFn;t.filterTree=Object(r["cloneDeep"])(s),t.hiveDataLoadFn=i}))},getRootPath:function(e){var t=this;this.rootPath=l["a"].get("shareRootPath","SESSION"),this.rootPath?e(!0):o["a"].fetch("/filesystem/getUserRootPath",{pathType:"file"},"get").then((function(s){s.userLocalRootPath?(l["a"].set("shareRootPath",s.userLocalRootPath,"SESSION"),t.rootPath=s.userLocalRootPath,e(!0)):(t.$Message.warning(t.$t("message.workSpace.warning.getRootPath")),e(!1))})).catch((function(){e(!1)}))},getTree:function(e){var t=this,s=setTimeout((function(){t.compLoading=!0}),2e3);o["a"].fetch("/filesystem/getDirFileTrees",{path:this.rootPath},"get").then((function(i){if(clearTimeout(s),t.compLoading=!1,i){var a=i.dirFileTrees;e(a),l["a"].set("scriptTree",[a],"SESSION")}t.timeoutFlag=!0})).catch((function(){clearTimeout(s),t.compLoading=!1,e(!1)}))},setSearchText:function(e){if(this.treeLoading)return this.$Message.warning(this.$t("message.constants.warning.data"));this.searchText=e},beforeRemove:function(){},benchClick:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.currentNode=t[0].node,this.$refs.treeContextMenu.close()},benchContextMenu:function(e){var t=e.node,s=e.ev;this.currentNode=t,this.$refs.treeContextMenu.open(s)},benchdbClick:function(e){var t=e.node;t.isLeaf&&this.openToTABAction(t.data)},openToTABAction:function(e){var t=e||this.currentNode.data,s=t.path;this.dispatch("Workbench:openFile",{path:s,filename:t.name},(function(){}))},copyPathAction:function(){c["a"].executeCopy(this.currentNode.data.path)},openFileModal:function(e){if(this.treeLoading)return this.$Message.warning(this.$t("message.constants.warning.data"));var t=this.currentNode.data;Object(r["isEmpty"])(this.currentNode)&&(this.currentNode=this.$refs.weFileTree.$refs.tree.root,t=this.currentNode.data[0]),this.filterTree=Object(r["cloneDeep"])(this.fileTree),this.fsType="share",this.newDialog={type:e?this.$t("message.deleteType.script"):this.$t("message.deleteType.catalog"),isNew:!0,node:t,isLeaf:e,scriptType:this.getSupportModes().filter((function(e){return e.isCanBeNew})),defaultPath:t.path},this.$refs.newFile.open()},openUploadModal:function(){var e=[];this.currentNode.data.children&&this.currentNode.data.children.forEach((function(t){t.isLeaf&&e.push(t.name)})),this.$refs.upload.open({path:this.currentNode.data.path,nameList:e,apiPrefix:this.fesx.API_PATH,type:g})},handleCreate:function(e){var t=this;this.handleCreating(e,(function(s){s&&(e.isLeaf&&t.openToTABAction(e),t.$Message.success(t.$t("message.constants.success.add")),setTimeout((function(){t.refresh("new",e.path)}),500))}))},handleCreating:function(e,t){var s=e.isLeaf?"/filesystem/createNewFile":"/filesystem/createNewDir";o["a"].fetch(s,{path:e.path}).then((function(){t(!0)})).catch((function(){t(!1)}))},rename:function(e,t,s){o["a"].fetch("/filesystem/rename",{oldDest:t,newDest:e}).then((function(){s(!0)})).catch((function(){s(!1)}))},handleEditBefore:function(){this.currentNode.changeEditState(!0)},beforeChange:function(e,t){var s=this,i=e.node.path;i=i.slice(0,i.lastIndexOf("/")+1)+e.label;try{this.dispatch("Workbench:checkExist",{path:i},(function(a){if(a)return t(!1),s.$Message.error("".concat(s.$t("message.constants.error.fileExists"),"：").concat(i));o["a"].fetch("/filesystem/rename",{oldDest:e.node.path,newDest:i}).then((function(){t(!0)})).catch((function(){t(!1)}))}))}catch(n){var a=n;Object(r["isError"])(n)&&(a=n.message),this.$Message.error(a),t(!1)}},benchEdit:function(){var e=this,t=arguments.length<=0?void 0:arguments[0],s=t.node,i=t.oldLabel,a=s.data.path.slice(0,s.data.path.lastIndexOf("/")+1)+s.label,n={name:s.label,path:a};this.dispatch("Workbench:updateTab",{newNode:n,findWork:null,oldLabel:i}),this.$Message.success(this.$t("message.constants.success.update")),setTimeout((function(){e.refresh("edit")}),500)},openDeleteModal:function(){var e=this.currentNode.isLeaf,t=e?this.$t("message.deleteType.file"):this.$t("message.deleteType.folder");this.$refs.delete.open({type:t,name:this.currentNode.label})},handleDelete:function(){var e=this;if(this.loading)return this.$Message.warning(this.$t("message.constants.warning.waiting"));var t=this.currentNode.data.path;this.dispatch("Workbench:deleteDirOrFile",t,(function(s){"save"===s||"none"===s?(e.loading=!0,o["a"].fetch("/filesystem/deleteDirOrFile",{path:t}).then((function(){e.loading=!1,e.$Message.success(e.$t("message.constants.success.delete")),e.refresh("delete"),e.currentNode.remove()})).catch((function(){e.loading=!1}))):(e.$refs.delete.close(),e.$Message.warning(e.$t("message.workSpace.warning.scriptChanged")))}))},lookForChangeNode:function(e,t,s){var i={tree:{name:"name",children:"children"},node:{name:"label",children:"computedNodes"}},a=i[s],n=function(e,t,s){return e[s][t]},o=e?e.split("/"):"",c=t;return Object(r["forEach"])(o,(function(e){var t=Object(r["findIndex"])(c[a.children],(function(t){return t[a.name]===e}));t>=0&&(c=n(c,t,a.children),"node"===s&&(c.expanded=!0))})),c},hiveDataLoadFn:function(e,t){this.loadDataFn(e,t)},loadDataFn:function(e,t){var s=this;this.treeLoading=!0;var i=setTimeout((function(){s.compLoading=!0}),2e3);o["a"].fetch("/filesystem/getDirFileTrees",{path:e.data.path},"get").then((function(e){clearTimeout(i),s.compLoading=!1,s.treeLoading=!1;var a=e.dirFileTrees.children;t(a),s.$nextTick((function(){l["a"].set("scriptTree",s.fileTree,"SESSION")}))})).catch((function(){clearTimeout(i),s.compLoading=!1,s.treeLoading=!1}))},filterNode:function(e){return!e.isLeaf},filterToHiveNode:function(e){if(!e.isLeaf)return!0;var t=e.label.substr(e.label.lastIndexOf("."),e.label.length),s=[".xlsx",".xls",".csv",".txt"],i=-1!==Object(r["indexOf"])(s,t);return i},setNode:function(e,t){if("share"===t){var s=this.$refs.newFile;s&&(s.setting.path=e.path,s.node=e)}else this.hdfsPath=e.path},refresh:function(e,t){var s=this,i=function(){if(s.treeLoading)return s.$Message.warning(s.$t("message.constants.warning.data"));if(Object(r["isEmpty"])(s.fileTree))return s.initData();s.treeLoading=!0,s.compLoading=!0;var i=Object(r["isEmpty"])(s.currentNode)?s.rootPath:s.currentNode.data.path;s.currentNode.isLeaf||"edit"===e||"delete"===e?i=s.currentNode.data.parentPath:"new"===e&&t&&(i=t.slice(0,t.lastIndexOf("/")));var a=setTimeout((function(){s.compLoading=!0}),2e3);o["a"].fetch("/filesystem/getDirFileTrees",{path:i},"get").then((function(e){if(clearTimeout(a),s.compLoading=!1,s.treeLoading=!1,i!==s.fileTree[0].path){var t=s.fileTree&&s.fileTree[0],n=i.replace(s.rootPath,"");t=s.lookForChangeNode(n,t,"tree"),s.$set(t,"children",e.dirFileTrees.children),s.$nextTick((function(){var e=s.$refs.weFileTree.$refs.tree.root.computedNodes[0];e=s.lookForChangeNode(n,e,"node"),e.expanded=!0}))}else s.$set(s.fileTree[0],"children",e.dirFileTrees.children);l["a"].set("scriptTree",s.fileTree,"SESSION")})).catch((function(){clearTimeout(a),s.compLoading=!1,s.treeLoading=!1}))};if(this.rootPath)return i();this.getRootPath((function(e){e?i():(s.compLoading=!1,s.treeLoading=!1)}))},getHdfsTree:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.hdfsTree.length){e.next=2;break}return e.abrupt("return",{hdfsTree:this.hdfsTree,loadDataFn:this.loadHdfsDataFn});case 2:return e.abrupt("return",new Promise((function(e){t.dispatch("HdfsSidebar:showTree",(function(s){s.getRootPath((function(i){i&&s.getTree((function(i){i&&(t.hdfsTree=[i],t.loadHdfsDataFn=s.loadDataFn,l["a"].set("hdfsTree",t.hdfsTree,"SESSION"),e({hdfsTree:t.hdfsTree,loadDataFn:t.loadHdfsDataFn}))}))}))}))})));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),revealInSideBar:function(e){var t=this;if(e&&e.filepath){var s=e.filepath.replace(this.rootPath,"").split("/");s.pop(),s=s.filter((function(e){return e})).map((function(e,i){return!!e&&t.rootPath+s.slice(0,i+1).join("/")}));var i=[];s.forEach((function(e,a){var n=function t(n){n.forEach((function(n){n.path!==e||n.children?n.children&&t(n.children):i=s.slice(a,s.length)}))};n(t.fileTree)}));var a=function(e){var s=0,i=function s(i){if(i<e.length){var a=e[i++],n=function e(t){t.forEach((function(t){t.path!==a?t.children&&e(t.children):t.expanded=!0}))};n(t.fileTree),t.$nextTick((function(){s(i)}))}};i(s)};if(i.length>0){var n=i.map((function(e){return o["a"].fetch("/filesystem/getDirFileTrees",{path:e},"get").then((function(e){return e.dirFileTrees}))}));Promise.all(n).then((function(e){e.reverse();var s=function(e,t){return t.children.forEach((function(t){t.path===e.path&&(t.children=e.children),t.expanded=!1})),t.expanded=!1,t},n=e.reduce(s),r=function e(t){t.forEach((function(t){t.path!==n.path?t.children&&e(t.children):t.children=n.children}))};r(t.fileTree),a(i)}))}else{var r=function e(t){t.forEach((function(t){s.indexOf(t.path)>-1&&(t.expanded=!1),t.children&&e(t.children)}))};r(this.fileTree),this.$nextTick((function(){a(s)}))}}},"WorkSidebar:revealInSideBar":function(e){var t=this;this.getRootPath((function(s){s&&t.revealInSideBar(e)}))},"WorkSidebar:setHighLight":Object(r["debounce"])((function(e){if(!e)return this.highlightPath="";var t=e.filepath,s=this.getUserName(),i=t.split("/"),a=i.indexOf(s);i.splice(0,a),this.highlightPath=i.join("/")}),500),getAcitveTabAndSetHighlight:function(){var e=this;this.dispatch("IndexedDB:getTabs",(function(t){if(!Object(r["isEmpty"])(t)){var s=Object(r["find"])(t,(function(e){return e.actived}));if(s&&"workspaceScript"===s.type){var i="WorkSidebar:setHighLight";e[i](s),i="WorkSidebar:revealInSideBar",e[i](s)}}}))},openImportToHiveDialog:function(e){var t=this,s="out"===e?"":this.currentNode.data.path;this.fsType="share",this.filterTree=[],this.$nextTick((function(){t.filterTree=Object(r["cloneDeep"])(t.fileTree),t.$refs.impotToHive.open(s)}))},getHiveList:function(e){var t=this;this.dispatch("HiveSidebar:showHive",{},(function(s){var i="HiveSidebar:getDatabase";t.hiveComponent=s,s[i]("",(function(s){t.dbList=s,e(s)}))}))},getHiveTableList:function(e,t){var s=this,i="HiveSidebar:getTables";this.hiveComponent[i]({item:e},(function(i){var a=Object(r["find"])(s.dbList,(function(t){return t.name===e.name}));a.children=i,t&&t()}))},getPartitions:function(e,t){var s="HiveSidebar:getTablePartitions";this.hiveComponent[s]({item:e},(function(e){t(e)}))},getFileContent:function(e,t,s){var i=e.separator;"\\t"===e.separator?i="%5Ct":"%20"===e.separator&&(i=" ");var a=t?"":e.chartset,n=t?"":i,r=!1,c="";e.quote&&(r=!0,c=e.quote);var l="/filesystem/formate?path=".concat(e.exportPath,"&encoding=").concat(a,"&fieldDelimiter=").concat(n,"&hasHeader=").concat(e.isHasHeader,"&escapeQuotes=").concat(r,"&quote=").concat(c);o["a"].fetch(l,{},{method:"get",timeout:"600000"}).then((function(e){s(e.formate)})).catch((function(){s(!1)}))},exportToHive:function(e){var t=this,s=e.firstStep,i=e.secondStep,a=e.isXls,n=e.columns,r=e.whetherRepeat,o=r.duplicateName,l=r.partTable,d=r.duplicateValue,u=!1,h="",p=!1,f=!0;!l&&i.isOverwrite&&o&&!d?f=!1:o||(f=!1),i.partition&&i.partitionValue&&(p=!0);var m="%20"===s.separator?" ":s.separator;s.quote&&(u=!0,h=s.quote);var g=s.exportPath.slice(7,s.exportPath.length),b={path:g,pathType:s.type,encoding:a?"":s.chartset,fieldDelimiter:a?"":m,hasHeader:s.isHasHeader,sheet:i.moreSheet.toString(),quote:h,escapeQuotes:u},v={database:i.dbName,tableName:i.tbName,importData:f,isPartition:p,partition:i.partition,partitionValue:i.partitionValue,isOverwrite:i.isOverwrite,columns:n},y="".concat(i.dbName,".").concat(i.tbName),w="import_".concat(i.tbName,"_to_").concat(y),T='val destination = """'.concat(JSON.stringify(v),'"""\nval source = """').concat(JSON.stringify(b),'"""\ncom.webank.bdp.dataworkcloud.engine.imexport.LoadData.loadDataToTable(spark,source,destination)'),S=c["a"].md5(w);this.dispatch("Workbench:add",{id:S,filename:w+".scala",filepath:"",saveAs:!0,noLoadCache:!0,code:T},(function(e){if(!e)return t.$refs.impotToHive.close();t.$refs.impotToHive.close(),t.$nextTick((function(){t.dispatch("Workbench:run",{id:S,type:"storage",executionCode:{source:b,destination:v},backgroundType:"load"},(function(){t.$refs.impotToHive.loading=!1}))}))}))}}},v=b,y=(s("91f4"),s("2877")),w=Object(y["a"])(v,i,a,!1,null,null,null);t["default"]=w.exports},b27b:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("we-panel",{attrs:{diretion:"vertical"}},[s("we-panel-item",{ref:"topPanel",staticClass:"editor-panel",attrs:{index:1,"min-size":100}},[e.script?s("editor",{attrs:{script:e.script,work:e.work}}):e._e()],1),s("we-panel-item",{ref:"bottomPanel",staticClass:"log-panel",attrs:{index:2,height:e.scriptViewState.bottomPanelHeight,"min-size":32},on:{"on-change":e.changeBottomPanel}},[s("div",{staticClass:"workbench-tabs"},[s("div",{staticClass:"workbench-tab-wrapper"},[s("div",{staticClass:"workbench-tab"},[s("div",{staticClass:"workbench-tab-item",class:{active:"log"==e.scriptViewState.showPanel},on:{click:e.showLog}},[s("span",[e._v(e._s(e.$t("message.workBench.body.script.historyScript.tabs.log")))])]),e.script&&e.script.result?s("div",{staticClass:"workbench-tab-item",class:{active:"result"==e.scriptViewState.showPanel},on:{click:e.showResult}},[s("span",[e._v(e._s(e.$t("message.workBench.body.script.historyScript.tabs.result")))])]):e._e()]),s("div",{staticClass:"workbench-tab-button"},[s("Dropdown",{attrs:{trigger:"click",placement:"bottom-end"},on:{"on-click":e.configLogPanel}},[s("Icon",{attrs:{type:"md-list"}}),s("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[s("DropdownItem",{attrs:{name:"fullScreen"}},[e._v(e._s(e.$t("message.constants.logPanelList.fullScreen")))]),s("DropdownItem",{attrs:{name:"releaseFullScreen"}},[e._v(e._s(e.$t("message.constants.logPanelList.releaseFullScreen")))]),e.scriptViewState.bottomPanelMin?s("DropdownItem",{attrs:{name:"releaseMin"}},[e._v(e._s(e.$t("message.constants.logPanelList.releaseMin")))]):s("DropdownItem",{attrs:{name:"min"}},[e._v(e._s(e.$t("message.constants.logPanelList.min")))])],1)],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.scriptViewState.bottomPanelMin,expression:"!scriptViewState.bottomPanelMin"}],staticClass:"workbench-container"},[e.script&&e.script.result?s("result",{directives:[{name:"show",rawName:"v-show",value:"result"==e.scriptViewState.showPanel,expression:"scriptViewState.showPanel == 'result'"}],ref:"result",attrs:{script:e.script,result:e.script.result,height:e.scriptViewState.cacheBottomPanelHeight},on:{"on-analysis":e.openAnalysisTab,"on-set-change":e.changeResultSet}}):e._e(),"log"==e.scriptViewState.showPanel&&e.script?s("log",{attrs:{"log-line":e.script.logLine,logs:e.script.log,height:e.scriptViewState.cacheBottomPanelHeight}}):e._e()],1)])])],1)},a=[],n=(s("1c01"),s("58b2"),s("8e6e"),s("d25f"),s("55dd"),s("456d"),s("ac6a"),s("f3e2"),s("96cf"),s("3b8d")),r=s("bd86"),o=(s("7514"),s("7f7f"),s("2ef0")),c=s("b593"),l=s("0971"),d=s("6b6d"),u=s("84e9"),h=s("5402"),p=s("024e");function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var g={components:{result:h["default"],editor:u["default"],log:p["default"]},props:{work:{type:Object,required:!0}},data:function(){return{script:null,scriptViewState:{showPanel:"log",height:0,bottomPanelHeight:0,cacheBottomPanelHeight:0,bottomPanelMin:!1},biLoading:!1}},computed:{isPanelMin:function(){if(!this.script)return null;var e=this.script.log,t=Object(o["isEmpty"])(e)||!(e.all||e.error||e.info||e.warning),s=Object(o["isEmpty"])(this.script.history),i=!this.script.result||Object(o["isEmpty"])(this.script.result),a=Object(o["isEmpty"])(this.script.progress.progressInfo);return t&&s&&i&&a}},watch:{isPanelMin:function(e){e?this.configLogPanel("min"):this.configLogPanel("releaseMin")}},created:function(){var e=this;if(this.work.data)this.script=this.work.data,this.scriptViewState=this.script.scriptViewState;else try{c["a"].fetch("/jobhistory/".concat(this.work.taskID,"/get"),"get").then((function(t){var s=t.task,i=e.getSupportModes(),a=Object(o["find"])(i,(function(t){return t.rule.test(e.work.filename)}));e.work.data=e.script=new d["a"](Object.assign(a,s,{fileName:e.work.filename,filepath:e.work.filepath,id:e.work.id,data:s.executionCode})),e.getLogs(s),s.resultLocation&&e.getResult(s)}))}catch(t){}},mounted:function(){this.scriptViewState.height=this.scriptViewState.height||this.$el.clientHeight,this.scriptViewState.bottomPanelHeight=this.scriptViewState.bottomPanelHeight||.4*this.$el.clientHeight},updated:function(){},beforeDestroy:function(){this.scriptViewState.bottomPanelHeight=this.scriptViewState.cacheBottomPanelHeight||this.scriptViewState.bottomPanelHeight},methods:{"Workbench:setEditorPanelSize":function(e){e.id===this.script.id&&this.$refs.topPanel[e.status]({isDiy:!0,diyStyle:{top:"33px",right:0,bottom:0,left:0}})},showLog:function(){this.scriptViewState.showPanel="log"},showResult:function(){this.scriptViewState.showPanel="result"},configLogPanel:function(e){"fullScreen"!=e&&"releaseFullScreen"!=e||this.$refs.bottomPanel[e]({isDiy:!1}),"min"==e&&(this.scriptViewState.bottomPanelHeight=32,this.scriptViewState.bottomPanelMin=!0),"releaseMin"==e&&(this.scriptViewState.bottomPanelHeight=.4*this.scriptViewState.height,this.scriptViewState.bottomPanelMin=!1)},changeBottomPanel:function(e){var t=e.height;this.scriptViewState.cacheBottomPanelHeight=t},changeResultSet:function(e,t){var s=this,i=Object(o["isUndefined"])(e.currentSet)?this.script.resultSet:e.currentSet,a=this.script.resultList.find((function(e){return e.name==="_".concat(i,".dolphin")})),n=a&&a.path,r=this.script.resultList[i].hasOwnProperty("result");if(r)this.script.result=this.script.resultList[i].result,this.$set(this.script,"resultSet",i),this.dispatch("IndexedDB:updateResult",m({tabId:this.script.id,resultSet:i,showPanel:"result"},this.script.resultList)),t();else{var l=5e3,d="/filesystem/openFile";c["a"].fetch(d,{path:n,pageSize:l},"get").then((function(e){var a={headRows:e.metadata,bodyRows:e.fileContent,total:e.totalLine?e.totalLine:0,type:e.fileContent?e.type:0,cache:{offsetX:0,offsetY:0},path:n,current:1,size:20};s.$set(s.script.resultList[i],"result",a),s.$set(s.script,"resultSet",i),s.script.result=a,s.dispatch("IndexedDB:updateResult",m({tabId:s.script.id,resultSet:i,showPanel:"result"},s.script.resultList)),t()})).catch((function(){s.$refs.result.resultSet=e.lastSet,t()}))}},getLogs:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var s,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s="/filesystem/openLog",t.logPath){e.next=6;break}return this.script.log={all:"",error:"",warning:"",info:""},this.script.logLine=1,this.script.scriptViewState=this.scriptViewState,e.abrupt("return");case 6:return e.next=8,c["a"].fetch(s,{path:t.logPath},"get").then((function(e){if(e){var t={all:"",error:"",warning:"",info:""},s=l["a"].convertLog(e.log);Object.keys(s).forEach((function(e){s[e]&&(t[e]+=s[e]+"\n")})),i.script.log=t,i.script.logLine=e.fromLine,i.script.scriptViewState=i.scriptViewState}}));case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getResult:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var s,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s="/filesystem/getDirFileTrees",e.next=3,c["a"].fetch(s,{path:t.resultLocation},"get").then((function(e){if(e.dirFileTrees&&(i.script.resultList=e.dirFileTrees.children.sort((function(e,t){return parseInt(e.name,10)-parseInt(t.name,10)})),i.script.resultList.length)){var t=e.dirFileTrees.children[0].path,s="/filesystem/openFile";c["a"].fetch(s,{path:t,page:1,pageSize:5e3},"get").then((function(e){i.showResult(),i.script.result={headRows:e.metadata,bodyRows:e.fileContent,total:e.totalLine,type:e.type,cache:{offsetX:3e3+1e3*Math.ceil(10*Math.random()),offsetY:100},path:t}}))}}));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),openAnalysisTab:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,s,i,a,n,r,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.biLoading){e.next=2;break}return e.abrupt("return",this.$Message.warning(this.$t("message.constants.warning.biLoading")));case 2:return this.biLoading=!0,t=this.getVsBiUrl(),e.next=6,c["a"].fetch("".concat(t,"/api/rest_j/v1/visualis/view"),{fileName:this.work.filename,executionCode:this.script.data,resultPath:this.script.result.path,runType:this.script.runType,resultNumber:this.script.result.current>0?this.script.result.current-1:0}).catch((function(){o.biLoading=!1}));case 6:s=e.sent,s&&(i=s.id,a=s.projectId,n="".concat(this.work.filename,"_project").concat(a,"_set").concat(this.script.resultSet,".bi"),r=l["a"].md5(n),this.dispatch("Workbench:add",{id:r,filename:n,saveAs:!0,type:"visualAnalysis",params:{viewId:i,projectId:a}},(function(){o.biLoading=!1})));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},b=g,v=s("2877"),y=Object(v["a"])(b,i,a,!1,null,null,null);t["default"]=y.exports},b284:function(e,t,s){"use strict";var i=s("0ad4"),a=s.n(i);a.a},b2a9:function(e,t,s){"use strict";var i=s("de38"),a=s.n(i);a.a},b368:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.pointList.length?s("div",e._l(e.pointList,(function(t,i){return s("span",{key:i,staticClass:"footer-legend"},[s("span",{staticClass:"footer-legend-point",class:e.getClass(t.type)}),s("span",{staticClass:"footer-legend-label"},[e._v(e._s(t.label))])])})),0):e._e()},a=[],n={props:{pointList:{type:Array,defalut:function(){return[]}}},methods:{getClass:function(e){return"point-".concat(e)}}},r=n,o=s("2877"),c=Object(o["a"])(r,i,a,!1,null,null,null);t["default"]=c.exports},b420:function(e){e.exports=JSON.parse('{"message":{"newConst":{"logoName":"DataSphere Studio","ok":"确认","cancel":"取消","newCreate":"新建","editor":"修改","success":"成功","comment":"注释","copy":"复制","paste":"粘贴","delete":"删除","back":"返回","failedNotice":"验证项未通过，请检查后再试！","enterName":"请输入名称","nameLength":"名称长度不能大于","validNameDesc":"必须以字母开头，且只支持字母、数字、下划线","project":"工程","feedback":"反馈"},"project":{"projectName":"工程名","gotoScriptis":"进入Scriptis","createProject":"创建工程","editorProject":"修改工程","search":"搜索工程","deleteProject":"删除工程","confirmDeleteProject":"确认删除工程","enterName":"请输入名称","sortUpdateTime":"按修改时间排序","sortName":"按名称排序","product":"产品","selectProduct":"请选择产品","appArea":"应用领域","selectAppArea":"请选择应用领域","business":"业务","addBusiness":"新增业务","tips":"DataSphere Studio介绍:\\nDataSphere Studio是微众银行大数据平台——WeDataSphere，自研的数据应用开发门户，基于Linkis数据中间件构建，轻松整合数据平台上层各应用组件，让数据应用开发变得简洁又易用。\\nDataSphere Studio作为一站式数据研发、可视化、数据治理和调度的数据应用开发门户，定位为闭环涵盖数据应用的全流程，满足从数据导入、数据清洗、数据加工、数据可视化展现、数据治理到数据输出的数据应用全生命周期开发场景。\\n创建一个工程，开始您的数据应用开发之旅吧！","updteTime":"修改时间","nameUnrepeatable":"名称不可重复！","eidtorProjectSuccess":"修改工程{name}成功！","deleteTitle":"强制删除","projectCopy":"工程复制","projectPublish":"工程发布","projectVersion":"工程版本","projectDesc":"工程描述","pleaseInputProjectDesc":"请输入工程描述","name":"名称","projectClassify":"工程分类","nameLength":"名称长度不能大于","validNameDesc":"必须以字母开头，且只支持字母、数字、下划线和中文！","selectVersion":"请选择版本号","resourceUpload":"将文件拖到此处，或<em>点击上传</em>","fileExist":"文件已存在，请选择其它文件或选择其它文件夹！","uploadNameWar":"文件名称不合法，仅支持以字母、数字、中文、下划线、中短线且带后缀的命名！","uploadLimit":"上传文件不超过100M！","uploadSuccess":"文件{name}上传成功！","uploadOver":"文件大小超出限额！","resourceDeleteSuccess":"资源文件{name}已被成功删除！","copyNotice":"资源名称已复制至粘贴板","rollBack":"回滚","publishDetail":"发布详情","version":"版本","status":"状态","published":"已发布","unpublish":"未发布","updator":"创建者","comment":"版本注释","uptateTime":"更新时间","action":"操作","creator":"发布者","publishData":"发布信息","publishTime":"发布时间","pubDelete":"版本删除","confirmDelete":"确认删除工程版本{version}","addVersion":"新建版本","newVersion":"确认将{version}设为最新版本","init":"初始化","run":"运行","publishSuccess":"发布成功","publishFailed":"发布失败","infoTitle":"欢迎信息","infoHeader":"欢迎来到 DataSphere Studio !","infoBodyFirstRow":"DataSphere Studio是微众银行大数据平台——WeDataSphere，自研的一站式数据应用开发管理门户。","infoBodySecondRow":"基于Linkis计算中间件构建，可轻松整合上层各数据应用系统，让数据应用开发变得简洁又易用。","appTitle":"应用导航","applicationStudio":"业务应用开发","applicationMore":"了解更多","applicationTipsFirst":"工程 > 工作流，是应用开发的基本组织结构。","applictaionTipsSecond":"在工作流拖拽编辑页面，DataSphere Studio已集成的所有数据应用系统，都将以工作流节点的形式出现，让您能够以业务的视角将其编排串连起来，快速实现全部业务。","integratedSystem":"已集成系统","howToIntegratedsystem":"如何集成新系统","systemTipsFrist":"AppJoint—应用关节，是DataSphere Studio集成外部系统的核心概念。","systemTipsSecond":"AppJoint定义了一套统一且规范的前后台接入标准，让外部系统可简单快速地接入，成为DataSphere Studio全生命周期数据应用开发中的一环。","clickMeAndSkip":"点我了解如何集成","exchangisSubTitle":"数据交换","scriptisSubTitle":"数据开发探索","visualisSubTitle":"数据可视化","qualitisSubTitle":"数据质量","schedulisSubTitle":"数据调度","outputSubTitle":"数据发送","deleteWtss":"是否同时删除scheduler工程?","noData":"暂无数据请添加"},"workflow":{"workflow":"工作流","createWorkflow":"创建工作流","gotoVisualis":"进入Visualis","publishProject":"发布工程","searchWorkflow":"搜索工作流","notData":"暂无数据请添加","deleteWorkflow":"删除工作流","confirmDelete":"确认删除工作流{name}","nameUnrepeatable":"名称不可重复！","createdSuccess":"创建成功！","eitorSuccess":"修改工作流{name}成功！","notDelete":"子工作流不可删除！","mandatoryDelete":"强制删除","deleteSuccess":"删除工作流{name}成功！","versionDetail":"版本详情","open":"打开","editorWorkflow":"修改工作流","workflowName":"工作流名:","inputFlowName":"请输入工作流名","use":"用途","addUse":"新增用途","workflowDesc":"工作流描述:","inputWorkflowDesc":"请输入工作流描述"},"process":{"stop":"停止","GZLKF":"工作流","params":"参数","resource":"资源","import":"导入","run":"执行","save":"保存","seting":"设置","baseInfo":"基础信息","inputComment":"请填写注释","commentLengthLimit":"注释长度不能大于255","confirmSave":"确认保存","importJson":"导入JSON","uplaodJson":"点击或者拖拽JSON文件到此区域","confirmImport":"确认导入","nodeNameNotice":"节点重名提醒","repeatNode":"存在重复的节点名称：","nodeName":"节点名","inputNodeName":"请填写节点名称","lengthLimit":"长度在1到128个字符","nodeDesc":"节点描述","inputNodeDesc":"请填写节点描述","associate":"关联脚本","relySelect":"依赖选择","console":"管理台","allDelete":"批量删除","createSubFlow":"创建子工作流","autoSave":"自动保存","createNode":"创建节点","rankLimit":"工作流最多只有5层！","createSubSuccess":"创建子流程成功","saveParamsNotice":"基础信息修改成功, 请及时保存当前工作流！","uploadJson":"请上传JSON文件","JsonLimit":"JSON文件大小不超过1M","jsonFormat":"JSON格式不规范：","jsonEdgeNotice":"JSON格式不规范：edge必须包含source、target、sourceLocation、targetLocation属性","jsonNodeNotice":"JSON格式不规范：node必须包含layout、jobType、id属性","jsonLayoutNotice":"JSON格式不规范：layout必须包含x、y、width、height属性","jsonEdgesNoArray":"JSON格式不规范：edges必须是数组","jsonNodesNoArray":"JSON格式不规范：nodes必须是数组","jsonNoType":"JSON格式不规范：未找到支持的节点类型","nosupprotType":"不支持的节点类型:","cancelNotice":"关闭提示","noSaveHtml":"<p>该工作流下还存在子节点未保存，是否保存？</p>","deleteNodeSave":"工作流最多5层，请删除子工作流再保存！","saveAbnormal":"保存异常提醒","emptyNodeHtml":"<p>节点{emptyNode}属性参数未设置，发布wtss会运行失败，是否继续保存</p>","continueSave":"继续保存","backEditor":"返回修改","saveWorkflowCuccess":"保存工作流成功！","autoSaveWorkflow":"已自动保存工作流！","notice":"提示","dragNode":"请拖拽节点生成流程","readonly":"节点只读状态，基础信息保存失败！","readonlyNoAssociated":"节点只读状态，节点不支持关联脚本！","noAssociated":"该节点类型不支持关联脚本！","repeateAssociated":"重复关联提醒","repeateAssociatedHtml":"<p>该脚本已做过关联操作，继续操作可能会丢失已执行的脚本日志、进度、结果集和历史等信息！</p><p>是否继续覆盖？</p>","confirmAssociated":"确认覆盖","associaSuccess":"关联脚本成功！","associaError":"关联脚本失败！","nodeNameValid":"节点名称不能以工作流名加下划线","readonlyNoCeated":"节点只读状态，不支持新建子节点！","noCopy":"该节点不支持复制！","readonlyNoCopy":"节点只读状态，节点不支持复制！","noPaste":"节点只读状态，节点不支持粘贴！","firstCopy":"请先复制节点！","noDelete":"节点只读状态，节点不支持删除！","createdSuccess":"创建成功！","arguments":{"workFlowConfig":"工作流配置","proxyuser":"代理用户:","inputProxyuser":"请输入代理用户","globVar":"全局变量","valid":"仅支持字母、数字和下划线"},"associateBar":{"XZGLJB":"选择关联脚本","XZLJ":"选择路径:","QD":"确定","XZYGJB":"请选择一个脚本进行关联","CKYZ":"请查看未验证通过项！"},"nodeParameter":{"required":"必填","nodeName":"节点名:","inputeNodeName":"请填写节点名","nodeType":"节点类型","nodeDesc":"节点描述:","inputeNodeDesc":"请填写节点描述","SXXX":"属性信息：","XZRMBXXJZ":"请选择RMB消息发送机制","XZSJLY":"请选择数据来源","XZLX":"请选择类型","node":"节点","text":"文字","file":"文件","link":"链接","SRZQNR":"请输入正确内容","XZSFX":"请选择发送项","ZYXX":"资源信息：","BC":"保存","MLHCS":"命令行参数","LX":"类型","YJLX":"邮件标题","FSX":"发送项","SJR":"收件人","CS":"抄送","MMCS":"秘密抄送","GLSPD":"关联审批单","filter":"过滤条件","executeUser":"执行用户","QTXZQJSON":"请填写正确的json格式！","JDMCBNYGZL":"节点名称不能以工作流名加下划线","CZBNSRZW":"此值不能输入中文","QTXYLSJMC":"请填写依赖数据名称","CD500ZF":"长度在1到500个字符","CZGSCW":"需要检查的数据源dbname.tablename{partition}","QTXDDSJ":"请填写等待时间，默认1小时","QTXCXPL":"请填写查询频率，默认10次","QTXSJFW":"请填写时间范围，默认24小时","QZQTXDYPZ":"请正确填写多源配置","QZQTXFSZ":"请正确填写发送者","BXYZMKTSZXHXZHX":"必须以字母开头，且只支持字母、数字、下划线、@、中横线","QZQTXXXLX":"请正确填写消息类型","BXYZMKTXHX":"必须以字母开头，且只支持字母、数字、下划线！","QZQTXJSZ":"请正确填写消息接收者","TXZT":"消息主题，必须与 {type} 完全一致","CGSCW":"此值格式错误，例如：bdp_tac_name","XXLRKEYZ":"消息共享key值，默认msg.body","TXXXMC":"消息名称，必须与 {type} 完全一致","TXXXNR":"请正确填写消息内容","TXMBDCN":"请正确填写目标DCN","TXRMBFW":"请正确填写RMB服务ID","TXRMBXXHJ":"请正确填写RMB消息环境","XZRMBXXFSJZ":"请选择RMB消息发送机制","TXRMBNRJSON":"请正确填写RMB消息内容，必须为json格式","CDNC":"驱动器内存大小，默认值：2","ZXQNC":"执行器内存大小，默认值：3","ZXQHXGS":"执行器核心个数，默认值：1","ZXQGS":"执行器个数，默认值：2","ZXDL":"执行队列","DGCSYKGGK":"多个参数用空格隔开，不支持中文、\\\\n","TXJDMC":"请填写节点名称","CDZ128ZF":"长度在1到128个字符","TXYJBT":"请填写邮件标题","BTZZCZW":"标题只支持中文、字母、数字和下划线！","XZHSR":"请选择或输入发送项","TXSJR":"请填写收件人","TXCSR":"请填写抄送人","TXMMFSR":"请填写秘密发送人","TXGLSPD":"请填写关联审批单","ZZCSZ":"只支持数字、下划线、点！","BCSB":"保存失败，表单校验未通过！","JDBDXTXBHF":"节点表单项填写不合法！","QSR":"请输入"},"resourceBar":{"TZDLSC":"将文件拖到此处，或点击上传","PYSPARKNODE":"pyspark节点只支持zip资源文件","SPARKNOSW":"sparksql节点只支持jar资源文件","WJYCZ":"文件已存在，请选择其它文件或选择其它文件夹！","WJMCBHF":"文件名称不合法，仅支持以字母、数字、中文、下划线、中短线且带后缀的命名！","SCBCG100":"上传文件不超过100M！","SCCG":"文件 {name} 上传成功！","WJCCXE":"文件大小超出限额！","WJBSC":"资源文件 {name} 已被成功删除！"}},"workflowItem":{"publish":"发布","resource":"资源","viewVersion":"查看版本","config":"配置","action":"操作","readonly":"只读","editor":"编辑","noDesc":"暂无描述","nodata":"暂无数据","noView":"发布中的工程，不允许查看！"},"container":{"notVarible":"\'未获取到全局变量信息，脚本联想词功能可能存在异常！可刷新重试！\'","boyondQuota":{"title":"警告","desc":"\'您已打开20个脚本（超出最大限额），请关闭其他脚本再打开！\'"},"toolbar":{"replace":"请选择替换空值：","emptyString":"空字符串"},"notRun":"只读状态不可运行！","notSave":"只读状态不可保存！","saveSuccess":"保存成功！","saveErr":"保存失败！","process":"执行耗时：","resultList":"结果集","tableRow":{"detail":"选中行详情","search":"搜索……","columnName":"列名","value":"值","dataType":"数据类型"}},"newGlobalHistory":{"userName":"用户名","searchName":"请输入用户名搜索","generalView":"切换普通视图","manageView":"切换管理员视图","tableColumns":{"taskID":"任务ID","fileName":"脚本名称","executionCode":"查询语句","status":"状态","costTime":"已耗时","executeApplicationName":"执行引擎","requestApplicationName":"创建者","user":"用户","createdTime":"创建时间","failedReason":"关键信息","control":{"title":"操作","label":"查看"}},"logLoading":"日志请求中，请稍后"},"deleteDialog":{"waring":"警告","action":"此操作将{label}","isNext":"是否继续？","over":"结束{type}","overThe":"结束该"},"directoryDialog":{"path":"请选择路径"},"dynamicForm":{"rule":{"emptyKey":"key为空","lengthLimit":"长度超过128字符","nameVaild":"仅支持以字母开头，且不得存在空格和中文","emptyValue":"value为空"},"namePlaceholder":"请输入{title}名称","placeholderInput":"请输入值","someKey":"存在同名key"},"newNavBar":{"createdTitle":"建表向导"},"createTable":{"action":"操作","delete":"删除","baseAttr":"表基本属性","add":"新增","partitionAttr":"分区属性","selectResource":"请选择来源字段","next":"下一步","nameNotice":"仅支持中文、字母、数字和下划线","zm":"字母","daName":"数据库名","tableName":"表名","tablePlaceholder":"字母开头，支持字母、数字和下划线","tableOtherName":"表别名","aliasPlaceholder":"支持中文、字母、数字和下划线","use":"用途","emptyPlaceholder":"支持中文、字母、数字和下划线(可为空)","product":"所属产品","project":"所属项目","tableDesc":"表描述","selectDbName":"请选择库名","inputTableName":"请输入表名","inputOtherName":"请输入别名","letter":"大小写字母","moduleAttr":"表模型属性","partitionType":"分区类型","partition":"分区","unartition":"非分区","lifecycle":"生命周期","forever":"永久","day":"当天有效","week":"一周有效","moon":"一月有效","midYear":"半年有效","moduleRank":"模型层级","resource":"原始数据层","detailLevel":"明细数据层","sumData":"汇总数据层","appData":"应用数据层","actionType":"使用方式","noeWrite":"一次写多次读","ZSGC":"增删改查","FG":"多次覆盖写","OED":"一次写偶尔读","isUse":"外部是否使用","isDwsExeis":"是否需要在DSS之外的系统上使用","selectPartitionType":"请选择分区类型","selectLife":"请选择生命周期","selectModuleLevel":"请选择模型层级","selectUseType":"请选择使用方式","selectIsUse":"请选择外部是否使用","canned":"该表已存在，请输入其他表名","type":"类型","selectType":"请选择类型","path":"路径","FGF":"分隔符","BMGS":"编码格式","XZBMGS":"请选择编码格式","XDF":"限定符","WXDF":"无限定符","HXWBT":"首行为表头","HQBZDSJ":"获取表字段数据","XZWJLJ":"请选择文件路径","GXMLDR":"共享目录导入","DR":"导入","DH":"逗号","FH":"分号","ZBF":"制表符","KG":"空格","SYH":"双引号","DYH":"单引号","GLWJ":"过滤文件夹","LYSX":"来源属性","MBZD":"目标表字段与源字段","XZK":"选择库","XZB":"选择表","SJSXLY":"数据属性来源","DRFS":"导入方式","XJ":"新建","FHSYB":"返回上一步","SCDDL":"生成DDL语句","JB":"建表","DDLYJ":"DDL语句","FZZT":"复制至粘贴板","DDLYFZ":"DDL语句已复制至粘贴板！","fieldsName":"字段名","isPrimary":"是否主键","fieldsType":"字段类型","length":"长度/设置","fieldsAlias":"字段别名","alias":"别名","sourceFields":"来源字段","rule":"字段规则","express":"字段表达式","comment":"描述","partitionValue":"分区值","partitionAlias":"分区别名","fieldsNameRequire":"字段名称不能为空","fieldsNameRule":"仅支持字母数字和下划线"},"publish":{"desc":"发布描述:","inputDesc":"请输入发布描述","error":"工程{name}发布失败","success":"工程{name}发布成功","failed":"工程发布错误","cancel":"关闭","timeout":"工程{name}发布超时！"},"tableDetails":{"BZBSX":"表基本属性","BZDXX":"表字段信息","BTJXX":"表统计信息","DBN":"数据库名","TN":"表名","BBM":"表别名","FQM":"分区表","CJYH":"创建用户","CJSI":"创建时间","ZHFWSJ":"最后访问时间","BMS":"表描述","BMXSX":"表模型属性","SMZQ":"生命周期","MXCJ":"模型层级","SYFS":"使用方式","WBSFSY":"外部是否使用","BYYSX":"表应用属性","SXCP":"所属产品","SSXM":"所属项目","YT":"用途","SSZDMC":"搜索字段名称...","XH":"序号","ZDM":"字段名","ZDLX":"字段类型","BM":"别名","SFZJ":"是否主键","SFFQ":"是否分区","ZDGZ":"字段规则","MS":"描述","FQXX":"分区信息","DJFQCK":"请点击根分区查看分区大小","WFQSJ":"暂无表分区数据","BXX":"表信息","BZD":"字段数","BDX":"表大小","WJM":"文件数","FQS":"分区数","DX":"大小","FQDX":"分区大小：","WJS":"文件数：","YES":"对","GSHJX":"进行格式化成","ZJXYGE":"组件需要的格式"},"logView":{"taskId":"任务ID：","search":"搜索","filter":"过滤","error":"错误","inputTaskId":"请输入有效的任务ID！"},"functionSetting":{"HSM":"函数名称","HSLX":"函数类型","TY":"通用","ZDYHS":"自定义函数","B":"jar包","JBLU":"脚本路径","ZCGS":"注册格式","ZCHS":"注册函数","FHLX":"返回类型","CSLX":"参数类型","YLLX":"预览","SYGS":"使用格式","SRLX":"输入类型","HSMS":"函数描述","MRJZ":"默认加载","XZHS":"新增函数","LJCJ":"立即创建","QSRMC":"请输入名称","CDZ":"长度在1到100个字符","BXYZMKT":"必须以字母开头，且只支持字母、数字、下划线和中文","QZSXZYZLX":"请至少选择一种类型","QSRWZLJ":"请输入完整的路径","KHDBJZPP":"括号代表精准匹配","HZMZC":"后缀名只支持jar，且jar包名仅支持英文，数字，下划线！","ZCPYSCA":"后缀名只支持py、scala！","BHJZCYW":"包名仅支持英文","XHX":"下划线","SRZCHS":"请输入注册函数","SRFHLX":"请输入返回类型","SRCSLX":"请输入参数类型","XGHS":"修改函数","XG":"修改"},"functionShare":{"ZZGX":"正在对{name}函数进行共享操作","HSLX":"函数类型","GXYH":"共享用户","SRGXYH":"请输入要共享的用户，以逗号分隔","XZGXHSLX":"请选择该共享函数的类型！","ZSXZYWGXYH":"请填入至少一位需要共享的用户！"},"uploadDialog":{"SCJBWJ":"上传脚本文件","TWJDSQ":"将文件拖到此处，或点击上传","PATH":"路径：","QKLB":"清空列表","LIMIT2M":"上传脚本文件不得超过2MB！","LIMIT100M":"上传脚本文件不得超过100MB！","ZDSC":"此操作将中断文件上传，是否继续？","TS":"提示","ZJGB":"直接关闭","QX":"取消","QXBBSCCK":"取消关闭上传窗口","SCCG":"文件{name}上传成功！","WJDXCCXE":"文件大小超出限额","WJYCZ":"文件已存在，请选择其它文件或选择其它文件夹！","WJMBHF":"文件名称不合法，仅支持以字母、数字、中文、下划线且带后缀的命名！","SCZQK":"文件上传中，无法清空上传列表！"},"navMune":{"FAQ":"常见问题","clearCache":"清理缓存","logOut":"退出登录"},"shape":{"dataDev":"数据开发","dataVis":"数据可视化","dataSend":"数据输出","XHJD":"信号节点","GNJD":"功能节点","SJJH":"数据交换","SJZL":"数据质量","DXP":"数据共享"},"goBack":{"title":"返回提醒","content":"工作流已发生变化还未保存, 是否退出？","back":"退出","unBack":"不退出"},"importToHive":{"MC":"名称","ZDMC":"字段名称不能为空","JZCZM":"仅支持字母数字和下划线","QSRZDM":"请输入字段名","LX":"类型","GS":"格式","QXZGS":"请选择日期格式","CD":"长度","JD":"精度","XSW":"小数位数","SRZDZS":"请输入字段注释","DRWJ":"导入文件","BZONE":"步骤1","BZTOW":"步骤2","WJDR":"从文件导入数据","DRZMRB":"导入至默认表","LY":"来源","QXZLX":"请选择类型","LJ":"路径","GSH":"格式化","FGF":"分隔符","BMGS":"编码格式","QXZBMGS":"请选择编码格式","XDF":"限定符","WXDF":"无限定符","SHWBT":"首行为表头","SJK":"数据库名","QSRKM":"请输入库名","SJB":"数据表名","SRSJBM":"请输入数据表名","FQ":"分区","FX":"复写","XZFQ":"新增分区","SHEETB":"sheet表","ZG":"字段","XYB":"下一步","SYB":"上一步","TJ":"提交","LXWCHAR":"类型为char或者varchar的字段长度应为大于0的正整数","ZDJDSRYW":"类型为decimal的字段精度输入有误","ZDXSWYDY":"类型为decimal的字段小数位数应为大于0的正整数","ZDZSZCZW":"字段注释仅支持中文、大小写字母和下划线，长度不得超过100字符","SJKMBNWK":"数据库名不能为空","BMBNWK":"表名不能为空","BMJZCZMKT":"表名仅支持以字母开头，名称包含大小写字母和下划线，长度为0~100","FQMBNWK":"分区名不能为空","FQMZCSZ":"分区名只支持数字、字母和-","FQZBNWK":"分区值不能为空","FQZZZCSZ":"分区值只支持数字","GXMLDR":"共享目录导入","HDFSDR":"HDFS导入","DH":"逗号(,)","FH":"分号(;)","ZBF":"制表符(\\\\t)","KG":"空格","SYH":"双引号(\'\')","DYH":"单引号","WJZZZXDR":"文件正在执行导入，请稍后再试","FQZCF":"分区值重复，请确认是否复写","TSWST":"提示：无法操作视图表， 请选择其它表导入","WFCZSTB":"无法操作视图表","QXZQTBDR":"请选择其它表导入","BMYCZDQSJK":"表名已存在当前数据库","ZBZCDJFQ":"暂不支持多级分区，请选择其它表","QQURFQ":"请确认分区","HQFQSB":"获取分区信息失败","ZQDRWJLJ":"请正确选择导入文件路径","QQRSJKMCXX":"请确认数据库名称填写信息","QQRSFCF":"请确认是否复写"},"hiveTableExport":{"DCB":"导出表","SZDCCS":"步骤1：设置导出参数","SZDCLJ":"步骤2：设置导出路径","SJKM":"数据库名","QSRKM":"请输入库名","SJBM":"数据表名","ZDXX":"字段信息","FQXX":"分区信息","DCGS":"导出格式","FGF":"分隔符","BMGS":"编码格式","XZBMGS":"请选择编码格式","KZTH":"空值替换","SXWBT":"首行为表头","LX":"类型","QXZLX":"请选择类型","DCZ":"导出至","WJM":"文件名","TRDCWJMC":"请填入导出文件名称","FXMS":"复写模式","ZJ":"追加","FX":"复写","BM":"sheet表名","QSR":"请填入","XYB":"下一步","SYB":"上一步","TJ":"提交","WFCZST":"无法操作视图表，请选择其它表导出","ZBZCDBDC":"暂不支持多分区表导出，请选择其它表导出","GXML":"共享目录","DH":"逗号(,)","FH":"分号(;)","ZBF":"制表符(\\\\t)","KG":"空格","KZFC":"空字符串","XZSJK":"请选择数据库","XZB":"请选择表","XZFGF":"请选择分隔符","XZYGFQBDC":"请选择一个分区表导出","ZSXZYGZD":"请至少选择一个字段","XZDCGS":"请选择导出格式","XZXYJKZTHDZ":"请选择需要将空值替换的值","XZDCLJDLX":"请选择导出路径的类型","XZDCLJ":"请选择导出路径","DRDCDWJ":"请填入导出的文件名称","CDZ":"长度在3~100个字符","WJMZZCZW":"文件名只支持中文、字母、数字和下划线","CBDC":"此表导出中，请稍后再试或者选择其他表","QSHZSS":"请稍后再试或者选择其他表","XZFQ":"请选择分区","BDXCG":"表大小超过5GB，请使用其它方式导出或选择其它表"},"hiveTableDesc":{"searchName":"搜索字段名称...","tableDetail":"表详情","noData":"暂无表分区数据","tableColumns":"表字段","columnsName":"字段名","columnsType":"字段类型","tablePartitions":"表分区","dbName":"数据库名","tableName":"数据表名","createUser":"创建用户","createTtime":"创建时间","lastTime":"最后访问时间","tableSize":"表大小","size":"大小","viewTableColumns":"更多字段请在“查看表字段”页面查看"},"login":{"loginTitle":"欢迎登录DataSphere Studio系统！","userName":"请输入用户名","remenber":"记住当前用户","login":"登录","password":"请输入密码！","loginSuccess":"登录成功","haveLogin":"您已经登录，请不要重复登录","vaildFaild":"验证未通过！"},"userMenu":{"title":"警告","content":"<p>此操作将清空本地数据库缓存，这样会丢失您的脚本日志、历史和结果集等相关信息，请确认是否有未保存的脚本！</p><p>点击确认按钮继续操作？</p>","clearCacheSuccess":"清除本地数据缓存成功!","comingSoon":"尚未开源，敬请期待！"},"headerNavBar":{"Workflow":"工作流开发","Exchangis":"数据交换组件","Scriptis":"数据开发组件","Qualitis":"数据治理组件","Visualis":"可视化组件","Schedulis":"工作流调度组件","LinkisConsole":"Linkis 管理台","DatalinkDXP":"数据共享管理组件"},"deleteType":{"function":"函数","folder":"文件夹","file":"文件","common":"通用","catalog":"目录","script":"脚本文件","engine":"引擎","task":"任务","engineAndTask":"引擎和任务"},"resourceSimple":{"YS":"Scriptis","FL":"分类","ZH":"Visualis","FLOW1":"实时工作流","FLOW2":"调度系统","ZWSJ":"暂无数据","KX":"空闲","FM":"繁忙","QD":"启动","LX":"按类别","AZT":"按状态","DDJK":"请等待接口返回！","QDYQWFJS":"启动状态引擎无法结束！","WXZYQ":"未选中引擎！","RWGLQ":"任务管理器","YQGLQ":"引擎管理器","DLGLQ":"队列管理器","SX":"刷新","JSRW":"结束任务","JSYQ":"结束引擎","PDZ":"排队中","ZYSQ":"资源申请中","YX":"运行","YQ":"引擎","RW":"任务","WZJBMC":"未知脚本名称","ZHJB":"知画脚本","GZLJB":"工作流脚本","YQRW":"引擎和任务","JSYQRW":"结束引擎和任务","CKJBXX":"查看脚本信息","FZJBXX":"复制脚本信息","QXZYTJL":"请选择一条记录！","WHQD":"未获取到未获取到strongerExecId，请联系管理员查看！","WHQDENGINE":"未获取到engineInstance，请联系管理员查看！","YXTS":"运行提示","YJTZZXJB":"已经停止执行脚本","JSYQHRWCG":"结束引擎和任务成功","DKCG":"打开成功","JBFZDZTRB":"脚本信息已复制到粘贴板，请使用ctrl+v组合键粘贴！","XZDL":"请选择队列","ZYSYL":"资源使用率","H":"核","NC":"内存","ZYSYPHB":"资源使用排行榜","ZW":"暂无"},"monacoMenu":{"YXJB":"运行脚本","GSH":"格式化","CZ":"查找","TH":"替换","HZS":"行注释","ZT":"粘贴","HBQWJCFZWB":"很抱歉，IDE未监控到复制文本，如果您是在IDE系统外执行的复制操作，请使用ctrl+v组合键进行粘贴！","TDZDH":"跳到指定行","GBYFJC":"关闭语法检查","DKYFJC":"打开语法检查","GYFSYGWYF":"该语法属于高危语法，请谨慎操作！"},"constants":{"add":"新建","cancel":"取消","confirm":"确认","changeLanguage":"切换语言","detail":"详情","description":"描述","delete":"删除","download":"下载","edit":"编辑","export":"导出","fail":"失败","noDataText":"暂无数据","node":"节点","refresh":"刷新","rename":"重命名","reset":"重置","remove":"移除","submit":"确定","search":"搜索","save":"保存","upload":"上传","update":"修改","warning":{"api":"接口请求中，请稍候！","data":"数据请求中，请稍候！","waiting":"请等待接口返回！","biLoading":"正在和Visualis系统通讯，请稍候！","comingSoon":"尚未开源，敬请期待！"},"success":{"delete":"删除成功！","update":"修改成功！","add":"新建成功！","save":"保存成功"},"error":{"refresh":"刷新出错，请重试！","fileExists":"该文件已经存在","folderExists":"该文件夹已经存在","functionExists":"该函数已经存在"},"logPanelList":{"fullScreen":"全屏","releaseFullScreen":"取消全屏","min":"最小化","releaseMin":"取消最小化"},"time":{"second":"秒","minute":"分钟","hour":"小时","day":"天"}},"navList":{"dataStudio":"数据开发","workSpace":"工作空间","database":"数据库","udfFunction":"UDF函数","methodFunction":"方法函数","hdfs":"HDFS"},"navBar":{"addTitle":"新建目录","dataStudio":{"outTable":"导出表","importHive":"导入hive","addTitle":"新建解决方案","searchPlaceholder":"请输入文件夹或文件名搜索"},"workSpace":{"searchPlaceholder":"请输入文件夹或文件名搜索"},"database":{"searchPlaceholder":"请输入数据库或表名搜索"},"fnSideBar":{"searchPlaceholder":"请输入文件夹或函数名称搜索"},"hdfs":{"searchPlaceholder":"请输入文件夹或函数名称搜索"}},"newDialog":{"catalog":"目录","scriptName":"名称","catalogName":"名称","targetScriptPath":"创建路径","placeholder":"请输入目录名称","rules":{"scriptName":{"required":"请输入脚本名称","lengthLimit":"长度在1到200个字符","letterTypeLimit":"仅支持中文、大小写字母、数字和下划线"},"catalogName":{"required":"请输入目录名称","lengthLimit":"长度在1到200个字符","letterTypeLimit":"仅支持中文、大小写字母、数字和下划线"},"targetScriptPath":{"required":"请选择目标脚本路径"}},"nodeType":"节点类型","scriptType":"脚本类型","targetFolder":"目标文件夹"},"dataStudio":{"goBack":"返回数据开发","dialogTitle":{"solution":"解决方案","workFlow":"业务流程"},"updateProperty":"修改属性","contextMenu":{"addWorkFlow":"新建业务流程","updateSolution":"修改解决方案"},"warning":{"flow":"默认应用不支持新增业务流程！","noEdit":"默认业务流程不支持修改！"},"error":{"solution":"解决方案名称不可同名！","flow":"业务流程名称不可同名！"},"success":{"solution":"新建解决方案成功！","flow":"新建业务流程成功！","add":"创建成功！"},"confirm":{"title":"警告","content":"<p>该脚本不存在，可能被删除或者修改，是否删除？</p>","okText":"确认删除","cancelText":"取消"}},"workSpace":{"contextMenu":{"openToTab":"打开到侧边","copyPath":"复制路径","addCatalog":"新建目录","addScript":"新建脚本","importToHive":"导入至Hive","importToHdfs":"导入至HDFS"},"dialogTitle":{"importToHdfs":"导入至HDFS"},"warning":{"getRootPath":"未请求到工作空间根目录，请刷新重试！","scriptChanged":"脚本已发生改变，请保存后再试！"},"error":{"fileExists":"该文件已经存在！"}},"database":{"contextMenu":{"db":{"copyName":"复制库名","pasteName":"复制库名并粘贴至脚本"},"tb":{"queryTable":"查询表","deleteTable":"删除表","viewTable":"查看表结构","exportTable":"导出表","copyName":"复制表名","pasteName":"复制表名并粘贴至脚本","copyAllColumns":"复制表全字段"},"field":{"copyColumnsName":"复制字段名","pasteName":"复制库名并粘贴至脚本"}},"partitionsTitle":"分区大小","notPosition":"无法定位上一次操作，请使用右键刷新功能"},"fnSideBar":{"contextMenu":{"isOwn":{"addFunction":"新增函数","addFolder":"新增文件夹","share":"共享"},"isLeaf":{"copyName":"复制函数名","pasteName":"复制函数并粘贴至脚本"},"isOwnAndLeaf":{"updateToExpired":"修改为过期","viewSharedUsers":"查看已共享的用户"}},"warning":{"folderNameExists":"存在同名的文件夹","functionNameExists":"存在同名的函数","functionShared":"该函数已被共享，请将函数设置为过期再删除！","noEmpty":"请手动删除子文件夹或函数后再试！"},"success":{"load":"加载udf函数成功！","cancelLoading":"已取消加载udf函数！","addUdf":"新建udf函数成功！","addFolder":"新建文件夹成功！","shareFunction":"函数已共享成功","updateShareUser":"修改共享用户成功！","functionExpired":"函数已设置为过期，请到共享函数中查看！"},"confirm":{"title":"提示","content":"<p>此操作将会对已共享的用户造成影响，是否继续？</p>"}},"hdfs":{"contextMenu":{"openToTab":"打开到侧边","copyPath":"复制路径","addCatalog":"新建目录","importToHive":"导入至Hive","exportToWorkSpace":"导出至工作空间"},"dialogTitle":{"exportToWorkSpace":"导出至工作空间"},"warning":{"noRootPath":"未请求到HDFS根目录，请刷新重试！"}},"functionView":{"formItems":{"name":"函数名称","createUser":"创建人/部门","updateTime":"修改时间","useFormat":"使用格式","description":"函数描述"}},"workBench":{"container":{"closeDropDown":{"others":"关闭其他","all":"关闭全部","left":"关闭左边","right":"关闭右边"},"closeHint":"关闭提示","footer":{"cancel":"取消","close":"直接关闭","save":"保存","saveAs":"另存为"},"tips":"什么是Scriptis？\\nScriptis是微众银行微数域(WeDataSphere)打造的一站式交互式数据探索分析工具，以任意桥(Linkis)做为内核，提供多种计算存储引擎(如Spark、Hive、TiSpark等)、Hive数据库管理功能、资源(如Yarn资源、服务器资源)管理、应用管理和各种用户资源(如UDF、变量等)管理的能力。\\nScriptis？\\n1. 选中工作空间的目录，创建文件夹；\\n2. 右键某个文件夹 =>新建脚本；\\n3. 选择脚本类型，如：SQL、Pyspark、HQL等；\\n4. 书写脚本，点击执行，生成结果集。","warning":{"noDBInfo":"未获取到数据库表信息，脚本联想词功能可能存在异常！可刷新重试！","noUDF":"未获取到UDF和方法函数信息，脚本联想词功能可能存在异常！可刷新重试！","noSelectedScript":"未选中脚本，请选择一个脚本再试！"},"notice":{"developerWarning":{"title":"警告","desc":"开发者警告：调用add接口必须传入id和filename！"},"unSupport":{"title":"警告","desc":"很抱歉，系统暂不支持打开该格式文件！"}},"removeWork":{"normal":"该脚本已发生改变，是否保存？","readOnly":"该只读脚本已发生改变，是否另存至工作空间？","temporary":"该临时脚本已发生改变，是否另存为文件？"}},"body":{"workFlow":{"tabs":{"progress":"进度","result":"运行结果","log":"运行日志","history":"历史","diagnosis":"智能诊断"},"notice":{"executing":{"title":"运行提示","desc":"正在执行脚本"},"result":{"title":"执行结果提示","desc":"脚本执行成功，共耗时："},"stop":{"title":"运行提示","desc":"已经停止执行脚本"}}},"visualAnalysis":{"modalTitle":"保存widget到解决方案"},"setting":{"customVariable":{"title":"自定义参数"},"envVariable":{"title":"环境变量"},"runTimeArgs":{"settingTitle":"命令行参数","placeholder":"请使用空格分开多个参数"}},"script":{"businessTypeScript":{"open":"打开","initTitle":"新建任务","title":"新建任务：数据开发","typeLibs":{"dataStudo":{"id":"脚本Id","owner":"所有者","type":"类型","createTime":"创建时间","version":"版本号"},"dataBI":{"id":"脚本Id","projectId":"解决方案Id","viewId":"可视化Id","description":"描述","publish":"是否发布"}},"nameLibs":{"dataExchange":"数据交换","dataStudio":"数据开发","dataBI":"可视化BI","resources":"资源"},"confirmModal":{"title":"警告","content":"<p>该脚本不存在，可能被删除或者修改，是否删除？</p>","okText":"确认删除","cancelText":"取消"}},"editor":{"navBar":{"undo":"撤销","redo":"恢复","play":"运行","stop":"停止","save":"保存","config":"配置"},"warning":{"running":"脚本运行中，请稍候！","invalidArgs":"请检查配置参数输入是否正确！","emptyCode":"无法执行空代码！"}},"execute":{"waitingQueue":"前面还有 {num} 个job","error":{"getResultList":"获取结果集失败，请联系管理员！","queryTimeout":"查询超时，请重新执行！","noResultList":"脚本未生成结果集！","errorLog":"获取结果集失败，请联系管理员！","failed":"执行失败，请到日志中查看错误原因，或将历史中的关键信息反馈给管理员！","canceled":"查询已被取消！","executeTimeout":"查询超时，请到日志中查看错误原因，或将历史中的关键信息反馈给管理员！"},"success":{"getResultList":"获取结果集成功！","stateEnd":"任务执行完成，正在获取结果集！"}},"history":{"columns":{"taskID":{"title":"任务ID"},"runningTime":{"title":"执行时间"},"createDate":{"title":"启动时间"},"status":{"title":"状态","status":{"succeed":"成功","running":"运行","timeout":"超时","inited":"排队中","scheduled":"资源申请中","failed":"失败","cancel":"取消"}},"data":{"title":"代码"},"failedReason":{"title":"关键信息"},"control":{"title":"操作","view":"查看","download":"日志下载"}},"success":{"open":"打开成功","download":"下载成功，请到本地的download文件夹查看！"}},"historyScript":{"tabs":{"log":"运行日志","result":"运行结果"}},"intelligentDiagnosis":{"columns":{"isFault":{"title":"诊断状态","type":{"green":"正常","red":"异常"}},"tuningCode":"诊断码","resultDesc":"诊断描述"}},"log":{"placeholder":"过滤"},"progress":{"title":"运行进度","watingList":"前面还有 {num} 个job在等待","columns":{"id":{"title":"名称"},"progress":{"title":"进度条"},"taskNum":{"title":"任务数","status":{"running":"运行中","success":"成功","fail":"失败","totalTasks":"总任务"}}}},"result":{"emptyText":"暂无数据","resultSetPlaceholder":"请选择结果集","resultSet":"结果集","watermaskText":"由DataWorkShop生成，仅供内部参考，严禁对外分享"},"resultsExport":{"header":"结果集导出","formItems":{"name":{"label":"导出名称","placeholder":"请输入导出名称……","title":"导出后缀可在管理台-常用功能-设置-应用级-pipeline中设置！"},"path":{"label":"存储路径","title":"结果集导出"}},"rules":{"name":{"required":"请输入名称","lengthLimit":"长度在1到200个字符","letterTypeLimit":"仅支持中文、大小写字母、数字和下划线"},"path":{"required":"请选择导出路径！"}}},"saveAs":{"header":"另存为脚本","formItems":{"fileName":{"label":"文件名"},"selectedPath":{"label":"选择路径"}},"rules":{"fileName":{"required":"请输入文件名","lengthLimit":"长度在1到200个字符","letterTypeLimit":"仅支持中文、大小写字母、数字和下划线"},"selectedPath":{"required":"请选择一个目录"}},"warning":{"invalid":"请查看未通过验证项！"},"success":{"saveScript":"另存脚本成功，请手动刷新目录树！"}},"script":{"text":"脚本","tabs":{"progress":"进度","result":"运行结果","log":"运行日志","history":"历史","diagnosis":"智能诊断"},"notice":{"unsave":{"title":"提醒","desc":"您的临时脚本已修改，请注意保存！"},"sendStart":{"title":"运行提示","render":"开始执行脚本"},"querySuccess":{"title":"执行结果提示","render":"脚本执行成功，共耗时"},"notice":{"title":"执行结果提示"},"kill":{"title":"运行提示","desc":"已经停止执行脚本"}},"confirmModal":{"title":"另存为","content":"<p>该临时脚本已发生改变！</p><p>是否另存？</p>","okText":"另存为","cancelText":"取消"},"warning":{"empty":"脚本内容为空！"}},"setting":{"header":"配置"},"steps":{"title":"Job状态","stepsInfo":{"Submitted":"任务已提交","Inited":"排队中","Scheduled":"资源申请中","Running":"脚本运行中","Succeed":"成功","ResultLoading":"读取结果集中","Completed":"完成","Failed":"执行失败","Cancelled":"已取消","FailedToGetResult":"获取结果集失败","FailedToGetResultPath":"获取结果集路径失败","FailedToGetResultList":"获取结果集列表失败","FailedToGetResultFirst":"获取第一个结果集失败","WaitForRetry":"等待重试","FailedToApply":"申请资源失败","FailedToExecute":"执行失败","notResult":"未生成结果集"},"hoverList":{"first":"1.获取结果集路径成功...","second":"2.获取结果集列表成功..."}},"toolbarProgress":{"log":"日志","diagnosis":"智能诊断"},"toolbar":{"analysis":"可视化","format":"请选择下载格式：","coding":"请选择编码：","success":{"download":"下载成功，请到本地的download文件夹查看！"},"rowToColumn":"行转列","rowToColumnTitle":"查看当前行详情"}}}},"console":{"title":"管理台","info":"{num} 条新消息","hint":"请在跳转页面查看……","sideNavList":{"news":{"name":"最新动态","children":{"daily":"运营日报"}},"function":{"name":"常用功能","children":{"globalHistory":"全局历史","resource":"资源管理器","setting":"设置","dateReport":"全局变量","globalValiable":"常见问题"}}}},"globalHistory":{"formItems":{"id":{"placeholder":"请输入ID搜索"},"date":{"label":"起始时间","placeholder":"请选择起始日期"},"engine":{"label":"引擎"},"status":{"label":"状态"}},"columns":{"taskID":"任务ID","fileName":"脚本名称","executionCode":"查询语句","status":"状态","costTime":"已耗时","executeApplicationName":"执行引擎","requestApplicationName":"创建者","progress":"进度","createdTime":"创建时间","updatedTime":"最后更新时间","control":{"title":"操作","label":"查看"}},"shortcuts":{"week":"最近一周","month":"最近一个月","threeMonths":"最近三个月"},"statusType":{"all":"全部","inited":"排队中","running":"运行","succeed":"成功","cancelled":"取消","failed":"失败","scheduled":"资源申请中","timeout":"超时","retry":"重试","unknown":"未知"},"engineTypes":{"all":"全部"}},"resource":{"header":"资源管理器","tabs":{"first":"用户会话","second":"用户资源","third":"服务器资源"},"columns":{"moduleName":"模块名称","totalResource":"总资源","usedResource":"已用资源","initializingResource":"初始化中资源","memory":"内存","engineInstance":"引擎实例","applicationName":"应用名称","usedTime":"开始时间","engineStatus":"状态","username":"用户名"},"noLimit":"无限制","core":"核","row":{"applicationName":"应用名称","usedTime":"开始时间","engineStatus":"状态","engineInstance":"引擎实例","queueName":"队列名称","user":"用户","cpu":"已用的服务器CPU资源","memory":"已用的服务器内存资源","queueCpu":"已用的Yarn队列CPU资源","queueMemory":"已用的Yarn队列内存资源"}},"setting":{"global":"全局","globalSetting":"通用设置","hide":"隐藏","show":"显示","advancedSetting":"高级设置","dataDev":"数据开发"},"globalValiable":{"globalValiable":"全局变量","rules":{"first":{"required":"变量 {text} 的key为空","lengthLimit":"长度应为 1 至 128 个字符","letterTypeLimit":"仅支持以字母开头，且不得存在空格和中文","placeholder":"请输入变量名"},"second":{"required":"变量 {text} 的value为空","lengthLimit":"长度应为 1 至 128 个字符","placeholder":"请输入变量值"}},"addArgs":"增加参数","emptyDataText":"暂无全局变量数据","sameName":"存在同名key","error":{"validate":"有验证项未通过，请检查后再试！"},"success":{"update":"全局变量更新成功！"}}}}')},b491:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{attrs:{title:"add"===e.actionType?e.$t("message.project.createProject"):e.$t("message.project.editorProject"),closable:!1},model:{value:e.ProjectShow,callback:function(t){e.ProjectShow=t},expression:"ProjectShow"}},[e.ProjectShow?s("Form",{ref:"projectForm",attrs:{"label-width":100,"label-position":"left",model:e.projectDataCurrent,rules:e.formValid}},[s("FormItem",{attrs:{label:e.$t("message.project.projectName"),prop:"name"}},[s("Input",{attrs:{placeholder:e.$t("message.newConst.enterName"),disabled:"modify"===e.actionType},model:{value:e.projectDataCurrent.name,callback:function(t){e.$set(e.projectDataCurrent,"name",t)},expression:"projectDataCurrent.name"}})],1),s("FormItem",{attrs:{label:e.$t("message.project.product"),prop:"product"}},[s("Input",{attrs:{placeholder:e.$t("message.newConst.enterName")},model:{value:e.projectDataCurrent.product,callback:function(t){e.$set(e.projectDataCurrent,"product",t)},expression:"projectDataCurrent.product"}})],1),s("FormItem",{attrs:{label:e.$t("message.project.appArea"),prop:"applicationArea"}},[s("Select",{attrs:{placeholder:e.$t("message.project.selectAppArea")},model:{value:e.projectDataCurrent.applicationArea,callback:function(t){e.$set(e.projectDataCurrent,"applicationArea",t)},expression:"projectDataCurrent.applicationArea"}},e._l(e.applicationAreaMap,(function(e,t){return s("Option",{key:t,attrs:{label:e,value:t}})})),1)],1),s("FormItem",{attrs:{label:e.$t("message.project.business"),prop:"business"}},[s("we-tag",{attrs:{"new-label":e.$t("message.project.addBusiness"),"tag-list":e.projectDataCurrent.business},on:{"add-tag":e.addTag,"delete-tag":e.deleteTag}})],1),s("FormItem",{attrs:{label:e.$t("message.project.projectDesc"),prop:"description"}},[s("Input",{attrs:{type:"textarea",placeholder:e.$t("message.project.pleaseInputProjectDesc")},model:{value:e.projectDataCurrent.description,callback:function(t){e.$set(e.projectDataCurrent,"description",t)},expression:"projectDataCurrent.description"}})],1)],1):e._e(),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"text",size:"large"},on:{click:e.Cancel}},[e._v(e._s(e.$t("message.newConst.cancel")))]),s("Button",{attrs:{type:"primary",size:"large"},on:{click:e.Ok}},[e._v(e._s(e.$t("message.newConst.ok")))])],1)],1)},a=[],n=(s("6b54"),s("87b3"),s("20d6"),s("28a5"),s("b593")),r=s("ca12"),o={components:{"we-tag":r["a"]},props:{projectData:{type:Object,default:null},addProjectShow:{type:Boolean,default:!1},actionType:{type:String,default:""}},data:function(){return{ProjectShow:!1,applicationAreaMap:[],originBusiness:""}},computed:{projectDataCurrent:function(){return this.projectData},formValid:function(){return{name:[{required:!0,message:this.$t("message.newConst.enterName"),trigger:"blur"},{message:"".concat(this.$t("message.newConst.nameLength"),"20"),max:20},{type:"string",pattern:/^[a-zA-Z][a-zA-Z0-9_]*$/,message:this.$t("message.newConst.validNameDesc"),trigger:"blur"}],description:[{required:!0,message:this.$t("message.project.pleaseInputProjectDesc"),trigger:"blur"}],product:[{required:!0,message:this.$t("message.project.selectProduct"),trigger:"change"}],applicationArea:[{required:!0,message:this.$t("message.project.selectAppArea"),trigger:"change",type:"number"}]}}},mounted:function(){var e=this;n["a"].fetch("/dss/listApplicationAreas","get").then((function(t){e.applicationAreaMap=t.applicationAreas}))},watch:{addProjectShow:function(e){this.ProjectShow=e},ProjectShow:function(e){e&&(this.originBusiness=this.projectDataCurrent.business),this.$emit("show",e)}},methods:{Ok:function(){var e=this;this.$refs.projectForm.validate((function(t){t?(e.$emit("confirm",e.projectDataCurrent),e.ProjectShow=!1):e.$Message.warning(e.$t("message.newConst.failedNotice"))}))},Cancel:function(){this.ProjectShow=!1,this.projectData.business=this.originBusiness},addTag:function(e){this.projectDataCurrent.business?this.projectDataCurrent.business+=",".concat(e):this.projectDataCurrent.business=e},deleteTag:function(e){var t=this.projectDataCurrent.business.split(","),s=t.findIndex((function(t){return t===e}));t.splice(s,1),this.projectData.business=t.toString()}}},c=o,l=s("2877"),d=Object(l["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},b575:function(e,t,s){"use strict";var i=s("a209"),a=s.n(i);a.a},b593:function(e,t,s){"use strict";s("456d"),s("ac6a"),s("28a5"),s("f3e2"),s("a481"),s("57e7");var i=s("0971"),a=s("bc3a"),n=s.n(a),r=s("7a3f"),o=s("e069"),c=[],l=null,d=n.a.CancelToken,u=function(e){for(var t=0;t<c.length;t++){var s=JSON.stringify(e.params);c[t].u===e.url+"&"+e.method+"&"+s&&(c[t].f(),c.splice(t,1))}},h=function(e){for(var t=0;t<c.length;t++){var s=JSON.stringify(e.params);if(c[t].u===e.url+"&"+e.method+"&"+s)return!0}},p=n.a.create({baseURL:"http://localhost:8088/api/rest_j/v1/",timeout:3e4,withCredentials:!0,headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}});p.interceptors.request.use((function(e){e.headers["Content-language"]=localStorage.getItem("locale")||"zh-CN";var t=h(e);if(!0===t)return e;var s=JSON.stringify(e.params);return l=e,e.cancelToken=new d((function(t){c.push({u:e.url+"&"+e.method+"&"+s,f:t})})),e}),(function(e){Promise.reject(e)})),p.interceptors.response.use((function(e){return u(e.config),e}),(function(e){if(e.message&&e.message.indexOf("timeout")>=0||e.request&&200!==e.request.status){for(var t in c)c[t].u===l.url+"&"+l.method+"&"+JSON.stringify(l.params)&&c.splice(t,1);return e.response||e}return n.a.Cancel?{data:{message:"接口请求中！请稍后……"}}:e}));var f={instance:p,error:{"-1":function(e){var t=e.data.data;if(t.enableSSO&&t.SSOURL)return window.location.replace(t.SSOURL);throw r["a"].push("/login"),new Error("您尚未登录，请先登录!")}},constructionOfResponse:{codePath:"status",successCode:"0",messagePath:"message",resultPath:"data"}},m=function(e){var t=["codePath","messagePath","resultPath"],s={};return t.forEach((function(t){for(var i=f.constructionOfResponse[t].split("."),a=1===i.length&&"*"===i[0]?e:e[i[0]],n=1;n<i.length;n++)if(a=a[i[n]],!a){n<i.length-1&&console.error("【FEX】ConstructionOfResponse配置错误：".concat(t,"拿到的值是undefined，请检查配置"));break}s[t]=a})),s},g=function(e){var t;if(i["a"].isNull(f.constructionOfResponse.codePath)||i["a"].isNull(f.constructionOfResponse.successCode)||i["a"].isNull(f.constructionOfResponse.messagePath)||i["a"].isNull(f.constructionOfResponse.resultPath))console.error("【FEX】Api配置错误: 请调用setConstructionOfResponse来设置API的响应结构");else if(e){if(i["a"].isString(e.data))t=JSON.parse(e.data);else{if(!i["a"].isObject(e.data))throw new Error("后台接口异常，请联系开发处理！");t=e.data}var s=m(t),a=s.codePath,n=s.messagePath,r=s.resultPath;if(a!=f.constructionOfResponse.successCode)throw f.error[a]?(f.error[a](e),new Error("")):new Error(n||"后台接口异常，请联系开发处理！");return r||{}}},b=function(e){var t,s="",a=e.response;if(a&&f.error[a.status])f.error[a.status].forEach((function(e){return e(a)}));else if(s="后台接口异常，请联系开发处理！",a&&a.data&&(i["a"].isString(a.data)?t=JSON.parse(a.data):i["a"].isObject(a.data)&&(t=a.data),t)){var n=m(t);s=n.messagePath}throw e.message=s,e},v=function(e,t,s){var a="post";return i["a"].isNull(e)?console.error("请传入URL"):(!i["a"].isNull(e)&&i["a"].isNull(t)&&i["a"].isNull(s)?s={method:a}:i["a"].isNull(e)||i["a"].isNull(t)||!i["a"].isNull(s)?i["a"].isNull(e)||i["a"].isNull(t)||i["a"].isNull(s)||(i["a"].isObject(t)||(t={}),i["a"].isString(s)?s={method:s}:i["a"].isObject(s)?s.method=s.method||a:s={method:a},"get"!=s.method&&"delete"!=s.method&&"head"!=s.method&&"options"!=s.method||(s.params=t),"post"!=s.method&&"put"!=s.method&&"patch"!=s.method||(s.data=t)):(s={method:a},i["a"].isString(t)?s.method=t:i["a"].isObject(t)&&(s.data=t)),s.url=e,p.request(s))},y=function(e,t,s){return v(e,t,s).then(g,b).then((function(e){return e})).catch((function(e){throw e.message&&o["Message"].error(e.message),e}))};f.fetch=y,f.option=function(e){e.root&&(p.defaults.baseURL=e.root),e.timeout&&i["a"].isNumber(e.timeout)&&(p.defaults.timeout=e.timeout),e.config&&i["a"].isObject(e.config)&&Object.keys(e.config).forEach((function(t){p.defaults[t]=e.config[t]}))},f.setError=function(e){e&&i["a"].isObject(e)&&i["a"].merge(f.error,e)},f.setResponse=function(e){this.constructionOfResponse=e},t["a"]=f},b5ac:function(e,t,s){},b696:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{attrs:{title:"add"===e.actionType?e.$t("message.project.projectClassify")+" / "+e.$t("message.project.newCreate"):e.$t("message.project.projectClassify")+" / "+e.$t("message.project.editor"),closable:!1},model:{value:e.ClassifyShow,callback:function(t){e.ClassifyShow=t},expression:"ClassifyShow"}},[e.ClassifyShow?s("Form",{ref:"classifyForm",attrs:{"label-width":100,"label-position":"left",model:e.projectData,rules:e.rulesValid}},[s("FormItem",{attrs:{label:"工程分类名:",prop:"name"}},[s("Input",{attrs:{placeholder:"请输入分类名",disabled:"modify"===e.actionType&&"我的工程"===e.projectData.name||"我参与的工程"===e.projectData.name},model:{value:e.projectData.name,callback:function(t){e.$set(e.projectData,"name",t)},expression:"projectData.name"}})],1),s("FormItem",{attrs:{label:"工程分类描述:",prop:"projectDescription"}},[s("Input",{attrs:{type:"textarea",placeholder:"请输入分类名"},model:{value:e.projectData.description,callback:function(t){e.$set(e.projectData,"description",t)},expression:"projectData.description"}})],1)],1):e._e(),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"text",size:"large"},on:{click:e.Cancel}},[e._v(e._s(e.$t("message.newConst.cancel")))]),s("Button",{attrs:{type:"primary",size:"large"},on:{click:e.Ok}},[e._v(e._s(e.$t("message.newConst.ok")))])],1)],1)},a=[],n={props:{projectClassify:{type:Object,default:null},addClassifyShow:{type:Boolean,defalut:null},actionType:{type:String,default:""}},data:function(){return{ClassifyShow:this.addClassifyShow,laoding:!0}},computed:{projectData:function(){return this.projectClassify}},watch:{ClassifyShow:function(e){this.$emit("showModal",e)},addClassifyShow:function(e){this.ClassifyShow=e}},methods:{Ok:function(){var e=this;this.$refs.classifyForm.validate((function(t){t?(e.$emit("addProjectClassifyConfirm",e.projectData),e.ClassifyShow=!1):e.$Message.warning(e.$t("message.newConst.failedNotice"))}))},Cancel:function(){this.ClassifyShow=!1}}},r=n,o=s("2877"),c=Object(o["a"])(r,i,a,!1,null,null,null);t["default"]=c.exports},b788:function(e,t,s){"use strict";var i=s("40b6"),a=[{key:"name",name:i["a"].t("message.createTable.fieldsName"),inputType:"input",require:!0,rules:[{required:!0,message:i["a"].t("message.createTable.fieldsNameRequire")},{pattern:/^[a-zA-Z0-9_]+$/,message:i["a"].t("message.createTable.fieldsNameRule")}],width:"150px"},{key:"primary",name:i["a"].t("message.createTable.isPrimary"),inputType:"select",require:!0,opt:[{label:"yes",value:1},{label:"no",value:0}],rules:[],width:"80px"},{key:"type",name:i["a"].t("message.createTable.fieldsType"),inputType:"select",require:!0,opt:[{value:"string",label:"string"},{value:"tinyint",label:"tinyint"},{value:"smallint",label:"smallint"},{value:"int",label:"int"},{value:"bigint",label:"bigint"},{value:"boolean",label:"boolean"},{value:"float",label:"float"},{value:"double",label:"double"},{value:"decimal",label:"decimal"},{value:"timestamp",label:"timestamp"},{value:"date",label:"date"},{value:"char",label:"char"},{value:"varchar",label:"varchar"}],rules:[],width:"100px"},{key:"length",name:i["a"].t("message.createTable.length"),inputType:"input",rules:[],width:"100px"},{key:"alias",name:i["a"].t("message.createTable.fieldsAlias"),inputType:"input",rules:[],width:"150px"},{key:"rule",name:i["a"].t("message.createTable.rule"),inputType:"input",rules:[],width:"150px"},{key:"comment",name:i["a"].t("message.createTable.comment"),inputType:"input",rules:[],width:"210px"}],n=[{key:"name",name:i["a"].t("message.createTable.partitionAttr"),inputType:"string",width:"140px"},{key:"type",name:i["a"].t("message.createTable.partitionType"),inputType:"string",width:"120px"},{key:"length",name:i["a"].t("message.createTable.length"),inputType:"input",rules:[],width:"120px"},{key:"alias",name:i["a"].t("message.createTable.partitionAlias"),inputType:"input",rules:[],width:"200px"},{key:"comment",name:i["a"].t("message.createTable.comment"),inputType:"input",rules:[],width:"440px"}],r=[{title:i["a"].t("message.createTable.fieldsName"),key:"name",width:"15%"},{title:i["a"].t("message.createTable.isPrimary"),key:"primary",type:"boolean",width:"10%",minWidth:"70px",inputType:"select",opt:[{label:"yes",value:1},{label:"no",value:0}]},{title:i["a"].t("message.createTable.fieldsType"),key:"type",width:"10%",minWidth:"70px",inputType:"select",opt:[{value:"string",label:"string"},{value:"tinyint",label:"tinyint"},{value:"smallint",label:"smallint"},{value:"int",label:"int"},{value:"bigint",label:"bigint"},{value:"boolean",label:"boolean"},{value:"float",label:"float"},{value:"double",label:"double"},{value:"decimal",label:"decimal"},{value:"timestamp",label:"timestamp"},{value:"date",label:"date"},{value:"char",label:"char"},{value:"varchar",label:"varchar"}]},{key:"length",title:i["a"].t("message.createTable.length"),inputType:"input",width:"10%"},{title:i["a"].t("message.createTable.alias"),key:"alias",width:"10%",inputType:"input"},{title:i["a"].t("message.createTable.sourceFields"),key:"sourceFields",width:"15%",minWidth:"166px",inputType:"tag",multiple:"multiple",wrap:!0,opt:[]},{title:i["a"].t("message.createTable.rule"),key:"rule",width:"15%",minWidth:"70px",inputType:"input"},{title:i["a"].t("message.createTable.express"),key:"express",width:"15%",minWidth:"70px",inputType:"input"},{title:i["a"].t("message.createTable.comment"),key:"comment",width:"15%",inputType:"input"}],o=[{title:i["a"].t("message.createTable.fieldsName"),key:"name",width:"20%",inputType:"input"},{title:i["a"].t("message.createTable.isPrimary"),key:"primary",type:"boolean",width:"10%",minWidth:"70px",inputType:"select",opt:[{label:"yes",value:1},{label:"no",value:0}]},{title:i["a"].t("message.createTable.fieldsType"),key:"type",width:"15%",minWidth:"70px",inputType:"select",opt:[{value:"string",label:"string"},{value:"tinyint",label:"tinyint"},{value:"smallint",label:"smallint"},{value:"int",label:"int"},{value:"bigint",label:"bigint"},{value:"boolean",label:"boolean"},{value:"float",label:"float"},{value:"double",label:"double"},{value:"decimal",label:"decimal"},{value:"timestamp",label:"timestamp"},{value:"date",label:"date"},{value:"char",label:"char"},{value:"varchar",label:"varchar"}]},{key:"length",title:i["a"].t("message.createTable.length"),inputType:"input",width:"10%"},{title:i["a"].t("message.createTable.alias"),key:"alias",width:"15%",inputType:"input"},{title:i["a"].t("message.createTable.comment"),key:"comment",width:"30%",inputType:"input"}],c=[{title:i["a"].t("message.createTable.partitionAttr"),key:"name",width:"15%",minWidth:"70px"},{title:i["a"].t("message.createTable.partitionValue"),key:"partitionsValue",width:"15%",minWidth:"70px",inputType:"input"},{title:i["a"].t("message.createTable.partitionType"),key:"type",width:"15%",minWidth:"70px"},{title:i["a"].t("message.createTable.length"),key:"length",width:"15%",minWidth:"70px"},{title:i["a"].t("message.createTable.partitionAlias"),key:"alias",width:"15%",minWidth:"70px",inputType:"input"},{title:i["a"].t("message.createTable.comment"),key:"comment",width:"25%",minWidth:"70px",inputType:"input"}];t["a"]={createTableFieldsConfig:a,createTablePartitionsConfig:n,importTableFieldsConfig:r,importTableFieldsCsvAndXlsxConfig:o,importTablePartitionsConfig:c}},b832:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{attrs:{width:e.modal.width},model:{value:e.modal.show,callback:function(t){e.$set(e.modal,"show",t)},expression:"modal.show"}},[s("p",{attrs:{slot:"header"},slot:"header"},[e._v("\n    "+e._s(e.$t("message.importToHive.DRWJ"))+"\n  ")]),s("div",{staticClass:"we-import-to-hive",class:{"first-step":0===e.modal.step}},[s("div",{staticClass:"we-import-to-hive-steps"},[s("Steps",{attrs:{current:e.modal.step}},[s("step",{attrs:{title:e.$t("message.importToHive.BZONE")+"："+e.$t("message.importToHive.WJDR")}}),s("step",{attrs:{title:e.$t("message.importToHive.BZTOW")+"："+e.$t("message.importToHive.DRZMRB")}})],1)],1),s("div",{staticClass:"we-import-to-hive-form"},[s("Form",{directives:[{name:"show",rawName:"v-show",value:0===e.modal.step,expression:"modal.step === 0"}],attrs:{model:e.firstStep,"label-width":80}},[s("p",{staticClass:"step-form-title"},[e._v(e._s(e.$t("message.importToHive.LY")))]),s("FormItem",{attrs:{label:e.$t("message.importToHive.LX")}},[s("Select",{attrs:{placeholder:e.$t("message.importToHive.QXZLX")},on:{"on-change":e.emitTypeChange},model:{value:e.firstStep.type,callback:function(t){e.$set(e.firstStep,"type",t)},expression:"firstStep.type"}},e._l(e.staticData.type,(function(e){return s("Option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),s("FormItem",{attrs:{label:e.$t("message.importToHive.LJ")}},[s("directory-dialog",{attrs:{tree:e.tree,"load-data-fn":e.loadDataFn,"filter-node":e.filterNode,path:e.firstStep.exportPath,"fs-type":e.firstStep.type},on:{"set-node":e.setNode}})],1),e.firstStep.exportPath&&(e.isTxtType||e.isXlsType)?[s("p",{staticClass:"step-form-title"},[e._v(e._s(e.$t("message.importToHive.GSH")))]),e.isXlsType?e._e():[s("FormItem",{attrs:{label:e.$t("message.importToHive.FGF")}},[s("Select",{attrs:{placeholder:e.$t("message.importToHive.QXZLX")},model:{value:e.firstStep.separator,callback:function(t){e.$set(e.firstStep,"separator",t)},expression:"firstStep.separator"}},e._l(e.staticData.separator,(function(e){return s("Option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),s("FormItem",{attrs:{label:e.$t("message.importToHive.BMGS")}},[s("Select",{attrs:{placeholder:e.$t("message.importToHive.QXZBMGS")},model:{value:e.firstStep.chartset,callback:function(t){e.$set(e.firstStep,"chartset",t)},expression:"firstStep.chartset"}},e._l(e.staticData.chartset,(function(e){return s("Option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),s("FormItem",{attrs:{label:e.$t("message.importToHive.XDF")}},[s("Select",{attrs:{clearable:"",placeholder:e.$t("message.importToHive.WXDF")},model:{value:e.firstStep.quote,callback:function(t){e.$set(e.firstStep,"quote",t)},expression:"firstStep.quote"}},e._l(e.staticData.quote,(function(e,t){return s("Option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],s("FormItem",{attrs:{label:e.$t("message.importToHive.SHWBT")}},[s("Checkbox",{model:{value:e.firstStep.isHasHeader,callback:function(t){e.$set(e.firstStep,"isHasHeader",t)},expression:"firstStep.isHasHeader"}})],1)]:e._e()],2),s("Form",{directives:[{name:"show",rawName:"v-show",value:1===e.modal.step,expression:"modal.step === 1"}],ref:"secondForm",staticClass:"seconed-Form",attrs:{model:e.secondStep,"label-width":80,rules:e.ruleValidate}},[s("p",{staticClass:"step-form-title"},[e._v(e._s(e.$t("message.importToHive.MC")))]),s("FormItem",{attrs:{label:e.$t("message.importToHive.SJK"),prop:"dbName"}},[s("Select",{attrs:{placeholder:e.$t("message.importToHive.QSRKM")},on:{"on-change":e.handleHiveDbChange},model:{value:e.secondStep.dbName,callback:function(t){e.$set(e.secondStep,"dbName",t)},expression:"secondStep.dbName"}},e._l(e.dbList,(function(e){return s("Option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1)],1),s("FormItem",{attrs:{label:e.$t("message.importToHive.SJB"),prop:"tbName"}},[s("Input",{attrs:{disabled:!e.secondStep.dbName,placeholder:e.$t("message.importToHive.SRSJBM")},model:{value:e.secondStep.tbName,callback:function(t){e.$set(e.secondStep,"tbName",t)},expression:"secondStep.tbName"}})],1),s("Row",[s("Col",{attrs:{span:"12"}},[e.isShowPartition?s("FormItem",{attrs:{label:e.$t("message.importToHive.FQ"),prop:"partitionValue"}},[s("div",[s("span",[e._v(e._s(e.secondStep.partition))]),s("span",[e._v(" = ")]),s("Input",{ref:"partition",staticStyle:{width:"calc(100% - 30px)"},model:{value:e.secondStep.partitionValue,callback:function(t){e.$set(e.secondStep,"partitionValue",t)},expression:"secondStep.partitionValue"}})],1)]):e._e()],1),s("Col",{attrs:{span:"6"}},[e.isShowOverwrite?s("FormItem",{attrs:{label:e.$t("message.importToHive.FX")}},[s("Checkbox",{model:{value:e.secondStep.isOverwrite,callback:function(t){e.$set(e.secondStep,"isOverwrite",t)},expression:"secondStep.isOverwrite"}})],1):e._e()],1),s("Col",{attrs:{span:"6"}},[e.isNewPartition&&!e.validator.isView?s("FormItem",{attrs:{label:e.$t("message.importToHive.XZFQ")}},[s("Checkbox",{model:{value:e.secondStep.isNewPartition,callback:function(t){e.$set(e.secondStep,"isNewPartition",t)},expression:"secondStep.isNewPartition"}})],1):e._e()],1),e.isNewPartition&&e.secondStep.isNewPartition?s("Col",{attrs:{span:"9"}},[s("FormItem",{attrs:{label:e.$t("message.importToHive.FQ"),prop:"partition"}},[s("Input",{model:{value:e.secondStep.partition,callback:function(t){e.$set(e.secondStep,"partition",t)},expression:"secondStep.partition"}})],1)],1):e._e(),e.isNewPartition&&e.secondStep.isNewPartition?s("Col",{attrs:{span:"9"}},[s("FormItem",{attrs:{"label-width":0,prop:"partitionValue"}},[s("span",[e._v(" = ")]),s("Input",{staticStyle:{width:"calc(100% - 30px)"},model:{value:e.secondStep.partitionValue,callback:function(t){e.$set(e.secondStep,"partitionValue",t)},expression:"secondStep.partitionValue"}})],1)],1):e._e()],1),e.isXlsType?s("FormItem",{attrs:{label:e.$t("message.importToHive.SHEETB")}},[s("Select",{staticClass:"step-from-sheet",attrs:{multiple:"multiple"},model:{value:e.secondStep.moreSheet,callback:function(t){e.$set(e.secondStep,"moreSheet",t)},expression:"secondStep.moreSheet"}},e._l(e.secondStep.sheetList,(function(t,i){return s("Option",{key:i,attrs:{value:t,label:t}},[e._v(e._s(t))])})),1)],1):e._e(),s("p",{staticClass:"step-form-title"},[e._v(e._s(e.$t("message.importToHive.ZG")))]),s("field-list",{attrs:{list:e.secondStep.fields,"static-data":e.staticData,"is-xls":e.isXlsType},on:{"comment-click":e.handleCommentClick,"fields-type-click":e.handleFieldsTypeChange}})],1)],1)]),s("template",{slot:"footer"},[0===e.modal.step?s("Button",{attrs:{loading:e.modal.loading},on:{click:e.nextStep}},[e._v(e._s(e.$t("message.importToHive.XYB")))]):e._e(),1===e.modal.step?s("Button",{attrs:{loading:e.modal.loading},on:{click:e.prevStep}},[e._v(e._s(e.$t("message.importToHive.SYB")))]):e._e(),1===e.modal.step?s("Button",{attrs:{loading:e.modal.loading,type:"primary",disabled:e.validator.isView},on:{click:e.submit}},[e._v(e._s(e.$t("message.importToHive.TJ")))]):e._e()],1)],2)},a=[],n=(s("4f37"),s("6d67"),s("456d"),s("ac6a"),s("f3e2"),s("96cf"),s("3b8d")),r=(s("57e7"),s("7f7f"),s("9865"),s("c5f6"),s("2ef0")),o=s("c1df"),c=s.n(o),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("virtual-list",{ref:"fieldList",staticClass:"field-list-wrap",attrs:{size:54,remain:e.list.length>2?e.isXls?2:3:e.list.length,wtag:"ul"}},e._l(e.list,(function(t,i){return s("li",{key:i,staticClass:"field-list-item"},[s("FormItem",{staticClass:"field-list-item-child",attrs:{label:e.$t("message.importToHive.MC"),prop:"fields."+i+".fieldName",rules:[{required:!0,message:e.$t("message.importToHive.ZDMC")},{pattern:/^[a-zA-Z0-9_]+$/,message:e.$t("message.importToHive.JZCZM")}],"label-width":50}},[s("Input",{staticClass:"field-list-item-child-name",style:{width:-1===["char","varchar","decimal","date"].indexOf(t.type)?"336px":"166px"},attrs:{placeholder:e.$t("message.importToHive.QSRZDM")},model:{value:t.fieldName,callback:function(s){e.$set(t,"fieldName",s)},expression:"item.fieldName"}})],1),s("div",{staticClass:"field-list-item-child"},[s("span",{staticClass:"field-list-item-child-label"},[e._v(e._s(e.$t("message.importToHive.LX")))]),s("Select",{staticClass:"field-list-item-child-type",attrs:{transfer:""},on:{"on-change":function(s){return e.$emit("fields-type-click",t)}},model:{value:t.type,callback:function(s){e.$set(t,"type",s)},expression:"item.type"}},e._l(e.staticData.fieldsType,(function(e){return s("Option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1),"date"===t.type?s("div",{staticClass:"field-list-item-child"},[s("span",{staticClass:"field-list-item-child-label"},[e._v(e._s(e.$t("message.importToHive.GS")))]),s("Select",{staticClass:"field-list-item-child-time",attrs:{clearable:"",placeholder:e.$t("message.importToHive.QXZGS"),transfer:""},model:{value:t.dateFormat,callback:function(s){e.$set(t,"dateFormat",s)},expression:"item.dateFormat"}},e._l(e.staticData.dateType,(function(e,t){return s("Option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"char"===t.type||"varchar"===t.type?s("div",{staticClass:"field-list-item-child"},[s("Input",{staticClass:"field-list-item-child-length",attrs:{placeholder:e.$t("message.importToHive.CD")},model:{value:t.length,callback:function(s){e.$set(t,"length",s)},expression:"item.length"}})],1):e._e(),"decimal"==t.type?s("div",{staticClass:"field-list-item-child"},[s("Input",{staticClass:"field-list-item-child-option",attrs:{placeholder:e.$t("message.importToHive.JD")},model:{value:t.precision,callback:function(s){e.$set(t,"precision",s)},expression:"item.precision"}})],1):e._e(),"decimal"==t.type?s("div",{staticClass:"field-list-item-child"},[s("Input",{staticClass:"field-list-item-child-option",attrs:{placeholder:e.$t("message.importToHive.XSW")},model:{value:t.scale,callback:function(s){e.$set(t,"scale",s)},expression:"item.scale"}})],1):e._e(),s("Icon",{staticClass:"step-form-extras",attrs:{type:"md-menu",size:"16"},on:{click:function(s){return e.$emit("comment-click",t)}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.commentShow,expression:"item.commentShow"}],staticClass:"field-list-item-child"},[s("Input",{staticClass:"field-list-item-child-comment",attrs:{placeholder:e.$t("message.importToHive.SRZDZS")},model:{value:t.comment,callback:function(s){e.$set(t,"comment",s)},expression:"item.comment"}})],1)],1)})),0)},d=[],u=s("7dc5"),h={components:{virtualList:u["a"]},props:{list:{type:Array,default:function(){return[]}},staticData:{type:Object,default:function(){}},isXls:Boolean},methods:{}},p=h,f=s("2877"),m=Object(f["a"])(p,l,d,!1,null,null,null),g=m.exports,b=s("ed93"),v={components:{directoryDialog:b["a"],fieldList:g},props:{width:{type:Number,default:0},tree:{type:Array,default:function(){return[]}},dbList:{type:Array,defalut:[]},fsType:{type:String,default:"share"},loadDataFn:Function,filterNode:Function},data:function(){var e=this;return{modal:{show:!1,width:"780px",loading:!1,step:0},validator:{isLeaf:!0,isView:!1},firstStep:{exportPath:"",type:"share",separator:",",chartset:"utf-8",quote:"",isHasHeader:!1},secondStep:{tbName:"",dbName:"",moreSheet:[],sheetList:[],partition:"",partitionValue:"",isOverwrite:!1,fields:[],isNewPartition:!1},partitionManager:{duplicateName:!1,partTable:!1,multiLevel:!1,duplicateValue:!1,areas:[]},poptipValidate:{length:[{pattern:/^[0-9]+$/,message:this.$t("message.importToHive.LXWCHAR")}],precision:[{pattern:/^([1-9]\d*.?|0.)\d*$/,message:this.$t("message.importToHive.ZDJDSRYW")}],scale:[{pattern:/^[0-9]+$/,message:this.$t("message.importToHive.ZDXSWYDY")}],comment:[{pattern:/^[\u4e00-\u9fa5\w]{1,100}$/,message:this.$t("message.importToHive.ZDZSZCZW")}]},ruleValidate:{dbName:[{required:!0,message:this.$t("message.importToHive.SJKMBNWK")}],tbName:[{required:!0,message:this.$t("message.importToHive.BMBNWK")},{pattern:/^[a-zA-Z][a-zA-Z0-9_]{1,100}$/,message:this.$t("message.importToHive.BMJZCZMKT")},{validator:function(t,s,i){return s?e.handleTbInput(s,i):i()}}],partition:[{required:!0,message:this.$t("message.importToHive.FQMBNWK")},{pattern:/^[A-Za-z0-9-]+$/,message:this.$t("message.importToHive.FQMZCSZ")}],partitionValue:[{required:!0,message:this.$t("message.importToHive.FQZBNWK")},{pattern:/^[A-Za-z0-9-]+$/,message:this.$t("message.importToHive.FQZZZCSZ")},{validator:function(t,s,i){return s?e.validPartitionValue(s,i):i()}}]},staticData:{type:[{label:this.$t("message.importToHive.GXMLDR"),value:"share"},{label:this.$t("message.importToHive.HDFSDR"),value:"hdfs"}],separator:[{label:this.$t("message.importToHive.DH"),value:","},{label:this.$t("message.importToHive.FH"),value:";"},{label:this.$t("message.importToHive.ZBF"),value:"\\t"},{label:this.$t("message.importToHive.KG"),value:"%20"}],chartset:[{label:"utf-8",value:"utf-8"},{label:"GBK",value:"GBK"}],quote:[{label:"".concat(this.$t("message.importToHive.SYH"),'("")'),value:'"'},{label:this.$t("message.importToHive.DYH"),value:"'"}],fieldsType:[{value:"string"},{value:"tinyint"},{value:"smallint"},{value:"int"},{value:"bigint"},{value:"boolean"},{value:"float"},{value:"double"},{value:"decimal"},{value:"timestamp"},{value:"date"},{value:"char"},{value:"varchar"}],dateType:[{label:"yyyyMMdd",value:"yyyyMMdd"},{label:"yyyy-MM-dd",value:"yyyy-MM-dd"},{label:"yyyy.MM.dd",value:"yyyy.MM.dd"},{label:"yyyy/MM/dd",value:"yyyy/MM/dd"}]}}},computed:{isXlsType:function(){var e=this.firstStep.exportPath;if(!e)return!1;var t=[".xlsx",".xls"],s=e.substr(e.lastIndexOf("."),e.length),i=-1!==Object(r["indexOf"])(t,s);return i},isTxtType:function(){var e=this.firstStep.exportPath;if(!e)return!1;var t=[".txt",".csv"],s=e.substr(e.lastIndexOf("."),e.length),i=-1!==Object(r["indexOf"])(t,s);return i},isShowPartition:function(){var e=this,t=this.secondStep,s=t.dbName,i=t.tbName,a=this.partitionManager,n=a.partTable,r=a.multiLevel,o=s&&i&&n&&!r;return this.initNewPartition(o),this.$nextTick((function(){e.$refs.partition&&e.validateFieldSync("partitionValue")})),o},isShowOverwrite:function(){var e=this.secondStep,t=e.dbName,s=e.tbName,i=this.partitionManager,a=i.duplicateName,n=i.partTable,r=i.duplicateValue;return t&&s&&(a&&!n||a&&r)},isNewPartition:function(){var e=this.secondStep,t=e.dbName,s=e.tbName,i=!this.partitionManager.duplicateName&&t&&s;return this.initNewPartition(i),i},activeDB:function(){var e=this,t=[];return this.dbList.length&&this.secondStep.dbName&&(t=Object(r["find"])(this.dbList,(function(t){return t.name===e.secondStep.dbName}))),t}},watch:{"secondStep.partitionValue":function(e){var t=-1===this.partitionManager.areas.indexOf(e);t&&this.debounceValidateField("tbName",this)}},methods:{open:function(e){if(this.modal.loading)return this.$Message.warning(this.$t("message.importToHive.WJZZZXDR"));this.resetSecondStep(),this.resetFirstStep(),e&&(this.firstStep.exportPath=e),this.firstStep.type=this.fsType,this.modal.show=!0,this.modal.step=0,this.validator.isLeaf=!0},close:function(){this.modal.show=!1},validPartitionValue:function(e,t){var s=this.partitionManager.areas.indexOf(e);if(-1!==s)return this.partitionManager.duplicateValue=!0,t(new Error(this.$t("message.importToHive.FQZCF")));this.partitionManager.duplicateValue=!1,t()},resetFirstStep:function(){this.firstStep={exportPath:"",type:"share",separator:",",chartset:"utf-8",quote:"",isHasHeader:!1}},resetSecondStep:function(){this.secondStep={tbName:"",dbName:"",moreSheet:[],sheetList:[],partition:"",partitionValue:"",isOverwrite:!1,fields:[],isNewPartition:!1}},initNewPartition:function(e){var t=c.a.unix(c()().unix()).format("YYYYMMDD"),s=this.partitionManager.partTable,i=this.secondStep.isNewPartition;this.secondStep.partition=e&&(s||i)?"ds":"",this.secondStep.partitionValue=e&&(s||i)?t:""},handleHiveDbChange:function(e){var t=this,s=function(s){var i=Object(r["find"])(s,(function(t){return t.name===e}));i&&Object(r["isEmpty"])(i.children)&&t.$emit("get-tables",i,(function(){return t.validateFieldSync("tbName")})),t.validateFieldSync("tbName")};e&&(this.dbList.length||this.$emit("get-hive",(function(e){return s(e)})),s(this.dbList))},handleTbInput:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,s){var i,a,n,o,c,l,d,u=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=Object(r["find"])(this.activeDB.children,(function(e){return e.value===t})),i){e.next=4;break}return this.resetPartition(),e.abrupt("return",s());case 4:if(this.validator.isView=i.isView,!this.validator.isView){e.next=9;break}return this.resetPartition(),this.partitionManager.duplicateName=!1,e.abrupt("return",s(new Error(this.$t("message.importToHive.TSWST"))));case 9:return this.partitionManager.duplicateName=!0,e.prev=10,e.next=13,this.judgePartition(i);case 13:if(a=e.sent,n=a.isPartition,o=a.isPartMore,c=a.partitions,l=this.$t("message.importToHive.BMYCZDQSJK"),this.partitionManager.partTable=n,this.partitionManager.partTable){e.next=19;break}return e.abrupt("return",s(new Error(l+"，".concat(this.$t("message.importToHive.QQRSFCF")))));case 19:if(!o){e.next=23;break}return this.partitionManager.multiLevel=!0,l=this.$t("message.importToHive.ZBZCDJFQ"),e.abrupt("return",s(new Error(l)));case 23:if(d=c[0]||{title:""},this.secondStep.partition=d.title.slice(0,d.title.indexOf("=")),this.partitionManager.areas=[],c.forEach((function(e){var t=e.title,s=t.slice(t.indexOf("=")+1,t.length);u.partitionManager.areas.push(s)})),this.secondStep.partitionValue){e.next=29;break}return e.abrupt("return",s(new Error(l+"，".concat(this.$t("message.importToHive.QQURFQ")))));case 29:e.next=34;break;case 31:return e.prev=31,e.t0=e["catch"](10),e.abrupt("return",s(new Error(this.$t("message.importToHive.HQFQSB"))));case 34:case"end":return e.stop()}}),e,this,[[10,31]])})));function t(t,s){return e.apply(this,arguments)}return t}(),judgePartition:function(e){var t=this;return new Promise((function(s){e.hasOwnProperty("isPartition")?s(e):t.$emit("get-partitions",e,(function(e){s(e)}))}))},resetPartition:function(){var e=this;Object.keys(this.partitionManager).forEach((function(t){e.partitionManager[t]=!1})),this.partitionManager.areas=[]},getTbName:function(){var e=this.firstStep.exportPath;return e.slice(e.lastIndexOf("/")+1,e.lastIndexOf("."))},nextStep:function(){var e=this;if(!this.validator.isLeaf)return this.$Message.error(this.$t("message.importToHive.ZQDRWJLJ"));this.modal.loading=!0,this.secondStep.tbName=this.getTbName(),this.$emit("get-content",this.firstStep,this.isXlsType,(function(t){var s=function(t){var s=e.getUserName(),i=Object(r["find"])(t,(function(e){return-1!==e.name.indexOf("ind")&&-1!==e.name.indexOf(s)}));return i?i.name:""};if(e.modal.loading=!1,t){e.dbList.length?(e.secondStep.dbName=s(e.dbList),e.handleHiveDbChange(e.secondStep.dbName)):e.$emit("get-hive",(function(t){e.secondStep.dbName=s(t),e.handleHiveDbChange(e.secondStep.dbName)}));var i=t.sheetName,a=t.columnName,n=t.columnType;e.modal.step=1,e.secondStep.sheetList=i,e.secondStep.moreSheet=i?i[0]:"",e.secondStep.fields=a.map((function(e,t){return{fieldName:e,type:n[t],comment:"",commentShow:!1,dateFormat:""}}))}}))},prevStep:function(){this.modal.step=0},beforeSubmit:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,s,i,a,n,r,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={},s=["dbName","tbName"],Object.keys(this.ruleValidate).forEach((function(e){var s=o.ruleValidate[e],i=[];s.forEach((function(e){e.message&&i.push(e.message)})),t[e]=i})),t.tbName.push(this.$t("message.importToHive.ZBZCDJFQ")),this.isShowPartition&&s.push("partitionValue"),this.secondStep.isNewPartition&&s.push("partition"),i=0,a=s;case 7:if(!(i<a.length)){e.next=17;break}return n=a[i],e.next=11,this.validateFieldSync(n);case 11:if(r=e.sent,!r||-1===t[n].indexOf(r)){e.next=14;break}return e.abrupt("return",!1);case 14:i++,e.next=7;break;case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validateFieldSync:function(e){var t=this;return new Promise((function(s){t.$refs.secondForm.validateField(e,(function(e){s(e)}))}))},fieldsValidate:function(){var e={length:{pattern:/^[0-9]+$/,message:this.$t("message.importToHive.LXWCHAR")},precision:{pattern:/^([1-9]\d*.?|0.)\d*$/,message:this.$t("message.importToHive.ZDJDSRYW")},scale:{pattern:/^[0-9]+$/,message:this.$t("message.importToHive.ZDXSWYDY")},comment:[{pattern:/^[\u4e00-\u9fa5\w]{1,100}$/,message:this.$t("message.importToHive.ZDZSZCZW")}]},t="";return this.secondStep.fields.forEach((function(s){for(var i=Object.keys(e),a=0;a<i.length;a++){var n=i[a],r=e[n],o=r.pattern,c=r.message;if(s[n]&&o&&!o.test(s[n]))return t=c,t}})),t},submit:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.beforeSubmit();case 2:if(t=e.sent,s=this.fieldsValidate(),!s){e.next=6;break}return e.abrupt("return",this.$Message.error(s));case 6:if(t){e.next=8;break}return e.abrupt("return",this.$Message.error(this.$t("message.importToHive.QQRSJKMCXX")));case 8:this.isShowOverwrite||(this.secondStep.isOverwrite=!1),i=this.secondStep.fields.map((function(e){return{name:e.fieldName.trim(),comment:e.comment,type:e.type,length:e.length,scale:e.scale,precision:e.precision,dateFormat:e.dateFormat}})),this.$emit("export",{firstStep:this.firstStep,secondStep:this.secondStep,isXls:this.isXlsType,columns:i,whetherRepeat:this.partitionManager});case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setNode:function(e){this.validator.isLeaf=e.isLeaf,this.firstStep.exportPath=e.path},emitTypeChange:function(){this.$emit("on-type-change",this.firstStep.type)},debounceValidateField:Object(r["debounce"])((function(e,t){t.$refs.secondForm.validateField(e,(function(){}))}),300),handleCommentClick:function(e){e.commentShow=!e.commentShow},handleFieldsTypeChange:function(e){"date"!==e.type||e.dateFormat||(e.dateFormat="yyyyMMdd")}}},y=v,w=(s("eefb"),Object(f["a"])(y,i,a,!1,null,null,null)),T=w.exports;t["a"]=T},b89a:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("dynamic-form",{ref:"form",attrs:{title:e.$t("message.workBench.body.setting.customVariable.title"),list:e.script.params.variable}})},a=[],n=s("3b1c"),r={components:{dynamicForm:n["a"]},props:{script:{type:Object,required:!0}},data:function(){return{}}},o=r,c=s("2877"),l=Object(c["a"])(o,i,a,!1,null,null,null);t["default"]=l.exports},b8b0:function(e,t,s){"use strict";var i=s("e799"),a=s.n(i);a.a},ba58:function(e,t,s){e.exports=s.p+"img/fuzhi.6eea336b.svg"},ba93:function(e,t,s){"use strict";var i=s("e4ef"),a=s.n(i);a.a},bb91:function(e,t,s){"use strict";s("1c01"),s("58b2"),s("8e6e"),s("f3e2"),s("d25f");var i=s("bd86"),a=(s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=(s("7f7f"),s("7514"),s("0d6d"),s("7138")),r=s("b593");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}t["a"]={data:function(){return{SUPPORTED_LANG_MODES:Object.freeze([{rule:/[表详情]|(Table\sdetails)/,executable:!1,isCanBeOpen:!0},{rule:/[建表向导]|(Table\screation\sguide)/,executable:!1,isCanBeOpen:!0},{rule:/\.(bi)$/i,executable:!1,logo:"fi-bi",isCanBeNew:!1,isCanBeOpen:!0},{rule:/\.(sql)$/i,lang:"hql",executable:!0,application:"spark",runType:"sql",ext:".sql",scriptType:"hive",abbr:"sql",logo:"fi-spark",isCanBeNew:!0,label:"Sql",isCanBeOpen:!0,flowType:"sparksql"},{rule:/\.(hql)$/i,lang:"hql",executable:!0,application:"hive",runType:"hql",ext:".hql",scriptType:"hql",abbr:"hql",logo:"fi-hive",isCanBeNew:!0,label:"Hive",isCanBeOpen:!0,flowType:"hql"},{rule:/\.(out)$/i,lang:"hql",executable:!0,application:"pipeline",runType:"pipeline",ext:".out",scriptType:"storage",abbr:"stor",logo:"fi-storage",isCanBeNew:!0,label:"Storage",isCanBeOpen:!0},{rule:/\.scala$/i,lang:"java",executable:!0,application:"spark",runType:"scala",ext:".scala",scriptType:"scala",abbr:"scala",logo:"fi-scala",isCanBeNew:!0,label:"Scala",isCanBeOpen:!0,flowType:"scala"},{rule:/\.scala$/i,lang:"java",executable:!0,application:"spark",runType:"function.mdq",ext:".scala",scriptType:"scala",abbr:"scala",logo:"fi-scala",isCanBeNew:!1,label:"Scala",isCanBeOpen:!0},{rule:/\.jdbc$/i,lang:"hql",executable:!0,application:"jdbc",runType:"jdbc",ext:".jdbc",scriptType:"jdbc",abbr:"jdbc",logo:"fi-jdbc",isCanBeNew:!0,label:"JDBC",isCanBeOpen:!0,flowType:"jdbc"},{rule:/\.python$/i,lang:"python",executable:!0,application:"python",runType:"python",ext:".python",scriptType:"python",abbr:"py",logo:"fi-python",isCanBeNew:!0,label:"Python",isCanBeOpen:!0,flowType:"python"},{rule:/\.py$/i,lang:"python",executable:!0,application:"spark",runType:"python",ext:".py",scriptType:"pythonSpark",abbr:"py",logo:"fi-spark-python",isCanBeNew:!0,label:"PythonSpark",isCanBeOpen:!0,flowType:"pyspark"},{rule:/\.r$/i,lang:"r",executable:!0,application:"spark",runType:"r",ext:".r",scriptType:"r",abbr:"r",logo:"fi-r",isCanBeNew:!0,label:"R",isCanBeOpen:!0},{rule:/\.sh$/i,lang:"sh",executable:!0,application:"shell",runType:"shell",ext:".sh",scriptType:"shell",abbr:"shell",logo:"fi-r",isCanBeNew:!0,label:"Shell",isCanBeOpen:!0,flowType:"shell"},{rule:/\.qmlsql$/i,lang:"hql",executable:!1,application:"spark",runType:"sql",ext:".qmlsql",scriptType:"qmlsql",abbr:"qmlsql",logo:"fi-spark",isCanBeNew:!1,label:"QMLSQL",isCanBeOpen:!0},{rule:/\.qmlpy$/i,lang:"python",executable:!1,application:"spark",runType:"python",ext:".qmlpy",scriptType:"qmlpy",abbr:"qmlpy",logo:"fi-python",isCanBeNew:!1,label:"QMLPy",isCanBeOpen:!0},{rule:/\.txt$/i,lang:"text",executable:!1,application:null,runType:null,ext:".txt",scriptType:"txt",abbr:"",logo:"fi-txt",isCanBeNew:!1,isCanBeOpen:!0},{rule:/\.log$/i,lang:"text",executable:!1,application:null,runType:null,ext:".log",scriptType:"txt",abbr:"",logo:"fi-log",isCanBeNew:!1,isCanBeOpen:!0},{rule:/\.xls$/i,logo:"fi-xls",isCanBeNew:!1,isCanBeOpen:!1},{rule:/\.xlsx$/i,logo:"fi-xlsx",isCanBeNew:!1,isCanBeOpen:!1},{rule:/\.csv$/i,logo:"fi-csv",isCanBeNew:!1,isCanBeOpen:!1},{rule:/\.jar$/i,logo:"fi-jar",isCanBeNew:!1,isCanBeOpen:!1}])}},beforeRouteLeave:function(e,t,s){if("function"===typeof this.beforeLeaveHook){var i=this.beforeLeaveHook();!1===i?s(!1):i&&i.then?i.then((function(e){s(e)})):s(!0)}else s(!0)},created:function(){},mounted:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{getUserName:function(){var e=n["a"].get("userInfo","SESSION");return e&&e.basic.username},getVsBiUrl:function(){var e=n["a"].get("baseInfo"),t=e.applications.find((function(e){return"visualis"===e.name}))||{};return t.url},getQualitisUrl:function(){var e=n["a"].get("baseInfo"),t=e.applications.find((function(e){return"qualitis"===e.name}))||{};return t.projectUrl},getProjectJson:function(){var e=n["a"].get("baseInfo"),t=e.applications.find((function(e){return"visualis"===e.name}))||{},s=t.enhanceJson;return s},getDataReportUrl:function(){var e=this.getProjectJson();return e?JSON.parse(e).dailyReport:""},getWaterMask:function(){var e=this.getProjectJson();return!e||JSON.parse(e).watermark},getRsDownload:function(){var e=this.getProjectJson();return!e||JSON.parse(e).rsDownload},getFAQUrl:function(){var e=n["a"].get("baseInfo"),t=e.DWSParams.faq;return t},getSupportModes:function(){return this.SUPPORTED_LANG_MODES},getLogManager:function(){var e=n["a"].get("baseInfo");if(!e.userInfo.role||!e.userInfo.role[0])return!1;var t=e.userInfo.role.find((function(e){return"logAdmin"===e.name}));return!!t},getProjectList:function(){var e=n["a"].get("baseInfo");return e.applications},getCommonProjectId:function(e,t){return r["a"].fetch("/dss/getAppjointProjectIDByApplicationName",{projectID:t.projectID,applicationName:e},"get").then((function(e){window.console.log(e),localStorage.setItem("appJointProjectId",e.appJointProjectID)}))},gotoCommonIframe:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i,a,r,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=o.length>1&&void 0!==o[1]?o[1]:{},i=n["a"].get("baseInfo"),a=i.applications.find((function(e){return e.name===t}))||{},r="",!s.projectID){e.next=10;break}return e.next=7,this.getCommonProjectId(t,s);case 7:r=a.projectUrl,e.next=12;break;case 10:localStorage.removeItem("appJointProjectId"),r=a.homepageUrl;case 12:window.console.log(r,"url"),0===Object.keys(a).length?this.$Message.warning(this.$t("message.constants.warning.comingSoon")):a.ifIframe?this.$router.push({name:"commonIframe",query:c({},s,{url:r,type:t})}):this.$router.push({path:r,query:s});case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}}},bbdc:function(e,t,s){e.exports=s.p+"img/no-data.d34e5d62.svg"},bbdf:function(e,t,s){"use strict";s.d(t,"b",(function(){return W})),s.d(t,"c",(function(){return V})),s.d(t,"a",(function(){return X}));var i,a,n=s("bd86"),r=s("acd1"),o=s.n(r),c=s("685e"),l=s.n(c),d=s("0626"),u=s.n(d),h=s("5a27"),p=s.n(h),f=s("0115"),m=s.n(f),g=s("5d01"),b=s.n(g),v=s("cc87"),y=s.n(v),w=s("025f"),T=s.n(w),S=s("f727"),E=s.n(S),N=s("ea56"),C=s.n(N),k=s("44d1"),O=s.n(k),x=s("0262"),I=s.n(x),R=s("56ba"),D=s.n(R),L=s("0886"),A=s.n(L),P=s("f702"),_=s.n(P),$=s("8471"),M=s.n($),j=s("fedb"),F=s.n(j),B=s("e886"),H=s.n(B),K=s("56e7"),U=s.n(K),W={SHELL:"linkis.shell.sh",HQL:"linkis.hive.hql",SPARKSQL:"linkis.spark.sql",SPARKPY:"linkis.spark.py",SCALA:"linkis.spark.scala",JDBC:"linkis.jdbc.jdbc",PYTHON:"linkis.python.python",CONNECTOR:"linkis.control.empty",DISPLAY:"linkis.appjoint.visualis.display",DASHBOARD:"linkis.appjoint.visualis.dashboard",SENDMAIL:"linkis.appjoint.sendemail",EVENTCHECKERF:"linkis.appjoint.eventchecker.eventsender",EVENTCHECKERW:"linkis.appjoint.eventchecker.eventreceiver",DATACHECKER:"linkis.appjoint.datachecker",RMBSENDER:"azkaban.rmbsender",FLOW:"workflow.subflow",EXCHANGE:"linkis.data.exchange",QUALITIS:"linkis.appjoint.qualitis",DATALINKDXP:"dxp.dxp-console"},V=(i={},Object(n["a"])(i,W.SHELL,"shell"),Object(n["a"])(i,W.HQL,"hql"),Object(n["a"])(i,W.SPARKSQL,"sparksql"),Object(n["a"])(i,W.SPARKPY,"pyspark"),Object(n["a"])(i,W.SCALA,"scala"),Object(n["a"])(i,W.PYTHON,"python"),Object(n["a"])(i,W.JDBC,"jdbc"),i),X=(a={},Object(n["a"])(a,W.JDBC,{icon:H.a,class:{jdbc:!0}}),Object(n["a"])(a,W.SHELL,{icon:o.a,class:{shell:!0}}),Object(n["a"])(a,W.HQL,{icon:b.a,class:{hivesql:!0}}),Object(n["a"])(a,W.SPARKSQL,{icon:m.a,class:{sql:!0}}),Object(n["a"])(a,W.SPARKPY,{icon:p.a,class:{sparkPython:!0}}),Object(n["a"])(a,W.SCALA,{icon:A.a,class:{scala:!0}}),Object(n["a"])(a,W.PYTHON,{icon:F.a,class:{python:!0}}),Object(n["a"])(a,W.CONNECTOR,{icon:T.a,class:{connect:!0}}),Object(n["a"])(a,W.DISPLAY,{icon:O.a,class:{display:!0}}),Object(n["a"])(a,W.DASHBOARD,{icon:I.a,class:{dashboard:!0}}),Object(n["a"])(a,W.SENDMAIL,{icon:D.a,class:{sendmail:!0}}),Object(n["a"])(a,W.EVENTCHECKERF,{icon:u.a,class:{eventchecker:!0}}),Object(n["a"])(a,W.EVENTCHECKERW,{icon:y.a,class:{veceive:!0}}),Object(n["a"])(a,W.DATACHECKER,{icon:E.a,class:{datacheck:!0}}),Object(n["a"])(a,W.RMBSENDER,{icon:C.a,class:{send:!0}}),Object(n["a"])(a,W.FLOW,{icon:l.a,class:{flow:!0}}),Object(n["a"])(a,W.EXCHANGE,{icon:_.a,class:{exchange:!0}}),Object(n["a"])(a,W.QUALITIS,{icon:M.a,class:{qualitis:!0}}),Object(n["a"])(a,W.DATALINKDXP,{icon:U.a,class:{dxp:!0}}),a)},bbea:function(e,t,s){e.exports=s.p+"img/app.be0fd87e.svg"},bc96:function(e,t,s){e.exports=s.p+"img/xitongguanlitai.c2f2381b.svg"},bf32:function(e,t,s){},bfb0:function(e,t,s){"use strict";var i=s("a720"),a=s.n(i);a.a},c08f:function(e,t,s){"use strict";s.r(t),t["default"]={name:"DateReport",dispatchs:{},component:function(){return Promise.resolve().then(s.bind(null,"843e"))}}},c122:function(e,t,s){"use strict";s.r(t);s("ac6a"),s("f3e2");var i=s("b593"),a=s("a026");t["default"]={name:"HiveSidebar",events:["showHive","getAllDbsAndTables","HiveSidebar:getDatabase","HiveSidebar:getTables","HiveSidebar:getTablePartitions","HiveSidebar:deletedAndRefresh"],dispatchs:["Workbench:add","Workbench:run","Workbench:pasteInEditor","HiveSidebar:getTables","WorkSidebar:showTree","HdfsSidebar:showTree"],data:{API_PATH:"http://localhost:8088/api/rest_j/v1/"},methods:{getAllDbsAndTables:function(e,t){i["a"].fetch("/datasource/all","get").then((function(e){var s=[];e.dbs&&e.dbs.forEach((function(e){e.tables.length&&e.tables.forEach((function(t){s.push({meta:"tbname",value:t.tableName,caption:e.databaseName+"."+t.tableName,documentation:"the name of a table, which belong to the db: ".concat(e.databaseName,".")})})),s.push({meta:"dbname",value:e.databaseName,caption:e.databaseName,documentation:"the name of a database."})})),t({list:s,isError:!1})})).catch((function(e){t({list:[],isError:!0})}))},showHive:function(e,t){var i=a["default"].extend(s("ca91").default),n=new i;t(n)}},component:function(){return Promise.resolve().then(s.bind(null,"ca91"))}}},c154:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-process"},[s("div",{staticClass:"process-tabs"},[s("div",{staticClass:"process-tab"},e._l(e.tabs,(function(t,i){return s("div",{key:i,staticClass:"process-tab-item",class:{active:i===e.active},on:{click:function(t){return e.choose(i)},mouseenter:function(e){if(e.target!==e.currentTarget)return null;t.isHover=!0},mouseleave:function(e){if(e.target!==e.currentTarget)return null;t.isHover=!1}}},[s("div",[s("img",{staticClass:"tab-icon",class:e.nodeImg[t.node.type].class,attrs:{src:e.nodeImg[t.node.type].icon,alt:""}}),s("div",{staticClass:"process-tab-name",attrs:{title:t.title}},[e._v(e._s(t.title))]),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.isHover&&t.node&&t.node.isChange,expression:"!item.isHover && item.node && item.node.isChange"}],staticClass:"process-tab-unsave-icon fi-radio-on2"}),t.isHover&&t.close?s("Icon",{attrs:{type:"md-close"},on:{click:function(t){return t.stopPropagation(),e.remove(i)}}}):e._e()],1)])})),0),s("div",{staticClass:"process-container"},[e._l(e.tabs,(function(t,i){return["Process"===t.type?s("Process",{directives:[{name:"show",rawName:"v-show",value:i===e.active,expression:"index===active"}],key:i,ref:"process",refInFor:!0,attrs:{"import-replace":!1,"flow-id":t.data.flowId,version:t.data.version,"project-version-i-d":e.query.projectVersionID,readonly:t.data.readonly,tabs:e.tabs,"open-files":e.openFiles},on:{"node-dblclick":function(t){return e.dblclickNode(i,arguments)},isChange:function(t){return e.isChange(i,arguments)},"save-node":e.saveNode,"check-opened":e.checkOpened,deleteNode:e.deleteNode,saveBaseInfo:e.saveBaseInfo,updateWorkflowList:function(t){return e.$emit("updateWorkflowList")}}}):e._e(),"IDE"===t.type?s("Ide",{directives:[{name:"show",rawName:"v-show",value:i===e.active,expression:"index===active"}],key:i,attrs:{parameters:t.data,node:t.node,"in-flows-index":i},on:{save:function(t){return e.saveIDE(i,arguments)}}}):e._e(),"Iframe"===t.type?s("commonIframe",{directives:[{name:"show",rawName:"v-show",value:i===e.active,expression:"index===active"}],key:i,attrs:{parametes:t.data,node:t.node},on:{save:e.saveNode}}):e._e(),"DiaoDu"===t.type?s("div",{directives:[{name:"show",rawName:"v-show",value:i===e.active,expression:"index===active"}],key:i,staticStyle:{width:"100%",height:"100%"}}):e._e()]}))],2)])])},a=[],n=(s("7514"),s("f3e2"),s("ac6a"),s("456d"),s("57e7"),s("6d67"),s("6762"),s("2fdb"),s("d25f"),s("2ef0")),r=s("b593"),o=s("0971"),c=s("a015"),l=s("f7c4"),d=s("466c"),u=s("bbdf"),h={components:{Process:c["default"],Ide:l["default"].component,commonIframe:d["default"].component.iframe},props:{query:{type:Object,default:function(){}}},data:function(){return{tabs:[{title:this.$t("message.workflow.workflow"),type:"Process",close:!1,data:this.query,node:{isChange:!1,type:"workflow.subflow"},key:"工作流",isHover:!1}],active:0,openFiles:{},nodeImg:u["a"]}},mounted:function(){var e=this;this.getCache().then((function(t){t&&(e.tabs=t)})),this.updateProjectCacheByActive()},methods:{gotoAction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;e&&this.$router.go(e)},choose:function(e){this.active=e,this.updateProjectCacheByActive()},remove:function(e){var t=this,s=this.tabs[e],i=this.openFiles[s.key]||[],a=this.tabs.filter((function(e){return i.includes(e.key)&&e.node.isChange}));if(a.length>0&&s.node.type===u["b"].FLOW){var n="<p>该工作流下还存在子节点未保存，是否关闭？</p>";s.node.isChange&&(n="<p>该工作流未保存并且还存在子节点未保存，是否关闭？</p>"),this.$Modal.confirm({title:"关闭提示",content:n,okText:"确认关闭",cancelText:"取消",onOk:function(){t.tabs.splice(e,1),t.choose(t.tabs.length-1),t.updateProjectCacheByTab()},onCancel:function(){}})}else this.tabs.splice(e,1),this.choose(this.tabs.length-1),this.updateProjectCacheByTab()},check:function(e){var t=this;if(e){var s=!0;return this.tabs.map((function(i){if(e.key===i.key)s=!0;else{if(t.tabs.length>10)return void(s=!1);s=!0}})),s||this.$Message.warning("您已打开10个节点（超出最大限额），请关闭其他节点再打开！"),s}return!(this.tabs.length>10)||(this.$Message.warning("您已打开10个节点（超出最大限额），请关闭其他节点再打开！"),!1)},dblclickNode:function(e,t){var s=this;if(this.check(t[0][0])){for(var i=t[0][0],a=0;a<this.tabs.length;a++)if(i.type==u["b"].SHELL){if(this.tabs[a].node&&this.tabs[a].node.createTime===i.createTime&&this.tabs[a].node.key===i.key)return this.choose(a)}else if(this.tabs[a].key===i.key)return this.choose(a);if(-1!==[u["b"].SPARKSQL,u["b"].HQL,u["b"].SPARKPY,u["b"].SHELL,u["b"].SCALA,u["b"].PYTHON,u["b"].JDBC].indexOf(i.type)){var o=i.resources?i.resources.length:0;if(o&&i.jobContent&&i.jobContent.script){var c=i.resources[0].resourceId,l=i.resources[0].fileName,d=i.resources[0].version;r["a"].fetch("/filesystem/openScriptFromBML",{fileName:l,resourceId:c,version:d},"get").then((function(e){var t=e.scriptContent,a={};a.variable=s.convertSettingParamsVariable(e.metadata),a.configuration=!i.params||Object(n["isEmpty"])(i.params.configuration)?{special:{},runtime:{},startup:{}}:{special:i.params.configuration.special||{},runtime:i.params.configuration.runtime||{},startup:i.params.configuration.startup||{}},s.getTabsAndChoose({type:"IDE",node:i,data:{content:t,params:a}})}))}else{var h=i.jobContent&&i.jobContent.code?i.jobContent.code:"",p={};p.variable=this.convertSettingParamsVariable({}),p.configuration=!i.params||Object(n["isEmpty"])(i.params.configuration)?{special:{},runtime:{},startup:{}}:{special:i.params.configuration.special||{},runtime:i.params.configuration.runtime||{},startup:i.params.configuration.startup||{}},this.getTabsAndChoose({type:"IDE",node:i,data:{content:h,params:p}})}}if(i.type==u["b"].FLOW){var f=i.jobContent?i.jobContent.embeddedFlowId:"";this.getTabsAndChoose({type:"Process",node:i,data:{flowId:f}})}if([u["b"].DISPLAY,u["b"].DASHBOARD,u["b"].QUALITIS].includes(i.type)){var m=i.jobContent?i.jobContent.id:"";this.getTabsAndChoose({type:"Iframe",node:i,data:{id:m}})}}},getTabsAndChoose:function(e){var t=e.type,s=e.node,i=e.data;this.$set(s,"isChange",!1),this.tabs.push({type:t,key:s.key,title:s.title,close:!0,node:s,data:i,isHover:!1}),this.openFileAction(s),this.choose(this.tabs.length-1),this.updateProjectCacheByTab()},openFileAction:function(e){var t=this,s=this.tabs[this.active];Object.keys(this.openFiles).includes(s.key)?Object.keys(this.openFiles).map((function(i){i==s.key&&(t.openFiles[i].includes(e.key)||t.openFiles[i].push(e.key))})):this.openFiles[s.key]=[e.key]},saveIDE:function(e,t){if(this.check()){var s=this.tabs[e].node;this.saveNode(t,s)}},saveNode:function(e,t){var s=e,i=t;Object(n["isArguments"])(e)&&(s=e[0],i=e[1]),t.jobContent||(t.jobContent={}),t.createTime!==i.createTime&&t.key!==i.key||(t.jobContent.script=s.fileName,delete t.jobContent.code,t.resources||(t.resources=[]),t.resources.length>0&&t.resources[0].fileName===s.fileName?t.resources[0]=s:t.resources.unshift(s),this.$refs.process.map((function(e){e.json.nodes.forEach((function(e){e.createTime===i.createTime&&e.key===i.key&&(e.jobContent=t.jobContent,e.resources=t.resources,e.params=t.params)}))})))},convertSettingParamsVariable:function(e){var t=Object(n["isEmpty"])(e.variable)?[]:o["a"].convertObjectToArray(e.variable);return t},saveTip:function(e,t){this.$Modal.confirm({title:"返回提醒",content:"<p>该工作流已发生变化还未保存, 是否保存？</p>",okText:"保存",cancelText:"不保存",onOk:e,onCancel:t})},isChange:function(e,t){this.tabs[e].node&&(this.tabs[e].node.isChange=t[0])},beforeLeaveHook:function(){},checkOpened:function(e,t){var s=this.tabs.find((function(t){return t.key===e.key}));t(!!s)},deleteNode:function(e){for(var t=null,s=0;s<this.tabs.length;s++)this.tabs[s].key===e.key&&(t=s);t&&this.remove(t)},saveBaseInfo:function(e){this.tabs=this.tabs.map((function(t){return t.key===e.key&&(t.title=e.title),t}))},updateProjectCacheByTab:function(){this.dispatch("IndexedDB:updateProjectCache",{projectID:this.$route.query.projectID,key:"tabList",value:{tab:this.tabs,token:"flowId",sKey:"tab",sValue:this.query.flowId},isDeep:!0})},updateProjectCacheByActive:function(){this.dispatch("IndexedDB:updateProjectCache",{projectID:this.$route.query.projectID,key:"tabList",value:{active:this.active,token:"flowId",sKey:"active",sValue:this.query.flowId},isDeep:!0})},getCache:function(){var e=this;return new Promise((function(t){e.dispatch("IndexedDB:getProjectCache",{projectID:e.$route.query.projectID,cb:function(s){var i=s&&s.tabList||[],a=null;i.forEach((function(t){+t.flowId===+e.query.flowId&&(a=t.tab,e.active=t.active||0)})),t(a)}})}))}}},p=h,f=(s("7c22"),s("2877")),m=Object(f["a"])(p,i,a,!1,null,null,null);t["default"]=m.exports},c2d7:function(e,t,s){"use strict";var i=s("91ed"),a=s.n(i);a.a},c554:function(e,t,s){e.exports=s.p+"img/associate.a71c9f21.svg"},c670:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"global-valiable"},[s("Row",{staticClass:"global-valiable-control"},[s("Button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.handleSubmit("formDynamic")}}},[e._v(e._s(e.isEdit?e.$t("message.constants.save"):e.$t("message.constants.edit")))]),s("Button",{on:{click:e.handleCancel}},[e._v(e._s(e.$t("message.constants.cancel")))])],1),s("Form",{ref:"formDynamic",staticClass:"global-valiable-form",style:{"max-height":e.height-94+"px"},attrs:{model:e.formDynamic,"label-width":100}},e._l(e.formDynamic.items,(function(t,i){return s("FormItem",{key:i,attrs:{label:e.$t("message.globalValiable.globalValiable")+(i+1)+"："}},[s("Row",[s("Col",{attrs:{span:"10"}},[s("FormItem",{attrs:{prop:"items."+i+".key",rules:[{required:!0,message:e.$t("message.globalValiable.rules.first.required",{text:i+1}),trigger:"blur"},{pattern:/^[a-zA-z][^\s\u4e00-\u9fa5]*$/,message:""+e.$t("message.globalValiable.rules.first.letterTypeLimit")},{validator:e.validateKey,trigger:"blur"}]}},[s("Input",{attrs:{type:"text",maxlength:50,placeholder:e.$t("message.globalValiable.rules.first.placeholder"),disabled:!e.isEdit},model:{value:t.key,callback:function(s){e.$set(t,"key",s)},expression:"item.key"}})],1)],1),s("Col",{staticClass:"global-valiable-tc",attrs:{span:"1"}},[e._v("\n        ：\n        ")]),s("Col",{attrs:{span:"10"}},[s("FormItem",{attrs:{prop:"items."+i+".value",rules:[{required:!0,message:e.$t("message.globalValiable.rules.second.required",{text:i+1}),trigger:"blur"}]}},[s("Input",{attrs:{type:"text",maxlength:64,placeholder:e.$t("message.globalValiable.rules.second.placeholder"),disabled:!e.isEdit},model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"item.value"}})],1)],1),s("Col",{staticClass:"global-valiable-remove",attrs:{span:"3"}},[e.isEdit?s("Button",{attrs:{type:"error",size:"small"},on:{click:function(s){return e.handleRemove(t,i)}}},[e._v(e._s(e.$t("message.constants.remove")))]):e._e()],1)],1)],1)})),1),s("Row",{staticClass:"global-valiable-add"},[s("Col",{attrs:{span:"12"}},[e.isEdit?s("Button",{attrs:{type:"dashed",long:"",icon:"md-add"},on:{click:e.handleAdd}},[e._v(e._s(e.$t("message.globalValiable.addArgs")))]):e._e()],1)],1),e.formDynamic.items.length?e._e():s("div",{staticClass:"global-valiable-empty",style:{height:e.height-52+"px"}},[e._v(e._s(e.$t("message.globalValiable.emptyDataText")))]),s("detele-modal",{ref:"killModal",attrs:{loading:e.loading},on:{delete:e.handleRemove}})],1)},a=[],n=(s("7f7f"),s("6d67"),s("7514"),s("9865"),s("57e7"),s("b593")),r=s("7138"),o=s("442d"),c=s("7b73"),l={components:{deteleModal:c["a"]},mixins:[o["default"].mixin],data:function(){var e=this;return{current:null,currentIndex:0,formDynamic:{items:[]},loading:!1,isEdit:!1,height:0,validateKey:function(t,s,i){var a=t.field,n=a.slice(a.indexOf(".")+1,a.lastIndexOf(".")),r=e.formDynamic.items.find((function(e,t){return e.key===s&&n!=t}));r&&i(new Error(e.$t("message.globalValiable.sameName"))),i()}}},mounted:function(){this.height=this.$route.query.height,this.getGlobalValiableList()},methods:{getGlobalValiableList:function(){var e=this;n["a"].fetch("/variable/listGlobalVariable","get").then((function(t){e.formDynamic.items=t.globalVariables.map((function(e,t){return Object.assign(e)})),r["a"].get("isGlobalVariableChange")&&e.dispatch("IndexedDB:updateGlobalCache",{id:e.getUserName(),variableList:t.globalVariables})}))},handleSubmit:function(e){var t=this;this.isEdit?this.formDynamic.items.length?this.$refs[e].validate((function(e){e?t.save():t.$Message.error(t.$t("message.globalValiable.error.validate"))})):this.save():this.isEdit=!0},save:function(){var e=this;this.loading=!0,n["a"].fetch("/variable/saveGlobalVariable ",{globalVariables:this.formDynamic.items}).then((function(t){e.loading=!1,e.isEdit=!1,e.$Message.success(e.$t("message.globalValiable.success.update")),e.getGlobalValiableList(),r["a"].set("isGlobalVariableChange",!0)})).catch((function(t){e.loading=!1}))},handleAdd:function(){this.formDynamic.items.push({key:"",value:""})},handleRemove:function(e,t){this.formDynamic.items.splice(t,1)},handleCancel:function(){this.isEdit=!1}}},d=l,u=(s("3fd6"),s("2877")),h=Object(u["a"])(d,i,a,!1,null,null,null);t["default"]=h.exports},c6f0:function(e,t,s){"use strict";s.r(t),t["default"]={name:"CommonIFrame",component:function(){return Promise.resolve().then(s.bind(null,"74a6"))}}},c8b4:function(e,t,s){},ca0d:function(e,t,s){"use strict";var i=s("d44b"),a=s.n(i);a.a},ca12:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"we-tag"},[e._l(e.formattedTag(),(function(t,i){return s("div",{key:i,staticClass:"we-tag-content"},[s("span",{staticClass:"we-input-label"},[e._v(e._s(t))]),s("Icon",{staticClass:"we-tag-content-close",attrs:{type:"ios-close"},on:{click:function(s){return e.handleDelete(t)}}})],1)})),e.isAddInputShow?s("input",{directives:[{name:"model",rawName:"v-model",value:e.addLabel,expression:"addLabel"}],ref:"addInput",staticClass:"we-tag-add-input",attrs:{type:"text"},domProps:{value:e.addLabel},on:{blur:e.handleBlur,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),t.preventDefault(),e.handleEnter(t))},input:function(t){t.target.composing||(e.addLabel=t.target.value)}}}):s("button",{staticClass:"we-tag-add-btn",on:{click:e.changeAddTag}},[e._v(e._s(e.newLabel))])],2)},a=[],n=(s("28a5"),{props:{tagList:String,newLabel:{type:String,default:"新增标签"}},data:function(){return{isAddInputShow:!1,addLabel:""}},methods:{changeAddTag:function(){var e=this;this.isAddInputShow=!0,this.$nextTick((function(){e.$refs.addInput.focus()}))},handleBlur:function(){this.addLabel&&this.$emit("add-tag",this.addLabel),this.isAddInputShow=!1,this.addLabel=""},handleEnter:function(){this.isAddInputShow=!1},handleDelete:function(e){this.$emit("delete-tag",e)},formattedTag:function(){return this.tagList?this.tagList.split(","):[]}}}),r=n,o=(s("fd20"),s("2877")),c=Object(o["a"])(r,i,a,!1,null,null,null);t["a"]=c.exports},ca5a6:function(e,t,s){},ca65:function(e,t,s){"use strict";var i=s("08c0"),a=s.n(i);a.a},ca91:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"we-side-bar"},[s("we-navbar",{ref:"navbar",attrs:{"nav-list":e.navList,"add-title":e.$t("message.newNavBar.createdTitle")},on:{"on-add":e.openAddTab,"on-refresh":e.reflesh,"text-change":e.setSearchText}}),e.tableList.length?e._e():s("Spin",{attrs:{size:"large",fix:""}}),s("we-hive-list",{staticClass:"we-side-bar-content v-hivedb-list",attrs:{data:e.tableList,"filter-text":e.searchText,loading:e.isPending},on:{"we-click":e.onClick,"we-contextmenu":e.onContextMenu,"we-dblclick":e.handledbclick}}),s("we-menu",{ref:"contextMenu",attrs:{id:"hive"}},["db"===e.currentType?[s("we-menu-item",{on:{select:e.copyName}},[e._v("\n        "+e._s(e.$t("message.database.contextMenu.db.copyName"))+"\n      ")]),s("we-menu-item",{on:{select:e.pasteName}},[e._v("\n        "+e._s(e.$t("message.database.contextMenu.db.pasteName"))+"\n      ")]),s("we-menu-item",{staticClass:"ctx-divider"}),s("we-menu-item",{on:{select:e.reflesh}},[e._v("\n        "+e._s(e.$t("message.constants.refresh"))+"\n      ")])]:e._e(),"tb"===e.currentType?[e.model?e._e():s("we-menu-item",{on:{select:e.queryTable}},[e._v(e._s(e.$t("message.database.contextMenu.tb.queryTable")))]),e.model?e._e():s("we-menu-item",{on:{select:e.openDeleteDialog}},[e._v(e._s(e.$t("message.database.contextMenu.tb.deleteTable")))]),s("we-menu-item",{on:{select:e.describeTable}},[e._v(e._s(e.$t("message.database.contextMenu.tb.viewTable")))]),s("we-menu-item",{staticClass:"ctx-divider"}),s("we-menu-item",{on:{select:e.copyName}},[e._v(e._s(e.$t("message.database.contextMenu.tb.copyName")))]),s("we-menu-item",{on:{select:e.pasteName}},[e._v(e._s(e.$t("message.database.contextMenu.tb.pasteName")))]),s("we-menu-item",{on:{select:e.copyAllColumns}},[e._v(e._s(e.$t("message.database.contextMenu.tb.copyAllColumns")))]),s("we-menu-item",{staticClass:"ctx-divider"}),s("we-menu-item",{on:{select:e.reflesh}},[e._v(e._s(e.$t("message.constants.refresh")))])]:e._e(),"field"===e.currentType?[s("we-menu-item",{on:{select:e.copyName}},[e._v(e._s(e.$t("message.database.contextMenu.field.copyColumnsName")))]),s("we-menu-item",{on:{select:e.pasteName}},[e._v(e._s(e.$t("message.database.contextMenu.field.pasteName")))])]:e._e()],2),s("we-hive-table-export",{ref:"exportDialog",attrs:{width:490,"table-detail":e.currentAcitved,"db-list":e.filterDbList,tree:e.fileTree,"load-data-fn":e.loadDataFn,"filter-node":e.filterNode},on:{"get-columns":e.asyncGetTableColumns,"get-tables":e.getTables,"get-tree":e.getFileTree,"get-partitions":e.getPartitions,"get-size":e.getPartitionsSize,export:e.exportTable}}),s("delete-dialog",{ref:"deleteDialog",attrs:{loading:e.isDeleting},on:{delete:e.deleteTable}})],1)},a=[],n=(s("9865"),s("28a5"),s("5df3"),s("7514"),s("6d67"),s("7f7f"),s("96cf"),s("3b8d")),r=(s("ac6a"),s("f3e2"),s("2ef0")),o=s("c122"),c=s("7138"),l=s("b593"),d=s("0971"),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"hiveRoot"},[s("we-hive-list",{attrs:{data:e.data,title:e.title}}),e.loading?s("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)},h=[],p=(s("57e7"),s("d25f"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",e._l(e.data,(function(t,i){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.isVisible||"field"===t.dataType,expression:"item.isVisible || item.dataType === 'field'"}],key:i,staticClass:"v-hiveColumn",attrs:{title:e.getTitle(t)},on:{click:function(s){return s.stopPropagation(),e.dispatch(s,"we-click",t,i)},contextmenu:function(s){return s.preventDefault(),s.stopPropagation(),e.dispatch(s,"we-contextmenu",t,i)},mousedown:function(e){e.preventDefault()},dblclick:function(s){return s.preventDefault(),s.stopPropagation(),e.dispatch(s,"we-dblclick",t,i)}}},[s("span",{class:e.getDBCls(t)}),s("div",{staticClass:"inline-box"},[s("span",{staticClass:"v-ellipsis"},[e._v(e._s(t.name))]),e._l(t.children,(function(i,a){return s("ul",{directives:[{name:"show",rawName:"v-show",value:t.isOpen&&i.isVisible,expression:"item.isOpen && table.isVisible"}],key:a,staticClass:"v-hiveColumn",attrs:{title:e.getTitle(i)},on:{click:function(t){return t.stopPropagation(),e.dispatch(t,"we-click",i,a)},contextmenu:function(t){return t.preventDefault(),t.stopPropagation(),e.dispatch(t,"we-contextmenu",i,a)},mousedown:function(e){e.preventDefault()},dblclick:function(t){return t.preventDefault(),t.stopPropagation(),e.dispatch(t,"we-dblclick",i,a)}}},[s("span",{class:e.getDBCls(i)}),s("div",{staticClass:"inline-box"},[s("span",{staticClass:"v-ellipsis"},[e._v(e._s(i.name))]),e._l(i.children,(function(t,a){return s("li",{directives:[{name:"show",rawName:"v-show",value:i.isOpen,expression:"table.isOpen"}],key:a,staticClass:"v-hiveColumn",attrs:{title:e.getTitle(i)},on:{click:function(s){return s.stopPropagation(),e.dispatch(s,"we-click",t,a)},contextmenu:function(s){return s.preventDefault(),s.stopPropagation(),e.dispatch(s,"we-contextmenu",t,a)},mousedown:function(e){e.preventDefault()},dblclick:function(s){return s.preventDefault(),s.stopPropagation(),e.dispatch(s,"we-dblclick",t,a)}}},[100==a?s("div",{attrs:{title:e.$t("message.hiveTableDesc.viewTableColumns")}},[s("span",{staticClass:"v-hivetable-text"},[e._v(e._s(e.$t("message.hiveTableDesc.viewTableColumns")))])]):a>100?s("div"):s("div",[s("span",{class:e.getDBCls(t)}),s("span",{staticClass:"v-hivetable-type",attrs:{title:t.type}},[e._v("["+e._s(t.type)+"]")]),s("span",{staticClass:"v-hivetable-text",attrs:{title:t.name}},[e._v(e._s(t.name))])])])}))],2)])}))],2)])})),0)}),f=[],m={name:"WeHiveList",props:{data:Array,title:{type:String,default:""}},data:function(){return{root:null}},created:function(){var e=this.$parent;this.root=e.isRoot?e:e.root},methods:{dispatch:function(e,t,s,i){this.root.$emit(t,{ev:e,item:s,index:i})},getTitle:function(e){return this.title?e[this.title]:""},getDBCls:function(e){var t=e.isOpen?e.iconCls+" open":e.iconCls;return t}}},g=m,b=(s("cd40"),s("2877")),v=Object(b["a"])(g,p,f,!1,null,null,null),y=v.exports,w={name:"WeHive",components:{weHiveList:y},props:{data:Array,title:{type:String,default:""},filterText:{type:String,default:""},loading:{type:Boolean,default:!1}},watch:{filterText:function(e){this.onDidChange()}},created:function(){this.isRoot=!0,this.onDidChange=Object(r["debounce"])(this.filter,500),this.onDidChange()},methods:{filter:function(){var e=function e(t,s,i){t.forEach((function(t){t.isVisible=!0,t.children&&t.children.length&&"db"===t.dataType&&e(t.children,s,!1);var a=Object(r["find"])(t.children,(function(e){return e.isVisible})),n=t.name,o=s;i||(n=t.name.toLowerCase(),o=s.toLowerCase()),-1!==n.indexOf(o)||a||(t.isVisible=!1)}))};e(this.data,this.filterText,!1)}}},T=w,S=Object(b["a"])(T,u,h,!1,null,null,null),E=S.exports,N=E,C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{attrs:{width:e.width},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("p",{attrs:{slot:"header"},slot:"header"},[s("span",[e._v(e._s(e.$t("message.hiveTableExport.DCB")))])]),s("div",{staticClass:"we-table-export"},[[s("Steps",{staticClass:"we-table-export-step",attrs:{current:e.stepActive,size:"small"}},[s("step",{attrs:{title:e.$t("message.hiveTableExport.SZDCCS")}}),s("step",{attrs:{title:e.$t("message.hiveTableExport.SZDCLJ")}})],1)],s("div",[e.isLoading||e.isPartLoading?s("Spin",{attrs:{size:"large",fix:""}}):e._e(),s("Form",{directives:[{name:"show",rawName:"v-show",value:0===e.stepActive,expression:"stepActive === 0"}],ref:"stepOneForm",staticClass:"we-table-export-form",attrs:{model:e.stepOne,rules:e.stepOnerules,"label-width":80}},[s("FormItem",{attrs:{label:e.$t("message.hiveTableExport.SJKM"),prop:"dbName"}},[s("Select",{staticClass:"item-width",attrs:{placeholder:e.$t("message.hiveTableExport.QSRKM")},on:{"on-change":e.handleHiveDbChange},model:{value:e.stepOne.dbName,callback:function(t){e.$set(e.stepOne,"dbName",t)},expression:"stepOne.dbName"}},e._l(e.dbList,(function(e,t){return s("Option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),s("FormItem",{attrs:{label:e.$t("message.hiveTableExport.SJBM"),prop:"tbName"}},[s("Select",{staticClass:"item-width",attrs:{filterable:"",clearable:""},on:{"on-change":e.handleTbInput},model:{value:e.stepOne.tbName,callback:function(t){e.$set(e.stepOne,"tbName",t)},expression:"stepOne.tbName"}},e._l(e.activeDB.children,(function(t,i){return s("Option",{key:t.name+i,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1),e.activeTB&&!e.activeTB.isView?s("FormItem",{attrs:{label:e.$t("message.hiveTableExport.ZDXX"),prop:"column"}},[s("Select",{key:"column",staticClass:"item-width",attrs:{disabled:e.isUnExport,multiple:"",transfer:""},model:{value:e.stepOne.column,callback:function(t){e.$set(e.stepOne,"column",t)},expression:"stepOne.column"}},e._l(e.activeTB.children,(function(t,i){return s("Option",{key:t.name+i,attrs:{value:t.name,label:t.name}},[e._v("\n              "+e._s(t.name)+"\n            ")])})),1)],1):e._e(),e.activeTB&&e.activeTB.isPartition&&e.stepOne.tbName?s("FormItem",{attrs:{label:e.$t("message.hiveTableExport.FQXX"),prop:"partitions"}},[s("Select",{key:"part",staticClass:"item-width",attrs:{disabled:e.isUnExport},model:{value:e.stepOne.partitions,callback:function(t){e.$set(e.stepOne,"partitions",t)},expression:"stepOne.partitions"}},e._l(e.activeTB.partitions,(function(t,i){return s("Option",{key:i.label,attrs:{value:t.label,label:t.label}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1)],1):e._e(),s("FormItem",{attrs:{label:e.$t("message.hiveTableExport.DCGS"),prop:"exportType"}},[s("Select",{key:"type",staticClass:"item-width",attrs:{disabled:e.isUnExport},on:{"on-open-change":e.handleExportTypeOpen},model:{value:e.stepOne.exportType,callback:function(t){e.$set(e.stepOne,"exportType",t)},expression:"stepOne.exportType"}},e._l(e.libs.exportTypes,(function(t){return s("Option",{key:t.value,attrs:{label:t.label,value:t.value,disabled:e.stepOne.isLargerThenOneGb&&"xlsx"===t.value}})})),1)],1),"csv"===e.stepOne.exportType?s("FormItem",{attrs:{label:e.$t("message.hiveTableExport.FGF"),prop:"separator"}},[s("Select",{staticClass:"item-width",model:{value:e.stepOne.separator,callback:function(t){e.$set(e.stepOne,"separator",t)},expression:"stepOne.separator"}},e._l(e.libs.separator,(function(e){return s("Option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"csv"===e.stepOne.exportType?s("FormItem",{attrs:{label:e.$t("message.hiveTableExport.BMGS"),prop:"chartset"}},[s("Select",{attrs:{placeholder:e.$t("message.hiveTableExport.XZBMGS")},model:{value:e.stepOne.chartset,callback:function(t){e.$set(e.stepOne,"chartset",t)},expression:"stepOne.chartset"}},e._l(e.libs.chartset,(function(e){return s("Option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),s("FormItem",{attrs:{label:e.$t("message.hiveTableExport.KZTH"),prop:"nullValue"}},[s("Select",{model:{value:e.stepOne.nullValue,callback:function(t){e.$set(e.stepOne,"nullValue",t)},expression:"stepOne.nullValue"}},e._l(e.libs.replacementList,(function(t,i){return s("Option",{key:i,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1),s("FormItem",[s("Checkbox",{attrs:{disabled:e.isUnExport},model:{value:e.stepOne.isHasHeader,callback:function(t){e.$set(e.stepOne,"isHasHeader",t)},expression:"stepOne.isHasHeader"}},[e._v(e._s(e.$t("message.hiveTableExport.SXWBT")))])],1)],1),s("Form",{directives:[{name:"show",rawName:"v-show",value:1===e.stepActive,expression:"stepActive === 1"}],ref:"stepTwoForm",staticClass:"we-table-export-form",attrs:{model:e.stepTwo,rules:e.stepTworules,"label-width":80}},[s("FormItem",{attrs:{label:e.$t("message.hiveTableExport.LX"),prop:"type"}},[s("Select",{staticStyle:{width:"378px"},attrs:{placeholder:e.$t("message.hiveTableExport.QXZLX")},on:{"on-change":e.handleTypeChange},model:{value:e.stepTwo.type,callback:function(t){e.$set(e.stepTwo,"type",t)},expression:"stepTwo.type"}},e._l(e.libs.types,(function(e){return s("Option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),s("FormItem",{attrs:{label:e.$t("message.hiveTableExport.DCZ"),prop:"path"}},[s("directory-dialog",{attrs:{tree:e.tree,"load-data-fn":e.loadDataFn,"filter-node":e.filterNode,path:e.stepTwo.path,"fs-type":e.stepTwo.type},on:{"set-node":e.setNode}})],1),s("FormItem",{attrs:{label:e.$t("message.hiveTableExport.WJM"),prop:"fileName"}},[s("Input",{staticStyle:{width:"350px"},attrs:{placeholder:e.$t("message.hiveTableExport.TRDCWJMC")},model:{value:e.stepTwo.fileName,callback:function(t){e.$set(e.stepTwo,"fileName",t)},expression:"stepTwo.fileName"}}),s("span",[e._v("."+e._s(e.stepOne.exportType))])],1),"csv"===e.stepOne.exportType?s("FormItem",{attrs:{label:e.$t("message.hiveTableExport.FXMS")}},[s("RadioGroup",{model:{value:e.stepOne.isOverwrite,callback:function(t){e.$set(e.stepOne,"isOverwrite",t)},expression:"stepOne.isOverwrite"}},[s("Radio",{attrs:{label:e.$t("message.hiveTableExport.ZJ")}}),s("Radio",{attrs:{label:e.$t("message.hiveTableExport.FX")}})],1)],1):e._e(),"csv"!==e.stepOne.exportType?s("FormItem",{attrs:{label:e.$t("message.hiveTableExport.BM")}},[s("Input",{staticClass:"item-width",attrs:{placeholder:""+e.$t("message.hiveTableExport.QSR")+e.$t("message.hiveTableExport.BM")},model:{value:e.stepTwo.sheetName,callback:function(t){e.$set(e.stepTwo,"sheetName",t)},expression:"stepTwo.sheetName"}})],1):e._e()],1)],1)],2),s("template",{slot:"footer"},[0===e.stepActive?s("Button",{attrs:{disabled:e.activeTB&&e.activeTB.isPartMore||e.stepOne.isLargerThenFiveGb},on:{click:function(t){return e.submitForm("stepOneForm")}}},[e._v(e._s(e.$t("message.hiveTableExport.XYB")))]):e._e(),1===e.stepActive?s("Button",{attrs:{loading:e.isLoading},on:{click:e.prev}},[e._v(e._s(e.$t("message.hiveTableExport.SYB")))]):e._e(),1===e.stepActive?s("Button",{attrs:{loading:e.isLoading,type:"primary"},on:{click:function(t){return e.submitForm("stepTwoForm")}}},[e._v(e._s(e.$t("message.hiveTableExport.TJ")))]):e._e()],1)],2)},k=[],O=(s("6b54"),s("87b3"),s("4917"),s("c5f6"),s("ed93")),x={name:"ExportTable",components:{directoryDialog:O["a"]},props:{width:Number,tableDetail:{type:Object,default:function(){}},dbList:{type:Array,default:function(){return[]}},tree:{type:Array,default:function(){return[]}},loadDataFn:Function,filterNode:Function},data:function(){var e=this,t=function(t,s,i){e.activeTB.isView?i(new Error(e.$t("message.hiveTableExport.WFCZST"))):e.activeTB.isPartMore?i(new Error(e.$t("message.hiveTableExport.ZBZCDBDC"))):i()};return{show:!1,stepActive:0,isLoading:!1,isPartLoading:!1,stepOne:{dbName:"",tbName:"",filterTbList:[],separator:",",partitions:"",column:[],exportType:"",isHasHeader:!1,isOverwrite:this.$t("message.hiveTableExport.ZJ"),chartset:"utf-8",isLargerThenOneGb:!1,isLargerThenFiveGb:!1,nullValue:"NULL"},stepTwo:{type:"share",path:null,fileName:"",sheetName:""},libs:{types:[{label:this.$t("message.hiveTableExport.GXML"),value:"share"},{label:"HDFS",value:"hdfs"}],separator:[{label:this.$t("message.hiveTableExport.DH"),value:","},{label:this.$t("message.hiveTableExport.FH"),value:";"},{label:this.$t("message.hiveTableExport.ZBF"),value:"\\t"},{label:this.$t("message.hiveTableExport.KG"),value:"%20"}],exportTypes:[{label:"xlsx",value:"xlsx"},{label:"csv",value:"csv"}],chartset:[{label:"utf-8",value:"utf-8"},{label:"GBK",value:"GBK"}],replacementList:[{value:"NULL",label:"NULL"},{value:"BLANK",label:this.$t("message.hiveTableExport.KZFC")}]},stepOnerules:{dbName:[{required:!0,message:this.$t("message.hiveTableExport.XZSJK"),trigger:"change"}],tbName:[{required:!0,message:this.$t("message.hiveTableExport.XZB"),trigger:"change"},{validator:t,trigger:"change"}],separator:[{required:!0,message:this.$t("message.hiveTableExport.XZFGF"),trigger:"change"}],partitions:[{required:!0,message:this.$t("message.hiveTableExport.XZYGFQBDC"),trigger:"change"}],column:[{required:!0,message:this.$t("message.hiveTableExport.ZSXZYGZD"),trigger:"change",type:"array"}],exportType:[{required:!0,message:this.$t("message.hiveTableExport.XZDCGS"),trigger:"change"}],chartset:[{required:!0,message:this.$t("message.hiveTableExport.XZBMGS"),trigger:"change"}],nullValue:[{required:!0,message:this.$t("message.hiveTableExport.XZXYJKZTHDZ"),trigger:"change"}]},stepTworules:{type:[{required:!0,message:this.$t("message.hiveTableExport.XZDCLJDLX"),trigger:"change"}],path:[{required:!0,message:this.$t("message.hiveTableExport.XZDCLJ"),trigger:"change"}],fileName:[{required:!0,message:this.$t("message.hiveTableExport.DRDCDWJ"),trigger:"change"},{min:1,max:100,message:this.$t("message.hiveTableExport.CDZ"),trigger:"change"},{type:"string",pattern:/^[a-zA-Z0-9_\u4e00-\u9fa5]*$/,message:this.$t("message.hiveTableExport.WJMZZCZW"),trigger:"change"}]}}},computed:{activeDB:function(){var e=this;if(this.dbList&&this.stepOne.dbName){var t=Object(r["find"])(this.dbList,(function(t){return t.name===e.stepOne.dbName}));return t}return{children:[]}},activeTB:function(){var e=this;return this.activeDB&&this.stepOne.tbName?Object(r["find"])(this.activeDB.children,(function(t){return t.name===e.stepOne.tbName})):null},isUnExport:function(){return this.activeTB?!(this.stepOne.dbName&&this.stepOne.tbName)||this.activeTB.isPartMore||this.activeTB.isView:null}},methods:{open:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,s,i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.isLoading?this.$Message.warning(this.$t("message.hiveTableExport.CBDC")):(this.stepActive=0,this.reset(),this.tableDetail&&(t=this.tableDetail,s=t.dbName,i=t.name,Object.assign(this.stepOne,{exportType:"",dbName:s,tbName:i}),this.$nextTick((function(){a.getPartitionInfo()})))),this.show=!0;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),close:function(){this.show=!1},reset:function(){this.isLoading||(this.stepOne={dbName:"",dbOpt:[],tbName:"",path:null,separator:",",chartset:"utf-8",partitions:"",column:[],exportType:"",isHasHeader:!1,isOverwrite:this.$t("message.hiveTableExport.ZJ"),isLargerThenOneGb:!1,isLargerThenFiveGb:!1,nullValue:"NULL"},this.stepTwo={type:"share",path:null,fileName:"",sheetName:""},this.stepActive=0,this.$refs.stepOneForm.resetFields(),this.$refs.stepTwoForm.resetFields())},handleHiveDbChange:function(e){e&&(this.stepOne.tbName="",this.activeDB.children.length||this.$emit("get-tables",this.activeDB))},handleTbInput:function(e){e&&(this.stepOne.exportType="",Object(r["isEmpty"])(this.activeTB.children)?this.getPartitionInfo():this.parseTableColumn())},handleTypeChange:function(){this.getRootpath(),this.$emit("get-tree",this.stepTwo.type)},prev:function(){this.stepActive=0},submitForm:function(e){var t=this;this.$refs[e].validate((function(s){return!!s&&("stepOneForm"===e?(t.stepActive=1,t.stepTwo.path||t.getRootpath(),t.stepTwo.fileName||(t.stepTwo.fileName=t.stepOne.tbName),t.$emit("get-tree",t.stepTwo.type)):void t.exportTable())}))},handleExportTypeOpen:function(e){var t=this;if(e){var s=null;if(this.activeTB.isPartition){if(!this.stepOne.partitions)return this.$Message.warning(this.$t("message.hiveTableExport.XZFQ")),void this.$refs.stepOneForm.validateField("partitions");s=Object(r["find"])(this.activeTB.partitions,(function(e){return e.title=t.stepOne.partitions}))}this.parseSize(s).then((function(e){var s=t.determinesSizeOverflow(e,1),i=t.determinesSizeOverflow(e,5);if(t.$set(t.stepOne,"isLargerThenOneGb",s),t.$set(t.stepOne,"isLargerThenFiveGb",i),i)return t.$Message.warning(t.$t("message.hiveTableExport.BDXCG"))}))}},parseSize:function(e){var t=this;return new Promise((function(s){if(t.activeTB.isView)return s(0);if(!e&&t.activeTB.size)return s(t.activeTB.size);if(e&&e.size)return s(e.size);var i={database:t.stepOne.dbName,table:t.stepOne.tbName,partition:e};t.$emit("get-size",i,(function(e){s(e)}))}))},determinesSizeOverflow:function(e,t){if(0===e)return!1;var s=parseInt(e,10),i=s>=1e3*t&&e.match("MB"),a=s>=t&&e.match("GB"),n=e.match("TB");return!!(i||a||n)},exportTable:function(){var e=this.stepOne.column,t=e.length===this.activeTB.children.length?"*":e.toString();this.stepOne.isPartition=this.activeTB.isPartition,this.$emit("export",this.stepOne,this.stepTwo,t)},setNode:function(e){this.stepTwo.path=e.path},parseTableColumn:function(){var e=this;this.stepOne.column=[];var t=function(){e.$nextTick((function(){e.stepOne.column=Object(r["map"])(e.activeTB.children,(function(e){return e.name}))}))};Object(r["isEmpty"])(this.activeTB.children)?(this.isLoading=!0,this.$emit("get-columns",{item:this.activeTB,isOpen:!1,async:!0},(function(){t(),e.isLoading=!1}))):t()},getPartitionInfo:function(){var e=this;if(this.activeTB){var t=function(t,s){e.isPartLoading=!1,e.$refs.stepOneForm.validateField("tbName"),s||e.parseTableColumn()},s=this.activeTB,i=s.isPartition,a=s.isPartMore;this.isPartLoading=!0,this.activeTB.hasOwnProperty("isPartition")?t(i,a):this.$emit("get-partitions",this.activeTB,(function(e){var s=e.isPartition,i=e.isPartMore;t(s,i)}))}},getRootpath:function(){var e="share"===this.stepTwo.type?"shareRootPath":"hdfsRootPath",t=c["a"].get(e,"SESSION");this.stepTwo.path=t||""}}},I=x,R=(s("07a8"),Object(b["a"])(I,C,k,!1,null,null,null)),D=R.exports,L=D,A=s("7b73"),P={name:"WorkSidebar",components:{weHiveList:N,WeHiveTableExport:L,deleteDialog:A["a"]},props:{model:String,node:Object},data:function(){return{navList:["search","newFile","refresh"],searchText:"",currentType:"",tableList:[],filterDbList:[],currentAcitved:null,isPending:!1,fileTree:[],isDeleting:!1,loadDataFn:function(){},dblClickTimer:null}},computed:{isAllowToExport:function(){return this.currentAcitved&&"tb"===this.currentAcitved.dataType}},mounted:function(){this.initData()},beforeDestroy:function(){c["a"].set("hiveTree",this.tableList)},methods:{initData:function(){var e=this;return new Promise((function(t){var s=c["a"].get("hiveTree");!s||Object(r["isEmpty"])(s)?l["a"].fetch("/datasource/dbs","get").then((function(s){s.dbs.forEach((function(t){e.tableList.push({name:t.dbName,dataType:"db",isOpen:!1,isVisible:!0,children:[],iconCls:"fi-hivedb"})})),t(e.tableList)})):(e.tableList=s,t(e.tableList))}))},onClick:function(e){var t=this,s=e.index,i=e.item;this.$refs.contextMenu.close(),clearTimeout(this.dblClickTimer),this.dblClickTimer=setTimeout((function(){switch(i.dataType){case"db":t.toggleDB(i,s);break;case"tb":t.toggleTB(i,s);break;case"field":break}}),300)},toggleDB:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.currentAcitved=t,this.setHiveCache(this.currentAcitved),!t.children.length){e.next=4;break}return e.abrupt("return",t.isOpen=!t.isOpen);case 4:if(!this.isPending){e.next=6;break}return e.abrupt("return",this.$Message.warning(this.$t("message.constants.warning.api")));case 6:return e.next=8,this.getTables(t,!0);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),toggleTB:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.currentAcitved=t,this.setHiveCache(this.currentAcitved),!t.children.length){e.next=4;break}return e.abrupt("return",t.isOpen=!t.isOpen);case 4:if(!this.isPending){e.next=6;break}return e.abrupt("return",this.$Message.warning(this.$t("message.constants.warning.api")));case 6:return e.next=8,this.getTableColumns(t,!0,!0);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getTables:function(e,t){var s=this;return new Promise((function(i,a){s.isPending=!0;var n="/datasource/tables";l["a"].fetch(n,{database:e.name},"get").then((function(a){s.isPending=!1,e.isOpen=t,s.$set(e,"children",a.tables.map((function(t){return{dbName:e.name,name:t.tableName,value:t.tableName,dataType:"tb",iconCls:"fi-table",isOpen:!1,isVisible:!0,isView:t.isView,createdBy:t.createdBy,createdAt:t.createdAt,lastAccessAt:t.lastAccessAt,children:[]}}))),c["a"].set("hiveTree",s.tableList,"SESSION"),i(e)})).catch((function(e){a(e),s.isPending=!1}))}))},asyncGetTableColumns:function(e,t){var s=e.item,i=e.isOpen,a=e.async;this.getTableColumns(s,i,a).then((function(e){t(e)}))},getTableColumns:function(e,t,s){var i=this;return new Promise((function(a,n){try{var l=o["default"].data.API_PATH,d="".concat(l,"datasource/columns?database=").concat(e.dbName,"&table=").concat(e.name),u=new XMLHttpRequest;u.addEventListener("load",(function(){e.isOpen=t;var s=JSON.parse(u.response),n=s.data.columns,o=n.length,l="";i.$set(e,"children",Object(r["map"])(n,(function(e,t){return t===o-1?l+=e.columnName:t<o-1&&(l+="".concat(e.columnName,",")),{name:e.columnName,dataType:"field",iconCls:"fi-field",partitioned:e.partitioned,type:e.columnType,comment:e.columnComment}}))),i.$set(e,"fullColumn",l),c["a"].set("hiveTree",i.tableList,"SESSION"),a(e)})),u.open("get",d,s),u.send(null)}catch(h){n(h)}}))},onContextMenu:function(e){var t=e.ev,s=e.item;this.currentType=s.dataType,this.$refs.contextMenu.open(t),this.currentAcitved=s,this.setHiveCache(this.currentAcitved)},handledbclick:function(e){var t=e.item;this.currentAcitved=t,this.setHiveCache(this.currentAcitved),clearTimeout(this.dblClickTimer),this.pasteName()},copyName:function(){var e="";switch(this.currentAcitved.dataType){case"tb":e="".concat(this.currentAcitved.dbName,".").concat(this.currentAcitved.name);break;default:e=this.currentAcitved.name;break}d["a"].executeCopy(e)},reflesh:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isPending){e.next=2;break}return e.abrupt("return",this.$Message.warning(this.$t("message.constants.warning.api")));case 2:if(!this.currentAcitved){e.next=17;break}if(this.currentAcitved.children=[],"tb"!==this.currentAcitved.dataType){e.next=11;break}return this.$set(this.currentAcitved,"size",null),this.$set(this.currentAcitved,"partitions",[]),e.next=9,this.getTableColumns(this.currentAcitved,!0,!0);case 9:e.next=14;break;case 11:return e.next=13,this.getTables(this.currentAcitved,!0);case 13:this.$refs.navbar.searchText="";case 14:c["a"].set("hiveTree",this.tableList,"SESSION"),e.next=25;break;case 17:if(t=c["a"].get("activedHiveInfo"),!t||"db"!==t.type){e.next=24;break}return this.currentAcitved=this.tableList.find((function(e){return e.name===t.name})),e.next=22,this.getTables(this.currentAcitved,!0);case 22:e.next=25;break;case 24:this.$Message.warning(this.$t("message.database.notPosition"));case 25:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),pasteName:function(){var e="tb"===this.currentAcitved.dataType?"".concat(this.currentAcitved.dbName,".").concat(this.currentAcitved.name):this.currentAcitved.name;this.dispatch("Workbench:pasteInEditor",e,this.node)},queryTable:function(){var e=this,t="".concat(this.currentAcitved.dbName,".").concat(this.currentAcitved.name),s="select * from ".concat(t," limit 100"),i="".concat(t,"_select.hql"),a=d["a"].md5(i);this.dispatch("Workbench:add",{id:a,filename:i,filepath:"",saveAs:!0,noLoadCache:!0,code:s},(function(t){t&&e.$nextTick((function(){e.dispatch("Workbench:run",{id:a})}))}))},describeTable:function(){var e=this,t=[],s={database:this.currentAcitved.dbName,tableName:this.currentAcitved.name};t.push(this.getTableBaseInfo(s),this.getTableFieldsInfo(s).then((function(t){e.currentAcitved.fieldsList=t})),this.getTableStatisticInfo(s)),t.length&&Promise.all(t).then((function(){var t="".concat(e.$t("message.hiveTableDesc.tableDetail"),"(").concat(e.currentAcitved.name,")"),s=d["a"].md5(t);e.dispatch("Workbench:add",{id:s,filename:t,filepath:"",data:e.currentAcitved,type:"tableDetails"},(function(){}))})).catch((function(){}))},getTableBaseInfo:function(e){var t=this;return new Promise((function(s){l["a"].fetch("/datasource/getTableBaseInfo",e,"get").then((function(e){t.currentAcitved.baseInfo=e.tableBaseInfo,s()}))}))},asyncGetTableFieldsInfo:function(e,t){this.getTableFieldsInfo(e).then((function(e){t(e)})).catch((function(){t(!1)}))},getTableFieldsInfo:function(e){return new Promise((function(t,s){l["a"].fetch("/datasource/getTableFieldsInfo",e,"get").then((function(e){t(e.tableFieldsInfo)})).catch((function(e){s(e)}))}))},getTableStatisticInfo:function(e){var t=this;return new Promise((function(s,i){l["a"].fetch("/datasource/getTableStatisticInfo",e,"get").then((function(e){t.currentAcitved.statisticInfo=e.tableStatisticInfo,s()})).catch((function(e){i(e)}))}))},getTableSize:function(e){return new Promise((function(t,s){l["a"].fetch("/datasource/size",e,"get").then((function(e){t(e.sizeInfo.size)})).catch((function(e){s(e)})).catch((function(e){s(e)}))}))},copyAllColumns:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.currentAcitved.fullColumn){e.next=3;break}return e.next=3,this.getTableColumns(this.currentAcitved,!1,!1);case 3:d["a"].executeCopy(this.currentAcitved.fullColumn);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openDeleteDialog:function(){var e=this.currentAcitved.isView?"视图":"表";this.$refs.deleteDialog.open({type:e,name:this.currentAcitved.name})},deleteTable:function(){var e=this;this.isDeleting=!0;var t="".concat(this.currentAcitved.dbName,".").concat(this.currentAcitved.name),s=this.currentAcitved.isView?"drop view ".concat(t,";"):"drop table ".concat(t,";"),i="".concat(t,"_drop.hql"),a=d["a"].md5(i);this.dispatch("Workbench:add",{id:a,filename:i,filepath:"",saveAs:!0,noLoadCache:!0,code:s},(function(t){if(!t)return e.isDeleting=!1,e.$refs.deleteDialog.close();e.isDeleting=!1,e.$refs.deleteDialog.close(),e.$nextTick((function(){e.dispatch("Workbench:run",{id:a},(function(){e.currentAcitved=Object(r["find"])(e.tableList,(function(t){return t.name===e.currentAcitved.dbName||e.currentAcitved.name})),e.setHiveCache(e.currentAcitved),e.reflesh()}))}))}))},openExportDialog:function(e){"out"===e&&(this.currentAcitved=null,this.setHiveCache(this.currentAcitved)),this.filterDbList=this.filterDatabase(),this.$refs.exportDialog.open()},setSearchText:function(e){if(this.isPending)return this.$Message.warning(this.$t("message.constants.warning.api"));this.searchText=e},getPartitions:function(e,t){var s=this,i=e||this.currentAcitved,a="/datasource/partitions";l["a"].fetch(a,{database:i.dbName,table:i.name},"get").then((function(e){var a=e.partitionInfo.partitions&&!Object(r["isEmpty"])(e.partitionInfo.partitions[0].children),n=s.formatPartions(e.partitionInfo.partitions);s.$set(i,"isPartition",e.partitionInfo.isPartition),s.$set(i,"isPartMore",a),s.$set(i,"partitions",n),c["a"].set("hiveTree",s.tableList,"SESSION"),t&&t({isPartition:e.partitionInfo.isPartition,isPartMore:a,partitions:n})}))},getPartitionsSize:function(e,t){var s=this,i=Object(r["cloneDeep"])(e.partition),a=Object(r["find"])(this.tableList,(function(t){return t.name===e.database}));this.currentAcitved=Object(r["find"])(a.children,(function(t){return t.name===e.table})),this.setHiveCache(this.currentAcitved),e.partition&&this.$set(e,"partition",this.getDeepPath(e.partition)),l["a"].fetch("/datasource/size",e,"get").then((function(a){var n=a.sizeInfo.size;if(e.partition){var o=Object(r["find"])(s.currentAcitved.partitions,(function(e){return e.path===i.path}));o.size=n}else s.currentAcitved.size=n;t(a.sizeInfo.size)}))},getPartitionsSizeByOuter:function(e,t){var s={database:e.dbName,table:e.name,partition:e.partNode?this.getDeepPath(e.partNode):e.partNode};l["a"].fetch("/datasource/size",s,"get").then((function(e){t(e.sizeInfo.size)}))},setPartitionsTitle:function(e,t){e.title+="(分区大小：".concat(t,")")},getDeepPath:function(e){if(Object(r["isEmpty"])(e.children))return e.path;for(var t=0;t<e.children.length;t++)return this.getDeepPath(e.children[t])},formatPartions:function(e){var t=this;return Object(r["map"])(e,(function(e){return{label:e.label,title:e.label,expand:!1,children:t.formatPartions(e.children),path:e.path}}))},filterDatabase:function(e){return e||this.tableList},"HiveSidebar:getDatabase":function(e,t){var s=this;this.initData().then((function(e){t(s.filterDatabase(e))}))},"HiveSidebar:getTables":function(e,t){this.getTables(e.item,!1).then((function(e){t(e.children)}))},"HiveSidebar:getTablePartitions":function(e,t){this.getPartitions(e.item,(function(e){t(e)}))},"HiveSidebar:deletedAndRefresh":function(){var e=this;this.currentAcitved=Object(r["find"])(this.tableList,(function(t){return t.name===e.currentAcitved.dbName||e.currentAcitved.name})),this.setHiveCache(this.currentAcitved),this.reflesh()},getFileTree:function(e){var t=this,s="share"===e?"WorkSidebar:showTree":"HdfsSidebar:showTree",i="share"===e?"scriptTree":"hdfsTree",a=c["a"].get(i,"SESSION");!a||Object(r["isEmpty"])(a)?(this.fileTree=[],this.dispatch(s,(function(e){e.getRootPath((function(){e.getTree((function(s){s&&t.fileTree.push(s),t.loadDataFn=e.loadDataFn}))}))}))):(this.fileTree=Object(r["cloneDeep"])(a),this.dispatch(s,(function(e){t.loadDataFn=e.loadDataFn})))},filterNode:function(e){return!e.isLeaf},exportTable:function(e,t,s){var i=this,a=e.partitions.split("="),n=e.separator;"%20"===e.separator?n=" ":"\\t"===e.separator&&(n="\t");var r=t.path.lastIndexOf("/")+1===t.path.length?t.path.length-1:t.path.length,o=t.path.slice(7,r),c={database:e.dbName,tableName:e.tbName,isPartition:e.isPartition,partition:a[0],partitionValue:a[1],columns:s},l={path:"".concat(o,"/").concat(t.fileName,".").concat(e.exportType),pathType:t.type,hasHeader:e.isHasHeader,isCsv:"csv"===e.exportType,isOverwrite:"追加"!==e.isOverwrite,fieldDelimiter:n,sheetName:t.sheetName||e.tbName,encoding:"csv"===e.exportType?e.chartset:"",nullValue:e.nullValue};l.isCsv?delete l.sheetName:(delete l.isOverwrite,delete l.fieldDelimiter);var u="export__".concat(this.currentAcitved.dbName,".").concat(this.currentAcitved.name),h='val destination = """'.concat(JSON.stringify(l),'"""\nval dataInfo = """').concat(JSON.stringify(c),'"""\ncom.webank.bdp.dataworkcloud.engine.imexport.ExportData.exportData(spark,dataInfo,destination)'),p=d["a"].md5(u);this.dispatch("Workbench:add",{id:p,filename:u+".scala",filepath:"",saveAs:!0,noLoadCache:!0,code:h},(function(e){if(!e)return i.$refs.exportDialog.close();i.$refs.exportDialog.close(),i.$nextTick((function(){i.dispatch("Workbench:run",{id:p,type:"storage",executionCode:{dataInfo:c,destination:l},backgroundType:"export"},(function(){i.$refs.exportDialog.loading=!1}))}))}))},openAddTab:function(){var e="".concat(this.$t("message.newNavBar.createdTitle"),"_").concat((new Date).getTime()),t=d["a"].md5(e);this.dispatch("Workbench:add",{id:t,filename:e,filepath:"",data:this.tableList,type:"createTable"},(function(){}))},setHiveCache:function(e){var t=null;e&&(t={name:e.name,type:e.dataType}),c["a"].set("activedHiveInfo",t)}}},_=P,$=(s("91f4"),Object(b["a"])(_,i,a,!1,null,null,null));t["default"]=$.exports},cae8:function(e){e.exports=JSON.parse('{"message":{"newConst":{"logoName":"DataSphere Studio","ok":"OK","cancel":"Cancel","newCreate":"ADD","editor":"Edit","success":"Success","comment":"Comment","copy":"Copy","paste":"Paste","delete":"Delete","back":"Back","failedNotice":"Invalid items found, please check and then retry!","enterName":"Please enter the name","nameLength":"The name length should not be greater than","validNameDesc":"Must starts with alphabetic characters, followed by only alphanumeric, underscore and Chinese characters","project":"Project","feedback":"Feedback"},"project":{"projectName":"Project Name","gotoScriptis":"Visit Scriptis","createProject":"Create Project","editorProject":"Edit Project","search":"Search Project","deleteProject":"Delete Project","confirmDeleteProject":"Confirm to Delete Project","enterName":"Please enter the name","sortUpdateTime":"Order by Updated Time","sortName":"Order by Name","product":"Product","selectProduct":"Please choose a product","appArea":"Appplication Domain","selectAppArea":"Please choose an application domain","business":"Business","addBusiness":"New Business","tips":"DataSphere Studio Introduction:\\nDataSphere Studio is a self-developed gateway for data application development of Webank big data platform -- WeDataSphere. It is built on top of Linkis data middleware and easily integrates various applications/components on the upper-level of data platforms, making data application development easier and concise.\\nAs a one-stop data application development gateway for data development, data visualization, data governance and scheduling, DataSphere Studio is keen on covering the whole lifecycle of data application development, including scenarios of data importing, data cleansing, data visualization, data governance and data exporting. \\n Create a project, and enjoy your journey of data application development! ","updteTime":"Updated At","nameUnrepeatable":"Duplicated name!","eidtorProjectSuccess":"Successfully updated project{name}!","deleteTitle":"Force delete","projectCopy":"Copy project","projectPublish":"Publish project","projectVersion":"Project version","projectDesc":"Project description","pleaseInputProjectDesc":"Please enter project description","name":"Name","projectClassify":"Project Category","nameLength":"The name length should not be greater than","validNameDesc":"Must start with alphabetic characters, followed by alphanumeric, underscore(_) and Chinese characters!","selectVersion":"Please choose a version","resourceUpload":"Drag file here, or <em>Click to Upload","fileExist":"File already exists, please choose other files or directories!","uploadNameWar":"Invalid file name, must be alphanumeric, underscore(_), hyphen(-) and Chinese characters and end by suffix!","uploadLimit":"File to upload cannot exceed 100M!","uploadSuccess":"Successfully uploaded file {name}!","uploadOver":"File size exceeds limit!","resourceDeleteSuccess":"Successfully deleted resource file {name}!","copyNotice":"Resource name copied to clipboard","rollBack":"Rollback","publishDetail":"Publish Details","version":"Version","status":"Status","published":"Published","unpublish":"Not Published","updator":"Created By","comment":"Version Comment","uptateTime":"Updated At","action":"Aciton","creator":"Published By","publishData":"Publish Info","publishTime":"Published At","pubDelete":"Delete Version","confirmDelete":"Confirm to delete project version {version}","addVersion":"New version","newVersion":"Confirm to set {version} as the latest version","init":"Init","run":"Run","publishSuccess":"Successfully published","publishFailed":"Publish failed","infoTitle":"Welcome","infoHeader":"Welcome to DataSphere Studio !","infoBodyFirstRow":"DataSphere Studio is a one-stop portal focusing on development and management of data application, as a part of WeDataSphere -- the big data platform of WeBank.","infoBodySecondRow":"Based on Linkis computation middleware, it\'s able to easily integrate various data application systems, making the development of data application easier and simpler.","appTitle":"Application Navigation","applicationStudio":"Business Application Development","applicationMore":"More Information","applicationTipsFirst":"Project > Workflow is the basic structure of application development.","applictaionTipsSecond":"On the D&D enalbed workflow editor page, all the data application systems that have been integrated by DataSphere Studio are represented as workflow nodes, so that you can arrange them from the business perspective and then achieve fast implementation of business logics.","integratedSystem":"Systems Already Integrated","howToIntegratedsystem":"How to integrate with a new system","systemTipsFrist":"AppJoint— Application Joint is the core concept for the external system integration of DataSphere Studio.","systemTipsSecond":"AppJoint defines a unified integration standard for both frontend and backend, so that external systems can be integrated simply and fast, becoming a part of the data application development lifecycle in DataSphere Studio.","clickMeAndSkip":"Click here to know how to integrate","exchangisSubTitle":"Data exchange","scriptisSubTitle":"Data development","visualisSubTitle":"Data visualization","qualitisSubTitle":"Data quality","schedulisSubTitle":"Data schedule","outputSubTitle":"Data sender","deleteWtss":"Delete the scheduler project at the same time?","noData":"No data please add"},"workflow":{"workflow":"Workflow","createWorkflow":"Create workflow","gotoVisualis":"Enter Visualis","publishProject":"Publish project","searchWorkflow":"Search for workflow","notData":"Empty data, please add some first","deleteWorkflow":"Delete workflow","confirmDelete":"Confirm to delete workflow {name}","nameUnrepeatable":"Cannot use duplicated name!","createdSuccess":"Successfully created","eitorSuccess":"Successfully updated workflow {name}!","notDelete":"Sub workflow cannot be deleted!","mandatoryDelete":"Force delete","deleteSuccess":"Successfully deleted workflow {name}!","versionDetail":"Version details","open":"Open","editorWorkflow":"Edit workflow","workflowName":"Workflow name:","inputFlowName":"Please enter workflow name","use":"Usage","addUse":"New usage","workflowDesc":"Workflow description:","inputWorkflowDesc":"Please enter workflow description"},"process":{"stop":"Stop","GZLKF":"Workflow","params":"Parameter","resource":"Resource","import":"Import","run":"Run","save":"Save","seting":"Settings","baseInfo":"Basice Information","inputComment":"Please enter comment","commentLengthLimit":"Comment length should not be greater than 255","confirmSave":"Confirm to save","importJson":"Import JSON","uplaodJson":"Click or drag json file here","confirmImport":"Confirm to import","nodeNameNotice":"Notice: duplicated node name","repeatNode":"Node name already exists:","nodeName":"Node name","inputNodeName":"Please enter node name","lengthLimit":"Length should between 1 to 128 characters","nodeDesc":"Node description","inputNodeDesc":"Please enter node description","associate":"Bind to script","relySelect":"Select dependency","allDelete":"Batch delete","console":"Open console","createSubFlow":"Create sub workflow","autoSave":"Save automatically","createNode":"Create node","rankLimit":"workflow cannot exceed 5 layers!","createSubSuccess":"Successfully created sub workflow","saveParamsNotice":"Successfully updated basic information, please mind to save the current workflow!","uploadJson":"Please upload JSON file","JsonLimit":"Json file size cannot exceed 1M","jsonFormat":"Invalid JSON format:","jsonEdgeNotice":"Invalid JSON format: Edge must contain source, target, sourceLocation and targetLocation as attributes","jsonNodeNotice":"Invalid JSON format: Node must contain layout, jobType and id as attributes","jsonLayoutNotice":"Invalid JSON format: layout must contain x, y, width and height as attributes","jsonEdgesNoArray":"Invalid JSON format: edges must be array","jsonNodesNoArray":"Invalid JSON format: nodes must be array","jsonNoType":"Invalid JSON format: Supported node type not found","nosupprotType":"Not supported node type:","cancelNotice":"Close notice","noSaveHtml":"<p>There are unsaved nodes under this workflow, save it or not？</p>","deleteNodeSave":"Workflow cannot exceed 5 layers, please delete sub workflows before saving!","saveAbnormal":"Alert: exception during saving","emptyNodeHtml":"<p>Node {emptyNode} attribute parameters not set. This may lead to wtss execution failure, proceed to save or not?</p>","continueSave":"Continue to save","backEditor":"Back to edit","saveWorkflowCuccess":"Successfully saved workflow!","autoSaveWorkflow":"Automatically saved workflow!","notice":"Notice","dragNode":"Please drag nodes to construct a flow","readonly":"This node is on read-only status, failed to save basic information!","readonlyNoAssociated":"This node is on read-only status, binding to script not allowed!","noAssociated":"Node in this type does not support bind to script!","repeateAssociated":"Notis: duplicated binding","repeateAssociatedHtml":"<p>This script is already bound. Continue to proceed may loose existing execution log, progress, resultset and history information!</p><p> Overwrite or not?</p>","confirmAssociated":"Confirm to overwrite","associaSuccess":"Successfully bound to script!","associaError":"Failed to bind to script!","nodeNameValid":"Node name cannot be worflow name with underscore","readonlyNoCeated":"This node is on read-only status, sub node creation is not supported!","noCopy":"Copy is not supported on this node!","readonlyNoCopy":"This node is on read-only status, copy is not supported!","noPaste":"This node is on read-only status, paste is not supported!","firstCopy":"Please copy a node first!","noDelete":"This node is on read-only status, delete is not supported!","createdSuccess":"Successfully created!","arguments":{"workFlowConfig":"Worflow Configuration","proxyuser":"Proxy User:","inputProxyuser":"Please enter the proxy user","globVar":"Global Variable","valid":"Only alphanumeric characters and underscore are allowed"},"associateBar":{"XZGLJB":"Please choose a script to bind","XZLJ":"Choose path:","QD":"Confirm","XZYGJB":"Please choose a script to bind","CKYZ":"Please check the items failed to pass validations!"},"nodeParameter":{"required":"required","nodeName":"Node Name:","inputeNodeName":"Please enter the node name","nodeType":"Node Type","nodeDesc":"Node Description:","inputeNodeDesc":"Please enter the node description","SXXX":"Attribute information:","XZRMBXXJZ":"Please choose the sending mechanism of RMB message","XZSJLY":"Please choose the data source","XZLX":"Please choose the type","node":"Node","text":"Text","file":"File","link":"Hyperlink","SRZQNR":"Please enter correct content","XZSFX":"Please choose the items to send","ZYXX":"Resource information:","BC":"Save","MLHCS":"Command Line Arguments","LX":"Type","YJLX":"Email Subject","FSX":"Items to Send","SJR":"To","CS":"Cc","MMCS":"Bcc","GLSPD":"ITSM","filter":"Filter","executeUser":"Executor","QTXZQJSON":"Please enter the correct json format!","JDMCBNYGZL":"Workflow name + underscore are not allowed","CZBNSRZW":"Chinese characters are not allowed","QTXYLSJMC":"Please enter the name of data dependency","CD500ZF":"Length between 1 to 500 characters","CZGSCW":"Checked data source dbname.tablename{partition}","QTXDDSJ":"Please enter waiting time, 1 hour by default","QTXCXPL":"Please enter query frequency, 10 times by default","QTXSJFW":"Please enter time scope, 24 hours by default","QZQTXDYPZ":"Please enter multi-source configuration correctly","QZQTXFSZ":"Please enter the sender correctly","BXYZMKTSZXHXZHX":"Started with alphabetic characters, only alphanumeric characters, underscore(_), @ and hyphen(-) are allowed","QZQTXXXLX":"Please enter message type correctly","BXYZMKTXHX":"Started with alphabetic characters, only alphanumeric and underscore are allowed!","QZQTXJSZ":"Please enter message recipients correctly","TXZT":"Message subject must be exactly the same as {type}","CGSCW":"Invalid format, example: bdp_tac_name","XXLRKEYZ":"The ky of message content, msg.body by default","TXXXMC":"The message name must be exactly the same as the {type}","TXXXNR":"Please enter the message content correctly","TXMBDCN":"Please enter the target DCN correctly","TXRMBFW":"Please enter RMB service ID correctly","TXRMBXXHJ":"Please enter RMB message environment correctly","XZRMBXXFSJZ":"Please choose the sending mechanism of RMB message","TXRMBNRJSON":"Please enter RMB message content correctly, must be in json format","CDNC":"Driver memory, default value: 2","ZXQNC":"Executor memory, default value: 3","ZXQHXGS":"Number of cores per executor, default value: 1","ZXQGS":"Number of executors, default value: 2","ZXDL":"Execution queue","DGCSYKGGK":"Separat multiple arguments by spaces, Chinese characters and \\\\n are not allowed","TXJDMC":"Please enter node name","CDZ128ZF":"Length between 1 to 128 characters","TXYJBT":"Please enter the email subject","BTZZCZW":"Only Chinese characters, alphanumeric characters and underscore are allowed in subject!","XZHSR":"Please choose or enter the items to send","TXSJR":"Please enter recipients","TXCSR":"Please enter carbon copy recipients","TXMMFSR":"Please enter blind carbon copy recipients","TXGLSPD":"Please enter ITSM","ZZCSZ":"Only number, underscore and point are allowed!","BCSB":"Failed to save, failed to pass form validations!","JDBDXTXBHF":"Invalid input for node form items!","QSR":"Please enter"},"resourceBar":{"TZDLSC":"Drag file here or click to upload","PYSPARKNODE":"Only zip resource files are allowed for pyspark nodes","SPARKNOSW":"Only jar resource files are allowed for sparksql nodes","WJYCZ":"Duplicated file, please choose another file or directory!","WJMCBHF":"Invalid file name. Only alphanumeric characters, Chinese characters, underscore, hyphen are allowed with suffix followed!","SCBCG100":"Files to upload cannot exceed 100M!","SCCG":"Successfully uploaded file {name}!","WJCCXE":"File size exceeds limit!","WJBSC":"Successfully deleted resource file {name}!"}},"workflowItem":{"publish":"publish","resource":"Resource","viewVersion":"View verson","config":"Configuration","action":"Action","readonly":"Read-only","editor":"Edit","noDesc":"No description","nodata":"No data","noView":"Cannot view a project being published!"},"container":{"notVarible":"\'Failed to fetch global variable information. Word association may not work well! It is better to refresh and retry!\'","boyondQuota":{"title":"Warning","desc":"\'You have open 20 scripts(over maximun limit), please close some other scripts!\'"},"toolbar":{"replace":"Please choose the empty value to replace:","emptyString":"Empty string"},"notRun":"Cannot run on read-only status!","notSave":"Cannot save on read-only status!","saveSuccess":"Successfully saved!","saveErr":"Save failed!","process":"Execution time:","resultList":"Resultset","tableRow":{"detail":"Details of the selected row","search":"Search……","columnName":"Column name","value":"Value","dataType":"Data type"}},"newGlobalHistory":{"userName":"Username","searchName":"Please enter username to search","generalView":"Switch to the common view","manageView":"Switch to the admin view","tableColumns":{"taskID":"Task ID","fileName":"Script Name","executionCode":"Execution Code","status":"Status","costTime":"Time Elapsed","executeApplicationName":"Execution Engine","requestApplicationName":"Created From","user":"User","createdTime":"Created At","failedReason":"Key Information","control":{"title":"Handle","label":"View"}},"logLoading":"Requesting logs, please hold on"},"deleteDialog":{"waring":"Warning","action":"This action will {label}","isNext":"Continue or not?","over":"Stop {type}","overThe":"Stop this"},"directoryDialog":{"path":"Please choose the path"},"dynamicForm":{"rule":{"emptyKey":"key is empty","lengthLimit":"Length exceeds 128 characters","nameVaild":"Starts with alphabetic characters; Space and Chinese characters are not allowed","emptyValue":"value is empty"},"namePlaceholder":"Please enter {title} name","placeholderInput":"Please enter the value","someKey":"Duplicated key found"},"newNavBar":{"createdTitle":"Table creation guide"},"createTable":{"action":"Action","delete":"Del","baseAttr":"Table basic attributes","add":"New","partitionAttr":"Partition attributes","selectResource":"Please choose the original field","next":"Next","nameNotice":"Only Chinese characters, alphanumeric characters and underscore are allowed","zm":"alphabetic characters","daName":"Database name","tableName":"Table name","tablePlaceholder":"Starts with alphabetic characters; Only alphanumeric characters and underscore are allowed","tableOtherName":"Table alias name","aliasPlaceholder":"Only Chinese characters, alphanumeric characters and underscore are allowed","use":"Usage","emptyPlaceholder":"Only Chinese characters, alphanumeric characters and underscore are allowed(Can be empty)","product":"Product","project":"Project","tableDesc":"Table description","selectDbName":"Please choose database name","inputTableName":"Please enter table name","inputOtherName":"Please enter alias name","letter":"Alphabetic characters","moduleAttr":"Table model attributes","partitionType":"Partition type","partition":"Partition","unartition":"Not Partition","lifecycle":"Lifecycle","forever":"Forever","day":"Valid for a day","week":"Valid for a week","moon":"Valid for a month","midYear":"Valid for half a year","moduleRank":"Model layer","resource":"Original data layer","detailLevel":"Detailed data layer","sumData":"Summarized data layer","appData":"Application data layer","actionType":"Usage method","noeWrite":"Write Once Read Many","ZSGC":"CRUD","FG":"Multi-overwrite","OED":"Write Once Read Occasionally","isUse":"Is used externally","isDwsExeis":"Need to be used in systems outside DSS","selectPartitionType":"Please choose partition type","selectLife":"Please choose lifecycle","selectModuleLevel":"Please choose model layer","selectUseType":"Please choose usage method","selectIsUse":"Please choose whether to be used externally","canned":"Duplicated table, please enter other table names","type":"Type","selectType":"Please choose type","path":"Path","FGF":"Separator","BMGS":"Encoding format","XZBMGS":"Please choose encoding format","XDF":"Limited qualifier","WXDF":"Unlimited qualifier","HXWBT":"Use the first line as table header","HQBZDSJ":"Request table column data","XZWJLJ":"Please choose file path","GXMLDR":"Import from shared directory","DR":"Import","DH":"Comma","FH":"Semicolon","ZBF":"Tab","KG":"Space","SYH":"Double quote","DYH":"Single quote","GLWJ":"Filter directory","LYSX":"Source attribute","MBZD":"Target column and source column","XZK":"Choose database","XZB":"Choose table","SJSXLY":"Data attribute source","DRFS":"Import method","XJ":"New","FHSYB":"Back to Previous","SCDDL":"Generate DDL statement","JB":"Create table","DDLYJ":"DDL Statement","FZZT":"Copy to clipboard","DDLYFZ":"DDL statement has been copied to clipboard!","fieldsName":"Column name","isPrimary":"Primary key","fieldsType":"Column type","length":"Length/Settings","fieldsAlias":"Column alias name","alias":"Alias name","sourceFields":"Source column","rule":"Column rule","express":"Column expression","comment":"Comments","partitionValue":"Partition value","partitionAlias":"Partition alias","fieldsNameRequire":"Column name cannot be empty","fieldsNameRule":"Only alphanumeric characters and underscore are allowed"},"publish":{"desc":"Publish description:","inputDesc":"Please enter publish description","error":"Failed to publish project {name}","success":"Successfully published project {name}","failed":"Failed to publish with error","cancel":"Cancel","timeout":"Timeout on publishing project {name}!"},"tableDetails":{"BZBSX":"Table basic attributes","BZDXX":"Table column information","BTJXX":"Table statistical information","DBN":"Database name","TN":"Table namee","BBM":"Table alias name","FQM":"Partitioned table","CJYH":"Created By","CJSI":"Created At","ZHFWSJ":"Last Accessed At","BMS":"Table description","BMXSX":"Table model attributes","SMZQ":"Lifecycle","MXCJ":"Model layer","SYFS":"Usage mothod","WBSFSY":"Is used externally","BYYSX":"Table usage attributes","SXCP":"Product","SSXM":"Project","YT":"Usage","SSZDMC":"Search for column name...","XH":"Index","ZDM":"Column name","ZDLX":"Column type","BM":"Alias","SFZJ":"Is primary key","SFFQ":"Is partition","ZDGZ":"Column rules","MS":"Description","FQXX":"Partition information","DJFQCK":"Please click the root partition to view size information","WFQSJ":"No data of table partitions","BXX":"Table information","BZD":"Number of columns","BDX":"Table size","WJM":"Number of files","FQS":"Number of partitions","DX":"size","FQDX":"Partition size:","WJS":"Number of files:","YES":"Yes","GSHJX":"Formatted to","ZJXYGE":"The format required by the component"},"logView":{"taskId":"Task ID：","search":"Search","filter":"Filter","error":"Error","inputTaskId":"Please enter a valid task ID!"},"functionSetting":{"HSM":"Function name","HSLX":"Funtion type","TY":"Common","ZDYHS":"Self-defined funtions","B":"Package","JBLU":"Script path","ZCGS":"Register format","ZCHS":"Register function","FHLX":"Return type","CSLX":"Parameter type","YLLX":"Preview","SYGS":"Using format","SRLX":"Input type","HSMS":"Funtion description","MRJZ":"Loaded by default","XZHS":"New function","LJCJ":"Create","QSRMC":"Please enter the name","CDZ":"Length should be between 1 to 100 characters","BXYZMKT":"Must starts with alphabetic characters, followed by only alphanumeric, underscore and Chinese characters","QZSXZYZLX":"Please choose at least one type","QSRWZLJ":"Please enter the complete path","KHDBJZPP":"Brackets indicate precise matching","HZMZC":"Only jar is allowed as the suffix. Only alphanumeric characters and underscore is allowed for the name of jar package!","ZCPYSCA":"Only py and scala are allowed as the suffix!","BHJZCYW":"Only alphabetic characters are allowed as the package name","XHX":"Underscore","SRZCHS":"Please enter function registration","SRFHLX":"Please enter the return type","SRCSLX":"Please enter the parameter type","XGHS":"Update funtion","XG":"Update"},"functionShare":{"ZZGX":"Sharing function {name} in progress","HSLX":"Funtion type","GXYH":"Shared users","SRGXYH":"Please enter the users to be shared, separated by comma","XZGXHSLX":"Please choose a type for this shared function!","ZSXZYWGXYH":"Please enter at least one user needed to be shared with!"},"uploadDialog":{"SCJBWJ":"Upload script file","TWJDSQ":"Drag file here, or <em>click to upload</em> ","PATH":"Path:","QKLB":"Clear list","LIMIT2M":"Script file to upload cannot exceed 2MB!","LIMIT100M":"Script file to upload cannot exceed 100MB!","ZDSC":"This operation will interrupt file uploading, continue or not? ","TS":"Notice","ZJGB":"Close directly","QX":"Cancel","QXBBSCCK":"Close uploading window","SCCG":"Successfully uploaded file {name}!","WJDXCCXE":"File size exceeds limit","WJYCZ":"Duplicated file, please choose another file or directory!","WJMBHF":"Invalid file name, only alphanumeric characters, Chinese characters and underscore is allowed with suffix!","SCZQK":"Uploading file in progress, cannot clear upload list!"},"navMune":{"FAQ":"FAQ","clearCache":"Clear cache","logOut":"Log out"},"shape":{"dataDev":"Data development","dataVis":"Data visualization","dataSend":"Data output","XHJD":"Signal node","GNJD":"Function node","SJJH":"Data exchange","SJZL":"Data Governance","DXP":"Data Sharing"},"goBack":{"title":"Return to remind","content":"The workflow has changed and not saved. Do you want to exit?","back":"Exit","unBack":"Dont\'t quit"},"importToHive":{"MC":"Name","ZDMC":"Column name cannot be empty","JZCZM":"Only alphanumeric characters and underscore are allowed","QSRZDM":"Please enter column name","LX":"Type","GS":"Format","QXZGS":"Please choose date format","CD":"Length","JD":"Accuracy","XSW":"Decimal scale","SRZDZS":"Please enter column comments","DRWJ":"Import file","BZONE":"Step 1","BZTOW":"Step 2","WJDR":"Import data from file","DRZMRB":"Import to the default table","LY":"Source","QXZLX":"Please choose type","LJ":"Path","GSH":"Format","FGF":"Separator","BMGS":"Encoding format","QXZBMGS":"Please choose encoding format","XDF":"Qualifier","WXDF":"No qualifier","SHWBT":"Treat the first line as header","SJK":"Database name","QSRKM":"Please enter database name","SJB":"Table name","SRSJBM":"Please enter table name","FQ":"Partition","FX":"Overwrite","XZFQ":"New partition","SHEETB":"sheet table","ZG":"Column","XYB":"Next step","SYB":"Previous step","TJ":"Submit","LXWCHAR":"Column with type char or varchar should have length as an integer greater than 0","ZDJDSRYW":"Column with type decimal has invalid accuracy","ZDXSWYDY":"Column with type decimal should have scale as an integer greater than 0","ZDZSZCZW":"Only Chinese characters, alphabetic characters and underscore are allowed in column comments, with length not greater than 100 characters","SJKMBNWK":"Database name cannot be empty","BMBNWK":"Table name cannot be empty","BMJZCZMKT":"Table names should start with alphabetic characters, followed by alphabetic characters and underscore, length between 0 to 100 characters","FQMBNWK":"Partition name cannot be empty","FQMZCSZ":"Only alphanumeric characters and - are allowed in partition names","FQZBNWK":"Partition value cannot be empty","FQZZZCSZ":"Only numbers are allowed as partition values","GXMLDR":"Import from shared directory","HDFSDR":"Import from HDFS","DH":"Comma(,)","FH":"Semicolon(;)","ZBF":"Tab(\\\\t)","KG":"Space","SYH":"Double quote(\\"\\")","DYH":"Single quote","WJZZZXDR":"Importing file in progress, please retry later","FQZCF":"Duplicated partition values, please confirm whether to overwrite","TSWST":"Notice: Cannot handle view tables, please choose other tables to import","WFCZSTB":"Cannot handle view tables","QXZQTBDR":"Please choose other tables to import","BMYCZDQSJK":"Table name already exists in this database","ZBZCDJFQ":"Multi-level partitions are not supported yet, please choose other tables","QQURFQ":"Please confirm the partition","HQFQSB":"Failed to request partition information","ZQDRWJLJ":"Please choose the path correctly","QQRSJKMCXX":"Please confirm the database name","QQRSFCF":"Please confirm whether to overwrite"},"hiveTableExport":{"DCB":"Export form table","SZDCCS":"Step 1: Set export parameters","SZDCLJ":"Step 2: Set export path","SJKM":"Database name","QSRKM":"Please enter the database name","SJBM":"Table name","ZDXX":"Column information","FQXX":"Partition information","DCGS":"Export format","FGF":"Separator","BMGS":"Encoding format","XZBMGS":"Please choose the encoding format","KZTH":"Null value place holder","SXWBT":"Treat the first line as header","LX":"Type","QXZLX":"Please choose the type","DCZ":"Export to","WJM":"File name","TRDCWJMC":"Please enter the name of the file to be exported","FXMS":"Overwrite mode","ZJ":"Append","FX":"Overwrite","BM":"sheet table name","QSR":"Please enter","XYB":"Next step","SYB":"Previous step","TJ":"Submit","WFCZST":"Cannot handle view tables, please choose other tables to export","ZBZCDBDC":"Tables with multiple partitions are not supported yet, please choose other tables to export","GXML":"Shared directory","DH":"Comma(,)","FH":"Semicolon(;)","ZBF":"Tab(\\\\t)","KG":"Space","KZFC":"Empty string","XZSJK":"Please choose database","XZB":"Please choose table","XZFGF":"Please choose separator","XZYGFQBDC":"Please choose a partitioned table to export","ZSXZYGZD":"Please choose at least one column","XZDCGS":"Please choose export format","XZXYJKZTHDZ":"Please choose the Null value place holder","XZDCLJDLX":"Please choose the type of export path","XZDCLJ":"Please choose export path","DRDCDWJ":"Please enter the name of the file to be exported","CDZ":"Length should be between 3 to 100 characters","WJMZZCZW":"Only Chinese characters, alphanumeric characters and underscore are allowed","CBDC":"Exporting table in progress, please hold on or try other tables","QSHZSS":"Please hold on or try other tables","XZFQ":"Please choose partition","BDXCG":"The size of this table is greater than 5GB, please choose other methods to export or choose other tables"},"hiveTableDesc":{"searchName":"Search by column name...","tableDetail":"Table details","noData":"No data for table partition information yet","tableColumns":"Table columns","columnsName":"Column name","columnsType":"Column type","tablePartitions":"Table partitions表分区","dbName":"Database name","tableName":"Table name","createUser":"Created By","createTtime":"Created At","lastTime":"Last accessed","tableSize":"Table size","size":"Size","viewTableColumns":"For more columns, please check on the \'view table columns\' page"},"login":{"loginTitle":"Welcome to login DataSphere Studio！","userName":"Please enter your username","remenber":"Remember the current user","login":"Login","password":"Please enter password！","loginSuccess":"Login Success","haveLogin":"You have already logged in, please do not login repeatedly","vaildFaild":"Authentication failed!"},"userMenu":{"title":"Warning","content":"<p>This operation will clear the local database cache, leading to loose your script logs, history and result set information, please confirm whether there are scripts unsaved!</p><p>Click OK button to continue?</p>","clearCacheSuccess":"Successfully cleared local cache!","comingSoon":"Not yet open source, please stay tuned!"},"headerNavBar":{"Workflow":"Workflow Development","Exchangis":"Data Exchange Component","Scriptis":"Data Development Component","Qualitis":"Data Governance Component","Visualis":"Data Visualization Component","Schedulis":"Workflow Schedule Component","LinkisConsole":"Linkis Console","DatalinkDXP":"DataLink DXP"},"deleteType":{"function":"Function","folder":"Directory","file":"File","common":"Common","catalog":"Directory","script":"Script file","engine":"Engine","task":"Task","engineAndTask":"Engine and task"},"resourceSimple":{"YS":"Scriptis","FL":"Category","ZH":"Visualis","FLOW1":"flowexecution","FLOW2":"Scheduler","ZWSJ":"No data yet","KX":"Idle","FM":"Busy","QD":"Starting","LX":"By category","AZT":"By status","DDJK":"Waiting for API response!","QDYQWFJS":"Cannot shut down an engine with starting status!","WXZYQ":"No engine selected!","RWGLQ":"Task Management","YQGLQ":"Engine management","DLGLQ":"Queue management","SX":"Refresh","JSRW":"Cancel task","JSYQ":"Shut down engine","PDZ":"Queueing","ZYSQ":"Applying resources","YX":"Running","YQ":"Engine","RW":"Task","WZJBMC":"Unknown script name","ZHJB":"Visualis script","GZLJB":"workflow script","YQRW":"Engine and task","JSYQRW":"Terminate engine and tasks","CKJBXX":"View script information","FZJBXX":"Copy script information","QXZYTJL":"Please choose a record!","WHQD":"Failed to get strongerExecId, please contact admin for investigation!","WHQDENGINE":"Failed to get engineInstance, please contact admin for investigation!","YXTS":"Execution hints","YJTZZXJB":"Stopped executing script","JSYQHRWCG":"Successfully terminated engine and tasks","DKCG":"Successfully open","JBFZDZTRB":"Copied script information to clipboard, please use ctrl+v to paste!","XZDL":"Please choose a queue","ZYSYL":"Resource consumption rate","H":"Cores","NC":"Memory","ZYSYPHB":"Ranking of resource consumption","ZW":"No data yet"},"monacoMenu":{"YXJB":"Run script","GSH":"Format","CZ":"Search","TH":"Replace","HZS":"Line comment","ZT":"Paste","HBQWJCFZWB":"Sorry, no copied text detected by IDE, if you performed the copy operation outside IDE, please use ctrl+v to paste!","TDZDH":"Jump to line","GBYFJC":"Close syntax check","DKYFJC":"Open syntax check","GYFSYGWYF":"This is highly dangerous syntax, please be cautious!"},"constants":{"add":"New","cancel":"Cancel","confirm":"Confirm","changeLanguage":"Switch language","detail":"Details","description":"Description","delete":"Delete","download":"Download","edit":"Edit","export":"Export","fail":"Fail","noDataText":"No data yet","node":"Node","refresh":"Refresh","rename":"Rename","reset":"Reset","remove":"Remove","submit":"Submit","search":"Search","save":"Save","upload":"Upload","update":"Update","warning":{"api":"Requesting API, please hold on!","data":"Requesting data, please hold on!","waiting":"Please wait for API response!","biLoading":"Connecting with Visualis, please hold on!","comingSoon":"Not yet open source, please stay tuned!"},"success":{"delete":"Successfully deleted!","update":"Successfully updated!","add":"Successfully created!","save":"Successfully saved"},"error":{"refresh":"Error on refreshing, please retry!","fileExists":"Duplicated file","folderExists":"Duplicated directory","functionExists":"Duplicated function"},"logPanelList":{"fullScreen":"Full Screen","releaseFullScreen":"Restore","min":"Minimize","releaseMin":"Restore"},"time":{"second":"Second","minute":"Minute","hour":"Hour","day":"Day"}},"navList":{"dataStudio":"Data development","workSpace":"Workspace","database":"Database","udfFunction":"UDF","methodFunction":"Method","hdfs":"HDFS"},"navBar":{"addTitle":"New directory","dataStudio":{"outTable":"Export table","importHive":"Import to hive","addTitle":"New solution","searchPlaceholder":"Please enter file or directory name to search"},"workSpace":{"searchPlaceholder":"Please enter file or directory name to search"},"database":{"searchPlaceholder":"Please enter database or table name to search"},"fnSideBar":{"searchPlaceholder":"Please enter directory or function name to search"},"hdfs":{"searchPlaceholder":"Please enter directory or function name to search"}},"newDialog":{"catalog":"Directory","scriptName":"Name","catalogName":"Name","targetScriptPath":"Creation target path","placeholder":"Please enter directory name","rules":{"scriptName":{"required":"Please enter script name","lengthLimit":"Length should be between 1 to 200 characters","letterTypeLimit":"Only Chinese characters, alphanumeric characters and underscore are allowed"},"catalogName":{"required":"Please enter directory name","lengthLimit":"Length should be between 1 to 200 characters","letterTypeLimit":" Only Chinese characters, alphanumeric characters and underscore are allowed"},"targetScriptPath":{"required":"Please choose target script path"}},"nodeType":"Node type","scriptType":"Script type","targetFolder":"Target directory"},"dataStudio":{"goBack":"Back to Data Development","dialogTitle":{"solution":"Solution","workFlow":"Business Logic"},"updateProperty":"Update properties","contextMenu":{"addWorkFlow":"New business logic","updateSolution":"Update solution"},"warning":{"flow":"Business logic creation not allowed for default application!","noEdit":"Edit not allowed for default business logic!"},"error":{"solution":"Duplicated solution names not allowed!","flow":"Duplicated business logic names not allowed!"},"success":{"solution":"Successfully created solution!","flow":"Successfully created business logic!","add":"Successfully created!"},"confirm":{"title":"Warning","content":"<p>This script does not exist, may has been deleted or updated, delete or not?</p>","okText":"Confirm to delete","cancelText":"Cancel"}},"workSpace":{"contextMenu":{"openToTab":"Open as a tab","copyPath":"Copy path","addCatalog":"New directory","addScript":"New script","importToHive":"Import to Hive","importToHdfs":"Import to HDFS"},"dialogTitle":{"importToHdfs":"Export to HDFS"},"warning":{"getRootPath":"Failed to request Workspace root directory, please refresh to retry!","scriptChanged":"Script already updated, please save and retry!"},"error":{"fileExists":"Duplicated file!"}},"database":{"contextMenu":{"db":{"copyName":"Copy database name","pasteName":"Copy database name & paste to script"},"tb":{"queryTable":"Query table","deleteTable":"Drop table","viewTable":"View table structure","exportTable":"Export table","copyName":"Copy table name","pasteName":"Copy table name & paste to script","copyAllColumns":"Copy all the columns of table"},"field":{"copyColumnsName":"Copy column name","pasteName":"Copy column name & paste to script"}},"partitionsTitle":"Partition size","notPosition":"Failed to locate last operation, please use refresh after right-click"},"fnSideBar":{"contextMenu":{"isOwn":{"addFunction":"New function","addFolder":"New directory","share":"Share"},"isLeaf":{"copyName":"Copy function name","pasteName":"Copy function name & paste to script"},"isOwnAndLeaf":{"updateToExpired":"Set as expired","viewSharedUsers":"View shared users"}},"warning":{"folderNameExists":"Duplicated directory name","functionNameExists":"Duplicated function name","functionShared":"This function has been shared, please set it as expired before deletion!","noEmpty":"Please manually clear sub directories/functions and then retry!"},"success":{"load":"Successfully loaded UDF!","cancelLoading":"Canceled loading UDF!","addUdf":"Successfully created UDF!","addFolder":"Successfully created new directory!","shareFunction":"Successfully shared function","updateShareUser":"Successfully updated shared users!","functionExpired":"Successfully set function as expired, please view it in Shared Functions!"},"confirm":{"title":"Notice","content":"<p>This operation will affect all the shared users, continue or not?</p>"}},"hdfs":{"contextMenu":{"openToTab":"Open as a tab","copyPath":"Copy path","addCatalog":"New directory","importToHive":"Export to Hive","exportToWorkSpace":"Export to Workspace"},"dialogTitle":{"exportToWorkSpace":"Export to Workspace"},"warning":{"noRootPath":"Failed to request HDFS root directory, please refresh to retry!"}},"functionView":{"formItems":{"name":"Funtion name","createUser":"Creator/Department","updateTime":"Updated At","useFormat":"Using format","description":"Funtion description"}},"workBench":{"container":{"closeDropDown":{"others":"Close Others","all":"Close All","left":"Close Left","right":"Close Right"},"closeHint":"Close Hint","footer":{"cancel":"Cancel","close":"Close","save":"Save","saveAs":"Save As"},"tips":"What is Scriptis？\\nScriptis is a one-stop interactive data analysis & exploration tool built by WeDataSphere at WeBank. Using Linkis as its kernel, Scriptis provides functionalities including multiple computation engines(Spark, Hive, TiSpark...), Hive database management, resource management(such as Yarn resource and server resource), application management and user resource management(such as UDF and variables). \\nScriptis？\\n1. Select a directory in workspace, and create a sub directory; \\n2. Right-click a directory => Create script; \\n3. Select script type, for example: SQL, Pyspark, HQL, etc... \\n4. Edit script, click & run, wait for result sets.","warning":{"noDBInfo":"Failed to request database/table information, word association in script may not be working well! Please refresh to retry!","noUDF":"Failed to request UDF and Method information, word association in script may not be working well! Please refresh to retry!","noSelectedScript":"No script selected, please select one first and retry!"},"notice":{"developerWarning":{"title":"Warning","desc":"Warning from developers: Requesing add API must pass id and filename as parameters!"},"unSupport":{"title":"Warning","desc":"Sorry, the system does not support this file format!"}},"removeWork":{"normal":"This script has been updated, save or not?","readOnly":"This read-only script has been updated, save it as another file to workspace or not? ","temporary":"This temporary script has been updated, save it as another file or not?"}},"body":{"workFlow":{"tabs":{"progress":"Progress","result":"Execution result","log":"Execution log","history":"History","diagnosis":"Intelligent Diagnosis 智能诊断"},"notice":{"executing":{"title":"Execution Notice","desc":"Executing script in progress"},"result":{"title":"Execution Result Notice","desc":"Successfully executed script, time elapsed: "},"stop":{"title":"Execution Notice","desc":"Stopped executing script"}}},"visualAnalysis":{"modalTitle":"Save widget to solution"},"setting":{"customVariable":{"title":"Customized Variables"},"envVariable":{"title":"Environment Variables"},"runTimeArgs":{"settingTitle":"Command line Arguments","placeholder":"Please use space to separate multiple arguments"}},"script":{"businessTypeScript":{"open":"Open","initTitle":"New task","title":"New task: data development","typeLibs":{"dataStudo":{"id":"Script Id","owner":"Owner","type":"Type","createTime":"Created At","version":"Version"},"dataBI":{"id":"Script Id","projectId":"Solution Id","viewId":"View Id","description":"Description","publish":"Published"}},"nameLibs":{"dataExchange":"Data Exchange","dataStudio":"Data Development","dataBI":"Visualized BI","resources":"Resource"},"confirmModal":{"title":"Warning","content":"<p>This script does not exist, may be deleted or updated, delete or not? </p>","okText":"Confirm to delete","cancelText":"Cancel"}},"editor":{"navBar":{"undo":"Undo","redo":"Redo","play":"Run","stop":"Stop","save":"Save","config":"Configuration"},"warning":{"running":"Script execution in progress, please hold on!","invalidArgs":"Please check the correctness of the input of configuration parameters!","emptyCode":"Cannot execute empty script!"}},"execute":{"waitingQueue":"{num} jobs wating in front","error":{"getResultList":"Failed to request result set, please contact the admin!","queryTimeout":"Query timeout, please execute again!","noResultList":"No result set generated by this script!","errorLog":"Failed to request result set, please contact the admin!","failed":"Failed to execute, please check logs for the reason, or feedback the key information in your execution history to admin!","canceled":"Execution already canceled!","executeTimeout":"Execution timeout, please check logs for the reason, or feedback the key information in your execution history to admin!"},"success":{"getResultList":" Successfully requested result set!","stateEnd":"Successfully executed task, requesting result set in progress!"}},"history":{"columns":{"taskID":{"title":"Task ID"},"runningTime":{"title":"Execution Time"},"createDate":{"title":"Executed At"},"status":{"title":"Status","status":{"succeed":"Succeeded","running":"Running","timeout":"Timeout","inited":"Waiting","scheduled":"Applying Resources","failed":"Failed","cancel":"Canceled"}},"data":{"title":"Code"},"failedReason":{"title":"Key information"},"control":{"title":"Handle","view":"View","download":"Download log"}},"success":{"open":"Successfully open","download":"Successfully downloaded, please check from local download directory!"}},"historyScript":{"tabs":{"log":"Execution log","result":"Result set"}},"intelligentDiagnosis":{"columns":{"isFault":{"title":"Diagnostic status","type":{"green":"Normal","red":"Abnormal"}},"tuningCode":"Diagnostic code","resultDesc":"Diagnostic description"}},"log":{"placeholder":"Filter"},"progress":{"title":"Execution progress","watingList":"{num} jobs wating in front","columns":{"id":{"title":"Name"},"progress":{"title":"Progress bar"},"taskNum":{"title":"Number of Tasks","status":{"running":"Running","success":"Succeeded","fail":"Failed","totalTasks":"Total Number of Tasks"}}}},"result":{"emptyText":"No data yet","resultSetPlaceholder":"Please choose result set","resultSet":"Result set","watermaskText":"Generated by DataWorkShop. For internal references only, sharing is prohibited"},"resultsExport":{"header":"Export Result Set","formItems":{"name":{"label":"Name","placeholder":"Please enter the name exported as……","title":"The suffix to export as can be configured in Control Panel-Settings-Application Level-PipeLine!"},"path":{"label":"Storage Path","title":"Export Result Set"}},"rules":{"name":{"required":"Please enter the name","lengthLimit":"Length between 1 to 200 characters","letterTypeLimit":"Only Chinese characters, alphanumeric characters and underscore are allowed"},"path":{"required":"Please choose the path to export!"}}},"saveAs":{"header":"Save as script","formItems":{"fileName":{"label":"File name"},"selectedPath":{"label":"Choose path"}},"rules":{"fileName":{"required":"Please enter the file name","lengthLimit":"Length between 1 to 200 characters","letterTypeLimit":"Only Chinese characters, alphanumeric characters and underscore are allowed"},"selectedPath":{"required":"Please choose a directory"}},"warning":{"invalid":"Please check the items failed to pass validations!"},"success":{"saveScript":"Successfully saved as script, please refresh directory tree manually!"}},"script":{"text":"Script","tabs":{"progress":"Progress","result":"Execution Result","log":"Execution Log","history":"History","diagnosis":"Intelligent Diagnosis"},"notice":{"unsave":{"title":"Notice","desc":"Your temporary script has been updated, please mind to save!"},"sendStart":{"title":"Execution Notice","render":"Start to execute the script"},"querySuccess":{"title":"Execution result notice","render":"Successfully executed script, time elapsed:"},"notice":{"title":"Execution Result Notice"},"kill":{"title":"Execution Notice","desc":"Stopped executing this script"}},"confirmModal":{"title":"Save as","content":"<p>This temporary has been updated!</p><p>Save it or not?</p>","okText":"Save As","cancelText":"Cancel"},"warning":{"empty":"Empty script content!"}},"setting":{"header":"Settings"},"steps":{"title":"Job Status","stepsInfo":{"Submitted":"Submitted","Inited":"waiting","Scheduled":"Applying Resources","Running":"Running","Succeed":"Succeeded","ResultLoading":"Loading Result","Completed":"Completed","Failed":"Failed","Cancelled":"Canceled","FailedToGetResult":"Failed to request result set","FailedToGetResultPath":"Failed to request result set path","FailedToGetResultList":"Failed to request result set list","FailedToGetResultFirst":"Failed to request the first result set","WaitForRetry":"Waiting for retry","FailedToApply":"Failed to apply resources","FailedToExecute":"Execution Failed","notResult":"No Result Set Generated"},"hoverList":{"first":"1.Successfully requested result set path...","second":"2.Successfully requested result set list..."}},"toolbarProgress":{"log":"Log","diagnosis":"Intelligent Diagnosis"},"toolbar":{"analysis":"Visualization","format":"Please choose the download format:","coding":"Please choose the encoding:","success":{"download":"Successfully downloaded, please check from the local download directory!"},"rowToColumn":"switch row to column","rowToColumnTitle":"View current row details"}}}},"console":{"title":"Control Panel","info":"{num} new messages","hint":"Please view in the redirected page……","sideNavList":{"news":{"name":"Latest Activities","children":{"daily":"Daily Operation Report"}},"function":{"name":"Frequently Used","children":{"globalHistory":"Global History","resource":"Resource Manager","setting":"Settings","dateReport":"Global Variables","globalValiable":"Frequently Asked"}}}},"globalHistory":{"formItems":{"id":{"placeholder":"Please search by entering the ID"},"date":{"label":" Start Date","placeholder":"Please choose the start date"},"engine":{"label":"Engine"},"status":{"label":"Status"}},"columns":{"taskID":"Task ID","fileName":"Script Name","executionCode":"Execution Code","status":"Status","costTime":"Time Elapsed","executeApplicationName":"Execution Engine","requestApplicationName":"Created From","progress":"Progress","createdTime":"Created At","updatedTime":"Updated At","control":{"title":"Handle","label":"View"}},"shortcuts":{"week":"Recent Week","month":"Recent Month","threeMonths":"Recent Three Months"},"statusType":{"all":"All","inited":"Waiting","running":"Running","succeed":"Succeeded","cancelled":"Canceled","failed":"Failed","scheduled":"Applying Resources","timeout":"Timeout","retry":"Retry","unknown":"Unknown"},"engineTypes":{"all":"All"}},"resource":{"header":"Resource Manager","tabs":{"first":"User Sessions","second":"User Resources","third":"Server Resources"},"columns":{"moduleName":"Module Name","totalResource":"Total Resources","usedResource":"Used Resources","initializingResource":"Initing Resources","memory":"Memory","engineInstance":"Engine Instance","applicationName":"Application Name","usedTime":"Started At","engineStatus":"Status","username":"Username"},"noLimit":"Unlimited","core":"Cores","row":{"applicationName":"Application Name","usedTime":"Started At","engineStatus":"Status","engineInstance":"Engine Instance","queueName":"Queue Name","user":"User","cpu":"Used server CPU resources","memory":"Used server memory resources","queueCpu":"Used Yarn queue CPU resources","queueMemory":"Used Yarn queue memory resources"}},"setting":{"global":"Global","globalSetting":"Global Settings","hide":"Hide","show":"Show","advancedSetting":"Advanced Settings","dataDev":"Data Development"},"globalValiable":{"globalValiable":"Global Variables","rules":{"first":{"required":"The key of variable {text} is empty","lengthLimit":"Length between 1 to 128 characters","letterTypeLimit":"Started with alphabetic characters, spance and Chinese characters are not allowed","placeholder":"Please enter the variable name"},"second":{"required":"The value of variable {text} is empty","lengthLimit":"Length between 1 to 128 characters","placeholder":"Please enter the variable value"}},"addArgs":"New argument","emptyDataText":"No global variable data yet","sameName":"Duplicated key","error":{"validate":"Invalid items found, please check and then retry!"},"success":{"update":"Successfully updated global variables!"}}}}')},cbf5:function(e,t,s){"use strict";var i=s("bf32"),a=s.n(i);a.a},cc87:function(e,t,s){e.exports=s.p+"img/eventcheckerw.98d403d1.svg"},cd40:function(e,t,s){"use strict";var i=s("708c"),a=s.n(i);a.a},cdaa:function(e,t,s){},cec7:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"setting",style:{height:e.height+"px"}},[s("Menu",{ref:"settingMenu",staticClass:"setting-menu",attrs:{"active-name":e.$t("message.setting.global"),"open-names":["1","2"]},on:{"on-select":e.getAppVariable}},[s("MenuItem",{attrs:{name:e.$t("message.setting.global")}},[s("Icon",{attrs:{type:"ios-paper"}}),e._v(e._s(e.$t("message.setting.globalSetting")))],1),e._l(e.menuList,(function(t,i){return s("Submenu",{key:i,attrs:{name:t.name}},[s("template",{slot:"title"},[s("Icon",{attrs:{type:t.icon}}),e._v("\n        "+e._s(t.title)+"\n      ")],1),e._l(t.children,(function(t,i){return s("MenuItem",{key:i,attrs:{name:t.name}},[e._v(e._s(t.title))])}))],2)}))],2),e.fullTree&&e.fullTree.length?s("div",{staticClass:"setting-content"},[s("div",{staticClass:"setting-content-header"},[s("Button",{on:{click:e.toggleAdvance}},[e._v(e._s(e.isAdvancedShow?e.$t("message.setting.hide"):e.$t("message.setting.show"))+e._s(e.$t("message.setting.advancedSetting")))]),s("Button",{staticClass:"setting-content-btn",attrs:{loading:e.loading,type:"primary"},on:{click:e.save}},[e._v(e._s(e.$t("message.constants.save")))])],1),s("div",{staticClass:"setting-content-variable",style:{height:e.height-40+"px"}},e._l(e.fullTree,(function(t,i){return s("variable",{key:i,ref:"variable",refInFor:!0,attrs:{variable:t,"un-valid-msg":e.unValidMsg,"is-advanced-show":e.isAdvancedShow},on:{"add-item":e.handleAdd,"remove-item":e.handleDelete}})})),1)]):e._e()],1)},a=[],n=(s("57e7"),s("28a5"),s("ac6a"),s("f3e2"),s("4917"),s("2ef0")),r=s("b593"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.variable?s("div",{staticClass:"we-variable"},[s("div",{staticClass:"we-variable-header"},[s("div",[s("div",{staticClass:"we-variable-header-title"},[s("span",[e._v(e._s(e.variable.name))]),s("span",[e._v("("+e._s(e.variable.settings.length)+")")])]),s("span",{staticClass:"we-variable-header-control",on:{click:e.handleControl}},[e._v(e._s(e.controlLabel))])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isHide,expression:"!isHide"}],staticClass:"we-variable-content"},[e._l(e.variable.settings,(function(t,i){return[e.getItemIsShow(t)?s("div",{key:i,staticClass:"we-variable-content-item",attrs:{title:t.description}},[s("span",{staticClass:"we-variable-content-label-group"},[s("span",[e._v(e._s(t.name))]),s("span",{staticClass:"we-variable-content-label-key"},[e._v("["+e._s(t.key)+"]")])]),"OFT"===t.validateType?s("select",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],staticClass:"we-variable-content-input",on:{change:function(s){var i=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"value",s.target.multiple?i:i[0])}}},e._l(t.validateRangeList,(function(t,i){return s("option",{key:i,domProps:{value:t.value}},[e._v(e._s(t.name))])})),0):s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],staticClass:"we-variable-content-input",class:{"un-valid":e.unValid&&e.unValid.key===t.key},attrs:{placeholder:t.defaultValue?"默认值:"+t.defaultValue:"无默认值",type:"text"},domProps:{value:t.value},on:{input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}}),e.unValid&&e.unValid.key===t.key?s("span",{staticClass:"we-warning-bar"},[e._v(e._s(e.unValid.msg))]):e._e()]):e._e()]}))],2)]):e._e()},c=[],l={props:{variable:Object,unValidMsg:Object,isAdvancedShow:Boolean},data:function(){return{isHide:!1,controlLabel:"收起",unValid:null}},watch:{unValidMsg:function(e,t){this.setUnValidMsg(e)}},methods:{handleControl:function(){this.isHide=!this.isHide,this.controlLabel=this.isHide?"展开":"收起"},isNewAdd:function(e){return e.hasOwnProperty("isNew")},add:function(){},handleOk:function(e){this.$emit("add-item",e,this.variable,(function(t){e.isNew=!1}))},handleDelete:function(e){this.$emit("remove-item",e,this.variable,(function(e){}))},setUnValidMsg:function(e){var t=e.key,s=e.msg;this.unValid={key:t,msg:s}},getItemIsShow:function(e){return e.hidden?!e.hidden:!(!e.advanced||!this.isAdvancedShow)||!(e.advanced&&!this.isAdvancedShow)}}},d=l,u=(s("69f1"),s("2877")),h=Object(u["a"])(d,o,c,!1,null,null,null),p=h.exports,f=p,m={name:"Setting",components:{variable:f},data:function(){return{menuList:[{name:"2",title:this.$t("message.setting.dataDev"),icon:"ios-people",children:[{name:"IDE-spark",title:"Spark"},{name:"IDE-hive",title:"Hive"},{name:"IDE-python",title:"Python"},{name:"IDE-pipeline",title:"PipeLine"},{name:"IDE-jdbc",title:"Jdbc"}]},{name:"3",title:"Visualis",icon:"md-analytics",children:[{name:"visualis-spark",title:"Spark"}]},{name:"4",title:"工作流",icon:"md-analytics",children:[{name:"nodeexecution-spark",title:"Spark"},{name:"nodeexecution-hive",title:"Hive"},{name:"nodeexecution-python",title:"Python"},{name:"nodeexecution-jdbc",title:"Jdbc"}]}],activeMenu:"",fullTree:[],loading:!1,unValidMsg:{},isAdvancedShow:!1,height:0}},mounted:function(){var e=this;this.height=this.$route.query.height,this.$nextTick((function(){e.$refs.settingMenu.updateActiveName(),e.getAppVariable("全局")}))},methods:{getAppVariable:function(e){var t=this;this.activeMenu=e;var s="IDE",i="visualis",a="nodeexecution",o="通用设置",c="通用设置";e.match(s)?(c=s,o=e.slice(s.length+1,e.length)):e.match(i)?(c=i,o=e.slice(i.length+1,e.length)):e.match(a)&&(c=a,o=e.slice(a.length+1,e.length)),r["a"].fetch("/configuration/getFullTreesByAppName",{appName:o,creator:c},"get").then((function(e){t.loading=!1,t.fullTree=e.fullTree,t.fullTree.forEach((function(e){e.settings=Object(n["orderBy"])(e.settings,["level"],["asc"]),e.settings.length&&e.settings.forEach((function(e){"OFT"===e.validateType&&(e.validateRangeList=t.formatValidateRange(e.validateRange,e.key))}))}))})).catch((function(){t.loading=!1}))},formatValidateRange:function(e,t){var s=[],i=[];try{i=JSON.parse(e)}catch(a){i=e.slice(1,e.length-1).split(",")}return i.forEach((function(e){s.push({name:"BLANK"===e&&"pipeline.out.null.type"===t?"空字符串":e,value:e})})),s},handleAdd:function(e,t,s){setTimeout((function(){s(!0)}),200)},handleDelete:function(e,t,s){setTimeout((function(){s(!0)}),200)},save:function(){var e=this;this.loading=!0,this.checkValid(),r["a"].fetch("/configuration/saveFullTree",{fullTree:this.fullTree}).then((function(){e.getAppVariable(e.activeMenu),e.unValidMsg={},e.$Message.success(e.$t("message.constants.save"))})).catch((function(t){if(e.loading=!1,t.message){var s="",i="";e.fullTree.forEach((function(e){e.settings&&e.settings.forEach((function(e){"OFT"===e.validateType&&e.hasOwnProperty("validateRangeList")&&delete e.validateRangeList,t.message.indexOf(e.key)>-1&&(i=e.description,s=e.key)}))})),e.unValidMsg={key:s,msg:i}}}))},checkValid:function(){"全局"===this.activeMenu&&this.fullTree.forEach((function(e){e.settings.forEach((function(e){if("bdp.dwc.yarnqueue.memory.max"===e.key||"bdp.dwc.client.memory.max"===e.key){var t=e.defaultValue[e.defaultValue.length-1];e.value&&e.value[e.value.length-1].toLowerCase()!==t.toLowerCase()&&(e.value+=t)}}))}))},toggleAdvance:function(){this.isAdvancedShow=!this.isAdvancedShow}}},g=m,b=(s("77e6"),Object(u["a"])(g,i,a,!1,null,null,null));t["default"]=b.exports},cf4a:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"footerChannel",staticClass:"layout-footer",on:{mousedown:function(t){return t.preventDefault(),t.stopPropagation(),e.onMouseDown(t)},mouseup:function(t){return t.preventDefault(),t.stopPropagation(),e.oMouseUp(t)},click:function(t){return t.stopPropagation(),e.toast(t)}}},[s("resource-simple",{ref:"resourceSimple",on:{"update-job":e.updateJob}}),s("div",{staticClass:"footer-channel",attrs:{title:e.msg}},[s("Icon",{staticClass:"footer-channel-job",attrs:{type:"ios-swap"}}),s("span",{staticClass:"footer-channel-job-num"},[e._v(e._s(e.num))])],1)],1)},a=[],n=s("8cfe"),r=s("b593"),o={components:{resourceSimple:n["default"].component},data:function(){return{num:0,msg:"",moveX:null,moveY:null,isMouseDrop:!1,isMouseMove:!1}},created:function(){var e=this;setTimeout((function(){e.getRunningJob()}),500)},watch:{$route:function(){this.resetChannelPosition()}},methods:{getRunningJob:function(){var e=this;r["a"].fetch("/jobhistory/list",{pageSize:100,status:"Running,Inited,Scheduled"},"get").then((function(t){e.num=t.tasks.length}))},"Footer:updateRunningJob":function(e){this.num=e},"Footer:getRunningJob":function(e){e(this.num)},updateJob:function(e){var t="Footer:updateRunningJob";this[t](e)},toast:function(){this.isMouseMove||this.$refs.resourceSimple.open()},onMouseDown:function(e){var t=this;e=e||window.event;var s=this.$refs.footerChannel;this.moveX=e.clientX-s.offsetLeft,this.moveY=e.clientY-s.offsetTop,this.isMouseDrop=!0,this.isMouseMove=!1,document.onselectstart=function(){return!1},setTimeout((function(){document.onmousemove=function(e){if(t.isMouseDrop){t.isMouseMove=!0;var s=t.$refs.footerChannel,i=e.clientX-t.moveX,a=e.clientY-t.moveY,n=document.documentElement.clientWidth-120,r=document.documentElement.clientHeight-60;t.moveX<=0&&(n=document.documentElement.scrollWidth-120),t.moveY<=0&&(r=document.documentElement.scrollHeight-60),i=Math.min(n,Math.max(0,i)),a=Math.min(r,Math.max(0,a)),s.style.left=i+"px",s.style.top=a+"px"}}}),0)},oMouseUp:function(e){var t=this;document.onmousemove=null;this.$refs.footerChannel;this.isMouseDrop=!1,setTimeout((function(){t.isMouseMove=!1}),200),document.onselectstart=function(){return!0}},resetChannelPosition:function(){var e=this.$refs.footerChannel;e.style.left=document.documentElement.clientWidth-120+"px",e.style.top=document.documentElement.clientHeight-60+"px"}}},c=o,l=(s("5e89"),s("2877")),d=Object(l["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},d02f:function(e,t,s){"use strict";s.r(t);var i=s("a026");t["default"]={name:"HdfsSidebar",events:["HdfsSidebar:setHighLight"],dispatchs:{Workbench:["add","openFile","run","remove","updateTab","checkExist","deleteDirOrFile"],WorkSidebar:["showTree"],HiveSidebar:["showHive","getDatabase","getTables","getTablePartitions"],IndexedDB:["getTabs"]},data:{API_PATH:"http://localhost:8088/api/rest_j/v1/"},methods:{showTree:function(e){var t=i["default"].extend(s("314e").default),a=new t;e(a)}},component:function(){return Promise.resolve().then(s.bind(null,"314e"))}}},d0d5:function(e,t,s){"use strict";s("6b54"),s("87b3"),s("2397"),s("ac6a"),s("f3e2"),s("c5f6"),s("96cf");var i=s("3b8d"),a=s("d225"),n=s("b0b4"),r=s("308d"),o=s("6bb5"),c=s("4e2b"),l=s("2ef0"),d=s("1bd3"),u=s("3022");function h(e){return function(){var t,s=Object(o["a"])(e);if(p()){var i=Object(o["a"])(this).constructor;t=Reflect.construct(s,arguments,i)}else t=s.apply(this,arguments);return Object(r["a"])(this,t)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var f=function(e){Object(c["a"])(s,e);var t=h(s);function s(e){return Object(a["a"])(this,s),t.call(this,e)}return Object(n["a"])(s,[{key:"getProjectCache",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var s,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.projectID,i=t.key,s=Number(s),e.next=4,this.get(s);case 4:if(a=e.sent,!i){e.next=7;break}return e.abrupt("return",a[0][i]);case 7:return e.abrupt("return",a[0]);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addProjectCache",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var s,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.projectID,i=t.value,s=Number(s),e.next=4,this.getProjectCache({projectID:s});case 4:if(a=e.sent,Object(l["isNil"])(a)){e.next=7;break}return e.abrupt("return",this.update(s,i));case 7:return e.abrupt("return",this.add(Object.assign({projectID:s},i)));case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateProjectCache",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var s,i,a,n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.projectID,i=t.key,a=t.value,n=t.isDeep,s=Number(s),r={},!i){e.next=18;break}if(!n){e.next=15;break}return e.next=7,this.getProjectCache({projectID:s});case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0={};case 10:r=e.t0,o=r&&r[i]||[],o.forEach((function(e){e[a.token]===Number(a.sValue)&&(e[a.sKey]=a[a.sKey])})),e.next=16;break;case 15:Object(u["isArray"])(i)?i.forEach((function(e){r[e]=a[e]})):r[i]=a[i];case 16:e.next=19;break;case 18:r=a;case 19:return e.abrupt("return",this.update(s,r));case 20:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeProjectCache",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var s,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.projectID,i=t.key,s=Number(s),e.next=4,this.getProjectCache({projectID:s});case 4:if(a=e.sent,!Object(l["isNil"])(a)){e.next=10;break}if(!i){e.next=9;break}return a[i]=null,e.abrupt("return",this.update(s,a));case 9:return e.abrupt("return",this.remove(s));case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),s}(d["a"]),m=new f("project");t["a"]=m},d163:function(e,t,s){"use strict";var i=s("2d21"),a=s.n(i);a.a},d1ab:function(e,t,s){},d282:function(e,t,s){e.exports=s.p+"img/product.9a7977d7.svg"},d347:function(e,t,s){e.exports=s.p+"img/delete.9c4288e7.svg"},d34d:function(e,t,s){},d39c:function(e,t,s){"use strict";var i=s("0022"),a=s.n(i);a.a},d3e2:function(e,t,s){"use strict";s.r(t),t["default"]={name:"Footer",events:["Footer:updateRunningJob","Footer:getRunningJob"],component:function(){return Promise.resolve().then(s.bind(null,"cf4a"))}}},d44b:function(e,t,s){},d650:function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return n}));s("ac6a"),s("f3e2"),s("7f7f"),s("6b54"),s("87b3"),s("20d6");var i=s("d225"),a=s("b0b4"),n=function(){function e(){Object(i["a"])(this,e),this.storage={}}return Object(a["a"])(e,[{key:"findIndex",value:function(e,t){return e.findIndex((function(e){return e===t}))}},{key:"on",value:function(e,t){"[object Array]"===Object.prototype.toString.call(this.storage[e])?this.storage[e].push(t):this.storage[e]=[t]}},{key:"off",value:function(e,t){if(this.storage[e]){var s=this.findIndex(this.storage[e],t);-1!==s&&this.storage[e].splice(s,1)}}},{key:"clear",value:function(e){return e?this.storage[e]=[]:this.storage={},this.storage}},{key:"emit",value:function(e,t,s){this.storage[e]&&this.storage[e].forEach((function(e){return e(t,s)}))}}]),e}(),r=new n},d6c6:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Form",{ref:"baseInfoForm",staticClass:"node-parameter-bar",attrs:{"label-position":"top",rules:e.formRule,model:e.currentNode}},[s("FormItem",{attrs:{label:e.$t("message.process.nodeParameter.nodeName"),prop:"title"}},[s("Input",{attrs:{placeholder:e.$t("message.process.nodeParameter.inputeNodeName")},model:{value:e.currentNode.title,callback:function(t){e.$set(e.currentNode,"title",t)},expression:"currentNode.title"}})],1),s("FormItem",{attrs:{label:e.$t("message.process.nodeParameter.nodeType")}},[s("Input",{attrs:{placeholder:e.$t("message.process.nodeParameter.nodeType"),disabled:""},model:{value:e.currentNode.type,callback:function(t){e.$set(e.currentNode,"type",t)},expression:"currentNode.type"}})],1),s("FormItem",{attrs:{label:e.$t("message.process.nodeParameter.nodeDesc")}},[s("Input",{attrs:{type:"textarea",placeholder:e.$t("message.process.nodeParameter.inputeNodeDesc")},model:{value:e.currentNode.desc,callback:function(t){e.$set(e.currentNode,"desc",t)},expression:"currentNode.desc"}})],1)],1),e.currentNode.jobContent&&e.currentNode.jobContent.jobParams?s("div",{staticClass:"node-module-param-modal-header"},[s("h3",[e._v(e._s(e.$t("message.process.nodeParameter.SXXX")))])]):e._e(),e.currentNode.jobContent&&e.currentNode.jobContent.jobParams?s("Form",{ref:"parameterForm",staticClass:"node-parameter-bar",attrs:{"label-position":"top",rules:e.formRule,model:e.currentNode.jobContent.jobParams}},["linkis.appjoint.sendemail"!==e.currentNode.type?e._l(e.currentNode.jobContent.jobParams,(function(t,i){return s("FormItem",{key:i,attrs:{label:e.toPoin(i),prop:i}},["number"===e.filterFormType(i)?[s("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:e.placeholderResult(i),min:e._f("minLimit")(i),max:e._f("maxLimit")(i),disabled:"queryFrequency"===i},model:{value:e.currentNode.jobContent.jobParams[i],callback:function(t){e.$set(e.currentNode.jobContent.jobParams,i,t)},expression:"currentNode.jobContent.jobParams[key]"}})]:["rmbMessageType"!==i?s("Input",{attrs:{type:e.filterFormType(i),rows:6,placeholder:e.placeholderResult(i),disabled:["msgType","sourceType"].includes(i)},model:{value:e.currentNode.jobContent.jobParams[i],callback:function(t){e.$set(e.currentNode.jobContent.jobParams,i,t)},expression:"currentNode.jobContent.jobParams[key]"}}):e._e()],"rmbMessageType"===i?s("Select",{attrs:{placeholder:e.$t("message.process.nodeParameter.XZRMBXXJZ")},model:{value:e.currentNode.jobContent.jobParams[i],callback:function(t){e.$set(e.currentNode.jobContent.jobParams,i,t)},expression:"currentNode.jobContent.jobParams[key]"}},[s("Option",{attrs:{value:"SYNC"}},[e._v("SYNC")]),s("Option",{attrs:{value:"ASYNC"}},[e._v("ASYNC")])],1):e._e()],2)})):e._l(e.currentNode.jobContent.jobParams,(function(t,i){return["content"!==i?s("formItem",{key:i,attrs:{label:e.toPoin(i),prop:i}},["category"===i?s("Select",{attrs:{placeholder:e.$t("message.process.nodeParameter.XZLX")},on:{"on-change":e.categoryChange},model:{value:e.currentNode.jobContent.jobParams[i],callback:function(t){e.$set(e.currentNode.jobContent.jobParams,i,t)},expression:"currentNode.jobContent.jobParams[key]"}},[s("Option",{attrs:{value:"node"}},[e._v(e._s(e.$t("message.process.nodeParameter.node")))]),s("Option",{attrs:{value:"text"}},[e._v(e._s(e.$t("message.process.nodeParameter.text")))]),s("Option",{attrs:{value:"file"}},[e._v(e._s(e.$t("message.process.nodeParameter.file")))]),s("Option",{attrs:{value:"link"}},[e._v(e._s(e.$t("message.process.nodeParameter.link")))])],1):e._e(),"category"!==i?s("Input",{attrs:{type:e.filterFormType(i),rows:6,placeholder:e.placeholderResult(i)},model:{value:e.currentNode.jobContent.jobParams[i],callback:function(t){e.$set(e.currentNode.jobContent.jobParams,i,t)},expression:"currentNode.jobContent.jobParams[key]"}}):e._e()],1):e._e(),"content"===i&&"node"!=e.currentNode.jobContent.jobParams["category"]?s("formItem",{key:i,attrs:{label:e.toPoin(i),prop:i,rules:[{required:!0,message:e.$t("message.process.nodeParameter.XZHSR"),trigger:"blur",type:"string"}]}},[[s("Input",{attrs:{type:"text",placeholder:e.$t("message.process.nodeParameter.SRZQNR")},model:{value:e.currentNode.jobContent.jobParams[i],callback:function(t){e.$set(e.currentNode.jobContent.jobParams,i,t)},expression:"currentNode.jobContent.jobParams[key]"}})]],2):e._e(),"content"===i&&"node"==e.currentNode.jobContent.jobParams["category"]?s("formItem",{key:i,attrs:{label:e.toPoin(i),prop:i,rules:[{required:!0,message:e.$t("message.process.nodeParameter.XZHSR"),trigger:"blur",type:"array"}]}},[[s("Select",{attrs:{placeholder:e.$t("message.process.nodeParameter.XZSFX"),multiple:""},model:{value:e.currentNode.jobContent.jobParams[i],callback:function(t){e.$set(e.currentNode.jobContent.jobParams,i,t)},expression:"currentNode.jobContent.jobParams[key]"}},e._l(e.newNodes,(function(t){return s("Option",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.title))])})),1)]],2):e._e()]}))],2):e._e(),e.currentNode.jobContent&&e.currentNode.jobContent.code?s("div",{staticClass:"node-parameter-bar"},[s("div",[e._v("code:")]),s("br"),s("Input",{attrs:{rows:8,type:"textarea"},model:{value:e.currentNode.jobContent.code,callback:function(t){e.$set(e.currentNode.jobContent,"code",t)},expression:"currentNode.jobContent.code"}})],1):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isExcuteNode(),expression:"isExcuteNode()"}],staticClass:"node-parameter-bar"},[s("span",[e._v(e._s(e.$t("message.process.nodeParameter.ZYXX")))]),s("resource",{attrs:{resources:e.resources,"is-ripetition":!0,"node-type":e.nodeData.type,readonly:e.readonly},on:{"update-resources":e.updateResources}})],1),s("div",{staticClass:"save-button"},[s("Button",{on:{click:e.save}},[e._v(e._s(e.$t("message.process.nodeParameter.BC")))])],1)],1)},a=[],n=(s("f3e2"),s("ac6a"),s("456d"),s("6d67"),s("6762"),s("2fdb"),s("d25f"),s("a481"),s("9a70")),r=s("bbdf"),o={name:"NodeParams",components:{resource:n["default"]},filters:{toHump:function(e){return e.replace(/\.(\w)/g,(function(e,t){return t.toUpperCase()}))},minLimit:function(e){switch(e){case"spark-driver-memory":case"spark-executor-instances":case"spark-executor-cores":return 1;case"spark-executor-memory":return 3;case"maxReceiveHours":case"maxCheckHours":case"queryFrequency":case"timeScape":return 1;default:return 1}},maxLimit:function(e){switch(e){case"spark-driver-memory":case"spark-executor-memory":return 15;case"spark-executor-instances":return 40;case"spark-executor-cores":return 10;case"maxReceiveHours":case"maxCheckHours":case"queryFrequency":case"timeScape":return 1e3;default:return 10}}},props:{nodeData:{type:Object,default:null},flowName:{type:String,default:""},readonly:{type:Boolean,default:!1},nodes:{type:Array,default:function(){return[]}}},data:function(){return{currentNode:{},resources:[],paramsIsChange:!1,timer:null}},watch:{nodeData:function(e){var t=this;this.currentNode=e,this.currentNode.jobContent&&this.currentNode.jobContent.script?this.resources=this.currentNode.resources.filter((function(e){return e.fileName!==t.currentNode.jobContent.script})):this.currentNode.resources?this.resources=this.currentNode.resources:this.resources=[]},currentNode:{handler:function(){this.paramsIsChange=!0,this.paramsIsChangeAction()},deep:!0},paramsIsChange:function(e){this.$emit("paramsChange",e)}},computed:{newNodes:function(){var e=this;return this.nodes.filter((function(t){return t.key!==e.currentNode.key}))},formRule:function(){var e=this,t=function(t,s,i){var a=function(e){try{return JSON.parse(e),!0}catch(t){return!1}};a(s)?i():i(new Error(e.$t("message.process.nodeParameter.QTXZQJSON")))},s=function(t,s,i){s==="".concat(e.flowName,"_")?i(new Error(e.$t("message.process.nodeParameter.JDMCBNYGZL"))):i()};return{jdbcUrl:[{required:!0,message:"joburl为必填项",trigger:"blur"},{type:"string",pattern:/(jdbc)[a-zA-Z0-9_:./]/,message:"必须以jdbc开头，且只支持数字、字母、(_:./)",trigger:"blur"}],jdbcUsername:[{required:!0,message:"username为必填项",trigger:"blur"},{type:"string",pattern:/^[^\u4e00-\u9fa5]+$/,message:"此值不支持中文",trigger:"blur"}],jdbcPassword:[{required:!0,message:"password为必填项",trigger:"blur"},{type:"string",pattern:/^[^\u4e00-\u9fa5]+$/,message:"此值不支持中文",trigger:"blur"}],sourceType:[{required:!0,message:this.$t("message.process.nodeParameter.XZSJLY"),trigger:"blur"},{type:"string",pattern:/^[^\u4e00-\u9fa5]+$/,message:this.$t("message.process.nodeParameter.CZBNSRZW"),trigger:"change"},{min:1,max:500,message:this.$t("message.process.nodeParameter.CD500ZF"),trigger:"change"}],checkObject:[{required:!0,message:this.$t("message.process.nodeParameter.QTXYLSJMC"),trigger:"blur"},{type:"string",pattern:/^[^\u4e00-\u9fa5]+$/,message:this.$t("message.process.nodeParameter.CZBNSRZW"),trigger:"change"},{type:"string",pattern:/^[a-zA-Z]([^.]*\.[^.]*){1,}$/,message:this.$t("message.process.nodeParameter.CZGSCW"),trigger:"blur"},{min:1,max:500,message:this.$t("message.process.nodeParameter.CD500ZF"),trigger:"change"}],maxReceiveHours:[{required:!1,message:this.$t("message.process.nodeParameter.QTXDDSJ"),trigger:"blur",type:"number"}],queryFrequency:[{required:!1,message:this.$t("message.process.nodeParameter.QTXCXPL"),trigger:"blur",type:"number"}],timeScape:[{required:!1,message:this.$t("message.process.nodeParameter.QTXSJFW"),trigger:"blur",type:"number"}],jobDesc:[{required:!1,message:this.$t("message.process.nodeParameter.QZQTXDYPZ"),trigger:"blur"},{type:"string",pattern:/^[^\u4e00-\u9fa5]+$/,message:this.$t("message.process.nodeParameter.CZBNSRZW"),trigger:"change"},{min:1,max:500,message:this.$t("message.process.nodeParameter.CD500ZF"),trigger:"change"}],msgSender:[{required:!0,message:this.$t("message.process.nodeParameter.QZQTXFSZ"),trigger:"blur"},{type:"string",pattern:/^[a-zA-Z][a-zA-Z0-9_@-]*$/,message:this.$t("message.process.nodeParameter.BXYZMKTSZXHXZHX"),trigger:"change"},{min:1,max:500,message:this.$t("message.process.nodeParameter.CD500ZF"),trigger:"change"}],msgType:[{required:!0,message:this.$t("message.process.nodeParameter.QZQTXXXLX"),trigger:"blur"},{type:"string",pattern:/^[a-zA-Z][a-zA-Z0-9_]*$/,message:this.$t("message.process.nodeParameter.BXYZMKTXHX"),trigger:"change"},{min:1,max:500,message:this.$t("message.process.nodeParameter.CD500ZF"),trigger:"change"}],msgReceiver:[{required:!0,message:this.$t("message.process.nodeParameter.QZQTXJSZ"),trigger:"blur"},{type:"string",pattern:/^[^\u4e00-\u9fa5]+$/,message:this.$t("message.process.nodeParameter.CZBNSRZW"),trigger:"change"},{min:1,max:500,message:this.$t("message.process.nodeParameter.CD500ZF"),trigger:"change"}],msgTopic:[{required:!0,message:this.eventFilter("msgTopic",this.nodeData.type),trigger:"blur"},{type:"string",pattern:/^[^\u4e00-\u9fa5]+$/,message:this.$t("message.process.nodeParameter.CZBNSRZW"),trigger:"change"},{type:"string",pattern:/^[a-zA-Z0_9-]([^_]*_[^_]*){2}[a-zA-Z\d]$/,message:this.$t("message.process.nodeParameter.CGSCW"),trigger:"blur"},{min:1,max:500,message:this.$t("message.process.nodeParameter.CD500ZF"),trigger:"change"}],msgSavekey:[{required:!1,message:this.$t("message.process.nodeParameter.XXLRKEYZ"),trigger:"blur"},{type:"string",pattern:/^[^\u4e00-\u9fa5]+$/,message:this.$t("message.process.nodeParameter.CZBNSRZW"),trigger:"change"},{min:1,max:500,message:this.$t("message.process.nodeParameter.CD500ZF"),trigger:"change"}],msgName:[{required:!0,message:this.eventFilter("msgName",this.nodeData.type),trigger:"blur"},{min:1,max:128,message:this.$t("message.process.nodeParameter.CDZ128ZF"),trigger:"change"},{type:"string",pattern:/^[a-zA-Z][a-zA-Z0-9_-]*$/,message:this.$t("message.process.nodeParameter.BXYZMKTXHX"),trigger:"change"}],msgBody:[{required:!1,message:this.$t("message.process.nodeParameter.TXXXNR"),trigger:"blur"},{type:"string",pattern:/^[^\u4e00-\u9fa5]+$/,message:this.$t("message.process.nodeParameter.CZBNSRZW"),trigger:"change"},{min:1,max:500,message:this.$t("message.process.nodeParameter.CD500ZF"),trigger:"change"}],rmbTargetDcn:[{required:!0,message:this.$t("message.process.nodeParameter.TXMBDCN"),trigger:"blur"},{type:"string",pattern:/^[^\u4e00-\u9fa5]+$/,message:this.$t("message.process.nodeParameter.CZBNSRZW"),trigger:"change"},{min:1,max:500,message:this.$t("message.process.nodeParameter.CD500ZF"),trigger:"change"}],rmbServiceld:[{required:!0,message:this.$t("message.process.nodeParameter.TXRMBFW"),trigger:"blur"},{type:"string",pattern:/^[^\u4e00-\u9fa5]+$/,message:this.$t("message.process.nodeParameter.CZBNSRZW"),trigger:"change"},{min:1,max:500,message:this.$t("message.process.nodeParameter.CD500ZF"),trigger:"change"}],rmbEnvironment:[{required:!0,message:this.$t("message.process.nodeParameter.TXRMBXXHJ"),trigger:"blur"},{type:"string",pattern:/^[^\u4e00-\u9fa5]+$/,message:this.$t("message.process.nodeParameter.CZBNSRZW"),trigger:"change"},{min:1,max:500,message:this.$t("message.process.nodeParameter.CD500ZF"),trigger:"change"}],rmbMessageType:[{required:!1,message:this.$t("message.process.nodeParameter.XZRMBXXFSJZ"),trigger:"blur"},{type:"string",pattern:/^[^\u4e00-\u9fa5]+$/,message:this.$t("message.process.nodeParameter.CZBNSRZW"),trigger:"change"},{min:1,max:500,message:this.$t("message.process.nodeParameter.CD500ZF"),trigger:"change"}],rmbMessage:[{required:!0,message:this.$t("message.process.nodeParameter.TXRMBNRJSON"),trigger:"blur"},{type:"string",pattern:/^[^\u4e00-\u9fa5]+$/,message:this.$t("message.process.nodeParameter.CZBNSRZW"),trigger:"change"},{validator:t,trigger:"blur",key:"queryFrequency"},{min:1,max:500,message:this.$t("message.process.nodeParameter.CD500ZF"),trigger:"change"}],"spark-driver-memory":[{required:!1,message:this.$t("message.process.nodeParameter.CDNC"),trigger:"blur",type:"number"}],"spark-executor-memory":[{required:!1,message:this.$t("message.process.nodeParameter.ZXQNC"),trigger:"blur",type:"number"}],"spark-executor-cores":[{required:!1,message:this.$t("message.process.nodeParameter.ZXQHXGS"),trigger:"blur",type:"number"}],"spark-executor-instances":[{required:!1,message:this.$t("message.process.nodeParameter.ZXQGS"),trigger:"blur",type:"number"}],"wds-linkis-yarnqueue":[{required:!1,message:this.$t("message.process.nodeParameter.ZXDL"),trigger:"blur"},{type:"string",pattern:/^[a-zA-Z][a-zA-Z0-9_]*$/,message:this.$t("message.process.nodeParameter.BXYZMKTXHX"),trigger:"change"},{min:1,max:500,message:this.$t("message.process.nodeParameter.CD500ZF"),trigger:"change"}],params:[{required:!1,message:this.$t("message.process.nodeParameter.MLHCS"),trigger:"blur"},{type:"string",pattern:/^((?!([\u4e00-\u9fa5]|\\n)).)*$/,message:this.$t("message.process.nodeParameter.DGCSYKGGK"),trigger:"change"},{min:1,max:500,message:this.$t("message.process.nodeParameter.CD500ZF"),trigger:"change"}],title:[{required:!0,message:this.$t("message.process.nodeParameter.TXJDMC"),trigger:"blur"},{type:"string",pattern:/^[a-zA-Z][a-zA-Z0-9_]*$/,message:this.$t("message.process.nodeParameter.BXYZMKTXHX"),trigger:"change"},{validator:s,trigger:"blur"},{min:1,max:128,message:this.$t("message.process.nodeParameter.CDZ128ZF"),trigger:"change"}],category:[{required:!0,message:this.$t("message.process.nodeParameter.XZLX"),trigger:"blur"}],subject:[{required:!0,message:this.$t("message.process.nodeParameter.TXYJBT"),trigger:"blur"},{type:"string",pattern:/^[a-zA-Z0-9_\u4e00-\u9fa5]*$/,message:this.$t("message.process.nodeParameter.BTZZCZW"),trigger:"change"},{min:1,max:128,message:this.$t("message.process.nodeParameter.CDZ128ZF"),trigger:"change"}],to:[{required:!0,message:this.$t("message.process.nodeParameter.TXSJR"),trigger:"blur"},{type:"string",pattern:/^[a-z][a-zA-Z0-9_.@]*$/,message:this.$t("message.process.nodeParameter.BXYZMKTSZXHXZHX"),trigger:"change"}],cc:[{required:!1,message:this.$t("message.process.nodeParameter.TXCSR"),trigger:"blur"},{type:"string",pattern:/^[a-z][a-zA-Z0-9_.@]*$/,message:this.$t("message.process.nodeParameter.BXYZMKTSZXHXZHX"),trigger:"change"}],bcc:[{required:!1,message:this.$t("message.process.nodeParameter.TXMMFSR"),trigger:"blur"},{type:"string",pattern:/^[a-z][a-zA-Z0-9_.@]*$/,message:this.$t("message.process.nodeParameter.BXYZMKTSZXHXZHX"),trigger:"change"}],itsm:[{required:!0,message:this.$t("message.process.nodeParameter.TXGLSPD"),trigger:"blur"},{type:"string",pattern:/^[0-9_.]*$/,message:this.$t("message.process.nodeParameter.ZZCSZ"),trigger:"change"},{min:1,max:128,message:this.$t("message.process.nodeParameter.CDZ128ZF"),trigger:"change"}],executeUser:[{required:!0,message:this.$t("message.process.nodeParameter.required"),trigger:"blur"}]}}},methods:{paramsIsChangeAction:function(){var e=this;this.timer&&clearInterval(this.timer),this.timer=setInterval((function(){e.paramsIsChange||clearInterval(e.timer),e.paramsIsChange=!1}),3e5)},save:function(){var e=this;this.resourcesAction(),[r["b"].HQL,r["b"].SPARKSQL,r["b"].SPARKPY,r["b"].SCALA].includes(this.currentNode.type)?Object.keys(this.currentNode.jobContent.jobParams).map((function(t){var s=t.replace(/-/g,".");e.currentNode.params.configuration.startup[s]=String(e.currentNode.jobContent.jobParams[t])})):(this.currentNode.jobContent&&this.currentNode.jobContent.jobParams&&(this.currentNode.params.configuration.runtime=JSON.parse(JSON.stringify(this.currentNode.jobContent.jobParams))),[r["b"].EVENTCHECKERF,r["b"].EVENTCHECKERW,r["b"].DATACHECKER,r["b"].JDBC].includes(this.currentNode.type)&&Object.keys(this.currentNode.params.configuration.runtime).map((function(t){e.currentNode.params.configuration.runtime[e.transtionKey(t)]=String(e.currentNode.params.configuration.runtime[t]),delete e.currentNode.params.configuration.runtime[t]}))),this.validFrom()},validFrom:function(){var e=this;this.$refs.baseInfoForm.validate((function(t){t?e.$refs.parameterForm?e.$refs.parameterForm.validate((function(t){t?e.$emit("saveNode",e.currentNode):e.$Message.warning(e.$t("message.process.nodeParameter.BCSB"))})):e.$emit("saveNode",e.currentNode):e.$Message.warning(e.$t("message.process.nodeParameter.JDBDXTXBHF"))}))},transtionKey:function(e){return e.replace(/([A-Z])/g,".$1").toLowerCase()},resourcesAction:function(){var e=this,t=[];this.currentNode.jobContent&&this.currentNode.jobContent.script&&(t=this.currentNode.resources.filter((function(t){return t.fileName===e.currentNode.jobContent.script}))),this.resources.map((function(e){t.push(e)})),this.currentNode.resources=t},updateResources:function(e){this.resources=e.map((function(e){return{fileName:e.fileName,resourceId:e.resourceId,version:e.version}})),this.resourcesAction(),this.$emit("saveNode",this.currentNode)},isExcuteNode:function(){return this.currentNode.type==r["b"].SPARKPY||this.currentNode.type==r["b"].SPARKSQL||this.currentNode.type===r["b"].SHELL},placeholderResult:function(e){var t=this,s=this.$t("message.process.nodeParameter.JDBDXTXBHF");return Object.keys(this.formRule).forEach((function(i){i===e&&(s=t.formRule[i][0].message)})),s},eventFilter:function(e,t){var s="msgName"===e?"TXXXMC":"TXZT";return r["b"].EVENTCHECKERF===t?this.$t("message.process.nodeParameter.".concat(s),{type:"eventreceiver"}):this.$t("message.process.nodeParameter.".concat(s),{type:"eventsender"})},filterFormType:function(e){switch(e){case"maxReceiveHours":case"maxCheckHours":case"queryFrequency":case"timeScape":case"spark-driver-memory":case"spark-executor-memory":case"spark-executor-cores":case"spark-executor-instances":return"number";case"jobDesc":case"msgBody":case"rmbMessage":return"textarea";default:return"text"}},categoryChange:function(){this.currentNode.jobContent.jobParams["content"]=""},toPoin:function(e){switch(e){case"params":return this.$t("message.process.nodeParameter.MLHCS");case"category":return this.$t("message.process.nodeParameter.LX");case"subject":return this.$t("message.process.nodeParameter.YJLX");case"content":return this.$t("message.process.nodeParameter.FSX");case"to":return this.$t("message.process.nodeParameter.SJR");case"cc":return this.$t("message.process.nodeParameter.CS");case"bcc":return this.$t("message.process.nodeParameter.MMCS");case"filter":return this.$t("message.process.nodeParameter.filter");case"executeUser":return this.$t("message.process.nodeParameter.executeUser");default:return e.replace(/([A-Z])/g,".$1").toLowerCase()}}}},c=o,l=s("2877"),d=Object(l["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},d80b:function(e,t,s){"use strict";var i=s("5ab8"),a=s.n(i);a.a},d93c:function(e,t,s){},d9a9:function(e,t,s){"use strict";s.r(t),t["default"]={name:"GlobalHistory",dispatchs:{Workbench:["add"]},component:function(){return Promise.resolve().then(s.bind(null,"052e"))}}},daa2:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Row",{staticClass:"expand-row"},[s("Col",{attrs:{span:"8"}},[s("span",{staticClass:"expand-key"},[e._v(e._s(e.$t("message.resource.row.applicationName")+"："))]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.row.applicationName))])]),s("Col",{attrs:{span:"8"}},[s("span",{staticClass:"expand-key"},[e._v(e._s(e.$t("message.resource.row.usedTime")+"："))]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.usedTime))])]),s("Col",{attrs:{span:"8"}},[s("span",{staticClass:"expand-key"},[e._v(e._s(e.$t("message.resource.row.engineStatus")+"："))]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.row.engineStatus))])])],1),s("Row",{staticClass:"expand-row"},[s("Col",{attrs:{span:"8"}},[s("span",{staticClass:"expand-key"},[e._v(e._s(e.$t("message.resource.row.engineInstance")+"："))]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.row.engineInstance))])]),e.usedResource.yarn?s("Col",{attrs:{span:"8"}},[s("span",{staticClass:"expand-key"},[e._v(e._s(e.$t("message.resource.row.queueName")+"："))]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.usedResource.yarn.queueName||e.$t("message.constants.noDataText")))])]):e._e(),s("Col",{attrs:{span:"8"}},[s("span",{staticClass:"expand-key"},[e._v(e._s(e.$t("message.resource.row.user")+"："))]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.row.statusInfo.engineInfo.user))])])],1),e.usedResource.driver?s("Row",{staticClass:"expand-row"},[s("Col",{attrs:{span:"8"}},[s("span",{staticClass:"expand-key"},[e._v(e._s(e.$t("message.resource.row.cpu")+"："))]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.formatCpu(e.usedResource.driver.cpu)))])]),s("Col",{attrs:{span:"8"}},[s("span",{staticClass:"expand-key"},[e._v(e._s(e.$t("message.resource.row.memory")+"："))]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.usedResource.driver.memory))])])],1):s("Row",{staticClass:"expand-row"},[s("Col",{attrs:{span:"8"}},[s("span",{staticClass:"expand-key"},[e._v(e._s(e.$t("message.resource.row.cpu")+"："))]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.formatCpu(e.usedResource.cpu)))])]),s("Col",{attrs:{span:"8"}},[s("span",{staticClass:"expand-key"},[e._v(e._s(e.$t("message.resource.row.memory")+"："))]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.usedResource.memory))])])],1),e.usedResource.yarn?s("Row",{staticClass:"expand-row"},[s("Col",{attrs:{span:"8"}},[s("span",{staticClass:"expand-key"},[e._v(e._s(e.$t("message.resource.row.queueCpu")+"："))]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.formatCpu(e.usedResource.yarn.queueCpu)))])]),s("Col",{attrs:{span:"8"}},[s("span",{staticClass:"expand-key"},[e._v(e._s(e.$t("message.resource.row.queueMemory")+"："))]),s("span",{staticClass:"expand-value"},[e._v(e._s(e.usedResource.yarn.queueMemory))])])],1):e._e()],1)},a=[],n=s("c1df"),r=s.n(n),o={props:{row:Object,formatCpu:Function},computed:{usedResource:function(){return JSON.parse(this.row.usedResource)},usedTime:function(){return r()(this.row.usedTime).format("YYYY-MM-DD HH:mm:ss")}}},c=o,l=(s("d163"),s("2877")),d=Object(l["a"])(c,i,a,!1,null,"d9be04f4",null);t["default"]=d.exports},daf6:function(e,t,s){"use strict";s.r(t),t["default"]={name:"FAQ",data:{ENVIR:"production"},component:function(){return Promise.resolve().then(s.bind(null,"96d5"))}}},db06:function(e,t,s){},db9a:function(e,t,s){"use strict";var i=s("04c2"),a=s.n(i);a.a},dd7d:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"workflow-arguments"},[s("div",{staticClass:"workflow-arguments-setting"},[s("div",{staticClass:"workflow-arguments-title-wrap"},[s("h4",{staticClass:"workflow-arguments-title"},[e._v(e._s(e.$t("message.process.arguments.workFlowConfig")))])]),s("Form",{ref:"settingForm",attrs:{"label-width":75,model:e.settingForm,rules:e.rules}},[s("FormItem",{attrs:{label:e.$t("message.process.arguments.proxyuser"),prop:"proxyuser"}},[s("Input",{attrs:{type:"text",placeholder:e.$t("message.process.arguments.inputProxyuser")},on:{"on-change":e.onProxyUserChange},model:{value:e.settingForm["proxyuser"],callback:function(t){e.$set(e.settingForm,"proxyuser",t)},expression:"settingForm['proxyuser']"}})],1)],1)],1),s("dynamic-form",{ref:"dynamicForm",attrs:{title:e.$t("message.process.arguments.globVar")},on:{change:e.onVariableChange}})],1)},a=[],n=(s("ac6a"),s("456d"),s("6d67"),s("d25f"),s("2ef0")),r=s("0971"),o=s("3b1c"),c={components:{dynamicForm:o["a"]},props:{props:{type:Array,default:function(){return[]}}},data:function(){return{settingForm:{proxyuser:""},rules:{proxyuser:[{pattern:/^[a-zA-Z0-9_]+$/,message:this.$t("message.process.arguments.valid"),trigger:"change"}]}}},watch:{props:function(e,t){Object(n["isEmpty"])(t)&&this.setData()}},methods:{setData:function(){if(Object(n["isEmpty"])(this.props))this.settingForm.proxyuser="";else{this.settingForm.proxyuser=this.props[0]["user.to.proxy"];var e=this.props.filter((function(e){return"user.to.proxy"!==Object(n["keys"])(e)[0]}));Object(n["isEmpty"])(e)||(this.$refs.dynamicForm.formDynamic.list=e.map((function(e){var t=Object.keys(e)[0];return{key:t,value:e[t]}})))}},onProxyUserChange:function(){this.emitChange(this,this.$refs.dynamicForm.formDynamic.list)},onVariableChange:function(e){this.emitChange(this,e)},emitChange:Object(n["debounce"])((function(e,t){var s=r["a"].convertArrayToMap(t),i=[{"user.to.proxy":e.settingForm.proxyuser}].concat(s);e.$emit("change-props",i)}),300)}},l=c,d=(s("608f"),s("2877")),u=Object(d["a"])(l,i,a,!1,null,null,null);t["default"]=u.exports},de38:function(e,t,s){},dfcc:function(e,t,s){},e22b:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"statistics"},[s("Split",{model:{value:e.split,callback:function(t){e.split=t},expression:"split"}},[e._l(e.info,(function(t,i){return s("Card",{key:i,staticClass:"statistics-card",attrs:{slot:"left",bordered:!1},slot:"left"},[s("p",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))]),s("p",e._l(t.children,(function(t,i){return s("span",{key:i,staticClass:"statistics-card-item"},[s("span",{staticClass:"statistics-card-item-title",style:{width:e.enEnv?"140px":"100px"}},[e._v(e._s(t.title)+": ")]),s("span",{staticClass:"statistics-card-item-value",style:{width:e.enEnv?"calc(100% - 144px)":"calc(100% - 104px)"}},[e._v(e._s(e.formatValue(t)))])])})),0)])})),s("Card",{staticClass:"statistics-card",attrs:{slot:"right",bordered:!1},slot:"right"},[s("p",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("message.tableDetails.FQXX")))]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.tableInfo.isPartition,expression:"tableInfo.isPartition"}],staticClass:"statistics-card-label"},[e._v(e._s("* "+e.$t("message.tableDetails.DJFQCK")))]),s("Tree",{ref:"partTree",staticClass:"statistics-card-tree",attrs:{data:e.formatPartions(e.tableInfo.statisticInfo.partitions,0),"empty-text":e.$t("message.tableDetails.WFQSJ")},on:{"on-select-change":e.getCurrentNode}})],1)],2)],1)},a=[],n=(s("7f7f"),s("57e7"),s("100e")),r=s("2ef0"),o={props:{tableInfo:{type:Object},enEnv:Boolean},data:function(){return{split:.5,info:[{title:this.$t("message.tableDetails.BXX"),children:[{key:"fieldsNum",title:this.$t("message.tableDetails.BZD")},{key:"tableSize",title:this.$t("message.tableDetails.BDX")},{key:"fileNum",title:this.$t("message.tableDetails.WJM")},{key:"partitionsNum",title:this.$t("message.tableDetails.FQS")},{key:"tableLastUpdateTime",title:this.$t("message.tableDetails.ZHFWSJ"),type:"timestramp"}]}]}},methods:{getCurrentNode:function(e){var t=e[0],s=!Object(r["isEmpty"])(t)&&1===t.level,i=!Object(r["isEmpty"])(t)&&-1===t.title.indexOf(this.$t("message.tableDetails.DX"));t&&s&&i&&(t.title+="        （".concat(this.$t("message.tableDetails.FQDX")).concat(t.partitionSize,"，").concat(this.$t("message.tableDetails.WJS")).concat(t.fileNum,"）"))},formatValue:function(e){var t=this.tableInfo.statisticInfo;return t?n["a"].formatValue(t,e):null},formatPartions:function(e,t){var s=this;return t+=1,Object(r["map"])(e,(function(e){return{label:e.name,title:e.name,partitionSize:e.partitionSize,expand:!1,children:s.formatPartions(e.childrens,t),fileNum:e.fileNum,level:t}}))}}},c=o,l=s("2877"),d=Object(l["a"])(c,i,a,!1,null,null,null);t["default"]=d.exports},e435:function(e,t,s){"use strict";var i=s("266c"),a=s.n(i);a.a},e4ef:function(e,t,s){},e56e:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{attrs:{title:"add"===e.actionType?"工作流分类 / 新建":"工作流分类 / 修改",closable:!1},model:{value:e.ClassifyShow,callback:function(t){e.ClassifyShow=t},expression:"ClassifyShow"}},[s("Form",{ref:"classifyForm",attrs:{"label-width":100,model:e.projectData,rules:e.rulesValid,"label-position":"left"}},[s("FormItem",{attrs:{label:"工作流分类名:",prop:"name"}},[s("Input",{attrs:{placeholder:"请输入分类名",disabled:"modify"===e.actionType&&"我的工作流"===e.projectData.name||"我参与的工作流"===e.projectData.name},model:{value:e.projectData.name,callback:function(t){e.$set(e.projectData,"name",t)},expression:"projectData.name"}})],1),s("FormItem",{attrs:{label:"工作流分类描述:"}},[s("Input",{attrs:{type:"textarea",placeholder:"请输入分类名"},model:{value:e.projectData.description,callback:function(t){e.$set(e.projectData,"description",t)},expression:"projectData.description"}})],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"text",size:"large"},on:{click:e.Cancel}},[e._v("取消")]),s("Button",{attrs:{type:"primary",size:"large"},on:{click:e.Ok}},[e._v("确认")])],1)],1)},a=[],n={props:{projectClassify:{type:Object,default:null},addClassifyShow:{type:Boolean,defalut:null},actionType:{type:String,default:""}},data:function(){return{ClassifyShow:this.addClassifyShow,rulesValid:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{message:"名称长度不能大于20",max:20},{type:"string",pattern:/^[a-zA-Z\u4e00-\u9fa5][a-zA-Z0-9_\u4e00-\u9fa5]*$/,message:"必须以字母或中文开头，且只支持字母、数字、下划线和中文！",trigger:"blur"}]}}},computed:{projectData:function(){return this.projectClassify}},watch:{ClassifyShow:function(e){this.$emit("showModal",e),e||this.$refs.classifyForm.resetFields()},addClassifyShow:function(e){this.ClassifyShow=e}},methods:{Ok:function(){var e=this;this.$refs.classifyForm.validate((function(t){t?(e.$emit("addProjectClassifyConfirm",e.projectData),e.ClassifyShow=!1):e.$Message.warning("验证项未通过，请检查后再试！")}))},Cancel:function(){this.ClassifyShow=!1}}},r=n,o=s("2877"),c=Object(o["a"])(r,i,a,!1,null,null,null);t["default"]=c.exports},e667:function(e,t,s){"use strict";var i=s("ec28"),a=s.n(i);a.a},e677:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("we-panel",{attrs:{diretion:"vertical"}},[s("we-panel-item",{staticClass:"editor-panel",attrs:{index:1,"min-size":100}},[s("editor",{ref:"editor",attrs:{script:e.script,work:e.work,"script-type":e.work.type},on:{"on-save":e.save,"on-run":e.run,"on-stop":e.stop}}),e.saveLoading?s("Spin",{staticClass:"new-sidebar-spin",attrs:{size:"large",fix:""}}):e._e()],1),s("we-panel-item",{ref:"bottomPanel",staticClass:"log-panel",attrs:{index:2,height:e.scriptViewState.bottomPanelHeight,"min-size":32},on:{"on-change":e.changeBottomPanel}},[s("div",{staticClass:"workbench-tabs"},[s("div",{staticClass:"workbench-tab-wrapper"},[s("div",{staticClass:"workbench-tab"},[s("div",{staticClass:"workbench-tab-item",class:{active:"progress"==e.scriptViewState.showPanel},on:{click:function(t){return e.showPanelTab("progress")}}},[s("span",[e._v(e._s(e.$t("message.workBench.body.workFlow.tabs.progress")))])]),e.script.result?s("div",{staticClass:"workbench-tab-item",class:{active:"result"==e.scriptViewState.showPanel},on:{click:function(t){return e.showPanelTab("result")}}},[s("span",[e._v(e._s(e.$t("message.workBench.body.workFlow.tabs.result")))])]):e._e(),e.isLogShow?s("div",{staticClass:"workbench-tab-item",class:{active:"log"==e.scriptViewState.showPanel},on:{click:function(t){return e.showPanelTab("log")}}},[s("span",[e._v(e._s(e.$t("message.workBench.body.workFlow.tabs.log")))])]):e._e(),s("div",{staticClass:"workbench-tab-item",class:{active:"history"==e.scriptViewState.showPanel},on:{click:function(t){return e.showPanelTab("history")}}},[s("span",[e._v(e._s(e.$t("message.workBench.body.workFlow.tabs.history")))])])]),s("div",{staticClass:"workbench-tab-button"},[s("Dropdown",{attrs:{trigger:"click",placement:"bottom-end",transfer:""},on:{"on-click":e.configLogPanel}},[s("Icon",{attrs:{type:"md-list"}}),s("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[s("DropdownItem",{attrs:{name:"fullScreen"}},[e._v(e._s(e.$t("message.constants.logPanelList.fullScreen")))]),s("DropdownItem",{attrs:{name:"releaseFullScreen"}},[e._v(e._s(e.$t("message.constants.logPanelList.releaseFullScreen")))]),s("DropdownItem",{attrs:{name:"min"}},[e._v(e._s(e.$t("message.constants.logPanelList.min")))]),s("DropdownItem",{attrs:{name:"releaseMin"}},[e._v(e._s(e.$t("message.constants.logPanelList.releaseMin")))])],1)],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.scriptViewState.bottomPanelMin,expression:"!scriptViewState.bottomPanelMin"}],staticClass:"workbench-container"},["progress"==e.scriptViewState.showPanel?s("we-progress",{attrs:{current:e.script.progress.current,"waiting-size":e.script.progress.waitingSize,steps:e.script.steps,status:e.script.status,application:e.script.application,"progress-info":e.script.progress.progressInfo},on:{"open-panel":e.openPanel}}):e._e(),"result"==e.scriptViewState.showPanel?s("result",{ref:"result",attrs:{result:e.script.result,script:e.script,height:e.scriptViewState.cacheBottomPanelHeight},on:{"on-analysis":e.openAnalysisTab,"on-set-change":e.changeResultSet}}):e._e(),"log"==e.scriptViewState.showPanel?s("log",{attrs:{logs:e.script.log,"log-line":e.script.logLine,"script-view-state":e.scriptViewState,height:e.scriptViewState.cacheBottomPanelHeight}}):e._e(),"history"==e.scriptViewState.showPanel?s("history",{attrs:{history:e.script.history,"run-type":e.script.runType}}):e._e()],1)])])],1)},a=[],n=(s("2caf"),s("ac4d"),s("8a81"),s("5df3"),s("1c4c"),s("6b54"),s("87b3"),s("1c01"),s("58b2"),s("8e6e"),s("d25f"),s("7f7f"),s("57e7"),s("20d6"),s("28a5"),s("456d"),s("ac6a"),s("f3e2"),s("d92a"),s("bd86")),r=s("a8db"),o=(s("96cf"),s("3b8d")),c=s("2ef0"),l=s("b593"),d=s("0971"),u=s("6b6d"),h=s("32bd"),p=s("5402"),f=s("84e9"),m=s("024e"),g=s("a90c"),b=s("4419");function v(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=y(e))){var t=0,s=function(){};return{s:s,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,n=!0,r=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return n=e.done,e},e:function(e){r=!0,a=e},f:function(){try{n||null==i.return||i.return()}finally{if(r)throw a}}}}function y(e,t){if(e){if("string"===typeof e)return w(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(s):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}function T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function S(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?T(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var E={components:{result:p["default"],editor:f["default"],log:m["default"],history:g["default"],weProgress:b["default"]},props:{work:{type:Object,required:!0},node:Object,readonly:{type:Boolean,default:!1}},data:function(){return{script:null,scriptViewState:{showPanel:"progress",height:0,bottomPanelHeight:0,cacheBottomPanelHeight:0,bottomPanelMin:!1,cacheLogScroll:0},execute:null,postType:"socket",userName:"",biLoading:!1,saveLoading:!1,isLogShow:!1}},computed:{isPanelMin:function(){if(!this.script)return null;var e=this.script.log,t=Object(c["isEmpty"])(e)||!(e.all||e.error||e.info||e.warning),s=Object(c["isEmpty"])(this.script.history),i=!this.script.result||Object(c["isEmpty"])(this.script.result),a=Object(c["isEmpty"])(this.script.progress.progressInfo);return t&&s&&i&&a}},watch:{"script.data":function(){this.work.ismodifyByOldTab||(this.script.data==this.script.oldData?this.work.unsave=!1:this.work.unsave=!0)},"script.oldData":function(){this.work.ismodifyByOldTab||(this.script.data==this.script.oldData?this.work.unsave=!1:this.work.unsave=!0)},"execute.run":function(e){this.work.data.running=this.script.running=e,this.dispatch("IndexedDB:recordTab",this.work)},isPanelMin:function(e){e?this.configLogPanel("min"):this.configLogPanel("releaseMin")},"execute.status":function(e){this.work.data.status=e,this.script.status=e,this.dispatch("IndexedDB:recordTab",this.work)}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,s,i,a,n,r,o,l,d=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.userName=this.getUserName(),this.work.data?(this.script=this.work.data,this.scriptViewState=this.script.scriptViewState):(t=Object(c["find"])(this.getSupportModes(),(function(e){return e.rule.test(d.work.filename)})),s=/^[.\w\u4e00-\u9fa5-]{1,200}\.[A-Za-z]+$/,i=s.test(this.work.filename),this.work.data=this.script=new u["b"](Object.assign(t,{id:this.work.id,fileName:this.work.filename,executable:t.executable?i:t.executable,data:this.work.code,params:this.work.params})),delete this.work.code,delete this.work.params,this.script.scriptViewState=this.scriptViewState),this.dispatch("IndexedDB:getResult",{tabId:this.script.id,cb:function(e){e&&(d.script.result=e[e.resultSet].result,d.script.resultList=Object(c["dropRight"])(Object(c["toArray"])(e),3),d.$nextTick((function(){d.$refs.result.resultSet=e.resultSet,d.$refs.result.initPage()})),d.showPanelTab(e.showPanel))}}),this.dispatch("IndexedDB:getLog",{tabId:this.script.id,cb:function(e){d.script.log=e}}),this.dispatch("IndexedDB:getProgress",{tabId:this.script.id,cb:function(e){var t=e.content;d.script.progress={current:t.current,progressInfo:t.progressInfo},d.script.steps=t.steps||[]}}),this.dispatch("IndexedDB:getHistory",{tabId:this.script.id,cb:function(e){d.script.history=Object(c["dropRight"])(Object(c["values"])(e)),d.script.status=d.script.history.length?d.script.history[0].status:"Inited"}}),e.next=8,this.getCacheWork(this.work);case 8:a=e.sent,a&&(n=a.data,r=a.taskID,o=a.execID,r&&o&&n&&n.running&&(l=JSON.parse(JSON.stringify(this.script.progress)),this.script=a.data,this.script.progress=l,this.run({taskID:r,execID:o,isRestore:!0,id:this.script.id}),this.work.execID=o,this.work.taskID=r)),this.dispatch("IndexedDB:recordTab",this.work),this.dispatch("IndexedDB:updateGlobalCache",{id:this.userName,work:this.work});case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=this;this.scriptViewState.height=this.scriptViewState.height||this.$el.clientHeight,this.scriptViewState.bottomPanelHeight=this.scriptViewState.bottomPanelHeight||.4*this.$el.clientHeight,this.$nextTick((function(){e.dispatch("WebSocket:init")})),window.onbeforeunload=function(){return e.work.unsave||e.script.running?"need confirm":null}},beforeDestroy:function(){window.onbeforeunload=null,this.scriptViewState.bottomPanelHeight=this.scriptViewState.cacheBottomPanelHeight||this.scriptViewState.bottomPanelHeight},methods:{"Workbench:save":function(e){e.id==this.script.id&&this.save()},"Workbench:socket":function(e){var t=e.type,s=Object(r["a"])(e,["type"]);this.execute?this.execute.trigger(t,Object.assign(s,{execute:this.execute})):"downgrade"===t&&(this.postType="http")},"Workbench:run":function(e,t){e.id===this.script.id&&this.run(e,(function(e){if("start"!==e)return t&&t(!0)}))},"Workbench:setResultCache":function(e){if(e.id===this.script.id&&this.$refs.result){this.script.resultList=this.script.resultList||[this.script.result];var t=this.$refs.result.getResult(),s=this.$refs.result.resultSet;this.$set(this.script.resultList[s],"result",t),this.dispatch("IndexedDB:updateResult",S({tabId:this.script.id,resultSet:s,showPanel:this.scriptViewState.showPanel},this.script.resultList))}},"Workbench:resetScriptData":function(e){this.dispatch("IndexedDB:clearLog",e),this.dispatch("IndexedDB:clearResult",e),this.dispatch("IndexedDB:clearProgress",e),this.resetProgress(),this.resetData(),this.script.steps=[],this.showPanelTab("progress")},getCacheWork:function(e){var t=this,s=e.filepath,i=e.filename;return new Promise((function(e){t.dispatch("IndexedDB:getTabs",(function(t){var a,n=null,r=v(t);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o.filepath===s&&o.filename===i){n=o;break}}}catch(c){r.e(c)}finally{r.f()}e(n)}))}))},getExecuteData:function(e,t){this.script.executionCode=Object(c["isString"])(e)?e:this.script.data;var s={method:"/api/rest_j/v1/entrance/execute",websocketTag:this.work.id,data:{executeApplicationName:this.script.application,executionCode:this.script.executionCode,runType:this.script.runType,params:this.convertSettingParams(this.script.params),postType:this.postType,source:{scriptPath:t}}};return s},excuteAction:function(e,t,s){var i=this,a=this.getExecuteData(e,s);if(this.execute=new h["a"](a,this.$t.bind(this)),this.isLogShow=!1,e&&e.isRestore)this.execute.restore(e);else{var n="Workbench:resetScriptData";this[n](this.script.id),this.execute.start()}this.execute.once("sendStart",(function(e){var s=i.work.filepath||i.work.filename;i.$Notice.close(s),i.$Notice.info({title:i.$t("message.workBench.body.workFlow.notice.executing.title"),desc:"".concat(i.$t("message.workBench.body.workFlow.notice.executing.desc")," ").concat(i.work.nodeName," ！"),name:s,duration:3}),i.work.execID=i.execute.id,i.work.taskID=i.execute.taskID,e&&(i.script.executionCode=i.script.data=e),i.dispatch("IndexedDB:recordTab",i.work),t&&t("start")})),this.execute.on("updateResource",(function(e){i.dispatch("Footer:updateRunningJob",e)})),this.execute.on("log",(function(e){var t=d["a"].convertLog(e);Object.keys(t).forEach((function(e){var s=t[e];s&&(i.script.log[e]+=s+"\n"),"all"===e&&(i.script.logLine+=s.split("\n").length)})),i.dispatch("IndexedDB:appendLog",{tabId:i.script.id,rst:i.script.log})})),this.execute.on("history",(function(e){var t=Object(c["findIndex"])(i.script.history,(function(t){return t.taskID===e.taskID})),s=Object(c["find"])(i.script.history,(function(t){return t.taskID===e.taskID})),a=null,n="string"===typeof i.script.executionCode&&i.script.executionCode?i.script.executionCode:i.script.data;a=s?e.hasOwnProperty("logPath")?{taskID:e.taskID,createDate:s.createDate,execID:e.execID||s.execID,runningTime:s.runningTime,data:n,status:e.status,fileName:i.script.fileName,failedReason:e.failedReason}:{taskID:e.taskID,createDate:e.createDate,execID:e.execID||s.execID,runningTime:e.runningTime,data:n,status:e.status,fileName:i.script.fileName,failedReason:e.failedReason}:{taskID:e.taskID,createDate:e.createDate,execID:e.execID,runningTime:e.runningTime,data:n,status:e.status,fileName:i.script.fileName,failedReason:e.failedReason},-1===t?(i.script.history.unshift(a),i.dispatch("IndexedDB:appendHistory",S({tabId:i.script.id},i.script.history))):(i.script.history.splice(t,1,a),i.dispatch("IndexedDB:updateHistory",S({tabId:i.script.id},i.script.history)))})),this.execute.on("result",(function(e){i.script.running=!1,i.showPanelTab("result");var t={headRows:e.metadata,bodyRows:e.fileContent,total:e.totalLine,type:e.type,cache:{offsetX:0,offsetY:0},path:i.execute.currentResultPath,current:1,size:20};i.$set(i.execute.resultList[0],"result",t),i.$set(i.script,"resultSet",0),i.script.result=t,i.script.resultList=i.execute.resultList,i.dispatch("IndexedDB:getResult",{tabId:i.script.id,cb:function(e){e?i.dispatch("IndexedDB:updateResult",S({tabId:i.script.id,resultSet:0,showPanel:"result"},i.script.resultList)):i.dispatch("IndexedDB:appendResult",S({tabId:i.script.id,resultSet:0,showPanel:"result"},i.script.resultList))}}),i.script.progress.current&&(i.script.progress.current=1,i.dispatch("IndexedDB:updateProgress",{tabId:i.script.id,rst:i.script.progress}))})),this.execute.on("progress",(function(e){var t=e.progress,s=e.progressInfo,a=e.waitingSize;s.length&&!Object(c["isEmpty"])(s[0])?s.forEach((function(e){var t=e.id,s=i.script.progress.progressInfo.findIndex((function(e){return e.id===t}));-1!==s?i.script.progress.progressInfo.splice(s,1,e):i.script.progress.progressInfo.push(e)})):s=[],i.script.progress.current=t,null!==a&&a>=0&&(i.script.progress.waitingSize=a),i.dispatch("IndexedDB:updateProgress",{tabId:i.script.id,rst:i.script.progress})})),this.execute.on("updateExpireHistory",(function(e){var t=Object(c["findIndex"])(i.script.history,(function(t){return t.taskID===e.taskID})),s=Object(c["find"])(i.script.history,(function(t){return t.execID===e.execID}));if(s){var a=null;l["a"].fetch("/jobhistory/".concat(s.taskID,"/get"),"get").then((function(e){a={taskID:e.task.taskID,createDate:e.task.createdTime,execID:e.task.strongerExecId,runningTime:e.task.costTime,data:e.task.executionCode,status:e.task.status,fileName:e.task.fileName,failedReason:e.task.errCode&&e.task.errDesc?e.task.errCode+e.task.errDesc:e.task.errCode||e.task.errDesc||""},i.script.history.splice(t,1,a),i.dispatch("IndexedDB:updateHistory",S({tabId:i.script.id},i.script.history))}))}})),this.execute.on("steps",(function(e){if("Inited"===e)i.script.steps=["Submitted","Inited"];else{var t=Object(c["last"])(i.script.steps);(-1===i.script.steps.indexOf(e)||t!==e)&&i.script.steps.push(e),i.dispatch("IndexedDB:updateProgress",{tabId:i.script.id,rst:Object.assign(i.script.progress,{steps:i.script.steps})})}})),this.execute.on("WebSocket:send",(function(e){i.dispatch("WebSocket:send",e)})),this.execute.on("error",(function(e){t&&t(e||"error"),"history"!==i.scriptViewState.showPanel&&(i.showPanelTab("history"),i.isLogShow=!0)})),this.execute.on("stateEnd",(function(){t&&t("end")})),this.execute.on("querySuccess",(function(e){var t=e.type,s=e.task,a=d["a"].convertTimestamp(s.costTime),n=i.work.filepath||i.work.filename;i.$Notice.close(n),i.$Notice.success({title:i.$t("message.workBench.body.workFlow.notice.result.title"),desc:"".concat(i.work.nodeName," ").concat(t,"-").concat(i.$t("message.workBench.body.workFlow.notice.result.desc")," ").concat(a),name:n,duration:3})}))},run:function(e,t){var s=this;if(this.readonly)return this.$Message.warning(this.$t("message.container.notRun"));this.showPanelTab("progress"),this.save().then((function(i){s.excuteAction(e,t,i)}))},resetData:function(){this.postType="socket",this.script.result=null,this.script.log={all:"",error:"",warning:"",info:""},this.script.logLine=1,this.script.steps.splice(0,this.script.steps.length,"Submitted")},resetProgress:function(){this.script.progress={current:null,progressInfo:[],waitingSize:null}},stop:function(e){var t=this;this.execute&&this.execute.id?l["a"].fetch("/entrance/".concat(this.execute.id,"/kill"),"get").then((function(){t.execute.trigger("stop"),t.execute.trigger("error"),t.execute.trigger("kill");var s=t.work.filepath||t.work.filename;t.$Notice.close(s),t.$Notice.warning({title:t.$t("message.workBench.body.workFlow.notice.stop.title"),desc:"".concat(t.$t("message.workBench.body.workFlow.notice.stop.desc"),"：").concat(t.work.filename," ！"),name:s,duration:3}),e()})).catch((function(){t.execute.trigger("stop"),e()})):(e(),this.script.running=!1)},save:function(){var e=this;if(this.readonly)return this.$Message.warning(this.$t("message.container.notSave"));var t={fileName:this.script.fileName,scriptContent:this.script.data,metadata:this.convertSettingParams(this.script.params)},s=this.node.resources;return s&&s.length&&this.node.jobContent&&this.node.jobContent.script&&(t.resourceId=s[0].resourceId),this.saveLoading=!0,this.node.params=this.convertSettingParams(this.script.params),l["a"].fetch("/filesystem/saveScriptToBML",t,"post").then((function(t){return e.$Message.success(e.$t("message.container.saveSuccess")),e.dispatch("IDE:saveNode",{fileName:e.script.fileName,resourceId:t.resourceId,version:t.version},e.node),e.work.unsave=!1,e.script.oldData=e.script.data,e.dispatch("IndexedDB:recordTab",e.work),e.dispatch("IndexedDB:updateGlobalCache",{id:e.userName,work:e.work}),e.saveLoading=!1,e.node.title})).catch((function(){e.$Message.error(e.$t("message.container.saveErr")),e.saveLoading=!1,e.work.unsave=!0}))},showPanelTab:function(e){this.scriptViewState.showPanel=e},configLogPanel:function(e){"fullScreen"!=e&&"releaseFullScreen"!=e||this.$refs.bottomPanel[e](),"min"==e&&(this.scriptViewState.bottomPanelHeight=32,this.scriptViewState.bottomPanelMin=!0),"releaseMin"==e&&(this.scriptViewState.bottomPanelHeight=.4*this.scriptViewState.height,this.scriptViewState.bottomPanelMin=!1)},changeBottomPanel:function(e){var t=e.height;this.scriptViewState.cacheBottomPanelHeight=t},changeResultSet:function(e,t){var s=this,i=Object(c["isUndefined"])(e.currentSet)?this.script.resultSet:e.currentSet,a=this.script.resultList[i].path,n=this.script.resultList[i].hasOwnProperty("result");if(n)this.script.result=this.script.resultList[i].result,this.$set(this.script,"resultSet",i),this.dispatch("IndexedDB:updateResult",S({tabId:this.script.id,resultSet:i,showPanel:"result"},this.script.resultList)),t();else{var r=5e3,o="/filesystem/openFile";l["a"].fetch(o,{path:a,pageSize:r},"get").then((function(e){var n={headRows:e.metadata,bodyRows:e.fileContent,total:e.totalLine?e.totalLine:0,type:e.fileContent?e.type:0,cache:{offsetX:0,offsetY:0},path:a,current:1,size:20};s.$set(s.script.resultList[i],"result",n),s.$set(s.script,"resultSet",i),s.script.result=n,s.dispatch("IndexedDB:updateResult",S({tabId:s.script.id,resultSet:i,showPanel:"result"},s.script.resultList)),t()})).catch((function(){s.$refs.result.resultSet=e.lastSet,t()}))}},openAnalysisTab:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,s,i,a,n,r,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.biLoading){e.next=2;break}return e.abrupt("return",this.$Message.warning(this.$t("message.constants.warning.biLoading")));case 2:return this.biLoading=!0,t=this.getVsBiUrl(),e.next=6,l["a"].fetch("".concat(t,"/api/rest_j/v1/visualis/view"),{fileName:this.work.filename,executionCode:this.script.executionCode||this.script.data,resultPath:this.script.result.path,runType:this.script.runType,resultNumber:this.script.result.current>0?this.script.result.current-1:0}).catch((function(){o.biLoading=!1}));case 6:s=e.sent,s&&(i=s.id,a=s.projectId,n="".concat(this.work.filename,"_project").concat(a,"_set").concat(this.script.resultSet,".bi"),r=d["a"].md5(n),this.dispatch("Workbench:add",{id:r,filename:n,saveAs:!0,type:"visualAnalysis",params:{viewId:i,projectId:a}},(function(){o.biLoading=!1})));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),convertSettingParams:function(e){var t=Object(c["isEmpty"])(e.variable)?{}:d["a"].convertArrayToObject(e.variable),s=Object(c["isEmpty"])(e.configuration)?{special:{},runtime:{},startup:{}}:{special:e.configuration.special||{},runtime:e.configuration.runtime||{},startup:e.configuration.startup||{}};return{variable:t,configuration:s}},openPanel:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:"log"===t&&(this.isLogShow=!0,this.showPanelTab(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},N=E,C=s("2877"),k=Object(C["a"])(N,i,a,!1,null,null,null);t["default"]=k.exports},e6b5:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field-list"},[e.list.length?s("div",{staticClass:"field-list-title"},[e._l(e.staticData,(function(t,i){return s("div",{key:i,staticClass:"field-list-title-item",style:{width:t.width}},[t.require?s("i",{staticClass:"field-list-title-item-require"},[e._v("*")]):e._e(),s("span",[e._v(e._s(t.name))])])})),e.hasAction?s("div",{staticClass:"field-list-title-action"},[e._v(e._s(e.$t("message.createTable.action")))]):e._e()],2):e._e(),s("virtual-list",{ref:"fieldList",staticClass:"field-list-content",attrs:{size:54,remain:Math.floor((e.height-70)/54),wtag:"ul"}},e._l(e.list,(function(t,i){return s("li",{key:i,staticClass:"field-list-content-item"},[e._l(e.staticData,(function(a){return s("FormItem",{key:a.key,staticClass:"field-list-content-item-item",style:{width:a.width},attrs:{prop:"fields."+i+"."+a.key,rules:a.rules}},["input"===a.inputType?s("Input",{key:a.key,staticClass:"field-list-content-input",model:{value:t[a.key],callback:function(s){e.$set(t,a.key,s)},expression:"item[info.key]"}}):e._e(),"select"===a.inputType?s("Select",{key:a.key,staticClass:"field-list-content-select",attrs:{transfer:""},model:{value:t[a.key],callback:function(s){e.$set(t,a.key,s)},expression:"item[info.key]"}},e._l(a.opt,(function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1):e._e(),"inputNumber"===a.inputType?s("InputNumber",{key:a.key,staticClass:"field-list-content-number",attrs:{min:1},model:{value:t[a.key],callback:function(s){e.$set(t,a.key,s)},expression:"item[info.key]"}}):e._e(),"string"===a.inputType?s("span",[e._v(e._s(t[a.key]))]):e._e()],1)})),e.hasAction?s("div",{staticClass:"field-list-content-action"},[s("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return t.stopPropagation(),e.handleDelete(i)}}},[e._v(e._s(e.$t("message.createTable.delete")))])],1):e._e()],2)})),0)],1)},a=[],n=s("7dc5"),r={components:{virtualList:n["a"]},props:{list:{type:Array,default:function(){return[]}},staticData:{type:Array,default:function(){return[]}},hasAction:{type:Boolean,default:!1}},data:function(){return{height:0}},mounted:function(){this.height=(window.innerHeight-112)/2-51},methods:{handleDelete:function(e){this.$emit("delete",e)}}},o=r,c=s("2877"),l=Object(c["a"])(o,i,a,!1,null,null,null);t["default"]=l.exports},e76f:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{staticClass:"save-as-modal",attrs:{width:"430"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",[e._v(e._s(e.$t("message.workBench.body.script.saveAs.header")))])]),s("div",[s("Form",{ref:"saveAsForm",attrs:{model:e.form,rules:e.rules,"label-width":90}},[s("FormItem",{attrs:{prop:"fileName",label:e.$t("message.workBench.body.script.saveAs.formItems.fileName.label")+"："}},[s("Input",{staticClass:"save-as-modal-name",model:{value:e.form.fileName,callback:function(t){e.$set(e.form,"fileName",t)},expression:"form.fileName"}}),s("span",[e._v(e._s(e.form.ext))])],1),s("FormItem",{attrs:{prop:"selectedPath",label:e.$t("message.workBench.body.script.saveAs.formItems.selectedPath.label")+"："}},[s("directory-dialog",{staticClass:"save-as-modal-path",attrs:{tree:e.fileTree,"load-data-fn":e.loadDataFn,"filter-node":e.filterNode,path:e.form.selectedPath,"fs-type":"script"},on:{"set-node":e.setNode}})],1)],1)],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{loading:e.isLoading,type:"primary"},on:{click:e.submit}},[e._v(e._s(e.$t("message.constants.submit")))])],1)])},a=[],n=(s("9865"),s("96cf"),s("3b8d")),r=s("2ef0"),o=s("7138"),c=s("ed93"),l={components:{directoryDialog:c["a"]},data:function(){return{show:!1,form:{fileName:"",ext:"",selectedPath:""},fileTree:[],loadDataFn:function(){},isLoading:!1,oldPath:"",rules:{fileName:[{required:!0,message:this.$t("message.workBench.body.script.saveAs.rules.fileName.required"),trigger:"blur"},{min:1,max:200,message:this.$t("message.workBench.body.script.saveAs.rules.fileName.lengthLimit"),trigger:"change"},{type:"string",pattern:/^[\w\u4e00-\u9fa5]+$/,message:this.$t("message.workBench.body.script.saveAs.rules.fileName.letterTypeLimit"),trigger:"change"}],selectedPath:[{required:!0,message:this.$t("message.workBench.body.script.saveAs.rules.selectedPath.required"),trigger:"blur"}]}}},methods:{open:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.show=!0,this.form.fileName=t.filename.slice(0,t.filename.lastIndexOf(".")),this.form.ext=t.data.ext,this.oldPath=t.filePath,e.next=6,this.setFileTree();case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),filterNode:function(e){return!e.isLeaf},setNode:function(e,t){this.form.selectedPath=e.path},setFileTree:function(){var e=this;if(Object(r["isEmpty"])(this.fileTree)){var t=o["a"].get("scriptTree","SESSION");!t||t&&Object(r["isEmpty"])(t)?this.dispatch("WorkSidebar:showTree",(function(t){e.shareComponent=t,t.getRootPath((function(s){t.getTree((function(s){s&&(e.fileTree.push(s),e.loadDataFn=t.loadDataFn)}))}))})):(this.fileTree=Object(r["cloneDeep"])(t),this.shareComponent?this.loadDataFn=this.shareComponent.loadDataFn:this.dispatch("WorkSidebar:showTree",(function(t){e.shareComponent=t,e.loadDataFn=t.loadDataFn})))}},submit:function(){var e=this;this.isLoading||this.$refs.saveAsForm.validate((function(t){if(t){e.isLoading=!0;var s=e.form.selectedPath+"/"+e.form.fileName+e.form.ext;e.dispatch("Workbench:checkExist",{path:s},(function(t){t?(e.isLoading=!1,e.$Message.warning("".concat(e.$t("message.constants.error.fileExists"),"：").concat(s))):e.oldPath?e.moveTo(s):e.createFile(s)}))}else e.$Message.warning(e.$t("message.workBench.body.script.saveAs.warning.invalid"))}))},createFile:function(e){var t=this;this.shareComponent.handleCreating({isLeaf:!0,path:e},(function(s){if(t.show=!1,t.isLoading=!1,s){var i={path:e,name:t.form.fileName+t.form.ext};t.$emit("save-complete",!0,i),t.$Message.success(t.$t("message.workBench.body.script.saveAs.success.saveScript"))}}))},moveTo:function(e){var t=this;this.shareComponent.rename(e,this.oldPath,(function(s){if(t.show=!1,t.isLoading=!1,s){var i={path:e,name:t.form.fileName+t.form.ext};t.$emit("save-complete",!1,i),t.$Message.success(t.$t("message.workBench.body.script.saveAs.success.saveScript"))}}))}}},d=l,u=(s("b8b0"),s("2877")),h=Object(u["a"])(d,i,a,!1,null,null,null);t["default"]=h.exports},e799:function(e,t,s){},e7f4:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{attrs:{width:780},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",[e._v(e._s(e.$t("message.resource.header")))])]),e.show?e._t("default"):e._e(),s("template",{slot:"footer"},[s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.getExplorerInfo()}}},[e._v(e._s(e.$t("message.constants.refresh")))])],1)],2)},a=[],n={name:"ExplorerIndex",data:function(){return{show:!1}},activated:function(){this.getExplorerInfo()},methods:{open:function(){this.show=!0},close:function(){this.show=!1},getExplorerInfo:function(){this.$refs.resource.getExplorerInfo()}}},r=n,o=s("2877"),c=Object(o["a"])(r,i,a,!1,null,null,null);t["default"]=c.exports},e886:function(e,t,s){e.exports=s.p+"img/JDBC2.c4a43338.svg"},e933:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKIAAACRCAMAAAB3wpMqAAAAn1BMVEUAAADo6OjX19fn5+fo6Ojn5+fo6Ojo6Ojn5+fo6Ojg4ODn5+fn5+fm5ubn5+fn5+fe3t7o6Ojk5OTn5+fn5+fn5+fo6Ojj4+Pn5+fo6Ojm5ubn5+fg4ODk5OTo6Ojl5eXn5+fo6Ojo6Ojo6Ojo6Ojn5+fn5+fo6Ojo6Ojk5OTo6Ojn5+fn5+fo6Ojm5ubm5ubn5+fn5+fo6Ojn5+fo6OhRdq32AAAANHRSTlMA+gbJeGy6pOMsCp6JU8PND+US+Pbr0htB3VC1FyRXL2mn8Zlj2Ei/sSHak3KBNjzuXo9Zk7IFFQAABQNJREFUeNrt3Gt3mjAYwPHHoBRRAUEFLQwFFfB+eb7/Z9sSgt3pxgZesmzj9w6apv/DRWnaIzDu0hijbEZxSIDzdxpKaXTJgHFTlJbBGv13lJgSAEAbpRYTyMbIteRSVIWwQyZK25KJp8hcQMkLzyCdQ964gvw8qyChFCkH8nP+BhLqIdMkNol/XFki0QkHhdueHwbpBD4RkEi2KtcjkDuq3PsXyFm3QX0LPohKnCCnFYlXLLQh598GGT58EJWoILcpEgfItYpE+zZIbRL/1kQTuelHYuGWeBuUfE6U545OSu/o5qVbMk1ikyiLvzeRvJmv82Y/6UnndSb+k96jX8dsEuVJ/Auuxa36OrH9n7wuyqRJbBJlUb6m8ywEGL2SGomkZyrPYVyBeVOqCO74PfpxO2AmWEX3T7xHt5pEqRMn+CxtYDZYRVg9ETr9ZzkCs+tX4ddIBPIstSb8x95dJNIkCk/U7fC8X6iTiwUViE8k3eX7EJmFlInEu0wRUeJELxkhypxo9U+YezyRcBW+XiPxaCCnJYvTY4lhP2baJVPonZjZHuoknsfIjJL2AYLhY4mDCJmVCz9lq8i0rtUT9Tj/khMfdXoUHkycjZGZlCW+8+PxpXKitUAm8XQAKRP1vNDp2QByJpI9UuMdgKyJc7Z7swZpEw9svtMapE0kCbsOdyBvYoe96W3hlYm6t2Y8+55Ed0N3pfpLEwO+HXn3JJ7pvnEIr02cIjO8J9Fng3cgceKa7phmDya6R4/pviCRbOmOHjyY2Lk9vz0/0Y/olbh+NHHuIPP29ER+nhUic2KfbvdB5kSFjlvLnKjTqcaWzIndiF6KIHPiOqIpUicO6CPERerEJU3clyS+ESkSnV8knkyl3JstKPFMj2K/JPGXTFGJM5oY35OYWIISj/SOVu9JTEFQok+n0u5J7IlJ5H/KiQL4jPjl3At+sxeWSJchnDPUYan0br8KS+zkJ62OjF6/q0BYYpdurzKg6jxhv4OwRMugAztQFf8zuzMXlsiPSUKgsgGtGfoCE8Nx/lBbla7mV6+4RL5wp9hQ0Y7GOKHIRL4u1oZq3AmbgAhNhAVfbKlkzwYfQWxiOGaTZVBBvli6J4ITYY6U4lYoHLGXUR9EJ/LF+J4NvzFgPziagfBECEykUr/SctceRCfyu5pKPCind/JBPV1wIudp+XfEAZRY80kvOohO5I4bZFZzAj/h9odYHEPxiVzXQMYxZjZwnBXs+U+I9gTEJ97YvRHmzLYX+BbJ9waHcxphbjKDnPhEbqZgQVOSdBHH8cKYtpBrbV3404kQbLHc5qrDn08E4vGT+pkz3bnwC8txxMQ6Txw6jFkkrhxmWiSmDhMN6iRyh+3kc2VrqM59+CU7ZA4Z5LLrkpnxZGuQb1/5PGSdb5+zeomcf+6nxubksBOhTdTezgMBKidydhYevfXaO3RdHSpq/mdMAkXiiS8ZSaj4DBMTqZMH0vHyozeBPjLatiOZrYbMBQ6OnB9K1MKcE4LeQ6nFBMBNUGL55xWEK5SWdgAmSEcopVESQmGemhvtcR8PktrjNuZiSeA7VtZ93BQ5rfu4TIcXWCG3AVndEqcgqyaxSZRFk/hXJpLaPhJJbVCfO1eNmpIRciOjrqTjQk22gYIpPtSi71G4vg51uAYKZ2ZQRzZB4VYB1GEtULjUhlq8CAWLPKhpuUKhph0CdfmzgUAzH8p8BXhA0U2ArT/FAAAAAElFTkSuQmCC"},ea56:function(e,t,s){e.exports=s.p+"img/sender.b9616bf7.svg"},eb15:function(e,t,s){},ec28:function(e,t,s){},ec7c:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h3",{staticClass:"item-header"},[i("span",[e._v(e._s(e.currentData.name))])]),e._t("default"),e.dataList.length>0?i("Row",{staticClass:"content-item"},e._l(e.cachedataList,(function(t,a){return i("i-col",{key:t.id,staticClass:"project-item",attrs:{xs:12,sm:8,md:6,lg:4},nativeOn:{click:function(s){return e.goto(e.currentData,t)}}},[i("div",{ref:"card"+a,refInFor:!0,staticClass:"project-main"},[i("div",[i("div",{staticClass:"tool-bar"},[i("div",{staticClass:"tool-bar-more",on:{mouseleave:function(s){return e.handleToolbarShow(t,!1)},mouseover:function(s){return e.handleToolbarShow(t,!0)}}},[t.isToolbarShow?i("span",[i("Icon",{attrs:{type:"ios-map",size:"20",title:e.$t("message.workflowItem.viewVersion")},on:{click:function(s){return s.stopPropagation(),e.detail(e.currentData.id,t)}}}),e.hidePublishAndcopy?e._e():i("Icon",{attrs:{type:"ios-copy",size:"20",title:e.$t("message.newConst.copy")},on:{click:function(s){return s.stopPropagation(),e.copy(e.currentData.id,t)}}}),e.readonly?e._e():i("Icon",{attrs:{type:"ios-cog",size:"20",title:e.$t("message.workflowItem.config")},on:{click:function(s){return s.stopPropagation(),e.modify(e.currentData.id,t)}}}),e.readonly?e._e():i("Icon",{attrs:{type:"ios-trash",size:"20",title:e.$t("message.newConst.delete")},on:{click:function(s){return s.stopPropagation(),e.deleteProject(t)}}})],1):i("Icon",{attrs:{type:"ios-menu",size:"20",title:e.$t("message.workflowItem.action")}})],1)])]),i("div",{staticClass:"product-app middle",class:[{high:t.business&&t.business.length&&null!==t.applicationArea}]},[t.product?i("div",{staticClass:"product"},[i("img",{staticClass:"product-bgc",attrs:{src:s("d282")}}),i("span",[e._v(e._s(t.product))])]):e._e()]),i("div",{staticClass:"applicationArea low",class:[{middle:t.business&&t.business.length}]},[null!==t.applicationArea?i("div",{staticClass:"app"},[i("img",{staticClass:"app-bgc",attrs:{src:s("bbea")}}),i("span",[e._v(e._s(e.applicationAreaMap[t.applicationArea]))])]):e._e()]),t[e.tagProp]&&t[e.tagProp].length?i("div",{staticClass:"project-main-business low"},[i("Icon",{attrs:{type:"ios-pricetags",size:"16"}}),e._v("\n          "+e._s(e.tagInfo(t))+"\n        ")],1):e._e(),e.hideButtonBar?e._e():i("div",{staticClass:"icon-bar"},[e.hidePublishAndcopy?e._e():i("span",{staticClass:"icon-marsk"},[i("Icon",{staticClass:"status-icon",attrs:{type:t.notPublish?"md-star-outline":"md-star",size:"16"}}),e._v("\n            "+e._s(t.notPublish?e.$t("message.project.unpublish"):e.$t("message.project.published"))+"\n          ")],1),e.hidePublishAndcopy?i("span",{staticClass:"icon-marsk"},[i("Icon",{staticClass:"status-icon",attrs:{type:e.readonly?"md-book":"md-brush",size:"16"}}),e._v("\n            "+e._s(e.readonly?e.$t("message.workflowItem.readonly"):e.$t("message.workflowItem.editor"))+"\n          ")],1):e._e()])]),i("div",{staticClass:"project-item-info"},[i("div",{staticClass:"project-main-title"},[e._v("\n          "+e._s(t.name)+"\n          "),i("span",{staticClass:"project-main-desc version-bar",attrs:{title:t.latestVersion.version}},[e._v(" "+e._s(t.latestVersion?""+t.latestVersion.version:"")+" ")])]),i("div",{staticClass:"project-main-desc"},[e._v(e._s(t.description||e.$t("message.workflowItem.noDesc")))]),e.hidePublishAndcopy?e._e():i("Button",{staticClass:"icon-bar-publish",attrs:{size:"small",disabled:e.isPercent(t.id)},on:{click:function(s){return s.stopPropagation(),e.publish(e.currentData.id,t)}}},[e._v(e._s(e.$t("message.workflowItem.publish")))])],1),!e.hidePublishAndcopy&&e.isPercent(t.id)?i("Tooltip",{staticStyle:{width:"100%"},attrs:{content:"发布中",placement:"top"}},[i("span",{staticClass:"queue-manager-status"})]):e._e()],1)})),1):i("div",{staticClass:"no-data"},[e._v(e._s(e.$t("message.workflowItem.nodata")))]),e.dataList.length>0&&e.pagination.size<e.dataList.length?i("Page",{staticClass:"page-bar",attrs:{total:e.dataList.length,"show-sizer":"",current:e.pagination.current,"page-size":e.pagination.size,"page-size-opts":e.pagination.opts},on:{"on-change":e.pageChange,"on-page-size-change":e.pageSizeChange}}):e._e()],2)},a=[],n=(s("2caf"),s("6d67"),s("d25f"),s("b593")),r={name:"WorkflowContentItem",props:{dataList:{type:Array,default:null},hideButtonBar:{type:Boolean,default:!0},hidePublishAndcopy:{type:Boolean,default:!0},currentData:{type:Object,default:function(){return{}}},readonly:{type:Boolean,default:!1},precentList:{type:Array,default:function(){return[]}},tagProp:{type:String,default:"business"}},data:function(){return{pagination:{size:15,current:1,total:0,opts:[15,30,45,60]},isToolbarShow:!1,cardShowNum:4,applicationAreaMap:[]}},computed:{cachedataList:function(){var e=this;return this.dataList.filter((function(t,s){return(e.pagination.current-1)*e.pagination.size<=s&&s<e.pagination.current*e.pagination.size}))},pageNumer:function(){return Math.ceil(this.dataList.length/this.pagination.size)}},watch:{pageNumer:function(e){e<this.pagination.current&&0!==e&&(this.pagination.current=e)}},mounted:function(){var e=this;n["a"].fetch("/dss/listApplicationAreas","get").then((function(t){e.applicationAreaMap=t.applicationAreas}))},methods:{modify:function(e,t){this.$emit("modify",e,t)},goto:function(e,t){if(this.isPercent(t.id))return this.$Message.warning(this.$t("message.workflowItem.noView"));this.$emit("goto",e,t)},detail:function(e,t){this.$emit("detail",e,t)},deleteProject:function(e){this.$emit("delete",e)},copy:function(e,t){this.$emit("copy",e,t)},publish:function(e,t){this.$emit("publish",e,t)},isPercent:function(e){var t=!1;return this.precentList.map((function(s){s.id===e&&(t=!0)})),t},percentVlaue:function(e){var t="";return this.precentList.map((function(s){s.id===e&&(t=s.percent)})),t},pageChange:function(e){this.pagination.current=e},pageSizeChange:function(e){this.pagination.size=e},handleToolbarShow:function(e,t){this.$set(e,"isToolbarShow",t)},tagInfo:function(e){return Array.isArray(e[this.tagProp])?e[this.tagProp].join(", "):e[this.tagProp]}}},o=r,c=(s("18a2"),s("2877")),l=Object(c["a"])(o,i,a,!1,null,"73fa4d0d",null),d=l.exports;t["a"]=d},ed93:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"we-directory"},[s("Input",{staticClass:"we-directory-input",attrs:{disabled:""},model:{value:e.unPrefixPath,callback:function(t){e.unPrefixPath=t},expression:"unPrefixPath"}}),s("div",{staticClass:"we-directory-tree",class:{"is-hide":e.isHide},style:{height:e.height+"px"}},[e.tree&&e.tree.length?e._e():s("Spin",{attrs:{size:"large",fix:""}}),s("we-tree",{attrs:{data:e.tree,"node-props":e.nodeProps,"sort-fn":e.sortFn,"filter-node":e.filterNode,"load-data-fn":e.loadDataFn},on:{"node-click":e.benchClick}})],1)],1)},a=[],n=(s("c5f6"),s("2ef0")),r={name:"DirectoryDialog",props:{tree:{type:Array,require:!0,default:function(){return[]}},isHide:{type:Boolean,default:!1,require:!1},path:{type:String,require:!0,default:""},fsType:{type:String,require:!0,default:""},filterNode:Function,loadDataFn:Function,height:{type:Number,default:120}},data:function(){return{nodeProps:{children:"children",label:"name",icon:"icon",isLeaf:"isLeaf"}}},computed:{unPrefixPath:function(){return this.path&&this.path.slice(7,this.path.length)}},methods:{benchClick:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.$emit("set-node",t[1].node.data,this.fsType)},sortFn:function(e){return Object(n["orderBy"])(e,["isLeaf","label"],["asc","asc"])}}},o=r,c=(s("0875"),s("2877")),l=Object(c["a"])(o,i,a,!1,null,null,null);t["a"]=l.exports},eefb:function(e,t,s){"use strict";var i=s("d34d"),a=s.n(i);a.a},ef88:function(e,t,s){"use strict";var i=s("db06"),a=s.n(i);a.a},f10f:function(e,t,s){},f2ee:function(e,t,s){"use strict";s.r(t);s("d25f"),s("ac6a"),s("f3e2"),s("55dd");var i=s("a8db"),a=(s("96cf"),s("3b8d")),n=s("2ef0"),r=s("1bd3"),o=(s("6b54"),s("87b3"),s("2397"),s("d225")),c=s("308d"),l=s("6bb5"),d=s("4e2b");function u(e){return function(){var t,s=Object(l["a"])(e);if(h()){var i=Object(l["a"])(this).constructor;t=Reflect.construct(s,arguments,i)}else t=s.apply(this,arguments);return Object(c["a"])(this,t)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){Object(d["a"])(s,e);var t=u(s);function s(e){return Object(o["a"])(this,s),t.call(this,e)}return s}(r["a"]),f=new p("tab"),m=f;function g(e){return function(){var t,s=Object(l["a"])(e);if(b()){var i=Object(l["a"])(this).constructor;t=Reflect.construct(s,arguments,i)}else t=s.apply(this,arguments);return Object(c["a"])(this,t)}}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var v=function(e){Object(d["a"])(s,e);var t=g(s);function s(e){return Object(o["a"])(this,s),t.call(this,e)}return s}(r["a"]),y=new v("log"),w=y;function T(e){return function(){var t,s=Object(l["a"])(e);if(S()){var i=Object(l["a"])(this).constructor;t=Reflect.construct(s,arguments,i)}else t=s.apply(this,arguments);return Object(c["a"])(this,t)}}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var E=function(e){Object(d["a"])(s,e);var t=T(s);function s(e){return Object(o["a"])(this,s),t.call(this,e)}return s}(r["a"]),N=new E("history"),C=N;function k(e){return function(){var t,s=Object(l["a"])(e);if(O()){var i=Object(l["a"])(this).constructor;t=Reflect.construct(s,arguments,i)}else t=s.apply(this,arguments);return Object(c["a"])(this,t)}}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var x=function(e){Object(d["a"])(s,e);var t=k(s);function s(e){return Object(o["a"])(this,s),t.call(this,e)}return s}(r["a"]),I=new x("result"),R=I,D=s("05f8");function L(e){return function(){var t,s=Object(l["a"])(e);if(A()){var i=Object(l["a"])(this).constructor;t=Reflect.construct(s,arguments,i)}else t=s.apply(this,arguments);return Object(c["a"])(this,t)}}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var P=function(e){Object(d["a"])(s,e);var t=L(s);function s(e){return Object(o["a"])(this,s),t.call(this,e)}return s}(r["a"]),_=new P("progress"),$=_,M=s("b0b4"),j=s("3022");function F(e){return function(){var t,s=Object(l["a"])(e);if(B()){var i=Object(l["a"])(this).constructor;t=Reflect.construct(s,arguments,i)}else t=s.apply(this,arguments);return Object(c["a"])(this,t)}}function B(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var H=function(e){Object(d["a"])(s,e);var t=F(s);function s(e){return Object(o["a"])(this,s),t.call(this,e)}return Object(M["a"])(s,[{key:"getNodeCache",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.nodeId,i=t.key,e.next=3,this.get(s);case 3:if(a=e.sent,!i){e.next=6;break}return e.abrupt("return",a[0][i]);case 6:return e.abrupt("return",a[0]);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addNodeCache",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.nodeId,i=t.value,e.next=3,this.getNodeCache({nodeId:s});case 3:if(a=e.sent,Object(n["isNil"])(a)){e.next=6;break}return e.abrupt("return",this.update(s,i));case 6:return e.abrupt("return",this.add(Object.assign({nodeId:s},i)));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateNodeCache",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.nodeId,i=t.key,a=t.value,n={},i?Object(j["isArray"])(i)?i.forEach((function(e){n[e]=a[e]})):n[i]=a[i]:n=a,e.abrupt("return",s?this.update(s,n):null);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeNodeCache",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.nodeId,i=t.key,e.next=3,this.getNodeCache({nodeId:s});case 3:if(a=e.sent,!Object(n["isNil"])(a)){e.next=9;break}if(!i){e.next=8;break}return a[i]=null,e.abrupt("return",this.update(s,a));case 8:return e.abrupt("return",this.remove(s));case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),s}(r["a"]),K=new H("node"),U=K,W=s("d0d5");t["default"]={name:"IndexedDB",events:[],methods:{getLog:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.tabId,i=t.cb,e.next=3,w.get(s);case 3:a=e.sent,a&&a[0]&&(n=a[0].content,i(n));case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),appendLog:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.tabId,i=t.rst,e.next=3,w.get(s);case 3:a=e.sent,a&&a[0]?w.update(s,{content:i}):w.add({tabId:s,content:i});case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),clearLog:function(e){w.remove(e)},changeLogKey:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.oldKey,i=t.newKey,e.next=3,w.modifyPrimaryKey(s,i);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),updateHistory:function(e){var t=e.tabId,s=Object(i["a"])(e,["tabId"]);C.update(t,s)},appendHistory:function(e){C.add(e)},getHistory:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.tabId,i=t.cb,e.next=3,C.get(s);case 3:a=e.sent,n=a&&a[0],n&&i(n);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),clearHistory:function(e){C.remove(e)},changeHistoryKey:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.oldKey,i=t.newKey,e.next=3,C.modifyPrimaryKey(s,i);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),clearResult:function(e){R.remove(e)},updateResult:function(e){var t=e.tabId,s=Object(i["a"])(e,["tabId"]);R.update(t,s)},appendResult:function(e){R.add(e)},getResult:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.tabId,i=t.cb,e.next=3,R.get(s);case 3:a=e.sent,n=a&&a[0],n?i(n):i();case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),changResultKey:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.oldKey,i=t.newKey,e.next=3,R.modifyPrimaryKey(s,i);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getTabs:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.get();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:s=e.t0,s.sort((function(e,t){return e.actived-t.actived})),s&&t&&t(s);case 8:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),recordTab:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,s){var i,r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.id,e.next=3,m.get();case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:if(r=e.t0,o=null,r.forEach(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.id===i&&(o=t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c=Object(n["cloneDeep"])(t),!o){e.next=16;break}return delete c.id,e.next=14,m.update(i,c);case 14:e.next=18;break;case 16:return e.next=18,m.add(c);case 18:V(i),"function"==typeof s&&s();case 20:case"end":return e.stop()}}),e)})));function t(t,s){return e.apply(this,arguments)}return t}(),toggleTab:function(e){V(e)},removeTab:function(e){m.remove(e)},changeTabKey:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.oldKey,i=t.newKey,e.next=3,m.modifyPrimaryKey(s,i);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),setGlobalCache:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=i.length>1&&void 0!==i[1]?i[1]:function(){},e.next=3,D["a"].setCache(t);case 3:s();case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getGlobalCache:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=a.length>1&&void 0!==a[1]?a[1]:function(){},e.next=3,D["a"].getCache(t.id);case 3:i=e.sent,s(i);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),updateGlobalCache:function(e){D["a"].updateCache(e)},removeGlobalCache:function(e){D["a"].removeCache(e)},getProgress:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.tabId,i=t.cb,e.next=3,$.get(s);case 3:a=e.sent,a&&a[0]&&(n=a[0],i(n));case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),updateProgress:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.tabId,i=t.rst,e.next=3,$.get(s);case 3:a=e.sent,a&&a[0]?$.update(s,{content:i}):$.add({tabId:s,content:i});case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),clearProgress:function(e){$.remove(e)},changProgressKey:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.oldKey,i=t.newKey,e.next=3,$.modifyPrimaryKey(s,i);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),deleteDb:function(){r["b"].db.delete()},getNodeCache:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.nodeId,i=t.key,a=t.cb,e.next=3,U.getNodeCache({nodeId:s,key:i});case 3:n=e.sent,a(n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),addNodeCache:function(e){var t=e.nodeId,s=e.value;U.addNodeCache({nodeId:t,value:s})},updateNodeCache:function(e){var t=e.nodeId,s=e.key,i=e.value;U.updateNodeCache({nodeId:t,key:s,value:i})},removeNodeCache:function(e){var t=e.nodeId,s=e.key;U.removeNodeCache({nodeId:t,key:s})},clearNodeCache:function(){r["b"].db.node.clear()},getProjectCache:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.projectID,i=t.key,a=t.cb,e.next=3,W["a"].getProjectCache({projectID:s,key:i});case 3:n=e.sent,a(n);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),addProjectCache:function(e){var t=e.projectID,s=e.value;W["a"].addProjectCache({projectID:t,value:s})},updateProjectCache:function(e){var t=e.projectID,s=e.key,i=e.value,a=e.isDeep;W["a"].updateProjectCache({projectID:t,key:s,value:i,isDeep:a})},removeProjectCache:function(e){var t=e.projectID,s=e.key;W["a"].removeProjectCache({projectID:t,key:s})},clearProjectCache:function(){r["b"].db.project.clear()}}};function V(){return X.apply(this,arguments)}function X(){return X=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"",e.next=3,m.get();case 3:if(s=e.sent,s){e.next=6;break}return e.abrupt("return");case 6:s=s.filter((function(e){return!!e})),s.forEach(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(s){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=s.id,a=!1,i===t&&(a=!0),e.next=5,m.update(i,{actived:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}},f34e:function(e,t,s){},f369:function(e,t,s){},f3bc:function(e,t,s){},f3fe:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"workbench-body"},["workspaceScript"==e.work.type||"hdfsScript"==e.work.type?s("scriptView",{attrs:{work:e.work}}):e._e(),"historyScript"==e.work.type?s("historyScriptView",{attrs:{work:e.work}}):e._e(),"backgroundScript"==e.work.type?s("backgroundScriptView",{attrs:{work:e.work},on:{"remove-work":e.removeWork}}):e._e(),"visualAnalysis"==e.work.type?s("visualAnalysis",{attrs:{work:e.work}}):e._e(),"node"==e.work.type?s("nodeView",{attrs:{work:e.work,node:e.node,readonly:e.readonly}}):e._e(),"tableDetails"==e.work.type?s("detailView",{attrs:{work:e.work}}):e._e(),"createTable"==e.work.type?s("createTableView",{attrs:{work:e.work}}):e._e()],1)},a=[],n=s("a7b0"),r=s("b27b"),o=s("2030"),c=s("90db"),l=s("e677"),d=s("3557"),u=s("7ac5"),h={components:{scriptView:n["default"],historyScriptView:r["default"],visualAnalysis:c["default"],nodeView:l["default"],backgroundScriptView:o["default"],detailView:d["default"],createTableView:u["default"]},props:{work:Object,node:Object,readonly:{type:Boolean,default:!1}},created:function(){},mounted:function(){},methods:{removeWork:function(){this.$emit("remove-work",this.work)}}},p=h,f=s("2877"),m=Object(f["a"])(p,i,a,!1,null,null,null);t["default"]=m.exports},f471:function(e,t,s){"use strict";var i=s("7178"),a=s.n(i);a.a},f6db:function(e,t,s){"use strict";s.r(t),t["default"]={name:"Setting",component:function(){return Promise.resolve().then(s.bind(null,"cec7"))}}},f702:function(e,t,s){e.exports=s.p+"img/exchange.1d3bada5.svg"},f727:function(e,t,s){e.exports=s.p+"img/datacheck.a88397c1.svg"},f7c4:function(e,t,s){"use strict";s.r(t),t["default"]={name:"IDE",events:["IDE:saveNode"],component:function(){return Promise.resolve().then(s.bind(null,"2c5a"))}}},f9d4:function(e,t,s){},fcc4:function(e,t,s){"use strict";var i=s("5c8c"),a=s.n(i);a.a},fd20:function(e,t,s){"use strict";var i=s("f369"),a=s.n(i);a.a},fedb:function(e,t,s){e.exports=s.p+"img/python.a3d45f30.svg"}});
//# sourceMappingURL=app.8c7449a6.js.map